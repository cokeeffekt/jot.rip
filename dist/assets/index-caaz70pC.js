(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function Pa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const bt={},hs=[],$n=()=>{},jc=()=>!1,oi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),$a=e=>e.startsWith("onUpdate:"),jt=Object.assign,Ma=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Mf=Object.prototype.hasOwnProperty,ht=(e,t)=>Mf.call(e,t),We=Array.isArray,ms=e=>no(e)==="[object Map]",ks=e=>no(e)==="[object Set]",wl=e=>no(e)==="[object Date]",Ze=e=>typeof e=="function",Rt=e=>typeof e=="string",Mn=e=>typeof e=="symbol",yt=e=>e!==null&&typeof e=="object",Lc=e=>(yt(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch),Bc=Object.prototype.toString,no=e=>Bc.call(e),Nf=e=>no(e).slice(8,-1),Fc=e=>no(e)==="[object Object]",Na=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ls=Pa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ii=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},jf=/-\w/g,wr=ii(e=>e.replace(jf,t=>t.slice(1).toUpperCase())),Lf=/\B([A-Z])/g,Cr=ii(e=>e.replace(Lf,"-$1").toLowerCase()),Kc=ii(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wi=ii(e=>e?`on${Kc(e)}`:""),br=(e,t)=>!Object.is(e,t),qo=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Uc=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},ai=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Bf=e=>{const t=Rt(e)?Number(e):NaN;return isNaN(t)?e:t};let xl;const li=()=>xl||(xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function vt(e){if(We(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Rt(s)?qf(s):vt(s);if(i)for(const a in i)t[a]=i[a]}return t}else if(Rt(e)||yt(e))return e}const Ff=/;(?![^(]*\))/g,Kf=/:([^]+)/,Uf=/\/\*[^]*?\*\//g;function qf(e){const t={};return e.replace(Uf,"").split(Ff).forEach(n=>{if(n){const s=n.split(Kf);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function kt(e){let t="";if(Rt(e))t=e;else if(We(e))for(let n=0;n<e.length;n++){const s=kt(e[n]);s&&(t+=s+" ")}else if(yt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Vf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Hf=Pa(Vf);function qc(e){return!!e||e===""}function Wf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=zr(e[s],t[s]);return n}function zr(e,t){if(e===t)return!0;let n=wl(e),s=wl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Mn(e),s=Mn(t),n||s)return e===t;if(n=We(e),s=We(t),n||s)return n&&s?Wf(e,t):!1;if(n=yt(e),s=yt(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,a=Object.keys(t).length;if(i!==a)return!1;for(const u in e){const f=e.hasOwnProperty(u),p=t.hasOwnProperty(u);if(f&&!p||!f&&p||!zr(e[u],t[u]))return!1}}return String(e)===String(t)}function ja(e,t){return e.findIndex(n=>zr(n,t))}const Vc=e=>!!(e&&e.__v_isRef===!0),qe=e=>Rt(e)?e:e==null?"":We(e)||yt(e)&&(e.toString===Bc||!Ze(e.toString))?Vc(e)?qe(e.value):JSON.stringify(e,Hc,2):String(e),Hc=(e,t)=>Vc(t)?Hc(e,t.value):ms(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],a)=>(n[zi(s,a)+" =>"]=i,n),{})}:ks(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>zi(n))}:Mn(t)?zi(t):yt(t)&&!We(t)&&!Fc(t)?String(t):t,zi=(e,t="")=>{var n;return Mn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let en;class zf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=en,!t&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=en;try{return en=this,t()}finally{en=n}}}on(){++this._on===1&&(this.prevScope=en,en=this)}off(){this._on>0&&--this._on===0&&(en=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Gf(){return en}let xt;const Gi=new WeakSet;class Wc{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,en&&en.active&&en.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Gi.has(this)&&(Gi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,_l(this),Yc(this);const t=xt,n=_n;xt=this,_n=!0;try{return this.fn()}finally{Jc(this),xt=t,_n=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Fa(t);this.deps=this.depsTail=void 0,_l(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Gi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ua(this)&&this.run()}get dirty(){return ua(this)}}let zc=0,Bs,Fs;function Gc(e,t=!1){if(e.flags|=8,t){e.next=Fs,Fs=e;return}e.next=Bs,Bs=e}function La(){zc++}function Ba(){if(--zc>0)return;if(Fs){let t=Fs;for(Fs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Bs;){let t=Bs;for(Bs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function Yc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Jc(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Fa(s),Yf(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function ua(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Qc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Qc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===zs)||(e.globalVersion=zs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ua(e))))return;e.flags|=2;const t=e.dep,n=xt,s=_n;xt=e,_n=!0;try{Yc(e);const i=e.fn(e._value);(t.version===0||br(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{xt=n,_n=s,Jc(e),e.flags&=-3}}function Fa(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)Fa(a,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Yf(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let _n=!0;const Xc=[];function Qn(){Xc.push(_n),_n=!1}function Xn(){const e=Xc.pop();_n=e===void 0?!0:e}function _l(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=xt;xt=void 0;try{t()}finally{xt=n}}}let zs=0;class Jf{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ka{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!xt||!_n||xt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==xt)n=this.activeLink=new Jf(xt,this),xt.deps?(n.prevDep=xt.depsTail,xt.depsTail.nextDep=n,xt.depsTail=n):xt.deps=xt.depsTail=n,Zc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=xt.depsTail,n.nextDep=void 0,xt.depsTail.nextDep=n,xt.depsTail=n,xt.deps===n&&(xt.deps=s)}return n}trigger(t){this.version++,zs++,this.notify(t)}notify(t){La();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ba()}}}function Zc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Zc(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const fa=new WeakMap,Hr=Symbol(""),da=Symbol(""),Gs=Symbol("");function Vt(e,t,n){if(_n&&xt){let s=fa.get(e);s||fa.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new Ka),i.map=s,i.key=n),i.track()}}function Gn(e,t,n,s,i,a){const u=fa.get(e);if(!u){zs++;return}const f=p=>{p&&p.trigger()};if(La(),t==="clear")u.forEach(f);else{const p=We(e),v=p&&Na(n);if(p&&n==="length"){const m=Number(s);u.forEach((g,w)=>{(w==="length"||w===Gs||!Mn(w)&&w>=m)&&f(g)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),v&&f(u.get(Gs)),t){case"add":p?v&&f(u.get("length")):(f(u.get(Hr)),ms(e)&&f(u.get(da)));break;case"delete":p||(f(u.get(Hr)),ms(e)&&f(u.get(da)));break;case"set":ms(e)&&f(u.get(Hr));break}}Ba()}function us(e){const t=dt(e);return t===e?t:(Vt(t,"iterate",Gs),vn(e)?t:t.map(Cn))}function ci(e){return Vt(e=dt(e),"iterate",Gs),e}function pr(e,t){return Zn(e)?Wr(e)?ys(Cn(t)):ys(t):Cn(t)}const Qf={__proto__:null,[Symbol.iterator](){return Yi(this,Symbol.iterator,e=>pr(this,e))},concat(...e){return us(this).concat(...e.map(t=>We(t)?us(t):t))},entries(){return Yi(this,"entries",e=>(e[1]=pr(this,e[1]),e))},every(e,t){return Un(this,"every",e,t,void 0,arguments)},filter(e,t){return Un(this,"filter",e,t,n=>n.map(s=>pr(this,s)),arguments)},find(e,t){return Un(this,"find",e,t,n=>pr(this,n),arguments)},findIndex(e,t){return Un(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Un(this,"findLast",e,t,n=>pr(this,n),arguments)},findLastIndex(e,t){return Un(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Un(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ji(this,"includes",e)},indexOf(...e){return Ji(this,"indexOf",e)},join(e){return us(this).join(e)},lastIndexOf(...e){return Ji(this,"lastIndexOf",e)},map(e,t){return Un(this,"map",e,t,void 0,arguments)},pop(){return Ps(this,"pop")},push(...e){return Ps(this,"push",e)},reduce(e,...t){return kl(this,"reduce",e,t)},reduceRight(e,...t){return kl(this,"reduceRight",e,t)},shift(){return Ps(this,"shift")},some(e,t){return Un(this,"some",e,t,void 0,arguments)},splice(...e){return Ps(this,"splice",e)},toReversed(){return us(this).toReversed()},toSorted(e){return us(this).toSorted(e)},toSpliced(...e){return us(this).toSpliced(...e)},unshift(...e){return Ps(this,"unshift",e)},values(){return Yi(this,"values",e=>pr(this,e))}};function Yi(e,t,n){const s=ci(e),i=s[t]();return s!==e&&!vn(e)&&(i._next=i.next,i.next=()=>{const a=i._next();return a.done||(a.value=n(a.value)),a}),i}const Xf=Array.prototype;function Un(e,t,n,s,i,a){const u=ci(e),f=u!==e&&!vn(e),p=u[t];if(p!==Xf[t]){const g=p.apply(e,a);return f?Cn(g):g}let v=n;u!==e&&(f?v=function(g,w){return n.call(this,pr(e,g),w,e)}:n.length>2&&(v=function(g,w){return n.call(this,g,w,e)}));const m=p.call(u,v,s);return f&&i?i(m):m}function kl(e,t,n,s){const i=ci(e);let a=n;return i!==e&&(vn(e)?n.length>3&&(a=function(u,f,p){return n.call(this,u,f,p,e)}):a=function(u,f,p){return n.call(this,u,pr(e,f),p,e)}),i[t](a,...s)}function Ji(e,t,n){const s=dt(e);Vt(s,"iterate",Gs);const i=s[t](...n);return(i===-1||i===!1)&&Va(n[0])?(n[0]=dt(n[0]),s[t](...n)):i}function Ps(e,t,n=[]){Qn(),La();const s=dt(e)[t].apply(e,n);return Ba(),Xn(),s}const Zf=Pa("__proto__,__v_isRef,__isVue"),eu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mn));function ed(e){Mn(e)||(e=String(e));const t=dt(this);return Vt(t,"has",e),t.hasOwnProperty(e)}class tu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return a;if(n==="__v_raw")return s===(i?a?ud:ou:a?su:ru).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const u=We(t);if(!i){let p;if(u&&(p=Qf[n]))return p;if(n==="hasOwnProperty")return ed}const f=Reflect.get(t,n,Ht(t)?t:s);if((Mn(n)?eu.has(n):Zf(n))||(i||Vt(t,"get",n),a))return f;if(Ht(f)){const p=u&&Na(n)?f:f.value;return i&&yt(p)?ha(p):p}return yt(f)?i?ha(f):ui(f):f}}class nu extends tu{constructor(t=!1){super(!1,t)}set(t,n,s,i){let a=t[n];const u=We(t)&&Na(n);if(!this._isShallow){const v=Zn(a);if(!vn(s)&&!Zn(s)&&(a=dt(a),s=dt(s)),!u&&Ht(a)&&!Ht(s))return v||(a.value=s),!0}const f=u?Number(n)<t.length:ht(t,n),p=Reflect.set(t,n,s,Ht(t)?t:i);return t===dt(i)&&(f?br(s,a)&&Gn(t,"set",n,s):Gn(t,"add",n,s)),p}deleteProperty(t,n){const s=ht(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Gn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Mn(n)||!eu.has(n))&&Vt(t,"has",n),s}ownKeys(t){return Vt(t,"iterate",We(t)?"length":Hr),Reflect.ownKeys(t)}}class td extends tu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const nd=new nu,rd=new td,sd=new nu(!0);const pa=e=>e,$o=e=>Reflect.getPrototypeOf(e);function od(e,t,n){return function(...s){const i=this.__v_raw,a=dt(i),u=ms(a),f=e==="entries"||e===Symbol.iterator&&u,p=e==="keys"&&u,v=i[e](...s),m=n?pa:t?ys:Cn;return!t&&Vt(a,"iterate",p?da:Hr),{next(){const{value:g,done:w}=v.next();return w?{value:g,done:w}:{value:f?[m(g[0]),m(g[1])]:m(g),done:w}},[Symbol.iterator](){return this}}}}function Mo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function id(e,t){const n={get(i){const a=this.__v_raw,u=dt(a),f=dt(i);e||(br(i,f)&&Vt(u,"get",i),Vt(u,"get",f));const{has:p}=$o(u),v=t?pa:e?ys:Cn;if(p.call(u,i))return v(a.get(i));if(p.call(u,f))return v(a.get(f));a!==u&&a.get(i)},get size(){const i=this.__v_raw;return!e&&Vt(dt(i),"iterate",Hr),i.size},has(i){const a=this.__v_raw,u=dt(a),f=dt(i);return e||(br(i,f)&&Vt(u,"has",i),Vt(u,"has",f)),i===f?a.has(i):a.has(i)||a.has(f)},forEach(i,a){const u=this,f=u.__v_raw,p=dt(f),v=t?pa:e?ys:Cn;return!e&&Vt(p,"iterate",Hr),f.forEach((m,g)=>i.call(a,v(m),v(g),u))}};return jt(n,e?{add:Mo("add"),set:Mo("set"),delete:Mo("delete"),clear:Mo("clear")}:{add(i){!t&&!vn(i)&&!Zn(i)&&(i=dt(i));const a=dt(this);return $o(a).has.call(a,i)||(a.add(i),Gn(a,"add",i,i)),this},set(i,a){!t&&!vn(a)&&!Zn(a)&&(a=dt(a));const u=dt(this),{has:f,get:p}=$o(u);let v=f.call(u,i);v||(i=dt(i),v=f.call(u,i));const m=p.call(u,i);return u.set(i,a),v?br(a,m)&&Gn(u,"set",i,a):Gn(u,"add",i,a),this},delete(i){const a=dt(this),{has:u,get:f}=$o(a);let p=u.call(a,i);p||(i=dt(i),p=u.call(a,i)),f&&f.call(a,i);const v=a.delete(i);return p&&Gn(a,"delete",i,void 0),v},clear(){const i=dt(this),a=i.size!==0,u=i.clear();return a&&Gn(i,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=od(i,e,t)}),n}function Ua(e,t){const n=id(e,t);return(s,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(ht(n,i)&&i in s?n:s,i,a)}const ad={get:Ua(!1,!1)},ld={get:Ua(!1,!0)},cd={get:Ua(!0,!1)};const ru=new WeakMap,su=new WeakMap,ou=new WeakMap,ud=new WeakMap;function fd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function dd(e){return e.__v_skip||!Object.isExtensible(e)?0:fd(Nf(e))}function ui(e){return Zn(e)?e:qa(e,!1,nd,ad,ru)}function iu(e){return qa(e,!1,sd,ld,su)}function ha(e){return qa(e,!0,rd,cd,ou)}function qa(e,t,n,s,i){if(!yt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=dd(e);if(a===0)return e;const u=i.get(e);if(u)return u;const f=new Proxy(e,a===2?s:n);return i.set(e,f),f}function Wr(e){return Zn(e)?Wr(e.__v_raw):!!(e&&e.__v_isReactive)}function Zn(e){return!!(e&&e.__v_isReadonly)}function vn(e){return!!(e&&e.__v_isShallow)}function Va(e){return e?!!e.__v_raw:!1}function dt(e){const t=e&&e.__v_raw;return t?dt(t):e}function pd(e){return!ht(e,"__v_skip")&&Object.isExtensible(e)&&Uc(e,"__v_skip",!0),e}const Cn=e=>yt(e)?ui(e):e,ys=e=>yt(e)?ha(e):e;function Ht(e){return e?e.__v_isRef===!0:!1}function he(e){return au(e,!1)}function hd(e){return au(e,!0)}function au(e,t){return Ht(e)?e:new md(e,t)}class md{constructor(t,n){this.dep=new Ka,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:dt(t),this._value=n?t:Cn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||vn(t)||Zn(t);t=s?t:dt(t),br(t,n)&&(this._rawValue=t,this._value=s?t:Cn(t),this.dep.trigger())}}function tn(e){return Ht(e)?e.value:e}const gd={get:(e,t,n)=>t==="__v_raw"?e:tn(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Ht(i)&&!Ht(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function lu(e){return Wr(e)?e:new Proxy(e,gd)}class vd{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ka(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return Gc(this,!0),!0}get value(){const t=this.dep.track();return Qc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function yd(e,t,n=!1){let s,i;return Ze(e)?s=e:(s=e.get,i=e.set),new vd(s,i,n)}const No={},Yo=new WeakMap;let Kr;function bd(e,t=!1,n=Kr){if(n){let s=Yo.get(n);s||Yo.set(n,s=[]),s.push(e)}}function wd(e,t,n=bt){const{immediate:s,deep:i,once:a,scheduler:u,augmentJob:f,call:p}=n,v=Q=>i?Q:vn(Q)||i===!1||i===0?Yn(Q,1):Yn(Q);let m,g,w,A,O=!1,J=!1;if(Ht(e)?(g=()=>e.value,O=vn(e)):Wr(e)?(g=()=>v(e),O=!0):We(e)?(J=!0,O=e.some(Q=>Wr(Q)||vn(Q)),g=()=>e.map(Q=>{if(Ht(Q))return Q.value;if(Wr(Q))return v(Q);if(Ze(Q))return p?p(Q,2):Q()})):Ze(e)?t?g=p?()=>p(e,2):e:g=()=>{if(w){Qn();try{w()}finally{Xn()}}const Q=Kr;Kr=m;try{return p?p(e,3,[A]):e(A)}finally{Kr=Q}}:g=$n,t&&i){const Q=g,Pe=i===!0?1/0:i;g=()=>Yn(Q(),Pe)}const ue=Gf(),U=()=>{m.stop(),ue&&ue.active&&Ma(ue.effects,m)};if(a&&t){const Q=t;t=(...Pe)=>{Q(...Pe),U()}}let N=J?new Array(e.length).fill(No):No;const D=Q=>{if(!(!(m.flags&1)||!m.dirty&&!Q))if(t){const Pe=m.run();if(i||O||(J?Pe.some((je,$e)=>br(je,N[$e])):br(Pe,N))){w&&w();const je=Kr;Kr=m;try{const $e=[Pe,N===No?void 0:J&&N[0]===No?[]:N,A];N=Pe,p?p(t,3,$e):t(...$e)}finally{Kr=je}}}else m.run()};return f&&f(D),m=new Wc(g),m.scheduler=u?()=>u(D,!1):D,A=Q=>bd(Q,!1,m),w=m.onStop=()=>{const Q=Yo.get(m);if(Q){if(p)p(Q,4);else for(const Pe of Q)Pe();Yo.delete(m)}},t?s?D(!0):N=m.run():u?u(D.bind(null,!0),!0):m.run(),U.pause=m.pause.bind(m),U.resume=m.resume.bind(m),U.stop=U,U}function Yn(e,t=1/0,n){if(t<=0||!yt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Ht(e))Yn(e.value,t,n);else if(We(e))for(let s=0;s<e.length;s++)Yn(e[s],t,n);else if(ks(e)||ms(e))e.forEach(s=>{Yn(s,t,n)});else if(Fc(e)){for(const s in e)Yn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Yn(e[s],t,n)}return e}function ro(e,t,n,s){try{return s?e(...s):e()}catch(i){fi(i,t,n)}}function Sn(e,t,n,s){if(Ze(e)){const i=ro(e,t,n,s);return i&&Lc(i)&&i.catch(a=>{fi(a,t,n)}),i}if(We(e)){const i=[];for(let a=0;a<e.length;a++)i.push(Sn(e[a],t,n,s));return i}}function fi(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||bt;if(t){let f=t.parent;const p=t.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const m=f.ec;if(m){for(let g=0;g<m.length;g++)if(m[g](e,p,v)===!1)return}f=f.parent}if(a){Qn(),ro(a,null,10,[e,p,v]),Xn();return}}xd(e,n,i,s,u)}function xd(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Jt=[];let Dn=-1;const gs=[];let hr=null,fs=0;const cu=Promise.resolve();let Jo=null;function Yt(e){const t=Jo||cu;return e?t.then(this?e.bind(this):e):t}function _d(e){let t=Dn+1,n=Jt.length;for(;t<n;){const s=t+n>>>1,i=Jt[s],a=Ys(i);a<e||a===e&&i.flags&2?t=s+1:n=s}return t}function Ha(e){if(!(e.flags&1)){const t=Ys(e),n=Jt[Jt.length-1];!n||!(e.flags&2)&&t>=Ys(n)?Jt.push(e):Jt.splice(_d(t),0,e),e.flags|=1,uu()}}function uu(){Jo||(Jo=cu.then(du))}function kd(e){We(e)?gs.push(...e):hr&&e.id===-1?hr.splice(fs+1,0,e):e.flags&1||(gs.push(e),e.flags|=1),uu()}function Cl(e,t,n=Dn+1){for(;n<Jt.length;n++){const s=Jt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Jt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function fu(e){if(gs.length){const t=[...new Set(gs)].sort((n,s)=>Ys(n)-Ys(s));if(gs.length=0,hr){hr.push(...t);return}for(hr=t,fs=0;fs<hr.length;fs++){const n=hr[fs];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hr=null,fs=0}}const Ys=e=>e.id==null?e.flags&2?-1:1/0:e.id;function du(e){try{for(Dn=0;Dn<Jt.length;Dn++){const t=Jt[Dn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ro(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Dn<Jt.length;Dn++){const t=Jt[Dn];t&&(t.flags&=-2)}Dn=-1,Jt.length=0,fu(),Jo=null,(Jt.length||gs.length)&&du()}}let gn=null,pu=null;function Qo(e){const t=gn;return gn=e,pu=e&&e.type.__scopeId||null,t}function Hn(e,t=gn,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&ei(-1);const a=Qo(t);let u;try{u=e(...i)}finally{Qo(a),s._d&&ei(1)}return u};return s._n=!0,s._c=!0,s._d=!0,s}function qr(e,t){if(gn===null)return e;const n=gi(gn),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,u,f,p=bt]=t[i];a&&(Ze(a)&&(a={mounted:a,updated:a}),a.deep&&Yn(u),s.push({dir:a,instance:n,value:u,oldValue:void 0,arg:f,modifiers:p}))}return e}function jr(e,t,n,s){const i=e.dirs,a=t&&t.dirs;for(let u=0;u<i.length;u++){const f=i[u];a&&(f.oldValue=a[u].value);let p=f.dir[s];p&&(Qn(),Sn(p,n,8,[e.el,f,e,t]),Xn())}}const Cd=Symbol("_vte"),hu=e=>e.__isTeleport,zn=Symbol("_leaveCb"),jo=Symbol("_enterCb");function Sd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fn(()=>{e.isMounted=!0}),xr(()=>{e.isUnmounting=!0}),e}const mn=[Function,Array],mu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mn,onEnter:mn,onAfterEnter:mn,onEnterCancelled:mn,onBeforeLeave:mn,onLeave:mn,onAfterLeave:mn,onLeaveCancelled:mn,onBeforeAppear:mn,onAppear:mn,onAfterAppear:mn,onAppearCancelled:mn},gu=e=>{const t=e.subTree;return t.component?gu(t.component):t},Ed={name:"BaseTransition",props:mu,setup(e,{slots:t}){const n=qu(),s=Sd();return()=>{const i=t.default&&bu(t.default(),!0);if(!i||!i.length)return;const a=vu(i),u=dt(e),{mode:f}=u;if(s.isLeaving)return Qi(a);const p=Sl(a);if(!p)return Qi(a);let v=ma(p,u,s,n,g=>v=g);p.type!==Qt&&Js(p,v);let m=n.subTree&&Sl(n.subTree);if(m&&m.type!==Qt&&!Ur(m,p)&&gu(n).type!==Qt){let g=ma(m,u,s,n);if(Js(m,g),f==="out-in"&&p.type!==Qt)return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete g.afterLeave,m=void 0},Qi(a);f==="in-out"&&p.type!==Qt?g.delayLeave=(w,A,O)=>{const J=yu(s,m);J[String(m.key)]=m,w[zn]=()=>{A(),w[zn]=void 0,delete v.delayedLeave,m=void 0},v.delayedLeave=()=>{O(),delete v.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return a}}};function vu(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Qt){t=n;break}}return t}const Id=Ed;function yu(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ma(e,t,n,s,i){const{appear:a,mode:u,persisted:f=!1,onBeforeEnter:p,onEnter:v,onAfterEnter:m,onEnterCancelled:g,onBeforeLeave:w,onLeave:A,onAfterLeave:O,onLeaveCancelled:J,onBeforeAppear:ue,onAppear:U,onAfterAppear:N,onAppearCancelled:D}=t,Q=String(e.key),Pe=yu(n,e),je=(Be,ze)=>{Be&&Sn(Be,s,9,ze)},$e=(Be,ze)=>{const Ge=ze[1];je(Be,ze),We(Be)?Be.every(se=>se.length<=1)&&Ge():Be.length<=1&&Ge()},at={mode:u,persisted:f,beforeEnter(Be){let ze=p;if(!n.isMounted)if(a)ze=ue||p;else return;Be[zn]&&Be[zn](!0);const Ge=Pe[Q];Ge&&Ur(e,Ge)&&Ge.el[zn]&&Ge.el[zn](),je(ze,[Be])},enter(Be){let ze=v,Ge=m,se=g;if(!n.isMounted)if(a)ze=U||v,Ge=N||m,se=D||g;else return;let Z=!1;const De=Be[jo]=me=>{Z||(Z=!0,me?je(se,[Be]):je(Ge,[Be]),at.delayedLeave&&at.delayedLeave(),Be[jo]=void 0)};ze?$e(ze,[Be,De]):De()},leave(Be,ze){const Ge=String(e.key);if(Be[jo]&&Be[jo](!0),n.isUnmounting)return ze();je(w,[Be]);let se=!1;const Z=Be[zn]=De=>{se||(se=!0,ze(),De?je(J,[Be]):je(O,[Be]),Be[zn]=void 0,Pe[Ge]===e&&delete Pe[Ge])};Pe[Ge]=e,A?$e(A,[Be,Z]):Z()},clone(Be){const ze=ma(Be,t,n,s,i);return i&&i(ze),ze}};return at}function Qi(e){if(di(e))return e=_r(e),e.children=null,e}function Sl(e){if(!di(e))return hu(e.type)&&e.children?vu(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ze(n.default))return n.default()}}function Js(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Js(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bu(e,t=!1,n){let s=[],i=0;for(let a=0;a<e.length;a++){let u=e[a];const f=n==null?u.key:String(n)+String(u.key!=null?u.key:a);u.type===mt?(u.patchFlag&128&&i++,s=s.concat(bu(u.children,t,f))):(t||u.type!==Qt)&&s.push(f!=null?_r(u,{key:f}):u)}if(i>1)for(let a=0;a<s.length;a++)s[a].patchFlag=-2;return s}function Zt(e,t){return Ze(e)?jt({name:e.name},t,{setup:e}):e}function wu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Xo=new WeakMap;function Ks(e,t,n,s,i=!1){if(We(e)){e.forEach((O,J)=>Ks(O,t&&(We(t)?t[J]:t),n,s,i));return}if(Us(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ks(e,t,n,s.component.subTree);return}const a=s.shapeFlag&4?gi(s.component):s.el,u=i?null:a,{i:f,r:p}=e,v=t&&t.r,m=f.refs===bt?f.refs={}:f.refs,g=f.setupState,w=dt(g),A=g===bt?jc:O=>ht(w,O);if(v!=null&&v!==p){if(El(t),Rt(v))m[v]=null,A(v)&&(g[v]=null);else if(Ht(v)){v.value=null;const O=t;O.k&&(m[O.k]=null)}}if(Ze(p))ro(p,f,12,[u,m]);else{const O=Rt(p),J=Ht(p);if(O||J){const ue=()=>{if(e.f){const U=O?A(p)?g[p]:m[p]:p.value;if(i)We(U)&&Ma(U,a);else if(We(U))U.includes(a)||U.push(a);else if(O)m[p]=[a],A(p)&&(g[p]=m[p]);else{const N=[a];p.value=N,e.k&&(m[e.k]=N)}}else O?(m[p]=u,A(p)&&(g[p]=u)):J&&(p.value=u,e.k&&(m[e.k]=u))};if(u){const U=()=>{ue(),Xo.delete(e)};U.id=-1,Xo.set(e,U),ln(U,n)}else El(e),ue()}}}function El(e){const t=Xo.get(e);t&&(t.flags|=8,Xo.delete(e))}li().requestIdleCallback;li().cancelIdleCallback;const Us=e=>!!e.type.__asyncLoader,di=e=>e.type.__isKeepAlive;function Ad(e,t){xu(e,"a",t)}function Td(e,t){xu(e,"da",t)}function xu(e,t,n=Xt){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(pi(t,s,n),n){let i=n.parent;for(;i&&i.parent;)di(i.parent.vnode)&&Od(s,t,n,i),i=i.parent}}function Od(e,t,n,s){const i=pi(t,e,s,!0);_u(()=>{Ma(s[t],i)},n)}function pi(e,t,n=Xt,s=!1){if(n){const i=n[e]||(n[e]=[]),a=t.__weh||(t.__weh=(...u)=>{Qn();const f=so(n),p=Sn(t,n,e,u);return f(),Xn(),p});return s?i.unshift(a):i.push(a),a}}const er=e=>(t,n=Xt)=>{(!Xs||e==="sp")&&pi(e,(...s)=>t(...s),n)},Rd=er("bm"),fn=er("m"),Dd=er("bu"),Pd=er("u"),xr=er("bum"),_u=er("um"),$d=er("sp"),Md=er("rtg"),Nd=er("rtc");function jd(e,t=Xt){pi("ec",e,t)}const Ld=Symbol.for("v-ndc");function Mt(e,t,n,s){let i;const a=n,u=We(e);if(u||Rt(e)){const f=u&&Wr(e);let p=!1,v=!1;f&&(p=!vn(e),v=Zn(e),e=ci(e)),i=new Array(e.length);for(let m=0,g=e.length;m<g;m++)i[m]=t(p?v?ys(Cn(e[m])):Cn(e[m]):e[m],m,void 0,a)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,a)}else if(yt(e))if(e[Symbol.iterator])i=Array.from(e,(f,p)=>t(f,p,void 0,a));else{const f=Object.keys(e);i=new Array(f.length);for(let p=0,v=f.length;p<v;p++){const m=f[p];i[p]=t(e[m],m,p,a)}}else i=[];return i}const ga=e=>e?Vu(e)?gi(e):ga(e.parent):null,qs=jt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ga(e.parent),$root:e=>ga(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Cu(e),$forceUpdate:e=>e.f||(e.f=()=>{Ha(e.update)}),$nextTick:e=>e.n||(e.n=Yt.bind(e.proxy)),$watch:e=>Jd.bind(e)}),Xi=(e,t)=>e!==bt&&!e.__isScriptSetup&&ht(e,t),Bd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:a,accessCache:u,type:f,appContext:p}=e;if(t[0]!=="$"){const w=u[t];if(w!==void 0)switch(w){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else{if(Xi(s,t))return u[t]=1,s[t];if(i!==bt&&ht(i,t))return u[t]=2,i[t];if(ht(a,t))return u[t]=3,a[t];if(n!==bt&&ht(n,t))return u[t]=4,n[t];va&&(u[t]=0)}}const v=qs[t];let m,g;if(v)return t==="$attrs"&&Vt(e.attrs,"get",""),v(e);if((m=f.__cssModules)&&(m=m[t]))return m;if(n!==bt&&ht(n,t))return u[t]=4,n[t];if(g=p.config.globalProperties,ht(g,t))return g[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:a}=e;return Xi(i,t)?(i[t]=n,!0):s!==bt&&ht(s,t)?(s[t]=n,!0):ht(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,props:a,type:u}},f){let p;return!!(n[f]||e!==bt&&f[0]!=="$"&&ht(e,f)||Xi(t,f)||ht(a,f)||ht(s,f)||ht(qs,f)||ht(i.config.globalProperties,f)||(p=u.__cssModules)&&p[f])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:ht(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Il(e){return We(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let va=!0;function Fd(e){const t=Cu(e),n=e.proxy,s=e.ctx;va=!1,t.beforeCreate&&Al(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:u,watch:f,provide:p,inject:v,created:m,beforeMount:g,mounted:w,beforeUpdate:A,updated:O,activated:J,deactivated:ue,beforeDestroy:U,beforeUnmount:N,destroyed:D,unmounted:Q,render:Pe,renderTracked:je,renderTriggered:$e,errorCaptured:at,serverPrefetch:Be,expose:ze,inheritAttrs:Ge,components:se,directives:Z,filters:De}=t;if(v&&Kd(v,s,null),u)for(const ne in u){const Se=u[ne];Ze(Se)&&(s[ne]=Se.bind(n))}if(i){const ne=i.call(n,n);yt(ne)&&(e.data=ui(ne))}if(va=!0,a)for(const ne in a){const Se=a[ne],Ye=Ze(Se)?Se.bind(n,n):Ze(Se.get)?Se.get.bind(n,n):$n,ot=!Ze(Se)&&Ze(Se.set)?Se.set.bind(n):$n,lt=Je({get:Ye,set:ot});Object.defineProperty(s,ne,{enumerable:!0,configurable:!0,get:()=>lt.value,set:ie=>lt.value=ie})}if(f)for(const ne in f)ku(f[ne],s,n,ne);if(p){const ne=Ze(p)?p.call(n):p;Reflect.ownKeys(ne).forEach(Se=>{Vo(Se,ne[Se])})}m&&Al(m,e,"c");function Ce(ne,Se){We(Se)?Se.forEach(Ye=>ne(Ye.bind(n))):Se&&ne(Se.bind(n))}if(Ce(Rd,g),Ce(fn,w),Ce(Dd,A),Ce(Pd,O),Ce(Ad,J),Ce(Td,ue),Ce(jd,at),Ce(Nd,je),Ce(Md,$e),Ce(xr,N),Ce(_u,Q),Ce($d,Be),We(ze))if(ze.length){const ne=e.exposed||(e.exposed={});ze.forEach(Se=>{Object.defineProperty(ne,Se,{get:()=>n[Se],set:Ye=>n[Se]=Ye,enumerable:!0})})}else e.exposed||(e.exposed={});Pe&&e.render===$n&&(e.render=Pe),Ge!=null&&(e.inheritAttrs=Ge),se&&(e.components=se),Z&&(e.directives=Z),Be&&wu(e)}function Kd(e,t,n=$n){We(e)&&(e=ya(e));for(const s in e){const i=e[s];let a;yt(i)?"default"in i?a=kn(i.from||s,i.default,!0):a=kn(i.from||s):a=kn(i),Ht(a)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[s]=a}}function Al(e,t,n){Sn(We(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function ku(e,t,n,s){let i=s.includes(".")?Eu(n,s):()=>n[s];if(Rt(e)){const a=t[e];Ze(a)&&yn(i,a)}else if(Ze(e))yn(i,e.bind(n));else if(yt(e))if(We(e))e.forEach(a=>ku(a,t,n,s));else{const a=Ze(e.handler)?e.handler.bind(n):t[e.handler];Ze(a)&&yn(i,a,e)}}function Cu(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,f=a.get(t);let p;return f?p=f:!i.length&&!n&&!s?p=t:(p={},i.length&&i.forEach(v=>Zo(p,v,u,!0)),Zo(p,t,u)),yt(t)&&a.set(t,p),p}function Zo(e,t,n,s=!1){const{mixins:i,extends:a}=t;a&&Zo(e,a,n,!0),i&&i.forEach(u=>Zo(e,u,n,!0));for(const u in t)if(!(s&&u==="expose")){const f=Ud[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const Ud={data:Tl,props:Ol,emits:Ol,methods:js,computed:js,beforeCreate:zt,created:zt,beforeMount:zt,mounted:zt,beforeUpdate:zt,updated:zt,beforeDestroy:zt,beforeUnmount:zt,destroyed:zt,unmounted:zt,activated:zt,deactivated:zt,errorCaptured:zt,serverPrefetch:zt,components:js,directives:js,watch:Vd,provide:Tl,inject:qd};function Tl(e,t){return t?e?function(){return jt(Ze(e)?e.call(this,this):e,Ze(t)?t.call(this,this):t)}:t:e}function qd(e,t){return js(ya(e),ya(t))}function ya(e){if(We(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function zt(e,t){return e?[...new Set([].concat(e,t))]:t}function js(e,t){return e?jt(Object.create(null),e,t):t}function Ol(e,t){return e?We(e)&&We(t)?[...new Set([...e,...t])]:jt(Object.create(null),Il(e),Il(t??{})):t}function Vd(e,t){if(!e)return t;if(!t)return e;const n=jt(Object.create(null),e);for(const s in t)n[s]=zt(e[s],t[s]);return n}function Su(){return{app:null,config:{isNativeTag:jc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Hd=0;function Wd(e,t){return function(s,i=null){Ze(s)||(s=jt({},s)),i!=null&&!yt(i)&&(i=null);const a=Su(),u=new WeakSet,f=[];let p=!1;const v=a.app={_uid:Hd++,_component:s,_props:i,_container:null,_context:a,_instance:null,version:Ip,get config(){return a.config},set config(m){},use(m,...g){return u.has(m)||(m&&Ze(m.install)?(u.add(m),m.install(v,...g)):Ze(m)&&(u.add(m),m(v,...g))),v},mixin(m){return a.mixins.includes(m)||a.mixins.push(m),v},component(m,g){return g?(a.components[m]=g,v):a.components[m]},directive(m,g){return g?(a.directives[m]=g,v):a.directives[m]},mount(m,g,w){if(!p){const A=v._ceVNode||_t(s,i);return A.appContext=a,w===!0?w="svg":w===!1&&(w=void 0),e(A,m,w),p=!0,v._container=m,m.__vue_app__=v,gi(A.component)}},onUnmount(m){f.push(m)},unmount(){p&&(Sn(f,v._instance,16),e(null,v._container),delete v._container.__vue_app__)},provide(m,g){return a.provides[m]=g,v},runWithContext(m){const g=vs;vs=v;try{return m()}finally{vs=g}}};return v}}let vs=null;function Vo(e,t){if(Xt){let n=Xt.provides;const s=Xt.parent&&Xt.parent.provides;s===n&&(n=Xt.provides=Object.create(s)),n[e]=t}}function kn(e,t,n=!1){const s=qu();if(s||vs){let i=vs?vs._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ze(t)?t.call(s&&s.proxy):t}}const zd=Symbol.for("v-scx"),Gd=()=>kn(zd);function Yd(e,t){return Wa(e,null,t)}function yn(e,t,n){return Wa(e,t,n)}function Wa(e,t,n=bt){const{immediate:s,deep:i,flush:a,once:u}=n,f=jt({},n),p=t&&s||!t&&a!=="post";let v;if(Xs){if(a==="sync"){const A=Gd();v=A.__watcherHandles||(A.__watcherHandles=[])}else if(!p){const A=()=>{};return A.stop=$n,A.resume=$n,A.pause=$n,A}}const m=Xt;f.call=(A,O,J)=>Sn(A,m,O,J);let g=!1;a==="post"?f.scheduler=A=>{ln(A,m&&m.suspense)}:a!=="sync"&&(g=!0,f.scheduler=(A,O)=>{O?A():Ha(A)}),f.augmentJob=A=>{t&&(A.flags|=4),g&&(A.flags|=2,m&&(A.id=m.uid,A.i=m))};const w=wd(e,t,f);return Xs&&(v?v.push(w):p&&w()),w}function Jd(e,t,n){const s=this.proxy,i=Rt(e)?e.includes(".")?Eu(s,e):()=>s[e]:e.bind(s,s);let a;Ze(t)?a=t:(a=t.handler,n=t);const u=so(this),f=Wa(i,a.bind(s),n);return u(),f}function Eu(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Qd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${wr(t)}Modifiers`]||e[`${Cr(t)}Modifiers`];function Xd(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||bt;let i=n;const a=t.startsWith("update:"),u=a&&Qd(s,t.slice(7));u&&(u.trim&&(i=n.map(m=>Rt(m)?m.trim():m)),u.number&&(i=n.map(ai)));let f,p=s[f=Wi(t)]||s[f=Wi(wr(t))];!p&&a&&(p=s[f=Wi(Cr(t))]),p&&Sn(p,e,6,i);const v=s[f+"Once"];if(v){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,Sn(v,e,6,i)}}const Zd=new WeakMap;function Iu(e,t,n=!1){const s=n?Zd:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const a=e.emits;let u={},f=!1;if(!Ze(e)){const p=v=>{const m=Iu(v,t,!0);m&&(f=!0,jt(u,m))};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!a&&!f?(yt(e)&&s.set(e,null),null):(We(a)?a.forEach(p=>u[p]=null):jt(u,a),yt(e)&&s.set(e,u),u)}function hi(e,t){return!e||!oi(t)?!1:(t=t.slice(2).replace(/Once$/,""),ht(e,t[0].toLowerCase()+t.slice(1))||ht(e,Cr(t))||ht(e,t))}function Rl(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[a],slots:u,attrs:f,emit:p,render:v,renderCache:m,props:g,data:w,setupState:A,ctx:O,inheritAttrs:J}=e,ue=Qo(e);let U,N;try{if(n.shapeFlag&4){const Q=i||s,Pe=Q;U=Pn(v.call(Pe,Q,m,g,A,w,O)),N=f}else{const Q=t;U=Pn(Q.length>1?Q(g,{attrs:f,slots:u,emit:p}):Q(g,null)),N=t.props?f:ep(f)}}catch(Q){Vs.length=0,fi(Q,e,1),U=_t(Qt)}let D=U;if(N&&J!==!1){const Q=Object.keys(N),{shapeFlag:Pe}=D;Q.length&&Pe&7&&(a&&Q.some($a)&&(N=tp(N,a)),D=_r(D,N,!1,!0))}return n.dirs&&(D=_r(D,null,!1,!0),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&Js(D,n.transition),U=D,Qo(ue),U}const ep=e=>{let t;for(const n in e)(n==="class"||n==="style"||oi(n))&&((t||(t={}))[n]=e[n]);return t},tp=(e,t)=>{const n={};for(const s in e)(!$a(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function np(e,t,n){const{props:s,children:i,component:a}=e,{props:u,children:f,patchFlag:p}=t,v=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return s?Dl(s,u,v):!!u;if(p&8){const m=t.dynamicProps;for(let g=0;g<m.length;g++){const w=m[g];if(u[w]!==s[w]&&!hi(v,w))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:s===u?!1:s?u?Dl(s,u,v):!0:!!u;return!1}function Dl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const a=s[i];if(t[a]!==e[a]&&!hi(n,a))return!0}return!1}function rp({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Au={},Tu=()=>Object.create(Au),Ou=e=>Object.getPrototypeOf(e)===Au;function sp(e,t,n,s=!1){const i={},a=Tu();e.propsDefaults=Object.create(null),Ru(e,t,i,a);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=s?i:iu(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function op(e,t,n,s){const{props:i,attrs:a,vnode:{patchFlag:u}}=e,f=dt(i),[p]=e.propsOptions;let v=!1;if((s||u>0)&&!(u&16)){if(u&8){const m=e.vnode.dynamicProps;for(let g=0;g<m.length;g++){let w=m[g];if(hi(e.emitsOptions,w))continue;const A=t[w];if(p)if(ht(a,w))A!==a[w]&&(a[w]=A,v=!0);else{const O=wr(w);i[O]=ba(p,f,O,A,e,!1)}else A!==a[w]&&(a[w]=A,v=!0)}}}else{Ru(e,t,i,a)&&(v=!0);let m;for(const g in f)(!t||!ht(t,g)&&((m=Cr(g))===g||!ht(t,m)))&&(p?n&&(n[g]!==void 0||n[m]!==void 0)&&(i[g]=ba(p,f,g,void 0,e,!0)):delete i[g]);if(a!==f)for(const g in a)(!t||!ht(t,g))&&(delete a[g],v=!0)}v&&Gn(e.attrs,"set","")}function Ru(e,t,n,s){const[i,a]=e.propsOptions;let u=!1,f;if(t)for(let p in t){if(Ls(p))continue;const v=t[p];let m;i&&ht(i,m=wr(p))?!a||!a.includes(m)?n[m]=v:(f||(f={}))[m]=v:hi(e.emitsOptions,p)||(!(p in s)||v!==s[p])&&(s[p]=v,u=!0)}if(a){const p=dt(n),v=f||bt;for(let m=0;m<a.length;m++){const g=a[m];n[g]=ba(i,p,g,v[g],e,!ht(v,g))}}return u}function ba(e,t,n,s,i,a){const u=e[n];if(u!=null){const f=ht(u,"default");if(f&&s===void 0){const p=u.default;if(u.type!==Function&&!u.skipFactory&&Ze(p)){const{propsDefaults:v}=i;if(n in v)s=v[n];else{const m=so(i);s=v[n]=p.call(null,t),m()}}else s=p;i.ce&&i.ce._setProp(n,s)}u[0]&&(a&&!f?s=!1:u[1]&&(s===""||s===Cr(n))&&(s=!0))}return s}const ip=new WeakMap;function Du(e,t,n=!1){const s=n?ip:t.propsCache,i=s.get(e);if(i)return i;const a=e.props,u={},f=[];let p=!1;if(!Ze(e)){const m=g=>{p=!0;const[w,A]=Du(g,t,!0);jt(u,w),A&&f.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!a&&!p)return yt(e)&&s.set(e,hs),hs;if(We(a))for(let m=0;m<a.length;m++){const g=wr(a[m]);Pl(g)&&(u[g]=bt)}else if(a)for(const m in a){const g=wr(m);if(Pl(g)){const w=a[m],A=u[g]=We(w)||Ze(w)?{type:w}:jt({},w),O=A.type;let J=!1,ue=!0;if(We(O))for(let U=0;U<O.length;++U){const N=O[U],D=Ze(N)&&N.name;if(D==="Boolean"){J=!0;break}else D==="String"&&(ue=!1)}else J=Ze(O)&&O.name==="Boolean";A[0]=J,A[1]=ue,(J||ht(A,"default"))&&f.push(g)}}const v=[u,f];return yt(e)&&s.set(e,v),v}function Pl(e){return e[0]!=="$"&&!Ls(e)}const za=e=>e==="_"||e==="_ctx"||e==="$stable",Ga=e=>We(e)?e.map(Pn):[Pn(e)],ap=(e,t,n)=>{if(t._n)return t;const s=Hn((...i)=>Ga(t(...i)),n);return s._c=!1,s},Pu=(e,t,n)=>{const s=e._ctx;for(const i in e){if(za(i))continue;const a=e[i];if(Ze(a))t[i]=ap(i,a,s);else if(a!=null){const u=Ga(a);t[i]=()=>u}}},$u=(e,t)=>{const n=Ga(t);e.slots.default=()=>n},Mu=(e,t,n)=>{for(const s in t)(n||!za(s))&&(e[s]=t[s])},lp=(e,t,n)=>{const s=e.slots=Tu();if(e.vnode.shapeFlag&32){const i=t._;i?(Mu(s,t,n),n&&Uc(s,"_",i,!0)):Pu(t,s)}else t&&$u(e,t)},cp=(e,t,n)=>{const{vnode:s,slots:i}=e;let a=!0,u=bt;if(s.shapeFlag&32){const f=t._;f?n&&f===1?a=!1:Mu(i,t,n):(a=!t.$stable,Pu(t,i)),u=t}else t&&($u(e,t),u={default:1});if(a)for(const f in i)!za(f)&&u[f]==null&&delete i[f]},ln=hp;function up(e){return fp(e)}function fp(e,t){const n=li();n.__VUE__=!0;const{insert:s,remove:i,patchProp:a,createElement:u,createText:f,createComment:p,setText:v,setElementText:m,parentNode:g,nextSibling:w,setScopeId:A=$n,insertStaticContent:O}=e,J=(y,_,P,G=null,ee=null,te=null,xe=void 0,ye=null,pe=!!_.dynamicChildren)=>{if(y===_)return;y&&!Ur(y,_)&&(G=H(y),ie(y,ee,te,!0),y=null),_.patchFlag===-2&&(pe=!1,_.dynamicChildren=null);const{type:oe,ref:_e,shapeFlag:Ae}=_;switch(oe){case mi:ue(y,_,P,G);break;case Qt:U(y,_,P,G);break;case Ho:y==null&&N(_,P,G,xe);break;case mt:se(y,_,P,G,ee,te,xe,ye,pe);break;default:Ae&1?Pe(y,_,P,G,ee,te,xe,ye,pe):Ae&6?Z(y,_,P,G,ee,te,xe,ye,pe):(Ae&64||Ae&128)&&oe.process(y,_,P,G,ee,te,xe,ye,pe,Ie)}_e!=null&&ee?Ks(_e,y&&y.ref,te,_||y,!_):_e==null&&y&&y.ref!=null&&Ks(y.ref,null,te,y,!0)},ue=(y,_,P,G)=>{if(y==null)s(_.el=f(_.children),P,G);else{const ee=_.el=y.el;_.children!==y.children&&v(ee,_.children)}},U=(y,_,P,G)=>{y==null?s(_.el=p(_.children||""),P,G):_.el=y.el},N=(y,_,P,G)=>{[y.el,y.anchor]=O(y.children,_,P,G,y.el,y.anchor)},D=({el:y,anchor:_},P,G)=>{let ee;for(;y&&y!==_;)ee=w(y),s(y,P,G),y=ee;s(_,P,G)},Q=({el:y,anchor:_})=>{let P;for(;y&&y!==_;)P=w(y),i(y),y=P;i(_)},Pe=(y,_,P,G,ee,te,xe,ye,pe)=>{if(_.type==="svg"?xe="svg":_.type==="math"&&(xe="mathml"),y==null)je(_,P,G,ee,te,xe,ye,pe);else{const oe=y.el&&y.el._isVueCE?y.el:null;try{oe&&oe._beginPatch(),Be(y,_,ee,te,xe,ye,pe)}finally{oe&&oe._endPatch()}}},je=(y,_,P,G,ee,te,xe,ye)=>{let pe,oe;const{props:_e,shapeFlag:Ae,transition:Fe,dirs:Ve}=y;if(pe=y.el=u(y.type,te,_e&&_e.is,_e),Ae&8?m(pe,y.children):Ae&16&&at(y.children,pe,null,G,ee,Zi(y,te),xe,ye),Ve&&jr(y,null,G,"created"),$e(pe,y,y.scopeId,xe,G),_e){for(const et in _e)et!=="value"&&!Ls(et)&&a(pe,et,null,_e[et],te,G);"value"in _e&&a(pe,"value",null,_e.value,te),(oe=_e.onVnodeBeforeMount)&&Rn(oe,G,y)}Ve&&jr(y,null,G,"beforeMount");const Qe=dp(ee,Fe);Qe&&Fe.beforeEnter(pe),s(pe,_,P),((oe=_e&&_e.onVnodeMounted)||Qe||Ve)&&ln(()=>{oe&&Rn(oe,G,y),Qe&&Fe.enter(pe),Ve&&jr(y,null,G,"mounted")},ee)},$e=(y,_,P,G,ee)=>{if(P&&A(y,P),G)for(let te=0;te<G.length;te++)A(y,G[te]);if(ee){let te=ee.subTree;if(_===te||Lu(te.type)&&(te.ssContent===_||te.ssFallback===_)){const xe=ee.vnode;$e(y,xe,xe.scopeId,xe.slotScopeIds,ee.parent)}}},at=(y,_,P,G,ee,te,xe,ye,pe=0)=>{for(let oe=pe;oe<y.length;oe++){const _e=y[oe]=ye?mr(y[oe]):Pn(y[oe]);J(null,_e,_,P,G,ee,te,xe,ye)}},Be=(y,_,P,G,ee,te,xe)=>{const ye=_.el=y.el;let{patchFlag:pe,dynamicChildren:oe,dirs:_e}=_;pe|=y.patchFlag&16;const Ae=y.props||bt,Fe=_.props||bt;let Ve;if(P&&Lr(P,!1),(Ve=Fe.onVnodeBeforeUpdate)&&Rn(Ve,P,_,y),_e&&jr(_,y,P,"beforeUpdate"),P&&Lr(P,!0),(Ae.innerHTML&&Fe.innerHTML==null||Ae.textContent&&Fe.textContent==null)&&m(ye,""),oe?ze(y.dynamicChildren,oe,ye,P,G,Zi(_,ee),te):xe||Se(y,_,ye,null,P,G,Zi(_,ee),te,!1),pe>0){if(pe&16)Ge(ye,Ae,Fe,P,ee);else if(pe&2&&Ae.class!==Fe.class&&a(ye,"class",null,Fe.class,ee),pe&4&&a(ye,"style",Ae.style,Fe.style,ee),pe&8){const Qe=_.dynamicProps;for(let et=0;et<Qe.length;et++){const rt=Qe[et],It=Ae[rt],Tt=Fe[rt];(Tt!==It||rt==="value")&&a(ye,rt,It,Tt,ee,P)}}pe&1&&y.children!==_.children&&m(ye,_.children)}else!xe&&oe==null&&Ge(ye,Ae,Fe,P,ee);((Ve=Fe.onVnodeUpdated)||_e)&&ln(()=>{Ve&&Rn(Ve,P,_,y),_e&&jr(_,y,P,"updated")},G)},ze=(y,_,P,G,ee,te,xe)=>{for(let ye=0;ye<_.length;ye++){const pe=y[ye],oe=_[ye],_e=pe.el&&(pe.type===mt||!Ur(pe,oe)||pe.shapeFlag&198)?g(pe.el):P;J(pe,oe,_e,null,G,ee,te,xe,!0)}},Ge=(y,_,P,G,ee)=>{if(_!==P){if(_!==bt)for(const te in _)!Ls(te)&&!(te in P)&&a(y,te,_[te],null,ee,G);for(const te in P){if(Ls(te))continue;const xe=P[te],ye=_[te];xe!==ye&&te!=="value"&&a(y,te,ye,xe,ee,G)}"value"in P&&a(y,"value",_.value,P.value,ee)}},se=(y,_,P,G,ee,te,xe,ye,pe)=>{const oe=_.el=y?y.el:f(""),_e=_.anchor=y?y.anchor:f("");let{patchFlag:Ae,dynamicChildren:Fe,slotScopeIds:Ve}=_;Ve&&(ye=ye?ye.concat(Ve):Ve),y==null?(s(oe,P,G),s(_e,P,G),at(_.children||[],P,_e,ee,te,xe,ye,pe)):Ae>0&&Ae&64&&Fe&&y.dynamicChildren?(ze(y.dynamicChildren,Fe,P,ee,te,xe,ye),(_.key!=null||ee&&_===ee.subTree)&&Nu(y,_,!0)):Se(y,_,P,_e,ee,te,xe,ye,pe)},Z=(y,_,P,G,ee,te,xe,ye,pe)=>{_.slotScopeIds=ye,y==null?_.shapeFlag&512?ee.ctx.activate(_,P,G,xe,pe):De(_,P,G,ee,te,xe,pe):me(y,_,pe)},De=(y,_,P,G,ee,te,xe)=>{const ye=y.component=xp(y,G,ee);if(di(y)&&(ye.ctx.renderer=Ie),_p(ye,!1,xe),ye.asyncDep){if(ee&&ee.registerDep(ye,Ce,xe),!y.el){const pe=ye.subTree=_t(Qt);U(null,pe,_,P),y.placeholder=pe.el}}else Ce(ye,y,_,P,ee,te,xe)},me=(y,_,P)=>{const G=_.component=y.component;if(np(y,_,P))if(G.asyncDep&&!G.asyncResolved){ne(G,_,P);return}else G.next=_,G.update();else _.el=y.el,G.vnode=_},Ce=(y,_,P,G,ee,te,xe)=>{const ye=()=>{if(y.isMounted){let{next:Ae,bu:Fe,u:Ve,parent:Qe,vnode:et}=y;{const Dt=ju(y);if(Dt){Ae&&(Ae.el=et.el,ne(y,Ae,xe)),Dt.asyncDep.then(()=>{y.isUnmounted||ye()});return}}let rt=Ae,It;Lr(y,!1),Ae?(Ae.el=et.el,ne(y,Ae,xe)):Ae=et,Fe&&qo(Fe),(It=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&Rn(It,Qe,Ae,et),Lr(y,!0);const Tt=Rl(y),Lt=y.subTree;y.subTree=Tt,J(Lt,Tt,g(Lt.el),H(Lt),y,ee,te),Ae.el=Tt.el,rt===null&&rp(y,Tt.el),Ve&&ln(Ve,ee),(It=Ae.props&&Ae.props.onVnodeUpdated)&&ln(()=>Rn(It,Qe,Ae,et),ee)}else{let Ae;const{el:Fe,props:Ve}=_,{bm:Qe,m:et,parent:rt,root:It,type:Tt}=y,Lt=Us(_);Lr(y,!1),Qe&&qo(Qe),!Lt&&(Ae=Ve&&Ve.onVnodeBeforeMount)&&Rn(Ae,rt,_),Lr(y,!0);{It.ce&&It.ce._def.shadowRoot!==!1&&It.ce._injectChildStyle(Tt);const Dt=y.subTree=Rl(y);J(null,Dt,P,G,y,ee,te),_.el=Dt.el}if(et&&ln(et,ee),!Lt&&(Ae=Ve&&Ve.onVnodeMounted)){const Dt=_;ln(()=>Rn(Ae,rt,Dt),ee)}(_.shapeFlag&256||rt&&Us(rt.vnode)&&rt.vnode.shapeFlag&256)&&y.a&&ln(y.a,ee),y.isMounted=!0,_=P=G=null}};y.scope.on();const pe=y.effect=new Wc(ye);y.scope.off();const oe=y.update=pe.run.bind(pe),_e=y.job=pe.runIfDirty.bind(pe);_e.i=y,_e.id=y.uid,pe.scheduler=()=>Ha(_e),Lr(y,!0),oe()},ne=(y,_,P)=>{_.component=y;const G=y.vnode.props;y.vnode=_,y.next=null,op(y,_.props,G,P),cp(y,_.children,P),Qn(),Cl(y),Xn()},Se=(y,_,P,G,ee,te,xe,ye,pe=!1)=>{const oe=y&&y.children,_e=y?y.shapeFlag:0,Ae=_.children,{patchFlag:Fe,shapeFlag:Ve}=_;if(Fe>0){if(Fe&128){ot(oe,Ae,P,G,ee,te,xe,ye,pe);return}else if(Fe&256){Ye(oe,Ae,P,G,ee,te,xe,ye,pe);return}}Ve&8?(_e&16&&be(oe,ee,te),Ae!==oe&&m(P,Ae)):_e&16?Ve&16?ot(oe,Ae,P,G,ee,te,xe,ye,pe):be(oe,ee,te,!0):(_e&8&&m(P,""),Ve&16&&at(Ae,P,G,ee,te,xe,ye,pe))},Ye=(y,_,P,G,ee,te,xe,ye,pe)=>{y=y||hs,_=_||hs;const oe=y.length,_e=_.length,Ae=Math.min(oe,_e);let Fe;for(Fe=0;Fe<Ae;Fe++){const Ve=_[Fe]=pe?mr(_[Fe]):Pn(_[Fe]);J(y[Fe],Ve,P,null,ee,te,xe,ye,pe)}oe>_e?be(y,ee,te,!0,!1,Ae):at(_,P,G,ee,te,xe,ye,pe,Ae)},ot=(y,_,P,G,ee,te,xe,ye,pe)=>{let oe=0;const _e=_.length;let Ae=y.length-1,Fe=_e-1;for(;oe<=Ae&&oe<=Fe;){const Ve=y[oe],Qe=_[oe]=pe?mr(_[oe]):Pn(_[oe]);if(Ur(Ve,Qe))J(Ve,Qe,P,null,ee,te,xe,ye,pe);else break;oe++}for(;oe<=Ae&&oe<=Fe;){const Ve=y[Ae],Qe=_[Fe]=pe?mr(_[Fe]):Pn(_[Fe]);if(Ur(Ve,Qe))J(Ve,Qe,P,null,ee,te,xe,ye,pe);else break;Ae--,Fe--}if(oe>Ae){if(oe<=Fe){const Ve=Fe+1,Qe=Ve<_e?_[Ve].el:G;for(;oe<=Fe;)J(null,_[oe]=pe?mr(_[oe]):Pn(_[oe]),P,Qe,ee,te,xe,ye,pe),oe++}}else if(oe>Fe)for(;oe<=Ae;)ie(y[oe],ee,te,!0),oe++;else{const Ve=oe,Qe=oe,et=new Map;for(oe=Qe;oe<=Fe;oe++){const Ct=_[oe]=pe?mr(_[oe]):Pn(_[oe]);Ct.key!=null&&et.set(Ct.key,oe)}let rt,It=0;const Tt=Fe-Qe+1;let Lt=!1,Dt=0;const rn=new Array(Tt);for(oe=0;oe<Tt;oe++)rn[oe]=0;for(oe=Ve;oe<=Ae;oe++){const Ct=y[oe];if(It>=Tt){ie(Ct,ee,te,!0);continue}let Me;if(Ct.key!=null)Me=et.get(Ct.key);else for(rt=Qe;rt<=Fe;rt++)if(rn[rt-Qe]===0&&Ur(Ct,_[rt])){Me=rt;break}Me===void 0?ie(Ct,ee,te,!0):(rn[Me-Qe]=oe+1,Me>=Dt?Dt=Me:Lt=!0,J(Ct,_[Me],P,null,ee,te,xe,ye,pe),It++)}const tr=Lt?pp(rn):hs;for(rt=tr.length-1,oe=Tt-1;oe>=0;oe--){const Ct=Qe+oe,Me=_[Ct],In=_[Ct+1],dn=Ct+1<_e?In.el||In.placeholder:G;rn[oe]===0?J(null,Me,P,dn,ee,te,xe,ye,pe):Lt&&(rt<0||oe!==tr[rt]?lt(Me,P,dn,2):rt--)}}},lt=(y,_,P,G,ee=null)=>{const{el:te,type:xe,transition:ye,children:pe,shapeFlag:oe}=y;if(oe&6){lt(y.component.subTree,_,P,G);return}if(oe&128){y.suspense.move(_,P,G);return}if(oe&64){xe.move(y,_,P,Ie);return}if(xe===mt){s(te,_,P);for(let Ae=0;Ae<pe.length;Ae++)lt(pe[Ae],_,P,G);s(y.anchor,_,P);return}if(xe===Ho){D(y,_,P);return}if(G!==2&&oe&1&&ye)if(G===0)ye.beforeEnter(te),s(te,_,P),ln(()=>ye.enter(te),ee);else{const{leave:Ae,delayLeave:Fe,afterLeave:Ve}=ye,Qe=()=>{y.ctx.isUnmounted?i(te):s(te,_,P)},et=()=>{te._isLeaving&&te[zn](!0),Ae(te,()=>{Qe(),Ve&&Ve()})};Fe?Fe(te,Qe,et):et()}else s(te,_,P)},ie=(y,_,P,G=!1,ee=!1)=>{const{type:te,props:xe,ref:ye,children:pe,dynamicChildren:oe,shapeFlag:_e,patchFlag:Ae,dirs:Fe,cacheIndex:Ve}=y;if(Ae===-2&&(ee=!1),ye!=null&&(Qn(),Ks(ye,null,P,y,!0),Xn()),Ve!=null&&(_.renderCache[Ve]=void 0),_e&256){_.ctx.deactivate(y);return}const Qe=_e&1&&Fe,et=!Us(y);let rt;if(et&&(rt=xe&&xe.onVnodeBeforeUnmount)&&Rn(rt,_,y),_e&6)re(y.component,P,G);else{if(_e&128){y.suspense.unmount(P,G);return}Qe&&jr(y,null,_,"beforeUnmount"),_e&64?y.type.remove(y,_,P,Ie,G):oe&&!oe.hasOnce&&(te!==mt||Ae>0&&Ae&64)?be(oe,_,P,!1,!0):(te===mt&&Ae&384||!ee&&_e&16)&&be(pe,_,P),G&&q(y)}(et&&(rt=xe&&xe.onVnodeUnmounted)||Qe)&&ln(()=>{rt&&Rn(rt,_,y),Qe&&jr(y,null,_,"unmounted")},P)},q=y=>{const{type:_,el:P,anchor:G,transition:ee}=y;if(_===mt){M(P,G);return}if(_===Ho){Q(y);return}const te=()=>{i(P),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(y.shapeFlag&1&&ee&&!ee.persisted){const{leave:xe,delayLeave:ye}=ee,pe=()=>xe(P,te);ye?ye(y.el,te,pe):pe()}else te()},M=(y,_)=>{let P;for(;y!==_;)P=w(y),i(y),y=P;i(_)},re=(y,_,P)=>{const{bum:G,scope:ee,job:te,subTree:xe,um:ye,m:pe,a:oe}=y;$l(pe),$l(oe),G&&qo(G),ee.stop(),te&&(te.flags|=8,ie(xe,y,_,P)),ye&&ln(ye,_),ln(()=>{y.isUnmounted=!0},_)},be=(y,_,P,G=!1,ee=!1,te=0)=>{for(let xe=te;xe<y.length;xe++)ie(y[xe],_,P,G,ee)},H=y=>{if(y.shapeFlag&6)return H(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const _=w(y.anchor||y.el),P=_&&_[Cd];return P?w(P):_};let de=!1;const W=(y,_,P)=>{y==null?_._vnode&&ie(_._vnode,null,null,!0):J(_._vnode||null,y,_,null,null,null,P),_._vnode=y,de||(de=!0,Cl(),fu(),de=!1)},Ie={p:J,um:ie,m:lt,r:q,mt:De,mc:at,pc:Se,pbc:ze,n:H,o:e};return{render:W,hydrate:void 0,createApp:Wd(W)}}function Zi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Lr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function dp(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Nu(e,t,n=!1){const s=e.children,i=t.children;if(We(s)&&We(i))for(let a=0;a<s.length;a++){const u=s[a];let f=i[a];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[a]=mr(i[a]),f.el=u.el),!n&&f.patchFlag!==-2&&Nu(u,f)),f.type===mi&&f.patchFlag!==-1&&(f.el=u.el),f.type===Qt&&!f.el&&(f.el=u.el)}}function pp(e){const t=e.slice(),n=[0];let s,i,a,u,f;const p=e.length;for(s=0;s<p;s++){const v=e[s];if(v!==0){if(i=n[n.length-1],e[i]<v){t[s]=i,n.push(s);continue}for(a=0,u=n.length-1;a<u;)f=a+u>>1,e[n[f]]<v?a=f+1:u=f;v<e[n[a]]&&(a>0&&(t[s]=n[a-1]),n[a]=s)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=t[u];return n}function ju(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ju(t)}function $l(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Lu=e=>e.__isSuspense;function hp(e,t){t&&t.pendingBranch?We(e)?t.effects.push(...e):t.effects.push(e):kd(e)}const mt=Symbol.for("v-fgt"),mi=Symbol.for("v-txt"),Qt=Symbol.for("v-cmt"),Ho=Symbol.for("v-stc"),Vs=[];let un=null;function le(e=!1){Vs.push(un=e?null:[])}function mp(){Vs.pop(),un=Vs[Vs.length-1]||null}let Qs=1;function ei(e,t=!1){Qs+=e,e<0&&un&&t&&(un.hasOnce=!0)}function Bu(e){return e.dynamicChildren=Qs>0?un||hs:null,mp(),Qs>0&&un&&un.push(e),e}function fe(e,t,n,s,i,a){return Bu(k(e,t,n,s,i,a,!0))}function Fu(e,t,n,s,i){return Bu(_t(e,t,n,s,i,!0))}function ti(e){return e?e.__v_isVNode===!0:!1}function Ur(e,t){return e.type===t.type&&e.key===t.key}const Ku=({key:e})=>e??null,Wo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Ht(e)||Ze(e)?{i:gn,r:e,k:t,f:!!n}:e:null);function k(e,t=null,n=null,s=0,i=null,a=e===mt?0:1,u=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ku(t),ref:t&&Wo(t),scopeId:pu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:gn};return f?(Ya(p,n),a&128&&e.normalize(p)):n&&(p.shapeFlag|=Rt(n)?8:16),Qs>0&&!u&&un&&(p.patchFlag>0||a&6)&&p.patchFlag!==32&&un.push(p),p}const _t=gp;function gp(e,t=null,n=null,s=0,i=null,a=!1){if((!e||e===Ld)&&(e=Qt),ti(e)){const f=_r(e,t,!0);return n&&Ya(f,n),Qs>0&&!a&&un&&(f.shapeFlag&6?un[un.indexOf(e)]=f:un.push(f)),f.patchFlag=-2,f}if(Ep(e)&&(e=e.__vccOpts),t){t=vp(t);let{class:f,style:p}=t;f&&!Rt(f)&&(t.class=kt(f)),yt(p)&&(Va(p)&&!We(p)&&(p=jt({},p)),t.style=vt(p))}const u=Rt(e)?1:Lu(e)?128:hu(e)?64:yt(e)?4:Ze(e)?2:0;return k(e,t,n,s,i,u,a,!0)}function vp(e){return e?Va(e)||Ou(e)?jt({},e):e:null}function _r(e,t,n=!1,s=!1){const{props:i,ref:a,patchFlag:u,children:f,transition:p}=e,v=t?yp(i||{},t):i,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:v,key:v&&Ku(v),ref:t&&t.ref?n&&a?We(a)?a.concat(Wo(t)):[a,Wo(t)]:Wo(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==mt?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&_r(e.ssContent),ssFallback:e.ssFallback&&_r(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&s&&Js(m,p.clone(m)),m}function yr(e=" ",t=0){return _t(mi,null,e,t)}function Uu(e,t){const n=_t(Ho,null,e);return n.staticCount=t,n}function nt(e="",t=!1){return t?(le(),Fu(Qt,null,e)):_t(Qt,null,e)}function Pn(e){return e==null||typeof e=="boolean"?_t(Qt):We(e)?_t(mt,null,e.slice()):ti(e)?mr(e):_t(mi,null,String(e))}function mr(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:_r(e)}function Ya(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(We(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Ya(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Ou(t)?t._ctx=gn:i===3&&gn&&(gn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ze(t)?(t={default:t,_ctx:gn},n=32):(t=String(t),s&64?(n=16,t=[yr(t)]):n=8);e.children=t,e.shapeFlag|=n}function yp(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=kt([t.class,s.class]));else if(i==="style")t.style=vt([t.style,s.style]);else if(oi(i)){const a=t[i],u=s[i];u&&a!==u&&!(We(a)&&a.includes(u))&&(t[i]=a?[].concat(a,u):u)}else i!==""&&(t[i]=s[i])}return t}function Rn(e,t,n,s=null){Sn(e,t,7,[n,s])}const bp=Su();let wp=0;function xp(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||bp,a={uid:wp++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Du(s,i),emitsOptions:Iu(s,i),emit:null,emitted:null,propsDefaults:bt,inheritAttrs:s.inheritAttrs,ctx:bt,data:bt,props:bt,attrs:bt,slots:bt,refs:bt,setupState:bt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Xd.bind(null,a),e.ce&&e.ce(a),a}let Xt=null;const qu=()=>Xt||gn;let ni,wa;{const e=li(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),a=>{i.length>1?i.forEach(u=>u(a)):i[0](a)}};ni=t("__VUE_INSTANCE_SETTERS__",n=>Xt=n),wa=t("__VUE_SSR_SETTERS__",n=>Xs=n)}const so=e=>{const t=Xt;return ni(e),e.scope.on(),()=>{e.scope.off(),ni(t)}},Ml=()=>{Xt&&Xt.scope.off(),ni(null)};function Vu(e){return e.vnode.shapeFlag&4}let Xs=!1;function _p(e,t=!1,n=!1){t&&wa(t);const{props:s,children:i}=e.vnode,a=Vu(e);sp(e,s,a,t),lp(e,i,n||t);const u=a?kp(e,t):void 0;return t&&wa(!1),u}function kp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Bd);const{setup:s}=n;if(s){Qn();const i=e.setupContext=s.length>1?Sp(e):null,a=so(e),u=ro(s,e,0,[e.props,i]),f=Lc(u);if(Xn(),a(),(f||e.sp)&&!Us(e)&&wu(e),f){if(u.then(Ml,Ml),t)return u.then(p=>{Nl(e,p)}).catch(p=>{fi(p,e,0)});e.asyncDep=u}else Nl(e,u)}else Hu(e)}function Nl(e,t,n){Ze(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:yt(t)&&(e.setupState=lu(t)),Hu(e)}function Hu(e,t,n){const s=e.type;e.render||(e.render=s.render||$n);{const i=so(e);Qn();try{Fd(e)}finally{Xn(),i()}}}const Cp={get(e,t){return Vt(e,"get",""),e[t]}};function Sp(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Cp),slots:e.slots,emit:e.emit,expose:t}}function gi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(lu(pd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qs)return qs[n](e)},has(t,n){return n in t||n in qs}})):e.proxy}function Ep(e){return Ze(e)&&"__vccOpts"in e}const Je=(e,t)=>yd(e,t,Xs);function Ja(e,t,n){try{ei(-1);const s=arguments.length;return s===2?yt(t)&&!We(t)?ti(t)?_t(e,null,[t]):_t(e,t):_t(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&ti(n)&&(n=[n]),_t(e,t,n))}finally{ei(1)}}const Ip="3.5.25";let xa;const jl=typeof window<"u"&&window.trustedTypes;if(jl)try{xa=jl.createPolicy("vue",{createHTML:e=>e})}catch{}const Wu=xa?e=>xa.createHTML(e):e=>e,Ap="http://www.w3.org/2000/svg",Tp="http://www.w3.org/1998/Math/MathML",Wn=typeof document<"u"?document:null,Ll=Wn&&Wn.createElement("template"),Op={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?Wn.createElementNS(Ap,e):t==="mathml"?Wn.createElementNS(Tp,e):n?Wn.createElement(e,{is:n}):Wn.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>Wn.createTextNode(e),createComment:e=>Wn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Wn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,a){const u=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{Ll.innerHTML=Wu(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const f=Ll.content;if(s==="svg"||s==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},fr="transition",$s="animation",Zs=Symbol("_vtc"),zu={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Rp=jt({},mu,zu),Dp=e=>(e.displayName="Transition",e.props=Rp,e),_a=Dp((e,{slots:t})=>Ja(Id,Pp(e),t)),Br=(e,t=[])=>{We(e)?e.forEach(n=>n(...t)):e&&e(...t)},Bl=e=>e?We(e)?e.some(t=>t.length>1):e.length>1:!1;function Pp(e){const t={};for(const se in e)se in zu||(t[se]=e[se]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:a=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:p=a,appearActiveClass:v=u,appearToClass:m=f,leaveFromClass:g=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:A=`${n}-leave-to`}=e,O=$p(i),J=O&&O[0],ue=O&&O[1],{onBeforeEnter:U,onEnter:N,onEnterCancelled:D,onLeave:Q,onLeaveCancelled:Pe,onBeforeAppear:je=U,onAppear:$e=N,onAppearCancelled:at=D}=t,Be=(se,Z,De,me)=>{se._enterCancelled=me,Fr(se,Z?m:f),Fr(se,Z?v:u),De&&De()},ze=(se,Z)=>{se._isLeaving=!1,Fr(se,g),Fr(se,A),Fr(se,w),Z&&Z()},Ge=se=>(Z,De)=>{const me=se?$e:N,Ce=()=>Be(Z,se,De);Br(me,[Z,Ce]),Fl(()=>{Fr(Z,se?p:a),qn(Z,se?m:f),Bl(me)||Kl(Z,s,J,Ce)})};return jt(t,{onBeforeEnter(se){Br(U,[se]),qn(se,a),qn(se,u)},onBeforeAppear(se){Br(je,[se]),qn(se,p),qn(se,v)},onEnter:Ge(!1),onAppear:Ge(!0),onLeave(se,Z){se._isLeaving=!0;const De=()=>ze(se,Z);qn(se,g),se._enterCancelled?(qn(se,w),Vl(se)):(Vl(se),qn(se,w)),Fl(()=>{se._isLeaving&&(Fr(se,g),qn(se,A),Bl(Q)||Kl(se,s,ue,De))}),Br(Q,[se,De])},onEnterCancelled(se){Be(se,!1,void 0,!0),Br(D,[se])},onAppearCancelled(se){Be(se,!0,void 0,!0),Br(at,[se])},onLeaveCancelled(se){ze(se),Br(Pe,[se])}})}function $p(e){if(e==null)return null;if(yt(e))return[ea(e.enter),ea(e.leave)];{const t=ea(e);return[t,t]}}function ea(e){return Bf(e)}function qn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Zs]||(e[Zs]=new Set)).add(t)}function Fr(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Zs];n&&(n.delete(t),n.size||(e[Zs]=void 0))}function Fl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Mp=0;function Kl(e,t,n,s){const i=e._endId=++Mp,a=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(a,n);const{type:u,timeout:f,propCount:p}=Np(e,t);if(!u)return s();const v=u+"end";let m=0;const g=()=>{e.removeEventListener(v,w),a()},w=A=>{A.target===e&&++m>=p&&g()};setTimeout(()=>{m<p&&g()},f+1),e.addEventListener(v,w)}function Np(e,t){const n=window.getComputedStyle(e),s=O=>(n[O]||"").split(", "),i=s(`${fr}Delay`),a=s(`${fr}Duration`),u=Ul(i,a),f=s(`${$s}Delay`),p=s(`${$s}Duration`),v=Ul(f,p);let m=null,g=0,w=0;t===fr?u>0&&(m=fr,g=u,w=a.length):t===$s?v>0&&(m=$s,g=v,w=p.length):(g=Math.max(u,v),m=g>0?u>v?fr:$s:null,w=m?m===fr?a.length:p.length:0);const A=m===fr&&/\b(?:transform|all)(?:,|$)/.test(s(`${fr}Property`).toString());return{type:m,timeout:g,propCount:w,hasTransform:A}}function Ul(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>ql(n)+ql(e[s])))}function ql(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Vl(e){return(e?e.ownerDocument:document).body.offsetHeight}function jp(e,t,n){const s=e[Zs];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Hl=Symbol("_vod"),Lp=Symbol("_vsh"),Bp=Symbol(""),Fp=/(?:^|;)\s*display\s*:/;function Kp(e,t,n){const s=e.style,i=Rt(n);let a=!1;if(n&&!i){if(t)if(Rt(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&zo(s,f,"")}else for(const u in t)n[u]==null&&zo(s,u,"");for(const u in n)u==="display"&&(a=!0),zo(s,u,n[u])}else if(i){if(t!==n){const u=s[Bp];u&&(n+=";"+u),s.cssText=n,a=Fp.test(n)}}else t&&e.removeAttribute("style");Hl in e&&(e[Hl]=a?s.display:"",e[Lp]&&(s.display="none"))}const Wl=/\s*!important$/;function zo(e,t,n){if(We(n))n.forEach(s=>zo(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Up(e,t);Wl.test(n)?e.setProperty(Cr(s),n.replace(Wl,""),"important"):e[s]=n}}const zl=["Webkit","Moz","ms"],ta={};function Up(e,t){const n=ta[t];if(n)return n;let s=wr(t);if(s!=="filter"&&s in e)return ta[t]=s;s=Kc(s);for(let i=0;i<zl.length;i++){const a=zl[i]+s;if(a in e)return ta[t]=a}return t}const Gl="http://www.w3.org/1999/xlink";function Yl(e,t,n,s,i,a=Hf(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Gl,t.slice(6,t.length)):e.setAttributeNS(Gl,t,n):n==null||a&&!qc(n)?e.removeAttribute(t):e.setAttribute(t,a?"":Mn(n)?String(n):n)}function Jl(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Wu(n):n);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const f=a==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=qc(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(i||t)}function Jn(e,t,n,s){e.addEventListener(t,n,s)}function qp(e,t,n,s){e.removeEventListener(t,n,s)}const Ql=Symbol("_vei");function Vp(e,t,n,s,i=null){const a=e[Ql]||(e[Ql]={}),u=a[t];if(s&&u)u.value=s;else{const[f,p]=Hp(t);if(s){const v=a[t]=Gp(s,i);Jn(e,f,v,p)}else u&&(qp(e,f,u,p),a[t]=void 0)}}const Xl=/(?:Once|Passive|Capture)$/;function Hp(e){let t;if(Xl.test(e)){t={};let s;for(;s=e.match(Xl);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Cr(e.slice(2)),t]}let na=0;const Wp=Promise.resolve(),zp=()=>na||(Wp.then(()=>na=0),na=Date.now());function Gp(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;Sn(Yp(s,n.value),t,5,[s])};return n.value=e,n.attached=zp(),n}function Yp(e,t){if(We(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Zl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Jp=(e,t,n,s,i,a)=>{const u=i==="svg";t==="class"?jp(e,s,u):t==="style"?Kp(e,n,s):oi(t)?$a(t)||Vp(e,t,n,s,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Qp(e,t,s,u))?(Jl(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Yl(e,t,s,u,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Rt(s))?Jl(e,wr(t),s,a,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Yl(e,t,s,u))};function Qp(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Zl(t)&&Ze(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Zl(t)&&Rt(n)?!1:t in e}const kr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return We(t)?n=>qo(t,n):t};function Xp(e){e.target.composing=!0}function ec(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bn=Symbol("_assign");function tc(e,t,n){return t&&(e=e.trim()),n&&(e=ai(e)),e}const bs={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[bn]=kr(i);const a=s||i.props&&i.props.type==="number";Jn(e,t?"change":"input",u=>{u.target.composing||e[bn](tc(e.value,n,a))}),(n||a)&&Jn(e,"change",()=>{e.value=tc(e.value,n,a)}),t||(Jn(e,"compositionstart",Xp),Jn(e,"compositionend",ec),Jn(e,"change",ec))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:a}},u){if(e[bn]=kr(u),e.composing)return;const f=(a||e.type==="number")&&!/^0\d/.test(e.value)?ai(e.value):e.value,p=t??"";f!==p&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===p)||(e.value=p))}},ka={deep:!0,created(e,t,n){e[bn]=kr(n),Jn(e,"change",()=>{const s=e._modelValue,i=ws(e),a=e.checked,u=e[bn];if(We(s)){const f=ja(s,i),p=f!==-1;if(a&&!p)u(s.concat(i));else if(!a&&p){const v=[...s];v.splice(f,1),u(v)}}else if(ks(s)){const f=new Set(s);a?f.add(i):f.delete(i),u(f)}else u(Gu(e,a))})},mounted:nc,beforeUpdate(e,t,n){e[bn]=kr(n),nc(e,t,n)}};function nc(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(We(t))i=ja(t,s.props.value)>-1;else if(ks(t))i=t.has(s.props.value);else{if(t===n)return;i=zr(t,Gu(e,!0))}e.checked!==i&&(e.checked=i)}const Zp={created(e,{value:t},n){e.checked=zr(t,n.props.value),e[bn]=kr(n),Jn(e,"change",()=>{e[bn](ws(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[bn]=kr(s),t!==n&&(e.checked=zr(t,s.props.value))}},eh={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ks(t);Jn(e,"change",()=>{const a=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?ai(ws(u)):ws(u));e[bn](e.multiple?i?new Set(a):a:a[0]),e._assigning=!0,Yt(()=>{e._assigning=!1})}),e[bn]=kr(s)},mounted(e,{value:t}){rc(e,t)},beforeUpdate(e,t,n){e[bn]=kr(n)},updated(e,{value:t}){e._assigning||rc(e,t)}};function rc(e,t){const n=e.multiple,s=We(t);if(!(n&&!s&&!ks(t))){for(let i=0,a=e.options.length;i<a;i++){const u=e.options[i],f=ws(u);if(n)if(s){const p=typeof f;p==="string"||p==="number"?u.selected=t.some(v=>String(v)===String(f)):u.selected=ja(t,f)>-1}else u.selected=t.has(f);else if(zr(ws(u),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ws(e){return"_value"in e?e._value:e.value}function Gu(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const th={created(e,t,n){Lo(e,t,n,null,"created")},mounted(e,t,n){Lo(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Lo(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Lo(e,t,n,s,"updated")}};function nh(e,t){switch(e){case"SELECT":return eh;case"TEXTAREA":return bs;default:switch(t){case"checkbox":return ka;case"radio":return Zp;default:return bs}}}function Lo(e,t,n,s,i){const u=nh(e.tagName,n.props&&n.props.type)[i];u&&u(e,t,n,s)}const rh=["ctrl","shift","alt","meta"],sh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>rh.some(n=>e[`${n}Key`]&&!t.includes(n))},nn=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...a)=>{for(let u=0;u<t.length;u++){const f=sh[t[u]];if(f&&f(i,t))return}return e(i,...a)}))},oh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ih=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=(i=>{if(!("key"in i))return;const a=Cr(i.key);if(t.some(u=>u===a||oh[u]===a))return e(i)}))},ah=jt({patchProp:Jp},Op);let sc;function lh(){return sc||(sc=up(ah))}const ch=((...e)=>{const t=lh().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=fh(s);if(!i)return;const a=t._component;!Ze(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const u=n(i,!1,uh(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t});function uh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function fh(e){return Rt(e)?document.querySelector(e):e}const ds=typeof document<"u";function Yu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function dh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Yu(e.default)}const pt=Object.assign;function ra(e,t){const n={};for(const s in t){const i=t[s];n[s]=En(i)?i.map(e):e(i)}return n}const Hs=()=>{},En=Array.isArray;function oc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const Ju=/#/g,ph=/&/g,hh=/\//g,mh=/=/g,gh=/\?/g,Qu=/\+/g,vh=/%5B/g,yh=/%5D/g,Xu=/%5E/g,bh=/%60/g,Zu=/%7B/g,wh=/%7C/g,ef=/%7D/g,xh=/%20/g;function Qa(e){return e==null?"":encodeURI(""+e).replace(wh,"|").replace(vh,"[").replace(yh,"]")}function _h(e){return Qa(e).replace(Zu,"{").replace(ef,"}").replace(Xu,"^")}function Ca(e){return Qa(e).replace(Qu,"%2B").replace(xh,"+").replace(Ju,"%23").replace(ph,"%26").replace(bh,"`").replace(Zu,"{").replace(ef,"}").replace(Xu,"^")}function kh(e){return Ca(e).replace(mh,"%3D")}function Ch(e){return Qa(e).replace(Ju,"%23").replace(gh,"%3F")}function Sh(e){return Ch(e).replace(hh,"%2F")}function eo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Eh=/\/$/,Ih=e=>e.replace(Eh,"");function sa(e,t,n="/"){let s,i={},a="",u="";const f=t.indexOf("#");let p=t.indexOf("?");return p=f>=0&&p>f?-1:p,p>=0&&(s=t.slice(0,p),a=t.slice(p,f>0?f:t.length),i=e(a.slice(1))),f>=0&&(s=s||t.slice(0,f),u=t.slice(f,t.length)),s=Rh(s??t,n),{fullPath:s+a+u,path:s,query:i,hash:eo(u)}}function Ah(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function ic(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Th(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&xs(t.matched[s],n.matched[i])&&tf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function xs(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function tf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!Oh(e[n],t[n]))return!1;return!0}function Oh(e,t){return En(e)?ac(e,t):En(t)?ac(t,e):e?.valueOf()===t?.valueOf()}function ac(e,t){return En(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Rh(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let a=n.length-1,u,f;for(u=0;u<s.length;u++)if(f=s[u],f!==".")if(f==="..")a>1&&a--;else break;return n.slice(0,a).join("/")+"/"+s.slice(u).join("/")}const dr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Sa=(function(e){return e.pop="pop",e.push="push",e})({}),oa=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Dh(e){if(!e)if(ds){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Ih(e)}const Ph=/^[^#]+#/;function $h(e,t){return e.replace(Ph,"#")+t}function Mh(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const vi=()=>({left:window.scrollX,top:window.scrollY});function Nh(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Mh(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function lc(e,t){return(history.state?history.state.position-t:-1)+e}const Ea=new Map;function jh(e,t){Ea.set(e,t)}function Lh(e){const t=Ea.get(e);return Ea.delete(e),t}function Bh(e){return typeof e=="string"||e&&typeof e=="object"}function nf(e){return typeof e=="string"||typeof e=="symbol"}let At=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const rf=Symbol("");At.MATCHER_NOT_FOUND+"",At.NAVIGATION_GUARD_REDIRECT+"",At.NAVIGATION_ABORTED+"",At.NAVIGATION_CANCELLED+"",At.NAVIGATION_DUPLICATED+"";function _s(e,t){return pt(new Error,{type:e,[rf]:!0},t)}function Vn(e,t){return e instanceof Error&&rf in e&&(t==null||!!(e.type&t))}const Fh=["params","query","hash"];function Kh(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of Fh)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function Uh(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(Qu," "),a=i.indexOf("="),u=eo(a<0?i:i.slice(0,a)),f=a<0?null:eo(i.slice(a+1));if(u in t){let p=t[u];En(p)||(p=t[u]=[p]),p.push(f)}else t[u]=f}return t}function cc(e){let t="";for(let n in e){const s=e[n];if(n=kh(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(En(s)?s.map(i=>i&&Ca(i)):[s&&Ca(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function qh(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=En(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Vh=Symbol(""),uc=Symbol(""),yi=Symbol(""),Xa=Symbol(""),Ia=Symbol("");function Ms(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function gr(e,t,n,s,i,a=u=>u()){const u=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((f,p)=>{const v=w=>{w===!1?p(_s(At.NAVIGATION_ABORTED,{from:n,to:t})):w instanceof Error?p(w):Bh(w)?p(_s(At.NAVIGATION_GUARD_REDIRECT,{from:t,to:w})):(u&&s.enterCallbacks[i]===u&&typeof w=="function"&&u.push(w),f())},m=a(()=>e.call(s&&s.instances[i],t,n,v));let g=Promise.resolve(m);e.length<3&&(g=g.then(v)),g.catch(w=>p(w))})}function ia(e,t,n,s,i=a=>a()){const a=[];for(const u of e)for(const f in u.components){let p=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(Yu(p)){const v=(p.__vccOpts||p)[t];v&&a.push(gr(v,n,s,u,f,i))}else{let v=p();a.push(()=>v.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const g=dh(m)?m.default:m;u.mods[f]=m,u.components[f]=g;const w=(g.__vccOpts||g)[t];return w&&gr(w,n,s,u,f,i)()}))}}return a}function Hh(e,t){const n=[],s=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let u=0;u<a;u++){const f=t.matched[u];f&&(e.matched.find(v=>xs(v,f))?s.push(f):n.push(f));const p=e.matched[u];p&&(t.matched.find(v=>xs(v,p))||i.push(p))}return[n,s,i]}let Wh=()=>location.protocol+"//"+location.host;function sf(e,t){const{pathname:n,search:s,hash:i}=t,a=e.indexOf("#");if(a>-1){let u=i.includes(e.slice(a))?e.slice(a).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),ic(f,"")}return ic(n,e)+s+i}function zh(e,t,n,s){let i=[],a=[],u=null;const f=({state:w})=>{const A=sf(e,location),O=n.value,J=t.value;let ue=0;if(w){if(n.value=A,t.value=w,u&&u===O){u=null;return}ue=J?w.position-J.position:0}else s(A);i.forEach(U=>{U(n.value,O,{delta:ue,type:Sa.pop,direction:ue?ue>0?oa.forward:oa.back:oa.unknown})})};function p(){u=n.value}function v(w){i.push(w);const A=()=>{const O=i.indexOf(w);O>-1&&i.splice(O,1)};return a.push(A),A}function m(){if(document.visibilityState==="hidden"){const{history:w}=window;if(!w.state)return;w.replaceState(pt({},w.state,{scroll:vi()}),"")}}function g(){for(const w of a)w();a=[],window.removeEventListener("popstate",f),window.removeEventListener("pagehide",m),document.removeEventListener("visibilitychange",m)}return window.addEventListener("popstate",f),window.addEventListener("pagehide",m),document.addEventListener("visibilitychange",m),{pauseListeners:p,listen:v,destroy:g}}function fc(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?vi():null}}function Gh(e){const{history:t,location:n}=window,s={value:sf(e,n)},i={value:t.state};i.value||a(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(p,v,m){const g=e.indexOf("#"),w=g>-1?(n.host&&document.querySelector("base")?e:e.slice(g))+p:Wh()+e+p;try{t[m?"replaceState":"pushState"](v,"",w),i.value=v}catch(A){console.error(A),n[m?"replace":"assign"](w)}}function u(p,v){a(p,pt({},t.state,fc(i.value.back,p,i.value.forward,!0),v,{position:i.value.position}),!0),s.value=p}function f(p,v){const m=pt({},i.value,t.state,{forward:p,scroll:vi()});a(m.current,m,!0),a(p,pt({},fc(s.value,p,null),{position:m.position+1},v),!1),s.value=p}return{location:s,state:i,push:f,replace:u}}function Yh(e){e=Dh(e);const t=Gh(e),n=zh(e,t.state,t.location,t.replace);function s(a,u=!0){u||n.pauseListeners(),history.go(a)}const i=pt({location:"",base:e,go:s,createHref:$h.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Vr=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var $t=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})($t||{});const Jh={type:Vr.Static,value:""},Qh=/[a-zA-Z0-9_]/;function Xh(e){if(!e)return[[]];if(e==="/")return[[Jh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(A){throw new Error(`ERR (${n})/"${v}": ${A}`)}let n=$t.Static,s=n;const i=[];let a;function u(){a&&i.push(a),a=[]}let f=0,p,v="",m="";function g(){v&&(n===$t.Static?a.push({type:Vr.Static,value:v}):n===$t.Param||n===$t.ParamRegExp||n===$t.ParamRegExpEnd?(a.length>1&&(p==="*"||p==="+")&&t(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),a.push({type:Vr.Param,value:v,regexp:m,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):t("Invalid state to consume buffer"),v="")}function w(){v+=p}for(;f<e.length;){if(p=e[f++],p==="\\"&&n!==$t.ParamRegExp){s=n,n=$t.EscapeNext;continue}switch(n){case $t.Static:p==="/"?(v&&g(),u()):p===":"?(g(),n=$t.Param):w();break;case $t.EscapeNext:w(),n=s;break;case $t.Param:p==="("?n=$t.ParamRegExp:Qh.test(p)?w():(g(),n=$t.Static,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case $t.ParamRegExp:p===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+p:n=$t.ParamRegExpEnd:m+=p;break;case $t.ParamRegExpEnd:g(),n=$t.Static,p!=="*"&&p!=="?"&&p!=="+"&&f--,m="";break;default:t("Unknown state");break}}return n===$t.ParamRegExp&&t(`Unfinished custom RegExp for param "${v}"`),g(),u(),i}const dc="[^/]+?",Zh={sensitive:!1,strict:!1,start:!0,end:!0};var Gt=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(Gt||{});const em=/[.+*?^${}()[\]/\\]/g;function tm(e,t){const n=pt({},Zh,t),s=[];let i=n.start?"^":"";const a=[];for(const v of e){const m=v.length?[]:[Gt.Root];n.strict&&!v.length&&(i+="/");for(let g=0;g<v.length;g++){const w=v[g];let A=Gt.Segment+(n.sensitive?Gt.BonusCaseSensitive:0);if(w.type===Vr.Static)g||(i+="/"),i+=w.value.replace(em,"\\$&"),A+=Gt.Static;else if(w.type===Vr.Param){const{value:O,repeatable:J,optional:ue,regexp:U}=w;a.push({name:O,repeatable:J,optional:ue});const N=U||dc;if(N!==dc){A+=Gt.BonusCustomRegExp;try{`${N}`}catch(Q){throw new Error(`Invalid custom RegExp for param "${O}" (${N}): `+Q.message)}}let D=J?`((?:${N})(?:/(?:${N}))*)`:`(${N})`;g||(D=ue&&v.length<2?`(?:/${D})`:"/"+D),ue&&(D+="?"),i+=D,A+=Gt.Dynamic,ue&&(A+=Gt.BonusOptional),J&&(A+=Gt.BonusRepeatable),N===".*"&&(A+=Gt.BonusWildcard)}m.push(A)}s.push(m)}if(n.strict&&n.end){const v=s.length-1;s[v][s[v].length-1]+=Gt.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function f(v){const m=v.match(u),g={};if(!m)return null;for(let w=1;w<m.length;w++){const A=m[w]||"",O=a[w-1];g[O.name]=A&&O.repeatable?A.split("/"):A}return g}function p(v){let m="",g=!1;for(const w of e){(!g||!m.endsWith("/"))&&(m+="/"),g=!1;for(const A of w)if(A.type===Vr.Static)m+=A.value;else if(A.type===Vr.Param){const{value:O,repeatable:J,optional:ue}=A,U=O in v?v[O]:"";if(En(U)&&!J)throw new Error(`Provided param "${O}" is an array but it is not repeatable (* or + modifiers)`);const N=En(U)?U.join("/"):U;if(!N)if(ue)w.length<2&&(m.endsWith("/")?m=m.slice(0,-1):g=!0);else throw new Error(`Missing required param "${O}"`);m+=N}}return m||"/"}return{re:u,score:s,keys:a,parse:f,stringify:p}}function nm(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===Gt.Static+Gt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===Gt.Static+Gt.Segment?1:-1:0}function of(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const a=nm(s[n],i[n]);if(a)return a;n++}if(Math.abs(i.length-s.length)===1){if(pc(s))return 1;if(pc(i))return-1}return i.length-s.length}function pc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const rm={strict:!1,end:!0,sensitive:!1};function sm(e,t,n){const s=tm(Xh(e.path),n),i=pt(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function om(e,t){const n=[],s=new Map;t=oc(rm,t);function i(g){return s.get(g)}function a(g,w,A){const O=!A,J=mc(g);J.aliasOf=A&&A.record;const ue=oc(t,g),U=[J];if("alias"in g){const Q=typeof g.alias=="string"?[g.alias]:g.alias;for(const Pe of Q)U.push(mc(pt({},J,{components:A?A.record.components:J.components,path:Pe,aliasOf:A?A.record:J})))}let N,D;for(const Q of U){const{path:Pe}=Q;if(w&&Pe[0]!=="/"){const je=w.record.path,$e=je[je.length-1]==="/"?"":"/";Q.path=w.record.path+(Pe&&$e+Pe)}if(N=sm(Q,w,ue),A?A.alias.push(N):(D=D||N,D!==N&&D.alias.push(N),O&&g.name&&!gc(N)&&u(g.name)),af(N)&&p(N),J.children){const je=J.children;for(let $e=0;$e<je.length;$e++)a(je[$e],N,A&&A.children[$e])}A=A||N}return D?()=>{u(D)}:Hs}function u(g){if(nf(g)){const w=s.get(g);w&&(s.delete(g),n.splice(n.indexOf(w),1),w.children.forEach(u),w.alias.forEach(u))}else{const w=n.indexOf(g);w>-1&&(n.splice(w,1),g.record.name&&s.delete(g.record.name),g.children.forEach(u),g.alias.forEach(u))}}function f(){return n}function p(g){const w=lm(g,n);n.splice(w,0,g),g.record.name&&!gc(g)&&s.set(g.record.name,g)}function v(g,w){let A,O={},J,ue;if("name"in g&&g.name){if(A=s.get(g.name),!A)throw _s(At.MATCHER_NOT_FOUND,{location:g});ue=A.record.name,O=pt(hc(w.params,A.keys.filter(D=>!D.optional).concat(A.parent?A.parent.keys.filter(D=>D.optional):[]).map(D=>D.name)),g.params&&hc(g.params,A.keys.map(D=>D.name))),J=A.stringify(O)}else if(g.path!=null)J=g.path,A=n.find(D=>D.re.test(J)),A&&(O=A.parse(J),ue=A.record.name);else{if(A=w.name?s.get(w.name):n.find(D=>D.re.test(w.path)),!A)throw _s(At.MATCHER_NOT_FOUND,{location:g,currentLocation:w});ue=A.record.name,O=pt({},w.params,g.params),J=A.stringify(O)}const U=[];let N=A;for(;N;)U.unshift(N.record),N=N.parent;return{name:ue,path:J,params:O,matched:U,meta:am(U)}}e.forEach(g=>a(g));function m(){n.length=0,s.clear()}return{addRoute:a,resolve:v,removeRoute:u,clearRoutes:m,getRoutes:f,getRecordMatcher:i}}function hc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function mc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:im(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function im(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function gc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function am(e){return e.reduce((t,n)=>pt(t,n.meta),{})}function lm(e,t){let n=0,s=t.length;for(;n!==s;){const a=n+s>>1;of(e,t[a])<0?s=a:n=a+1}const i=cm(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function cm(e){let t=e;for(;t=t.parent;)if(af(t)&&of(e,t)===0)return t}function af({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function vc(e){const t=kn(yi),n=kn(Xa),s=Je(()=>{const p=tn(e.to);return t.resolve(p)}),i=Je(()=>{const{matched:p}=s.value,{length:v}=p,m=p[v-1],g=n.matched;if(!m||!g.length)return-1;const w=g.findIndex(xs.bind(null,m));if(w>-1)return w;const A=yc(p[v-2]);return v>1&&yc(m)===A&&g[g.length-1].path!==A?g.findIndex(xs.bind(null,p[v-2])):w}),a=Je(()=>i.value>-1&&pm(n.params,s.value.params)),u=Je(()=>i.value>-1&&i.value===n.matched.length-1&&tf(n.params,s.value.params));function f(p={}){if(dm(p)){const v=t[tn(e.replace)?"replace":"push"](tn(e.to)).catch(Hs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:s,href:Je(()=>s.value.href),isActive:a,isExactActive:u,navigate:f}}function um(e){return e.length===1?e[0]:e}const fm=Zt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:vc,setup(e,{slots:t}){const n=ui(vc(e)),{options:s}=kn(yi),i=Je(()=>({[bc(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[bc(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const a=t.default&&um(t.default(n));return e.custom?a:Ja("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},a)}}}),ps=fm;function dm(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function pm(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!En(i)||i.length!==s.length||s.some((a,u)=>a.valueOf()!==i[u].valueOf()))return!1}return!0}function yc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const bc=(e,t,n)=>e??t??n,hm=Zt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=kn(Ia),i=Je(()=>e.route||s.value),a=kn(uc,0),u=Je(()=>{let v=tn(a);const{matched:m}=i.value;let g;for(;(g=m[v])&&!g.components;)v++;return v}),f=Je(()=>i.value.matched[u.value]);Vo(uc,Je(()=>u.value+1)),Vo(Vh,f),Vo(Ia,i);const p=he();return yn(()=>[p.value,f.value,e.name],([v,m,g],[w,A,O])=>{m&&(m.instances[g]=v,A&&A!==m&&v&&v===w&&(m.leaveGuards.size||(m.leaveGuards=A.leaveGuards),m.updateGuards.size||(m.updateGuards=A.updateGuards))),v&&m&&(!A||!xs(m,A)||!w)&&(m.enterCallbacks[g]||[]).forEach(J=>J(v))},{flush:"post"}),()=>{const v=i.value,m=e.name,g=f.value,w=g&&g.components[m];if(!w)return wc(n.default,{Component:w,route:v});const A=g.props[m],O=A?A===!0?v.params:typeof A=="function"?A(v):A:null,ue=Ja(w,pt({},O,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(g.instances[m]=null)},ref:p}));return wc(n.default,{Component:ue,route:v})||ue}}});function wc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Za=hm;function mm(e){const t=om(e.routes,e),n=e.parseQuery||Uh,s=e.stringifyQuery||cc,i=e.history,a=Ms(),u=Ms(),f=Ms(),p=hd(dr);let v=dr;ds&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=ra.bind(null,H=>""+H),g=ra.bind(null,Sh),w=ra.bind(null,eo);function A(H,de){let W,Ie;return nf(H)?(W=t.getRecordMatcher(H),Ie=de):Ie=H,t.addRoute(Ie,W)}function O(H){const de=t.getRecordMatcher(H);de&&t.removeRoute(de)}function J(){return t.getRoutes().map(H=>H.record)}function ue(H){return!!t.getRecordMatcher(H)}function U(H,de){if(de=pt({},de||p.value),typeof H=="string"){const P=sa(n,H,de.path),G=t.resolve({path:P.path},de),ee=i.createHref(P.fullPath);return pt(P,G,{params:w(G.params),hash:eo(P.hash),redirectedFrom:void 0,href:ee})}let W;if(H.path!=null)W=pt({},H,{path:sa(n,H.path,de.path).path});else{const P=pt({},H.params);for(const G in P)P[G]==null&&delete P[G];W=pt({},H,{params:g(P)}),de.params=g(de.params)}const Ie=t.resolve(W,de),Ue=H.hash||"";Ie.params=m(w(Ie.params));const y=Ah(s,pt({},H,{hash:_h(Ue),path:Ie.path})),_=i.createHref(y);return pt({fullPath:y,hash:Ue,query:s===cc?qh(H.query):H.query||{}},Ie,{redirectedFrom:void 0,href:_})}function N(H){return typeof H=="string"?sa(n,H,p.value.path):pt({},H)}function D(H,de){if(v!==H)return _s(At.NAVIGATION_CANCELLED,{from:de,to:H})}function Q(H){return $e(H)}function Pe(H){return Q(pt(N(H),{replace:!0}))}function je(H,de){const W=H.matched[H.matched.length-1];if(W&&W.redirect){const{redirect:Ie}=W;let Ue=typeof Ie=="function"?Ie(H,de):Ie;return typeof Ue=="string"&&(Ue=Ue.includes("?")||Ue.includes("#")?Ue=N(Ue):{path:Ue},Ue.params={}),pt({query:H.query,hash:H.hash,params:Ue.path!=null?{}:H.params},Ue)}}function $e(H,de){const W=v=U(H),Ie=p.value,Ue=H.state,y=H.force,_=H.replace===!0,P=je(W,Ie);if(P)return $e(pt(N(P),{state:typeof P=="object"?pt({},Ue,P.state):Ue,force:y,replace:_}),de||W);const G=W;G.redirectedFrom=de;let ee;return!y&&Th(s,Ie,W)&&(ee=_s(At.NAVIGATION_DUPLICATED,{to:G,from:Ie}),lt(Ie,Ie,!0,!1)),(ee?Promise.resolve(ee):ze(G,Ie)).catch(te=>Vn(te)?Vn(te,At.NAVIGATION_GUARD_REDIRECT)?te:ot(te):Se(te,G,Ie)).then(te=>{if(te){if(Vn(te,At.NAVIGATION_GUARD_REDIRECT))return $e(pt({replace:_},N(te.to),{state:typeof te.to=="object"?pt({},Ue,te.to.state):Ue,force:y}),de||G)}else te=se(G,Ie,!0,_,Ue);return Ge(G,Ie,te),te})}function at(H,de){const W=D(H,de);return W?Promise.reject(W):Promise.resolve()}function Be(H){const de=M.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(H):H()}function ze(H,de){let W;const[Ie,Ue,y]=Hh(H,de);W=ia(Ie.reverse(),"beforeRouteLeave",H,de);for(const P of Ie)P.leaveGuards.forEach(G=>{W.push(gr(G,H,de))});const _=at.bind(null,H,de);return W.push(_),be(W).then(()=>{W=[];for(const P of a.list())W.push(gr(P,H,de));return W.push(_),be(W)}).then(()=>{W=ia(Ue,"beforeRouteUpdate",H,de);for(const P of Ue)P.updateGuards.forEach(G=>{W.push(gr(G,H,de))});return W.push(_),be(W)}).then(()=>{W=[];for(const P of y)if(P.beforeEnter)if(En(P.beforeEnter))for(const G of P.beforeEnter)W.push(gr(G,H,de));else W.push(gr(P.beforeEnter,H,de));return W.push(_),be(W)}).then(()=>(H.matched.forEach(P=>P.enterCallbacks={}),W=ia(y,"beforeRouteEnter",H,de,Be),W.push(_),be(W))).then(()=>{W=[];for(const P of u.list())W.push(gr(P,H,de));return W.push(_),be(W)}).catch(P=>Vn(P,At.NAVIGATION_CANCELLED)?P:Promise.reject(P))}function Ge(H,de,W){f.list().forEach(Ie=>Be(()=>Ie(H,de,W)))}function se(H,de,W,Ie,Ue){const y=D(H,de);if(y)return y;const _=de===dr,P=ds?history.state:{};W&&(Ie||_?i.replace(H.fullPath,pt({scroll:_&&P&&P.scroll},Ue)):i.push(H.fullPath,Ue)),p.value=H,lt(H,de,W,_),ot()}let Z;function De(){Z||(Z=i.listen((H,de,W)=>{if(!re.listening)return;const Ie=U(H),Ue=je(Ie,re.currentRoute.value);if(Ue){$e(pt(Ue,{replace:!0,force:!0}),Ie).catch(Hs);return}v=Ie;const y=p.value;ds&&jh(lc(y.fullPath,W.delta),vi()),ze(Ie,y).catch(_=>Vn(_,At.NAVIGATION_ABORTED|At.NAVIGATION_CANCELLED)?_:Vn(_,At.NAVIGATION_GUARD_REDIRECT)?($e(pt(N(_.to),{force:!0}),Ie).then(P=>{Vn(P,At.NAVIGATION_ABORTED|At.NAVIGATION_DUPLICATED)&&!W.delta&&W.type===Sa.pop&&i.go(-1,!1)}).catch(Hs),Promise.reject()):(W.delta&&i.go(-W.delta,!1),Se(_,Ie,y))).then(_=>{_=_||se(Ie,y,!1),_&&(W.delta&&!Vn(_,At.NAVIGATION_CANCELLED)?i.go(-W.delta,!1):W.type===Sa.pop&&Vn(_,At.NAVIGATION_ABORTED|At.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Ge(Ie,y,_)}).catch(Hs)}))}let me=Ms(),Ce=Ms(),ne;function Se(H,de,W){ot(H);const Ie=Ce.list();return Ie.length?Ie.forEach(Ue=>Ue(H,de,W)):console.error(H),Promise.reject(H)}function Ye(){return ne&&p.value!==dr?Promise.resolve():new Promise((H,de)=>{me.add([H,de])})}function ot(H){return ne||(ne=!H,De(),me.list().forEach(([de,W])=>H?W(H):de()),me.reset()),H}function lt(H,de,W,Ie){const{scrollBehavior:Ue}=e;if(!ds||!Ue)return Promise.resolve();const y=!W&&Lh(lc(H.fullPath,0))||(Ie||!W)&&history.state&&history.state.scroll||null;return Yt().then(()=>Ue(H,de,y)).then(_=>_&&Nh(_)).catch(_=>Se(_,H,de))}const ie=H=>i.go(H);let q;const M=new Set,re={currentRoute:p,listening:!0,addRoute:A,removeRoute:O,clearRoutes:t.clearRoutes,hasRoute:ue,getRoutes:J,resolve:U,options:e,push:Q,replace:Pe,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:a.add,beforeResolve:u.add,afterEach:f.add,onError:Ce.add,isReady:Ye,install(H){H.component("RouterLink",ps),H.component("RouterView",Za),H.config.globalProperties.$router=re,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>tn(p)}),ds&&!q&&p.value===dr&&(q=!0,Q(i.location).catch(Ie=>{}));const de={};for(const Ie in dr)Object.defineProperty(de,Ie,{get:()=>p.value[Ie],enumerable:!0});H.provide(yi,re),H.provide(Xa,iu(de)),H.provide(Ia,p);const W=H.unmount;M.add(H),H.unmount=function(){M.delete(H),M.size<1&&(v=dr,Z&&Z(),Z=null,p.value=dr,q=!1,ne=!1),W()}}};function be(H){return H.reduce((de,W)=>de.then(()=>Be(W)),Promise.resolve())}return re}function oo(){return kn(yi)}function gm(e){return kn(Xa)}const vm=Zt({__name:"App",setup(e){return(t,n)=>(le(),Fu(tn(Za)))}}),ym="/pwa-icon-192.png";var bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Go={exports:{}},xm=Go.exports,xc;function _m(){return xc||(xc=1,(function(e,t){(function(n,s){e.exports=s()})(xm,function(){var n=function(r,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,c){l.__proto__=c}||function(l,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(l[d]=c[d])})(r,o)},s=function(){return(s=Object.assign||function(r){for(var o,l=1,c=arguments.length;l<c;l++)for(var d in o=arguments[l])Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d]);return r}).apply(this,arguments)};function i(r,o,l){for(var c,d=0,h=o.length;d<h;d++)!c&&d in o||((c=c||Array.prototype.slice.call(o,0,d))[d]=o[d]);return r.concat(c||Array.prototype.slice.call(o))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:bm,u=Object.keys,f=Array.isArray;function p(r,o){return typeof o!="object"||u(o).forEach(function(l){r[l]=o[l]}),r}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var v=Object.getPrototypeOf,m={}.hasOwnProperty;function g(r,o){return m.call(r,o)}function w(r,o){typeof o=="function"&&(o=o(v(r))),(typeof Reflect>"u"?u:Reflect.ownKeys)(o).forEach(function(l){O(r,l,o[l])})}var A=Object.defineProperty;function O(r,o,l,c){A(r,o,p(l&&g(l,"get")&&typeof l.get=="function"?{get:l.get,set:l.set,configurable:!0}:{value:l,configurable:!0,writable:!0},c))}function J(r){return{from:function(o){return r.prototype=Object.create(o.prototype),O(r.prototype,"constructor",r),{extend:w.bind(null,r.prototype)}}}}var ue=Object.getOwnPropertyDescriptor,U=[].slice;function N(r,o,l){return U.call(r,o,l)}function D(r,o){return o(r)}function Q(r){if(!r)throw new Error("Assertion Failed")}function Pe(r){a.setImmediate?setImmediate(r):setTimeout(r,0)}function je(r,o){if(typeof o=="string"&&g(r,o))return r[o];if(!o)return r;if(typeof o!="string"){for(var l=[],c=0,d=o.length;c<d;++c){var h=je(r,o[c]);l.push(h)}return l}var b=o.indexOf(".");if(b!==-1){var E=r[o.substr(0,b)];return E==null?void 0:je(E,o.substr(b+1))}}function $e(r,o,l){if(r&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof o!="string"&&"length"in o){Q(typeof l!="string"&&"length"in l);for(var c=0,d=o.length;c<d;++c)$e(r,o[c],l[c])}else{var h,b,E=o.indexOf(".");E!==-1?(h=o.substr(0,E),(b=o.substr(E+1))===""?l===void 0?f(r)&&!isNaN(parseInt(h))?r.splice(h,1):delete r[h]:r[h]=l:$e(E=!(E=r[h])||!g(r,h)?r[h]={}:E,b,l)):l===void 0?f(r)&&!isNaN(parseInt(o))?r.splice(o,1):delete r[o]:r[o]=l}}function at(r){var o,l={};for(o in r)g(r,o)&&(l[o]=r[o]);return l}var Be=[].concat;function ze(r){return Be.apply([],r)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ze([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(o){return o+r+"Array"})}))).filter(function(r){return a[r]}),Ge=new Set(Qe.map(function(r){return a[r]})),se=null;function Z(r){return se=new WeakMap,r=(function o(l){if(!l||typeof l!="object")return l;var c=se.get(l);if(c)return c;if(f(l)){c=[],se.set(l,c);for(var d=0,h=l.length;d<h;++d)c.push(o(l[d]))}else if(Ge.has(l.constructor))c=l;else{var b,E=v(l);for(b in c=E===Object.prototype?{}:Object.create(E),se.set(l,c),l)g(l,b)&&(c[b]=o(l[b]))}return c})(r),se=null,r}var De={}.toString;function me(r){return De.call(r).slice(8,-1)}var Ce=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof Ce=="symbol"?function(r){var o;return r!=null&&(o=r[Ce])&&o.apply(r)}:function(){return null};function Se(r,o){return o=r.indexOf(o),0<=o&&r.splice(o,1),0<=o}var Ye={};function ot(r){var o,l,c,d;if(arguments.length===1){if(f(r))return r.slice();if(this===Ye&&typeof r=="string")return[r];if(d=ne(r)){for(l=[];!(c=d.next()).done;)l.push(c.value);return l}if(r==null)return[r];if(typeof(o=r.length)!="number")return[r];for(l=new Array(o);o--;)l[o]=r[o];return l}for(o=arguments.length,l=new Array(o);o--;)l[o]=arguments[o];return l}var lt=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],hn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ve),ie={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function q(r,o){this.name=r,this.message=o}function M(r,o){return r+". Errors: "+Object.keys(o).map(function(l){return o[l].toString()}).filter(function(l,c,d){return d.indexOf(l)===c}).join(`
`)}function re(r,o,l,c){this.failures=o,this.failedKeys=c,this.successCount=l,this.message=M(r,o)}function be(r,o){this.name="BulkError",this.failures=Object.keys(o).map(function(l){return o[l]}),this.failuresByPos=o,this.message=M(r,this.failures)}J(q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),J(re).from(q),J(be).from(q);var H=hn.reduce(function(r,o){return r[o]=o+"Error",r},{}),de=q,W=hn.reduce(function(r,o){var l=o+"Error";function c(d,h){this.name=l,d?typeof d=="string"?(this.message="".concat(d).concat(h?`
 `+h:""),this.inner=h||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=ie[o]||l,this.inner=null)}return J(c).from(de),r[o]=c,r},{});W.Syntax=SyntaxError,W.Type=TypeError,W.Range=RangeError;var Ie=Ve.reduce(function(r,o){return r[o+"Error"]=W[o],r},{}),Ue=hn.reduce(function(r,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(r[o+"Error"]=W[o]),r},{});function y(){}function _(r){return r}function P(r,o){return r==null||r===_?o:function(l){return o(r(l))}}function G(r,o){return function(){r.apply(this,arguments),o.apply(this,arguments)}}function ee(r,o){return r===y?o:function(){var l=r.apply(this,arguments);l!==void 0&&(arguments[0]=l);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var h=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?G(c,this.onsuccess):c),d&&(this.onerror=this.onerror?G(d,this.onerror):d),h!==void 0?h:l}}function te(r,o){return r===y?o:function(){r.apply(this,arguments);var l=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),l&&(this.onsuccess=this.onsuccess?G(l,this.onsuccess):l),c&&(this.onerror=this.onerror?G(c,this.onerror):c)}}function xe(r,o){return r===y?o:function(l){var c=r.apply(this,arguments);p(l,c);var d=this.onsuccess,h=this.onerror;return this.onsuccess=null,this.onerror=null,l=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?G(d,this.onsuccess):d),h&&(this.onerror=this.onerror?G(h,this.onerror):h),c===void 0?l===void 0?void 0:l:p(c,l)}}function ye(r,o){return r===y?o:function(){return o.apply(this,arguments)!==!1&&r.apply(this,arguments)}}function pe(r,o){return r===y?o:function(){var l=r.apply(this,arguments);if(l&&typeof l.then=="function"){for(var c=this,d=arguments.length,h=new Array(d);d--;)h[d]=arguments[d];return l.then(function(){return o.apply(c,h)})}return o.apply(this,arguments)}}Ue.ModifyError=re,Ue.DexieError=q,Ue.BulkError=be;var oe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _e(r){oe=r}var Ae={},Fe=100,Qe=typeof Promise>"u"?[]:(function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,v(r),r];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,v(o),r]})(),Ve=Qe[0],hn=Qe[1],Qe=Qe[2],hn=hn&&hn.then,et=Ve&&Ve.constructor,rt=!!Qe,It=function(r,o){In.push([r,o]),Lt&&(queueMicrotask(_i),Lt=!1)},Tt=!0,Lt=!0,Dt=[],rn=[],tr=_,Ct={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:y,pgp:!1,env:{},finalize:y},Me=Ct,In=[],dn=0,Qr=[];function Re(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=Me;if(typeof r!="function"){if(r!==Ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&sn(this,this._value))}this._state=null,this._value=null,++o.ref,(function l(c,d){try{d(function(h){if(c._state===null){if(h===c)throw new TypeError("A promise cannot be resolved with itself.");var b=c._lib&&nr();h&&typeof h.then=="function"?l(c,function(E,T){h instanceof Re?h._then(E,T):h.then(E,T)}):(c._state=!0,c._value=h,co(c)),b&&rr()}},sn.bind(null,c))}catch(h){sn(c,h)}})(this,r)}var Xr={get:function(){var r=Me,o=or;function l(c,d){var h=this,b=!r.global&&(r!==Me||o!==or),E=b&&!pn(),T=new Re(function(R,B){Sr(h,new lo(ts(c,r,b,E),ts(d,r,b,E),R,B,r))});return this._consoleTask&&(T._consoleTask=this._consoleTask),T}return l.prototype=Ae,l},set:function(r){O(this,"then",r&&r.prototype===Ae?Xr:{get:function(){return r},set:Xr.set})}};function lo(r,o,l,c,d){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof o=="function"?o:null,this.resolve=l,this.reject=c,this.psd=d}function sn(r,o){var l,c;rn.push(o),r._state===null&&(l=r._lib&&nr(),o=tr(o),r._state=!1,r._value=o,c=r,Dt.some(function(d){return d._value===c._value})||Dt.push(c),co(r),l&&rr())}function co(r){var o=r._listeners;r._listeners=[];for(var l=0,c=o.length;l<c;++l)Sr(r,o[l]);var d=r._PSD;--d.ref||d.finalize(),dn===0&&(++dn,It(function(){--dn==0&&Zr()},[]))}function Sr(r,o){if(r._state!==null){var l=r._state?o.onFulfilled:o.onRejected;if(l===null)return(r._state?o.resolve:o.reject)(r._value);++o.psd.ref,++dn,It(uo,[l,r,o])}else r._listeners.push(o)}function uo(r,o,l){try{var c,d=o._value;!o._state&&rn.length&&(rn=[]),c=oe&&o._consoleTask?o._consoleTask.run(function(){return r(d)}):r(d),o._state||rn.indexOf(d)!==-1||(function(h){for(var b=Dt.length;b;)if(Dt[--b]._value===h._value)return Dt.splice(b,1)})(o),l.resolve(c)}catch(h){l.reject(h)}finally{--dn==0&&Zr(),--l.psd.ref||l.psd.finalize()}}function _i(){Tn(Ct,function(){nr()&&rr()})}function nr(){var r=Tt;return Lt=Tt=!1,r}function rr(){var r,o,l;do for(;0<In.length;)for(r=In,In=[],l=r.length,o=0;o<l;++o){var c=r[o];c[0].apply(null,c[1])}while(0<In.length);Lt=Tt=!0}function Zr(){var r=Dt;Dt=[],r.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=Qr.slice(0),l=o.length;l;)o[--l]()}function sr(r){return new Re(Ae,!1,r)}function wt(r,o){var l=Me;return function(){var c=nr(),d=Me;try{return An(l,!0),r.apply(this,arguments)}catch(h){o&&o(h)}finally{An(d,!1),c&&rr()}}}w(Re.prototype,{then:Xr,_then:function(r,o){Sr(this,new lo(null,null,r,o,Me))},catch:function(r){if(arguments.length===1)return this.then(null,r);var o=r,l=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?l:sr)(c)}):this.then(null,function(c){return(c&&c.name===o?l:sr)(c)})},finally:function(r){return this.then(function(o){return Re.resolve(r()).then(function(){return o})},function(o){return Re.resolve(r()).then(function(){return sr(o)})})},timeout:function(r,o){var l=this;return r<1/0?new Re(function(c,d){var h=setTimeout(function(){return d(new W.Timeout(o))},r);l.then(c,d).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&O(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),Ct.env=po(),w(Re,{all:function(){var r=ot.apply(null,arguments).map(ir);return new Re(function(o,l){r.length===0&&o([]);var c=r.length;r.forEach(function(d,h){return Re.resolve(d).then(function(b){r[h]=b,--c||o(r)},l)})})},resolve:function(r){return r instanceof Re?r:r&&typeof r.then=="function"?new Re(function(o,l){r.then(o,l)}):new Re(Ae,!0,r)},reject:sr,race:function(){var r=ot.apply(null,arguments).map(ir);return new Re(function(o,l){r.map(function(c){return Re.resolve(c).then(o,l)})})},PSD:{get:function(){return Me},set:function(r){return Me=r}},totalEchoes:{get:function(){return or}},newPSD:wn,usePSD:Tn,scheduler:{get:function(){return It},set:function(r){It=r}},rejectionMapper:{get:function(){return tr},set:function(r){tr=r}},follow:function(r,o){return new Re(function(l,c){return wn(function(d,h){var b=Me;b.unhandleds=[],b.onunhandled=h,b.finalize=G(function(){var E,T=this;E=function(){T.unhandleds.length===0?d():h(T.unhandleds[0])},Qr.push(function R(){E(),Qr.splice(Qr.indexOf(R),1)}),++dn,It(function(){--dn==0&&Zr()},[])},b.finalize),r()},o,l,c)})}}),et&&(et.allSettled&&O(Re,"allSettled",function(){var r=ot.apply(null,arguments).map(ir);return new Re(function(o){r.length===0&&o([]);var l=r.length,c=new Array(l);r.forEach(function(d,h){return Re.resolve(d).then(function(b){return c[h]={status:"fulfilled",value:b}},function(b){return c[h]={status:"rejected",reason:b}}).then(function(){return--l||o(c)})})})}),et.any&&typeof AggregateError<"u"&&O(Re,"any",function(){var r=ot.apply(null,arguments).map(ir);return new Re(function(o,l){r.length===0&&l(new AggregateError([]));var c=r.length,d=new Array(c);r.forEach(function(h,b){return Re.resolve(h).then(function(E){return o(E)},function(E){d[b]=E,--c||l(new AggregateError(d))})})})}),et.withResolvers&&(Re.withResolvers=et.withResolvers));var Pt={awaits:0,echoes:0,id:0},ki=0,Er=[],es=0,or=0,Ci=0;function wn(r,o,l,c){var d=Me,h=Object.create(d);return h.parent=d,h.ref=0,h.global=!1,h.id=++Ci,Ct.env,h.env=rt?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},o&&p(h,o),++d.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},c=Tn(h,r,l,c),h.ref===0&&h.finalize(),c}function Nn(){return Pt.id||(Pt.id=++ki),++Pt.awaits,Pt.echoes+=Fe,Pt.id}function pn(){return!!Pt.awaits&&(--Pt.awaits==0&&(Pt.id=0),Pt.echoes=Pt.awaits*Fe,!0)}function ir(r){return Pt.echoes&&r&&r.constructor===et?(Nn(),r.then(function(o){return pn(),o},function(o){return pn(),St(o)})):r}function fo(){var r=Er[Er.length-1];Er.pop(),An(r,!1)}function An(r,o){var l,c=Me;(o?!Pt.echoes||es++&&r===Me:!es||--es&&r===Me)||queueMicrotask(o?(function(d){++or,Pt.echoes&&--Pt.echoes!=0||(Pt.echoes=Pt.awaits=Pt.id=0),Er.push(Me),An(d,!0)}).bind(null,r):fo),r!==Me&&(Me=r,c===Ct&&(Ct.env=po()),rt&&(l=Ct.env.Promise,o=r.env,(c.global||r.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),l.all=o.all,l.race=o.race,l.resolve=o.resolve,l.reject=o.reject,o.allSettled&&(l.allSettled=o.allSettled),o.any&&(l.any=o.any))))}function po(){var r=a.Promise;return rt?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function Tn(r,o,l,c,d){var h=Me;try{return An(r,!0),o(l,c,d)}finally{An(h,!1)}}function ts(r,o,l,c){return typeof r!="function"?r:function(){var d=Me;l&&Nn(),An(o,!0);try{return r.apply(this,arguments)}finally{An(d,!1),c&&queueMicrotask(pn)}}}function ns(r){Promise===et&&Pt.echoes===0?es===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}(""+hn).indexOf("[native code]")===-1&&(Nn=pn=y);var St=Re.reject,jn="",xn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ho="String expected.",ar=[],rs="__dbnames",Ss="readonly",Es="readwrite";function Ln(r,o){return r?o?function(){return r.apply(this,arguments)&&o.apply(this,arguments)}:r:o}var mo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ss(r){return typeof r!="string"||/\./.test(r)?function(o){return o}:function(o){return o[r]===void 0&&r in o&&delete(o=Z(o))[r],o}}function Ir(){throw W.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(r,o){try{var l=Is(r),c=Is(o);if(l!==c)return l==="Array"?1:c==="Array"?-1:l==="binary"?1:c==="binary"?-1:l==="string"?1:c==="string"?-1:l==="Date"?1:c!=="Date"?NaN:-1;switch(l){case"number":case"Date":case"string":return o<r?1:r<o?-1:0;case"binary":return(function(d,h){for(var b=d.length,E=h.length,T=b<E?b:E,R=0;R<T;++R)if(d[R]!==h[R])return d[R]<h[R]?-1:1;return b===E?0:b<E?-1:1})(go(r),go(o));case"Array":return(function(d,h){for(var b=d.length,E=h.length,T=b<E?b:E,R=0;R<T;++R){var B=ct(d[R],h[R]);if(B!==0)return B}return b===E?0:b<E?-1:1})(r,o)}}catch{}return NaN}function Is(r){var o=typeof r;return o!="object"?o:ArrayBuffer.isView(r)?"binary":(r=me(r),r==="ArrayBuffer"?"binary":r)}function go(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}function os(r,o,l){var c=r.schema.yProps;return c?(o&&0<l.numFailures&&(o=o.filter(function(d,h){return!l.failures[h]})),Promise.all(c.map(function(d){return d=d.updatesTable,o?r.db.table(d).where("k").anyOf(o).delete():r.db.table(d).clear()})).then(function(){return l})):l}var Ar=(vo.prototype.execute=function(r){var o=this["@@propmod"];if(o.add!==void 0){var l=o.add;if(f(l))return i(i([],f(r)?r:[],!0),l).sort();if(typeof l=="number")return(Number(r)||0)+l;if(typeof l=="bigint")try{return BigInt(r)+l}catch{return BigInt(0)+l}throw new TypeError("Invalid term ".concat(l))}if(o.remove!==void 0){var c=o.remove;if(f(c))return f(r)?r.filter(function(d){return!c.includes(d)}).sort():[];if(typeof c=="number")return Number(r)-c;if(typeof c=="bigint")try{return BigInt(r)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return l=(l=o.replacePrefix)===null||l===void 0?void 0:l[0],l&&typeof r=="string"&&r.startsWith(l)?o.replacePrefix[1]+r.substring(l.length):r},vo);function vo(r){this["@@propmod"]=r}function yo(r,o){for(var l=u(o),c=l.length,d=!1,h=0;h<c;++h){var b=l[h],E=o[b],T=je(r,b);E instanceof Ar?($e(r,b,E.execute(T)),d=!0):T!==E&&($e(r,b,E),d=!0)}return d}var bo=(gt.prototype._trans=function(r,o,l){var c=this._tx||Me.trans,d=this.name,h=oe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function b(R,B,I){if(!I.schema[d])throw new W.NotFound("Table "+d+" not part of transaction");return o(I.idbtrans,I)}var E=nr();try{var T=c&&c.db._novip===this.db._novip?c===Me.trans?c._promise(r,b,l):wn(function(){return c._promise(r,b,l)},{trans:c,transless:Me.transless||Me}):(function R(B,I,K,$){if(B.idbdb&&(B._state.openComplete||Me.letThrough||B._vip)){var j=B._createTransaction(I,K,B._dbSchema);try{j.create(),B._state.PR1398_maxLoop=3}catch(L){return L.name===H.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,I,K,$)})):St(L)}return j._promise(I,function(L,F){return wn(function(){return Me.trans=j,$(L,F,j)})}).then(function(L){if(I==="readwrite")try{j.idbtrans.commit()}catch{}return I==="readonly"?L:j._completion.then(function(){return L})})}if(B._state.openComplete)return St(new W.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return St(new W.DatabaseClosed);B.open().catch(y)}return B._state.dbReadyPromise.then(function(){return R(B,I,K,$)})})(this.db,r,[this.name],b);return h&&(T._consoleTask=h,T=T.catch(function(R){return console.trace(R),St(R)})),T}finally{E&&rr()}},gt.prototype.get=function(r,o){var l=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?St(new W.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return l.core.get({trans:c,key:r}).then(function(d){return l.hook.reading.fire(d)})}).then(o)},gt.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(f(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=u(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var l=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&o.every(function(R){return 0<=E.keyPath.indexOf(R)})){for(var T=0;T<o.length;++T)if(o.indexOf(E.keyPath[T])===-1)return!1;return!0}return!1}).sort(function(E,T){return E.keyPath.length-T.keyPath.length})[0];if(l&&this.db._maxKey!==jn){var h=l.keyPath.slice(0,o.length);return this.where(h).equals(h.map(function(T){return r[T]}))}!l&&oe&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName;function d(E,T){return ct(E,T)===0}var b=o.reduce(function(I,T){var R=I[0],B=I[1],I=c[T],K=r[T];return[R||I,R||!I?Ln(B,I&&I.multi?function($){return $=je($,T),f($)&&$.some(function(j){return d(K,j)})}:function($){return d(K,je($,T))}):B]},[null,null]),h=b[0],b=b[1];return h?this.where(h.name).equals(r[h.keyPath]).filter(b):l?this.filter(b):this.where(o).equals("")},gt.prototype.filter=function(r){return this.toCollection().and(r)},gt.prototype.count=function(r){return this.toCollection().count(r)},gt.prototype.offset=function(r){return this.toCollection().offset(r)},gt.prototype.limit=function(r){return this.toCollection().limit(r)},gt.prototype.each=function(r){return this.toCollection().each(r)},gt.prototype.toArray=function(r){return this.toCollection().toArray(r)},gt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},gt.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,f(r)?"[".concat(r.join("+"),"]"):r))},gt.prototype.reverse=function(){return this.toCollection().reverse()},gt.prototype.mapToClass=function(r){var o,l=this.db,c=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=r).prototype instanceof Ir&&((function(T,R){if(typeof R!="function"&&R!==null)throw new TypeError("Class extends value "+String(R)+" is not a constructor or null");function B(){this.constructor=T}n(T,R),T.prototype=R===null?Object.create(R):(B.prototype=R.prototype,new B)})(d,o=r),Object.defineProperty(d.prototype,"db",{get:function(){return l},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},r=d);for(var h=new Set,b=r.prototype;b;b=v(b))Object.getOwnPropertyNames(b).forEach(function(T){return h.add(T)});function E(T){if(!T)return T;var R,B=Object.create(r.prototype);for(R in T)if(!h.has(R))try{B[R]=T[R]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),r},gt.prototype.defineClass=function(){return this.mapToClass(function(r){p(this,r)})},gt.prototype.add=function(r,o){var l=this,c=this.schema.primKey,d=c.auto,h=c.keyPath,b=r;return h&&d&&(b=ss(h)(r)),this._trans("readwrite",function(E){return l.core.mutate({trans:E,type:"add",keys:o!=null?[o]:null,values:[b]})}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):E.lastResult}).then(function(E){if(h)try{$e(r,h,E)}catch{}return E})},gt.prototype.upsert=function(r,o){var l=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return l.core.get({trans:d,key:r}).then(function(h){var b=h??{};return yo(b,o),c&&$e(b,c,r),l.core.mutate({trans:d,type:"put",values:[b],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):!!h})})})},gt.prototype.update=function(r,o){return typeof r!="object"||f(r)?this.where(":id").equals(r).modify(o):(r=je(r,this.schema.primKey.keyPath),r===void 0?St(new W.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(o))},gt.prototype.put=function(r,o){var l=this,c=this.schema.primKey,d=c.auto,h=c.keyPath,b=r;return h&&d&&(b=ss(h)(r)),this._trans("readwrite",function(E){return l.core.mutate({trans:E,type:"put",values:[b],keys:o!=null?[o]:null})}).then(function(E){return E.numFailures?Re.reject(E.failures[0]):E.lastResult}).then(function(E){if(h)try{$e(r,h,E)}catch{}return E})},gt.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(l){return o.core.mutate({trans:l,type:"delete",keys:[r]}).then(function(c){return os(o,[r],c)}).then(function(c){return c.numFailures?Re.reject(c.failures[0]):void 0})})},gt.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:mo}).then(function(l){return os(r,null,l)})}).then(function(o){return o.numFailures?Re.reject(o.failures[0]):void 0})},gt.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(l){return o.core.getMany({keys:r,trans:l}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},gt.prototype.bulkAdd=function(r,o,l){var c=this,d=Array.isArray(o)?o:void 0,h=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(b){var R=c.schema.primKey,E=R.auto,R=R.keyPath;if(R&&d)throw new W.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var T=r.length,R=R&&E?r.map(ss(R)):r;return c.core.mutate({trans:b,type:"add",keys:d,values:R,wantResults:h}).then(function(j){var I=j.numFailures,K=j.results,$=j.lastResult,j=j.failures;if(I===0)return h?K:$;throw new be("".concat(c.name,".bulkAdd(): ").concat(I," of ").concat(T," operations failed"),j)})})},gt.prototype.bulkPut=function(r,o,l){var c=this,d=Array.isArray(o)?o:void 0,h=(l=l||(d?void 0:o))?l.allKeys:void 0;return this._trans("readwrite",function(b){var R=c.schema.primKey,E=R.auto,R=R.keyPath;if(R&&d)throw new W.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new W.InvalidArgument("Arguments objects and keys must have the same length");var T=r.length,R=R&&E?r.map(ss(R)):r;return c.core.mutate({trans:b,type:"put",keys:d,values:R,wantResults:h}).then(function(j){var I=j.numFailures,K=j.results,$=j.lastResult,j=j.failures;if(I===0)return h?K:$;throw new be("".concat(c.name,".bulkPut(): ").concat(I," of ").concat(T," operations failed"),j)})})},gt.prototype.bulkUpdate=function(r){var o=this,l=this.core,c=r.map(function(b){return b.key}),d=r.map(function(b){return b.changes}),h=[];return this._trans("readwrite",function(b){return l.getMany({trans:b,keys:c,cache:"clone"}).then(function(E){var T=[],R=[];r.forEach(function(I,K){var $=I.key,j=I.changes,L=E[K];if(L){for(var F=0,V=Object.keys(j);F<V.length;F++){var z=V[F],X=j[z];if(z===o.schema.primKey.keyPath){if(ct(X,$)!==0)throw new W.Constraint("Cannot update primary key in bulkUpdate()")}else $e(L,z,X)}h.push(K),T.push($),R.push(L)}});var B=T.length;return l.mutate({trans:b,type:"put",keys:T,values:R,updates:{keys:c,changeSpecs:d}}).then(function(I){var K=I.numFailures,$=I.failures;if(K===0)return B;for(var j=0,L=Object.keys($);j<L.length;j++){var F,V=L[j],z=h[Number(V)];z!=null&&(F=$[V],delete $[V],$[z]=F)}throw new be("".concat(o.name,".bulkUpdate(): ").concat(K," of ").concat(B," operations failed"),$)})})})},gt.prototype.bulkDelete=function(r){var o=this,l=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return os(o,r,d)})}).then(function(b){var d=b.numFailures,h=b.lastResult,b=b.failures;if(d===0)return h;throw new be("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(l," operations failed"),b)})},gt);function gt(){}function Tr(r){function o(b,E){if(E){for(var T=arguments.length,R=new Array(T-1);--T;)R[T-1]=arguments[T];return l[b].subscribe.apply(null,R),r}if(typeof b=="string")return l[b]}var l={};o.addEventType=h;for(var c=1,d=arguments.length;c<d;++c)h(arguments[c]);return o;function h(b,E,T){if(typeof b!="object"){var R;E=E||ye;var B={subscribers:[],fire:T=T||y,subscribe:function(I){B.subscribers.indexOf(I)===-1&&(B.subscribers.push(I),B.fire=E(B.fire,I))},unsubscribe:function(I){B.subscribers=B.subscribers.filter(function(K){return K!==I}),B.fire=B.subscribers.reduce(E,T)}};return l[b]=o[b]=B}u(R=b).forEach(function(I){var K=R[I];if(f(K))h(I,R[I][0],R[I][1]);else{if(K!=="asap")throw new W.InvalidArgument("Invalid event config");var $=h(I,_,function(){for(var j=arguments.length,L=new Array(j);j--;)L[j]=arguments[j];$.subscribers.forEach(function(F){Pe(function(){F.apply(null,L)})})})}})}}function Or(r,o){return J(o).from({prototype:r}),o}function lr(r,o){return!(r.filter||r.algorithm||r.or)&&(o?r.justLimit:!r.replayFilter)}function As(r,o){r.filter=Ln(r.filter,o)}function Ts(r,o,l){var c=r.replayFilter;r.replayFilter=c?function(){return Ln(c(),o())}:o,r.justLimit=l&&!c}function Rr(r,o){if(r.isPrimKey)return o.primaryKey;var l=o.getIndexByKeyPath(r.index);if(!l)throw new W.Schema("KeyPath "+r.index+" on object store "+o.name+" is not indexed");return l}function wo(r,o,l){var c=Rr(r,o.schema);return o.openCursor({trans:l,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:c,range:r.range}})}function Dr(r,o,l,c){var d=r.replayFilter?Ln(r.filter,r.replayFilter()):r.filter;if(r.or){var h={},b=function(E,T,R){var B,I;d&&!d(T,R,function(K){return T.stop(K)},function(K){return T.fail(K)})||((I=""+(B=T.primaryKey))=="[object ArrayBuffer]"&&(I=""+new Uint8Array(B)),g(h,I)||(h[I]=!0,o(E,T,R)))};return Promise.all([r.or._iterate(b,l),xo(wo(r,c,l),r.algorithm,b,!r.keysOnly&&r.valueMapper)])}return xo(wo(r,c,l),Ln(r.algorithm,d),o,!r.keysOnly&&r.valueMapper)}function xo(r,o,l,c){var d=wt(c?function(h,b,E){return l(c(h),b,E)}:l);return r.then(function(h){if(h)return h.start(function(){var b=function(){return h.continue()};o&&!o(h,function(E){return b=E},function(E){h.stop(E),b=y},function(E){h.fail(E),b=y})||d(h.value,h,function(E){return b=E}),b()})})}var Si=(ut.prototype._read=function(r,o){var l=this._ctx;return l.error?l.table._trans(null,St.bind(null,l.error)):l.table._trans("readonly",r).then(o)},ut.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,St.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},ut.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=Ln(o.algorithm,r)},ut.prototype._iterate=function(r,o){return Dr(this._ctx,r,o,this._ctx.table.core)},ut.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),l=Object.create(this._ctx);return r&&p(l,r),o._ctx=l,o},ut.prototype.raw=function(){return this._ctx.valueMapper=null,this},ut.prototype.each=function(r){var o=this._ctx;return this._read(function(l){return Dr(o,r,l,o.table.core)})},ut.prototype.count=function(r){var o=this;return this._read(function(l){var c=o._ctx,d=c.table.core;if(lr(c,!0))return d.count({trans:l,query:{index:Rr(c,d.schema),range:c.range}}).then(function(b){return Math.min(b,c.limit)});var h=0;return Dr(c,function(){return++h,!1},l,d).then(function(){return h})}).then(r)},ut.prototype.sortBy=function(r,o){var l=r.split(".").reverse(),c=l[0],d=l.length-1;function h(T,R){return R?h(T[l[R]],R-1):T[c]}var b=this._ctx.dir==="next"?1:-1;function E(T,R){return ct(h(T,d),h(R,d))*b}return this.toArray(function(T){return T.sort(E)}).then(o)},ut.prototype.toArray=function(r){var o=this;return this._read(function(l){var c=o._ctx;if(c.dir==="next"&&lr(c,!0)&&0<c.limit){var d=c.valueMapper,h=Rr(c,c.table.core.schema);return c.table.core.query({trans:l,limit:c.limit,values:!0,query:{index:h,range:c.range}}).then(function(E){return E=E.result,d?E.map(d):E})}var b=[];return Dr(c,function(E){return b.push(E)},l,c.table.core).then(function(){return b})},r)},ut.prototype.offset=function(r){var o=this._ctx;return r<=0||(o.offset+=r,lr(o)?Ts(o,function(){var l=r;return function(c,d){return l===0||(l===1?--l:d(function(){c.advance(l),l=0}),!1)}}):Ts(o,function(){var l=r;return function(){return--l<0}})),this},ut.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),Ts(this._ctx,function(){var o=r;return function(l,c,d){return--o<=0&&c(d),0<=o}},!0),this},ut.prototype.until=function(r,o){return As(this._ctx,function(l,c,d){return!r(l.value)||(c(d),o)}),this},ut.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},ut.prototype.last=function(r){return this.reverse().first(r)},ut.prototype.filter=function(r){var o;return As(this._ctx,function(l){return r(l.value)}),(o=this._ctx).isMatch=Ln(o.isMatch,r),this},ut.prototype.and=function(r){return this.filter(r)},ut.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},ut.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ut.prototype.desc=function(){return this.reverse()},ut.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){r(c.key,c)})},ut.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},ut.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(l,c){r(c.primaryKey,c)})},ut.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,d){l.push(d.key)}).then(function(){return l}).then(r)},ut.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&lr(o,!0)&&0<o.limit)return this._read(function(c){var d=Rr(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){return c.result}).then(r);o.keysOnly=!o.isMatch;var l=[];return this.each(function(c,d){l.push(d.primaryKey)}).then(function(){return l}).then(r)},ut.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},ut.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},ut.prototype.lastKey=function(r){return this.reverse().firstKey(r)},ut.prototype.distinct=function(){var r=this._ctx,r=r.index&&r.table.schema.idxByName[r.index];if(!r||!r.multi)return this;var o={};return As(this._ctx,function(d){var c=d.primaryKey.toString(),d=g(o,c);return o[c]=!0,!d}),this},ut.prototype.modify=function(r){var o=this,l=this._ctx;return this._write(function(c){var d=typeof r=="function"?r:function(L){return yo(L,r)},h=l.table.core,R=h.schema.primaryKey,b=R.outbound,E=R.extractKey,T=200,R=o.db._options.modifyChunkSize;R&&(T=typeof R=="object"?R[h.name]||R["*"]||200:R);function B(L,z){var V=z.failures,z=z.numFailures;K+=L-z;for(var X=0,ae=u(V);X<ae.length;X++){var ve=ae[X];I.push(V[ve])}}var I=[],K=0,$=[],j=r===is;return o.clone().primaryKeys().then(function(L){function F(z){var X=Math.min(T,L.length-z),ae=L.slice(z,z+X);return(j?Promise.resolve([]):h.getMany({trans:c,keys:ae,cache:"immutable"})).then(function(ve){var Te=[],ge=[],we=b?[]:null,Oe=j?ae:[];if(!j)for(var ke=0;ke<X;++ke){var Ke=ve[ke],tt={value:Z(Ke),primKey:L[z+ke]};d.call(tt,tt.value,tt)!==!1&&(tt.value==null?Oe.push(L[z+ke]):b||ct(E(Ke),E(tt.value))===0?(ge.push(tt.value),b&&we.push(L[z+ke])):(Oe.push(L[z+ke]),Te.push(tt.value)))}return Promise.resolve(0<Te.length&&h.mutate({trans:c,type:"add",values:Te}).then(function(st){for(var it in st.failures)Oe.splice(parseInt(it),1);B(Te.length,st)})).then(function(){return(0<ge.length||V&&typeof r=="object")&&h.mutate({trans:c,type:"put",keys:we,values:ge,criteria:V,changeSpec:typeof r!="function"&&r,isAdditionalChunk:0<z}).then(function(st){return B(ge.length,st)})}).then(function(){return(0<Oe.length||V&&j)&&h.mutate({trans:c,type:"delete",keys:Oe,criteria:V,isAdditionalChunk:0<z}).then(function(st){return os(l.table,Oe,st)}).then(function(st){return B(Oe.length,st)})}).then(function(){return L.length>z+X&&F(z+T)})})}var V=lr(l)&&l.limit===1/0&&(typeof r!="function"||j)&&{index:l.index,range:l.range};return F(0).then(function(){if(0<I.length)throw new re("Error modifying one or more objects",I,K,$);return L.length})})})},ut.prototype.delete=function(){var r=this._ctx,o=r.range;return!lr(r)||r.table.schema.yProps||!r.isPrimKey&&o.type!==3?this.modify(is):this._write(function(l){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:l,query:{index:c,range:d}}).then(function(h){return r.table.core.mutate({trans:l,type:"deleteRange",range:d}).then(function(T){var E=T.failures,T=T.numFailures;if(T)throw new re("Could not delete some values",Object.keys(E).map(function(R){return E[R]}),h-T);return h-T})})})},ut);function ut(){}var is=function(r,o){return o.value=null};function Ei(r,o){return r<o?-1:r===o?0:1}function Pr(r,o){return o<r?-1:r===o?0:1}function Bt(r,o,l){return r=r instanceof S?new r.Collection(r):r,r._ctx.error=new(l||TypeError)(o),r}function Bn(r){return new r.Collection(r,function(){return x("")}).limit(0)}function as(r,o,l,c){var d,h,b,E,T,R,B,I=l.length;if(!l.every(function(j){return typeof j=="string"}))return Bt(r,ho);function K(j){d=j==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},h=j==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},b=j==="next"?Ei:Pr;var L=l.map(function(F){return{lower:h(F),upper:d(F)}}).sort(function(F,V){return b(F.lower,V.lower)});E=L.map(function(F){return F.upper}),T=L.map(function(F){return F.lower}),B=(R=j)==="next"?"":c}K("next"),r=new r.Collection(r,function(){return On(E[0],T[I-1]+c)}),r._ondirectionchange=function(j){K(j)};var $=0;return r._addAlgorithm(function(j,L,F){var V=j.key;if(typeof V!="string")return!1;var z=h(V);if(o(z,T,$))return!0;for(var X=null,ae=$;ae<I;++ae){var ve=(function(Te,ge,we,Oe,ke,Ke){for(var tt=Math.min(Te.length,Oe.length),st=-1,it=0;it<tt;++it){var an=ge[it];if(an!==Oe[it])return ke(Te[it],we[it])<0?Te.substr(0,it)+we[it]+we.substr(it+1):ke(Te[it],Oe[it])<0?Te.substr(0,it)+Oe[it]+we.substr(it+1):0<=st?Te.substr(0,st)+ge[st]+we.substr(st+1):null;ke(Te[it],an)<0&&(st=it)}return tt<Oe.length&&Ke==="next"?Te+we.substr(Te.length):tt<Te.length&&Ke==="prev"?Te.substr(0,we.length):st<0?null:Te.substr(0,st)+Oe[st]+we.substr(st+1)})(V,z,E[ae],T[ae],b,R);ve===null&&X===null?$=ae+1:(X===null||0<b(X,ve))&&(X=ve)}return L(X!==null?function(){j.continue(X+B)}:F),!1}),r}function On(r,o,l,c){return{type:2,lower:r,upper:o,lowerOpen:l,upperOpen:c}}function x(r){return{type:1,lower:r,upper:r}}var S=(Object.defineProperty(C.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),C.prototype.between=function(r,o,l,c){l=l!==!1,c=c===!0;try{return 0<this._cmp(r,o)||this._cmp(r,o)===0&&(l||c)&&(!l||!c)?Bn(this):new this.Collection(this,function(){return On(r,o,!l,!c)})}catch{return Bt(this,xn)}},C.prototype.equals=function(r){return r==null?Bt(this,xn):new this.Collection(this,function(){return x(r)})},C.prototype.above=function(r){return r==null?Bt(this,xn):new this.Collection(this,function(){return On(r,void 0,!0)})},C.prototype.aboveOrEqual=function(r){return r==null?Bt(this,xn):new this.Collection(this,function(){return On(r,void 0,!1)})},C.prototype.below=function(r){return r==null?Bt(this,xn):new this.Collection(this,function(){return On(void 0,r,!1,!0)})},C.prototype.belowOrEqual=function(r){return r==null?Bt(this,xn):new this.Collection(this,function(){return On(void 0,r)})},C.prototype.startsWith=function(r){return typeof r!="string"?Bt(this,ho):this.between(r,r+jn,!0,!0)},C.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):as(this,function(o,l){return o.indexOf(l[0])===0},[r],jn)},C.prototype.equalsIgnoreCase=function(r){return as(this,function(o,l){return o===l[0]},[r],"")},C.prototype.anyOfIgnoreCase=function(){var r=ot.apply(Ye,arguments);return r.length===0?Bn(this):as(this,function(o,l){return l.indexOf(o)!==-1},r,"")},C.prototype.startsWithAnyOfIgnoreCase=function(){var r=ot.apply(Ye,arguments);return r.length===0?Bn(this):as(this,function(o,l){return l.some(function(c){return o.indexOf(c)===0})},r,jn)},C.prototype.anyOf=function(){var r=this,o=ot.apply(Ye,arguments),l=this._cmp;try{o.sort(l)}catch{return Bt(this,xn)}if(o.length===0)return Bn(this);var c=new this.Collection(this,function(){return On(o[0],o[o.length-1])});c._ondirectionchange=function(h){l=h==="next"?r._ascending:r._descending,o.sort(l)};var d=0;return c._addAlgorithm(function(h,b,E){for(var T=h.key;0<l(T,o[d]);)if(++d===o.length)return b(E),!1;return l(T,o[d])===0||(b(function(){h.continue(o[d])}),!1)}),c},C.prototype.notEqual=function(r){return this.inAnyRange([[-1/0,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},C.prototype.noneOf=function(){var r=ot.apply(Ye,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Bt(this,xn)}var o=r.reduce(function(l,c){return l?l.concat([[l[l.length-1][1],c]]):[[-1/0,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},C.prototype.inAnyRange=function(V,o){var l=this,c=this._cmp,d=this._ascending,h=this._descending,b=this._min,E=this._max;if(V.length===0)return Bn(this);if(!V.every(function(z){return z[0]!==void 0&&z[1]!==void 0&&d(z[0],z[1])<=0}))return Bt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",W.InvalidArgument);var T=!o||o.includeLowers!==!1,R=o&&o.includeUppers===!0,B,I=d;function K(z,X){return I(z[0],X[0])}try{(B=V.reduce(function(z,X){for(var ae=0,ve=z.length;ae<ve;++ae){var Te=z[ae];if(c(X[0],Te[1])<0&&0<c(X[1],Te[0])){Te[0]=b(Te[0],X[0]),Te[1]=E(Te[1],X[1]);break}}return ae===ve&&z.push(X),z},[])).sort(K)}catch{return Bt(this,xn)}var $=0,j=R?function(z){return 0<d(z,B[$][1])}:function(z){return 0<=d(z,B[$][1])},L=T?function(z){return 0<h(z,B[$][0])}:function(z){return 0<=h(z,B[$][0])},F=j,V=new this.Collection(this,function(){return On(B[0][0],B[B.length-1][1],!T,!R)});return V._ondirectionchange=function(z){I=z==="next"?(F=j,d):(F=L,h),B.sort(K)},V._addAlgorithm(function(z,X,ae){for(var ve,Te=z.key;F(Te);)if(++$===B.length)return X(ae),!1;return!j(ve=Te)&&!L(ve)||(l._cmp(Te,B[$][1])===0||l._cmp(Te,B[$][0])===0||X(function(){I===d?z.continue(B[$][0]):z.continue(B[$][1])}),!1)}),V},C.prototype.startsWithAnyOf=function(){var r=ot.apply(Ye,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Bn(this):this.inAnyRange(r.map(function(o){return[o,o+jn]})):Bt(this,"startsWithAnyOf() only works with strings")},C);function C(){}function Y(r){return wt(function(o){return ce(o),r(o.target.error),!1})}function ce(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var Ne="storagemutated",Ee="x-storagemutated-1",Le=Tr(null,Ne),Et=(ft.prototype._lock=function(){return Q(!Me.global),++this._reculock,this._reculock!==1||Me.global||(Me.lockOwnerFor=this),this},ft.prototype._unlock=function(){if(Q(!Me.global),--this._reculock==0)for(Me.global||(Me.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var r=this._blockedFuncs.shift();try{Tn(r[1],r[0])}catch{}}return this},ft.prototype._locked=function(){return this._reculock&&Me.lockOwnerFor!==this},ft.prototype.create=function(r){var o=this;if(!this.mode)return this;var l=this.db.idbdb,c=this.db._state.dbOpenError;if(Q(!this.idbtrans),!r&&!l)switch(c&&c.name){case"DatabaseClosedError":throw new W.DatabaseClosed(c);case"MissingAPIError":throw new W.MissingAPI(c.message,c);default:throw new W.OpenFailed(c)}if(!this.active)throw new W.TransactionInactive;return Q(this._completion._state===null),(r=this.idbtrans=r||(this.db.core||l).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=wt(function(d){ce(d),o._reject(r.error)}),r.onabort=wt(function(d){ce(d),o.active&&o._reject(new W.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=wt(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&Le.storagemutated.fire(r.mutatedParts)}),this},ft.prototype._promise=function(r,o,l){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return St(new W.ReadOnly("Transaction is readonly"));if(!this.active)return St(new W.TransactionInactive);if(this._locked())return new Re(function(h,b){c._blockedFuncs.push([function(){c._promise(r,o,l).then(h,b)},Me])});if(l)return wn(function(){var h=new Re(function(b,E){c._lock();var T=o(b,E,c);T&&T.then&&T.then(b,E)});return h.finally(function(){return c._unlock()}),h._lib=!0,h});var d=new Re(function(h,b){var E=o(h,b,c);E&&E.then&&E.then(h,b)});return d._lib=!0,d},ft.prototype._root=function(){return this.parent?this.parent._root():this},ft.prototype.waitFor=function(r){var o,l=this._root(),c=Re.resolve(r);l._waitingFor?l._waitingFor=l._waitingFor.then(function(){return c}):(l._waitingFor=c,l._waitingQueue=[],o=l.idbtrans.objectStore(l.storeNames[0]),(function h(){for(++l._spinCount;l._waitingQueue.length;)l._waitingQueue.shift()();l._waitingFor&&(o.get(-1/0).onsuccess=h)})());var d=l._waitingFor;return new Re(function(h,b){c.then(function(E){return l._waitingQueue.push(wt(h.bind(null,E)))},function(E){return l._waitingQueue.push(wt(b.bind(null,E)))}).finally(function(){l._waitingFor===d&&(l._waitingFor=null)})})},ft.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new W.Abort))},ft.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(g(o,r))return o[r];var l=this.schema[r];if(!l)throw new W.NotFound("Table "+r+" not part of transaction");return l=new this.db.Table(r,l,this),l.core=this.db.core.table(r),o[r]=l},ft);function ft(){}function Ft(r,o,l,c,d,h,b,E){return{name:r,keyPath:o,unique:l,multi:c,auto:d,compound:h,src:(l&&!b?"&":"")+(c?"*":"")+(d?"++":"")+cr(o),type:E}}function cr(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function Fn(r,o,l){return{name:r,primKey:o,indexes:l,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},l.reduce(function(d,h,b){return b=c(h,b),b&&(d[b[0]]=b[1]),d},{}))};var c}var on=function(r){try{return r.only([[]]),on=function(){return[[]]},[[]]}catch{return on=function(){return jn},jn}};function Ii(r){return r==null?function(){}:typeof r=="string"?(o=r).split(".").length===1?function(l){return l[o]}:function(l){return je(l,o)}:function(l){return je(l,r)};var o}function ol(r){return[].slice.call(r)}var bf=0;function Os(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function wf(r,o,T){function c(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var $=F.lower,j=F.upper,L=F.lowerOpen,F=F.upperOpen;return $===void 0?j===void 0?null:o.upperBound(j,!!F):j===void 0?o.lowerBound($,!!L):o.bound($,j,!!L,!!F)}function d(K){var $,j=K.name;return{name:j,schema:K,mutate:function(L){var F=L.trans,V=L.type,z=L.keys,X=L.values,ae=L.range;return new Promise(function(ve,Te){ve=wt(ve);var ge=F.objectStore(j),we=ge.keyPath==null,Oe=V==="put"||V==="add";if(!Oe&&V!=="delete"&&V!=="deleteRange")throw new Error("Invalid operation type: "+V);var ke,Ke=(z||X||{length:1}).length;if(z&&X&&z.length!==X.length)throw new Error("Given keys array must have same length as given values array.");if(Ke===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function tt(Wt){++an,ce(Wt)}var st=[],it=[],an=0;if(V==="deleteRange"){if(ae.type===4)return ve({numFailures:an,failures:it,results:[],lastResult:void 0});ae.type===3?st.push(ke=ge.clear()):st.push(ke=ge.delete(c(ae)))}else{var we=Oe?we?[X,z]:[X,null]:[z,null],Xe=we[0],Ut=we[1];if(Oe)for(var qt=0;qt<Ke;++qt)st.push(ke=Ut&&Ut[qt]!==void 0?ge[V](Xe[qt],Ut[qt]):ge[V](Xe[qt])),ke.onerror=tt;else for(qt=0;qt<Ke;++qt)st.push(ke=ge[V](Xe[qt])),ke.onerror=tt}function Po(Wt){Wt=Wt.target.result,st.forEach(function(Nr,Hi){return Nr.error!=null&&(it[Hi]=Nr.error)}),ve({numFailures:an,failures:it,results:V==="delete"?z:st.map(function(Nr){return Nr.result}),lastResult:Wt})}ke.onerror=function(Wt){tt(Wt),Po(Wt)},ke.onsuccess=Po})},getMany:function(L){var F=L.trans,V=L.keys;return new Promise(function(z,X){z=wt(z);for(var ae,ve=F.objectStore(j),Te=V.length,ge=new Array(Te),we=0,Oe=0,ke=function(st){st=st.target,ge[st._pos]=st.result,++Oe===we&&z(ge)},Ke=Y(X),tt=0;tt<Te;++tt)V[tt]!=null&&((ae=ve.get(V[tt]))._pos=tt,ae.onsuccess=ke,ae.onerror=Ke,++we);we===0&&z(ge)})},get:function(L){var F=L.trans,V=L.key;return new Promise(function(z,X){z=wt(z);var ae=F.objectStore(j).get(V);ae.onsuccess=function(ve){return z(ve.target.result)},ae.onerror=Y(X)})},query:($=R,function(L){return new Promise(function(F,V){F=wt(F);var z,X,ae,we=L.trans,ve=L.values,Te=L.limit,ke=L.query,ge=Te===1/0?void 0:Te,Oe=ke.index,ke=ke.range,we=we.objectStore(j),Oe=Oe.isPrimaryKey?we:we.index(Oe.name),ke=c(ke);if(Te===0)return F({result:[]});$?((ge=ve?Oe.getAll(ke,ge):Oe.getAllKeys(ke,ge)).onsuccess=function(Ke){return F({result:Ke.target.result})},ge.onerror=Y(V)):(z=0,X=!ve&&"openKeyCursor"in Oe?Oe.openKeyCursor(ke):Oe.openCursor(ke),ae=[],X.onsuccess=function(Ke){var tt=X.result;return tt?(ae.push(ve?tt.value:tt.primaryKey),++z===Te?F({result:ae}):void tt.continue()):F({result:ae})},X.onerror=Y(V))})}),openCursor:function(L){var F=L.trans,V=L.values,z=L.query,X=L.reverse,ae=L.unique;return new Promise(function(ve,Te){ve=wt(ve);var Oe=z.index,ge=z.range,we=F.objectStore(j),we=Oe.isPrimaryKey?we:we.index(Oe.name),Oe=X?ae?"prevunique":"prev":ae?"nextunique":"next",ke=!V&&"openKeyCursor"in we?we.openKeyCursor(c(ge),Oe):we.openCursor(c(ge),Oe);ke.onerror=Y(Te),ke.onsuccess=wt(function(Ke){var tt,st,it,an,Xe=ke.result;Xe?(Xe.___id=++bf,Xe.done=!1,tt=Xe.continue.bind(Xe),st=(st=Xe.continuePrimaryKey)&&st.bind(Xe),it=Xe.advance.bind(Xe),an=function(){throw new Error("Cursor not stopped")},Xe.trans=F,Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=function(){throw new Error("Cursor not started")},Xe.fail=wt(Te),Xe.next=function(){var Ut=this,qt=1;return this.start(function(){return qt--?Ut.continue():Ut.stop()}).then(function(){return Ut})},Xe.start=function(Ut){function qt(){if(ke.result)try{Ut()}catch(Wt){Xe.fail(Wt)}else Xe.done=!0,Xe.start=function(){throw new Error("Cursor behind last entry")},Xe.stop()}var Po=new Promise(function(Wt,Nr){Wt=wt(Wt),ke.onerror=Y(Nr),Xe.fail=Nr,Xe.stop=function(Hi){Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=an,Wt(Hi)}});return ke.onsuccess=wt(function(Wt){ke.onsuccess=qt,qt()}),Xe.continue=tt,Xe.continuePrimaryKey=st,Xe.advance=it,qt(),Po},ve(Xe)):ve(null)},Te)})},count:function(L){var F=L.query,V=L.trans,z=F.index,X=F.range;return new Promise(function(ae,ve){var Te=V.objectStore(j),ge=z.isPrimaryKey?Te:Te.index(z.name),Te=c(X),ge=Te?ge.count(Te):ge.count();ge.onsuccess=wt(function(we){return ae(we.target.result)}),ge.onerror=Y(ve)})}}}var h,b,E,B=(b=T,E=ol((h=r).objectStoreNames),{schema:{name:h.name,tables:E.map(function(K){return b.objectStore(K)}).map(function(K){var $=K.keyPath,F=K.autoIncrement,j=f($),L={},F={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:$==null,compound:j,keyPath:$,autoIncrement:F,unique:!0,extractKey:Ii($)},indexes:ol(K.indexNames).map(function(V){return K.index(V)}).map(function(ae){var z=ae.name,X=ae.unique,ve=ae.multiEntry,ae=ae.keyPath,ve={name:z,compound:f(ae),keyPath:ae,unique:X,multiEntry:ve,extractKey:Ii(ae)};return L[Os(ae)]=ve}),getIndexByKeyPath:function(V){return L[Os(V)]}};return L[":id"]=F.primaryKey,$!=null&&(L[Os($)]=F.primaryKey),F})},hasGetAll:0<E.length&&"getAll"in b.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),T=B.schema,R=B.hasGetAll,B=T.tables.map(d),I={};return B.forEach(function(K){return I[K.name]=K}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(K){if(!I[K])throw new Error("Table '".concat(K,"' not found"));return I[K]},MIN_KEY:-1/0,MAX_KEY:on(o),schema:T}}function xf(r,o,l,c){var d=l.IDBKeyRange;return l.indexedDB,{dbcore:(c=wf(o,d,c),r.dbcore.reduce(function(h,b){return b=b.create,s(s({},h),b(h))},c))}}function _o(r,c){var l=c.db,c=xf(r._middlewares,l,r._deps,c);r.core=c.dbcore,r.tables.forEach(function(d){var h=d.name;r.core.schema.tables.some(function(b){return b.name===h})&&(d.core=r.core.table(h),r[h]instanceof r.Table&&(r[h].core=d.core))})}function ko(r,o,l,c){l.forEach(function(d){var h=c[d];o.forEach(function(b){var E=(function T(R,B){return ue(R,B)||(R=v(R))&&T(R,B)})(b,d);(!E||"value"in E&&E.value===void 0)&&(b===r.Transaction.prototype||b instanceof r.Transaction?O(b,d,{get:function(){return this.table(d)},set:function(T){A(this,d,{value:T,writable:!0,configurable:!0,enumerable:!0})}}):b[d]=new r.Table(d,h))})})}function Ai(r,o){o.forEach(function(l){for(var c in l)l[c]instanceof r.Table&&delete l[c]})}function _f(r,o){return r._cfg.version-o._cfg.version}function kf(r,o,l,c){var d=r._dbSchema;l.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=Fn("$meta",al("")[0],[]),r._storeNames.push("$meta"));var h=r._createTransaction("readwrite",r._storeNames,d);h.create(l),h._completion.catch(c);var b=h._reject.bind(h),E=Me.transless||Me;wn(function(){return Me.trans=h,Me.transless=E,o!==0?(_o(r,l),R=o,((T=h).storeNames.includes("$meta")?T.table("$meta").get("version").then(function(B){return B??R}):Re.resolve(R)).then(function(B){return K=B,$=h,j=l,L=[],B=(I=r)._versions,F=I._dbSchema=So(0,I.idbdb,j),(B=B.filter(function(V){return V._cfg.version>=K})).length!==0?(B.forEach(function(V){L.push(function(){var z=F,X=V._cfg.dbschema;Eo(I,z,j),Eo(I,X,j),F=I._dbSchema=X;var ae=Ti(z,X);ae.add.forEach(function(Oe){Oi(j,Oe[0],Oe[1].primKey,Oe[1].indexes)}),ae.change.forEach(function(Oe){if(Oe.recreate)throw new W.Upgrade("Not yet support for changing primary key");var ke=j.objectStore(Oe.name);Oe.add.forEach(function(Ke){return Co(ke,Ke)}),Oe.change.forEach(function(Ke){ke.deleteIndex(Ke.name),Co(ke,Ke)}),Oe.del.forEach(function(Ke){return ke.deleteIndex(Ke)})});var ve=V._cfg.contentUpgrade;if(ve&&V._cfg.version>K){_o(I,j),$._memoizedTables={};var Te=at(X);ae.del.forEach(function(Oe){Te[Oe]=z[Oe]}),Ai(I,[I.Transaction.prototype]),ko(I,[I.Transaction.prototype],u(Te),Te),$.schema=Te;var ge,we=lt(ve);return we&&Nn(),ae=Re.follow(function(){var Oe;(ge=ve($))&&we&&(Oe=pn.bind(null,null),ge.then(Oe,Oe))}),ge&&typeof ge.then=="function"?Re.resolve(ge):ae.then(function(){return ge})}}),L.push(function(z){var X,ae,ve=V._cfg.dbschema;X=ve,ae=z,[].slice.call(ae.db.objectStoreNames).forEach(function(Te){return X[Te]==null&&ae.db.deleteObjectStore(Te)}),Ai(I,[I.Transaction.prototype]),ko(I,[I.Transaction.prototype],I._storeNames,I._dbSchema),$.schema=I._dbSchema}),L.push(function(z){I.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(I.idbdb.version/10)===V._cfg.version?(I.idbdb.deleteObjectStore("$meta"),delete I._dbSchema.$meta,I._storeNames=I._storeNames.filter(function(X){return X!=="$meta"})):z.objectStore("$meta").put(V._cfg.version,"version"))})}),(function V(){return L.length?Re.resolve(L.shift()($.idbtrans)).then(V):Re.resolve()})().then(function(){il(F,j)})):Re.resolve();var I,K,$,j,L,F}).catch(b)):(u(d).forEach(function(B){Oi(l,B,d[B].primKey,d[B].indexes)}),_o(r,l),void Re.follow(function(){return r.on.populate.fire(h)}).catch(b));var T,R})}function Cf(r,o){il(r._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var l=So(0,r.idbdb,o);Eo(r,r._dbSchema,o);for(var c=0,d=Ti(l,r._dbSchema).change;c<d.length;c++){var h=(function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=o.objectStore(b.name);b.add.forEach(function(T){oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(T.src)),Co(E,T)})})(d[c]);if(typeof h=="object")return h.value}}function Ti(r,o){var l,c={del:[],add:[],change:[]};for(l in r)o[l]||c.del.push(l);for(l in o){var d=r[l],h=o[l];if(d){var b={name:l,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||d.primKey.auto!==h.primKey.auto)b.recreate=!0,c.change.push(b);else{var E=d.idxByName,T=h.idxByName,R=void 0;for(R in E)T[R]||b.del.push(R);for(R in T){var B=E[R],I=T[R];B?B.src!==I.src&&b.change.push(I):b.add.push(I)}(0<b.del.length||0<b.add.length||0<b.change.length)&&c.change.push(b)}}else c.add.push([l,h])}return c}function Oi(r,o,l,c){var d=r.db.createObjectStore(o,l.keyPath?{keyPath:l.keyPath,autoIncrement:l.auto}:{autoIncrement:l.auto});return c.forEach(function(h){return Co(d,h)}),d}function il(r,o){u(r).forEach(function(l){o.db.objectStoreNames.contains(l)||(oe&&console.debug("Dexie: Creating missing table",l),Oi(o,l,r[l].primKey,r[l].indexes))})}function Co(r,o){r.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function So(r,o,l){var c={};return N(o.objectStoreNames,0).forEach(function(d){for(var h=l.objectStore(d),b=Ft(cr(R=h.keyPath),R||"",!0,!1,!!h.autoIncrement,R&&typeof R!="string",!0),E=[],T=0;T<h.indexNames.length;++T){var B=h.index(h.indexNames[T]),R=B.keyPath,B=Ft(B.name,R,!!B.unique,!!B.multiEntry,!1,R&&typeof R!="string",!1);E.push(B)}c[d]=Fn(d,b,E)}),c}function Eo(r,o,l){for(var c=l.db.objectStoreNames,d=0;d<c.length;++d){var h=c[d],b=l.objectStore(h);r._hasGetAll="getAll"in b;for(var E=0;E<b.indexNames.length;++E){var T=b.indexNames[E],R=b.index(T).keyPath,B=typeof R=="string"?R:"["+N(R).join("+")+"]";!o[h]||(R=o[h].idxByName[B])&&(R.name=T,delete o[h].idxByName[B],o[h].idxByName[T]=R)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function al(r){return r.split(",").map(function(o,l){var h=o.split(":"),c=(d=h[1])===null||d===void 0?void 0:d.trim(),d=(o=h[0].trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return Ft(d,h||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),f(h),l===0,c)})}var Sf=(ls.prototype._createTableSchema=Fn,ls.prototype._parseIndexSyntax=al,ls.prototype._parseStoresSpec=function(r,o){var l=this;u(r).forEach(function(c){if(r[c]!==null){var d=l._parseIndexSyntax(r[c]),h=d.shift();if(!h)throw new W.Schema("Invalid schema for table "+c+": "+r[c]);if(h.unique=!0,h.multi)throw new W.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new W.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new W.Schema("Index must have a name and cannot be an empty string")}),d=l._createTableSchema(c,h,d),o[c]=d}})},ls.prototype.stores=function(l){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,l):l;var l=o._versions,c={},d={};return l.forEach(function(h){p(c,h._cfg.storesSource),d=h._cfg.dbschema={},h._parseStoresSpec(c,d)}),o._dbSchema=d,Ai(o,[o._allTables,o,o.Transaction.prototype]),ko(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],u(d),d),o._storeNames=u(d),this},ls.prototype.upgrade=function(r){return this._cfg.contentUpgrade=pe(this._cfg.contentUpgrade||y,r),this},ls);function ls(){}function Ri(r,o){var l=r._dbNamesDB;return l||(l=r._dbNamesDB=new Kn(rs,{addons:[],indexedDB:r,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),l.table("dbnames")}function Di(r){return r&&typeof r.databases=="function"}function Pi(r){return wn(function(){return Me.letThrough=!0,r()})}function $i(r){return!("from"in r)}var Kt=function(r,o){if(!this){var l=new Kt;return r&&"d"in r&&p(l,r),l}p(this,arguments.length?{d:1,from:r,to:1<arguments.length?o:r}:{d:0})};function Rs(r,o,l){var c=ct(o,l);if(!isNaN(c)){if(0<c)throw RangeError();if($i(r))return p(r,{from:o,to:l,d:1});var d=r.l,c=r.r;if(ct(l,r.from)<0)return d?Rs(d,o,l):r.l={from:o,to:l,d:1,l:null,r:null},cl(r);if(0<ct(o,r.to))return c?Rs(c,o,l):r.r={from:o,to:l,d:1,l:null,r:null},cl(r);ct(o,r.from)<0&&(r.from=o,r.l=null,r.d=c?c.d+1:1),0<ct(l,r.to)&&(r.to=l,r.r=null,r.d=r.l?r.l.d+1:1),l=!r.r,d&&!r.l&&Ds(r,d),c&&l&&Ds(r,c)}}function Ds(r,o){$i(o)||(function l(c,T){var h=T.from,b=T.to,E=T.l,T=T.r;Rs(c,h,b),E&&l(c,E),T&&l(c,T)})(r,o)}function ll(r,o){var l=Io(o),c=l.next();if(c.done)return!1;for(var d=c.value,h=Io(r),b=h.next(d.from),E=b.value;!c.done&&!b.done;){if(ct(E.from,d.to)<=0&&0<=ct(E.to,d.from))return!0;ct(d.from,E.from)<0?d=(c=l.next(E.from)).value:E=(b=h.next(d.from)).value}return!1}function Io(r){var o=$i(r)?null:{s:0,n:r};return{next:function(l){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&ct(l,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||ct(l,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function cl(r){var o,l,c=(((o=r.r)===null||o===void 0?void 0:o.d)||0)-(((l=r.l)===null||l===void 0?void 0:l.d)||0),d=1<c?"r":c<-1?"l":"";d&&(o=d=="r"?"l":"r",l=s({},r),c=r[d],r.from=c.from,r.to=c.to,r[d]=c[d],l[d]=c[o],(r[o]=l).d=ul(l)),r.d=ul(r)}function ul(l){var o=l.r,l=l.l;return(o?l?Math.max(o.d,l.d):o.d:l?l.d:0)+1}function Ao(r,o){return u(o).forEach(function(l){r[l]?Ds(r[l],o[l]):r[l]=(function c(d){var h,b,E={};for(h in d)g(d,h)&&(b=d[h],E[h]=!b||typeof b!="object"||Ge.has(b.constructor)?b:c(b));return E})(o[l])}),r}function Mi(r,o){return r.all||o.all||Object.keys(r).some(function(l){return o[l]&&ll(o[l],r[l])})}w(Kt.prototype,((hn={add:function(r){return Ds(this,r),this},addKey:function(r){return Rs(this,r,r),this},addKeys:function(r){var o=this;return r.forEach(function(l){return Rs(o,l,l)}),this},hasKey:function(r){var o=Io(this).next(r).value;return o&&ct(o.from,r)<=0&&0<=ct(o.to,r)}})[Ce]=function(){return Io(this)},hn));var $r={},Ni={},ji=!1;function To(r){Ao(Ni,r),ji||(ji=!0,setTimeout(function(){ji=!1,Li(Ni,!(Ni={}))},0))}function Li(r,o){o===void 0&&(o=!1);var l=new Set;if(r.all)for(var c=0,d=Object.values($r);c<d.length;c++)fl(b=d[c],r,l,o);else for(var h in r){var b,E=/^idb\:\/\/(.*)\/(.*)\//.exec(h);E&&(h=E[1],E=E[2],(b=$r["idb://".concat(h,"/").concat(E)])&&fl(b,r,l,o))}l.forEach(function(T){return T()})}function fl(r,o,l,c){for(var d=[],h=0,b=Object.entries(r.queries.query);h<b.length;h++){for(var E=b[h],T=E[0],R=[],B=0,I=E[1];B<I.length;B++){var K=I[B];Mi(o,K.obsSet)?K.subscribers.forEach(function(F){return l.add(F)}):c&&R.push(K)}c&&d.push([T,R])}if(c)for(var $=0,j=d;$<j.length;$++){var L=j[$],T=L[0],R=L[1];r.queries.query[T]=R}}function Ef(r){var o=r._state,l=r._deps.indexedDB;if(o.isBeingOpened||r.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?St(o.dbOpenError):r});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,d=Math.round(10*r.verno),h=!1;function b(){if(o.openCanceller!==c)throw new W.DatabaseClosed("db.open() was cancelled")}function E(){return new Re(function(K,$){if(b(),!l)throw new W.MissingAPI;var j=r.name,L=o.autoSchema||!d?l.open(j):l.open(j,d);if(!L)throw new W.MissingAPI;L.onerror=Y($),L.onblocked=wt(r._fireOnBlocked),L.onupgradeneeded=wt(function(F){var V;B=L.transaction,o.autoSchema&&!r._options.allowEmptyDB?(L.onerror=ce,B.abort(),L.result.close(),(V=l.deleteDatabase(j)).onsuccess=V.onerror=wt(function(){$(new W.NoSuchDatabase("Database ".concat(j," doesnt exist")))})):(B.onerror=Y($),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,I=F<1,r.idbdb=L.result,h&&Cf(r,B),kf(r,F/10,B,$))},$),L.onsuccess=wt(function(){B=null;var F,V,z,X,ae,ve=r.idbdb=L.result,Te=N(ve.objectStoreNames);if(0<Te.length)try{var ge=ve.transaction((X=Te).length===1?X[0]:X,"readonly");if(o.autoSchema)V=ve,z=ge,(F=r).verno=V.version/10,z=F._dbSchema=So(0,V,z),F._storeNames=N(V.objectStoreNames,0),ko(F,[F._allTables],u(z),z);else if(Eo(r,r._dbSchema,ge),((ae=Ti(So(0,(ae=r).idbdb,ge),ae._dbSchema)).add.length||ae.change.some(function(we){return we.add.length||we.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),d=ve.version+1,h=!0,K(E());_o(r,ge)}catch{}ar.push(r),ve.onversionchange=wt(function(we){o.vcFired=!0,r.on("versionchange").fire(we)}),ve.onclose=wt(function(){r.close({disableAutoOpen:!1})}),I&&(ae=r._deps,ge=j,ve=ae.indexedDB,ae=ae.IDBKeyRange,Di(ve)||ge===rs||Ri(ve,ae).put({name:ge}).catch(y)),K()},$)}).catch(function(K){switch(K?.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<d)return d=0,E()}return Re.reject(K)})}var T,R=o.dbReadyResolve,B=null,I=!1;return Re.race([c,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function $(){return indexedDB.databases().finally(K)}T=setInterval($,100),$()}).finally(function(){return clearInterval(T)}):Promise.resolve()).then(E)]).then(function(){return b(),o.onReadyBeingFired=[],Re.resolve(Pi(function(){return r.on.ready.fire(r.vip)})).then(function K(){if(0<o.onReadyBeingFired.length){var $=o.onReadyBeingFired.reduce(pe,y);return o.onReadyBeingFired=[],Re.resolve(Pi(function(){return $(r.vip)})).then(K)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(K){o.dbOpenError=K;try{B&&B.abort()}catch{}return c===o.openCanceller&&r._close(),St(K)}).finally(function(){o.openComplete=!0,R()}).then(function(){var K;return I&&(K={},r.tables.forEach(function($){$.schema.indexes.forEach(function(j){j.name&&(K["idb://".concat(r.name,"/").concat($.name,"/").concat(j.name)]=new Kt(-1/0,[[[]]]))}),K["idb://".concat(r.name,"/").concat($.name,"/")]=K["idb://".concat(r.name,"/").concat($.name,"/:dels")]=new Kt(-1/0,[[[]]])}),Le(Ne).fire(K),Li(K,!0)),r})}function Bi(r){function o(h){return r.next(h)}var l=d(o),c=d(function(h){return r.throw(h)});function d(h){return function(T){var E=h(T),T=E.value;return E.done?T:T&&typeof T.then=="function"?T.then(l,c):f(T)?Promise.all(T).then(l,c):l(T)}}return d(o)()}function Oo(r,o,l){for(var c=f(r)?r.slice():[r],d=0;d<l;++d)c.push(o);return c}var If={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(r){return s(s({},r),{table:function(o){var l=r.table(o),c=l.schema,d={},h=[];function b(I,K,$){var j=Os(I),L=d[j]=d[j]||[],F=I==null?0:typeof I=="string"?1:I.length,V=0<K,V=s(s({},$),{name:V?"".concat(j,"(virtual-from:").concat($.name,")"):$.name,lowLevelIndex:$,isVirtual:V,keyTail:K,keyLength:F,extractKey:Ii(I),unique:!V&&$.unique});return L.push(V),V.isPrimaryKey||h.push(V),1<F&&b(F===2?I[0]:I.slice(0,F-1),K+1,$),L.sort(function(z,X){return z.keyTail-X.keyTail}),V}o=b(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[o];for(var E=0,T=c.indexes;E<T.length;E++){var R=T[E];b(R.keyPath,0,R)}function B(I){var K,$=I.query.index;return $.isVirtual?s(s({},I),{query:{index:$.lowLevelIndex,range:(K=I.query.range,$=$.keyTail,{type:K.type===1?2:K.type,lower:Oo(K.lower,K.lowerOpen?r.MAX_KEY:r.MIN_KEY,$),lowerOpen:!0,upper:Oo(K.upper,K.upperOpen?r.MIN_KEY:r.MAX_KEY,$),upperOpen:!0})}}):I}return s(s({},l),{schema:s(s({},c),{primaryKey:o,indexes:h,getIndexByKeyPath:function(I){return(I=d[Os(I)])&&I[0]}}),count:function(I){return l.count(B(I))},query:function(I){return l.query(B(I))},openCursor:function(I){var K=I.query.index,$=K.keyTail,j=K.isVirtual,L=K.keyLength;return j?l.openCursor(B(I)).then(function(V){return V&&F(V)}):l.openCursor(I);function F(V){return Object.create(V,{continue:{value:function(z){z!=null?V.continue(Oo(z,I.reverse?r.MAX_KEY:r.MIN_KEY,$)):I.unique?V.continue(V.key.slice(0,L).concat(I.reverse?r.MIN_KEY:r.MAX_KEY,$)):V.continue()}},continuePrimaryKey:{value:function(z,X){V.continuePrimaryKey(Oo(z,r.MAX_KEY,$),X)}},primaryKey:{get:function(){return V.primaryKey}},key:{get:function(){var z=V.key;return L===1?z[0]:z.slice(0,L)}},value:{get:function(){return V.value}}})}}})}})}};function Fi(r,o,l,c){return l=l||{},c=c||"",u(r).forEach(function(d){var h,b,E;g(o,d)?(h=r[d],b=o[d],typeof h=="object"&&typeof b=="object"&&h&&b?(E=me(h))!==me(b)?l[c+d]=o[d]:E==="Object"?Fi(h,b,l,c+d+"."):h!==b&&(l[c+d]=o[d]):h!==b&&(l[c+d]=o[d])):l[c+d]=void 0}),u(o).forEach(function(d){g(r,d)||(l[c+d]=o[d])}),l}function Ki(r,o){return o.type==="delete"?o.keys:o.keys||o.values.map(r.extractKey)}var Af={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return s(s({},r),{table:function(o){var l=r.table(o),c=l.schema.primaryKey;return s(s({},l),{mutate:function(d){var h=Me.trans,b=h.table(o).hook,E=b.deleting,T=b.creating,R=b.updating;switch(d.type){case"add":if(T.fire===y)break;return h._promise("readwrite",function(){return B(d)},!0);case"put":if(T.fire===y&&R.fire===y)break;return h._promise("readwrite",function(){return B(d)},!0);case"delete":if(E.fire===y)break;return h._promise("readwrite",function(){return B(d)},!0);case"deleteRange":if(E.fire===y)break;return h._promise("readwrite",function(){return(function I(K,$,j){return l.query({trans:K,values:!1,query:{index:c,range:$},limit:j}).then(function(L){var F=L.result;return B({type:"delete",keys:F,trans:K}).then(function(V){return 0<V.numFailures?Promise.reject(V.failures[0]):F.length<j?{failures:[],numFailures:0,lastResult:void 0}:I(K,s(s({},$),{lower:F[F.length-1],lowerOpen:!0}),j)})})})(d.trans,d.range,1e4)},!0)}return l.mutate(d);function B(I){var K,$,j,L=Me.trans,F=I.keys||Ki(c,I);if(!F)throw new Error("Keys missing");return(I=I.type==="add"||I.type==="put"?s(s({},I),{keys:F}):s({},I)).type!=="delete"&&(I.values=i([],I.values)),I.keys&&(I.keys=i([],I.keys)),K=l,j=F,(($=I).type==="add"?Promise.resolve([]):K.getMany({trans:$.trans,keys:j,cache:"immutable"})).then(function(V){var z=F.map(function(X,ae){var ve,Te,ge,we=V[ae],Oe={onerror:null,onsuccess:null};return I.type==="delete"?E.fire.call(Oe,X,we,L):I.type==="add"||we===void 0?(ve=T.fire.call(Oe,X,I.values[ae],L),X==null&&ve!=null&&(I.keys[ae]=X=ve,c.outbound||$e(I.values[ae],c.keyPath,X))):(ve=Fi(we,I.values[ae]),(Te=R.fire.call(Oe,ve,X,we,L))&&(ge=I.values[ae],Object.keys(Te).forEach(function(ke){g(ge,ke)?ge[ke]=Te[ke]:$e(ge,ke,Te[ke])}))),Oe});return l.mutate(I).then(function(X){for(var ae=X.failures,ve=X.results,Te=X.numFailures,X=X.lastResult,ge=0;ge<F.length;++ge){var we=(ve||F)[ge],Oe=z[ge];we==null?Oe.onerror&&Oe.onerror(ae[ge]):Oe.onsuccess&&Oe.onsuccess(I.type==="put"&&V[ge]?I.values[ge]:we)}return{failures:ae,results:ve,numFailures:Te,lastResult:X}}).catch(function(X){return z.forEach(function(ae){return ae.onerror&&ae.onerror(X)}),Promise.reject(X)})})}}})}})}};function dl(r,o,l){try{if(!o||o.keys.length<r.length)return null;for(var c=[],d=0,h=0;d<o.keys.length&&h<r.length;++d)ct(o.keys[d],r[h])===0&&(c.push(l?Z(o.values[d]):o.values[d]),++h);return c.length===r.length?c:null}catch{return null}}var Tf={stack:"dbcore",level:-1,create:function(r){return{table:function(o){var l=r.table(o);return s(s({},l),{getMany:function(c){if(!c.cache)return l.getMany(c);var d=dl(c.keys,c.trans._cache,c.cache==="clone");return d?Re.resolve(d):l.getMany(c).then(function(h){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?Z(h):h},h})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),l.mutate(c)}})}}}};function pl(r,o){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function hl(r,o){switch(r){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Of={stack:"dbcore",level:0,name:"Observability",create:function(r){var o=r.schema.name,l=new Kt(r.MIN_KEY,r.MAX_KEY);return s(s({},r),{transaction:function(c,d,h){if(Me.subscr&&d!=="readonly")throw new W.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Me.querier));return r.transaction(c,d,h)},table:function(c){var d=r.table(c),h=d.schema,b=h.primaryKey,I=h.indexes,E=b.extractKey,T=b.outbound,R=b.autoIncrement&&I.filter(function($){return $.compound&&$.keyPath.includes(b.keyPath)}),B=s(s({},d),{mutate:function($){function j(ke){return ke="idb://".concat(o,"/").concat(c,"/").concat(ke),X[ke]||(X[ke]=new Kt)}var L,F,V,z=$.trans,X=$.mutatedParts||($.mutatedParts={}),ae=j(""),ve=j(":dels"),Te=$.type,Oe=$.type==="deleteRange"?[$.range]:$.type==="delete"?[$.keys]:$.values.length<50?[Ki(b,$).filter(function(ke){return ke}),$.values]:[],ge=Oe[0],we=Oe[1],Oe=$.trans._cache;return f(ge)?(ae.addKeys(ge),(Oe=Te==="delete"||ge.length===we.length?dl(ge,Oe):null)||ve.addKeys(ge),(Oe||we)&&(L=j,F=Oe,V=we,h.indexes.forEach(function(ke){var Ke=L(ke.name||"");function tt(it){return it!=null?ke.extractKey(it):null}function st(it){return ke.multiEntry&&f(it)?it.forEach(function(an){return Ke.addKey(an)}):Ke.addKey(it)}(F||V).forEach(function(it,Ut){var Xe=F&&tt(F[Ut]),Ut=V&&tt(V[Ut]);ct(Xe,Ut)!==0&&(Xe!=null&&st(Xe),Ut!=null&&st(Ut))})}))):ge?(we={from:(we=ge.lower)!==null&&we!==void 0?we:r.MIN_KEY,to:(we=ge.upper)!==null&&we!==void 0?we:r.MAX_KEY},ve.add(we),ae.add(we)):(ae.add(l),ve.add(l),h.indexes.forEach(function(ke){return j(ke.name).add(l)})),d.mutate($).then(function(ke){return!ge||$.type!=="add"&&$.type!=="put"||(ae.addKeys(ke.results),R&&R.forEach(function(Ke){for(var tt=$.values.map(function(Xe){return Ke.extractKey(Xe)}),st=Ke.keyPath.findIndex(function(Xe){return Xe===b.keyPath}),it=0,an=ke.results.length;it<an;++it)tt[it][st]=ke.results[it];j(Ke.name).addKeys(tt)})),z.mutatedParts=Ao(z.mutatedParts||{},X),ke})}}),I=function(j){var L=j.query,j=L.index,L=L.range;return[j,new Kt((j=L.lower)!==null&&j!==void 0?j:r.MIN_KEY,(L=L.upper)!==null&&L!==void 0?L:r.MAX_KEY)]},K={get:function($){return[b,new Kt($.key)]},getMany:function($){return[b,new Kt().addKeys($.keys)]},count:I,query:I,openCursor:I};return u(K).forEach(function($){B[$]=function(j){var L=Me.subscr,F=!!L,V=pl(Me,d)&&hl($,j)?j.obsSet={}:L;if(F){var z=function(we){return we="idb://".concat(o,"/").concat(c,"/").concat(we),V[we]||(V[we]=new Kt)},X=z(""),ae=z(":dels"),L=K[$](j),F=L[0],L=L[1];if(($==="query"&&F.isPrimaryKey&&!j.values?ae:z(F.name||"")).add(L),!F.isPrimaryKey){if($!=="count"){var ve=$==="query"&&T&&j.values&&d.query(s(s({},j),{values:!1}));return d[$].apply(this,arguments).then(function(we){if($==="query"){if(T&&j.values)return ve.then(function(tt){return tt=tt.result,X.addKeys(tt),we});var Oe=j.values?we.result.map(E):we.result;(j.values?X:ae).addKeys(Oe)}else if($==="openCursor"){var ke=we,Ke=j.values;return ke&&Object.create(ke,{key:{get:function(){return ae.addKey(ke.primaryKey),ke.key}},primaryKey:{get:function(){var tt=ke.primaryKey;return ae.addKey(tt),tt}},value:{get:function(){return Ke&&X.addKey(ke.primaryKey),ke.value}}})}return we})}ae.add(l)}}return d[$].apply(this,arguments)}}),B}})}};function ml(r,o,l){if(l.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return l.numFailures===c?null:(o=s({},o),f(o.keys)&&(o.keys=o.keys.filter(function(d,h){return!(h in l.failures)})),"values"in o&&f(o.values)&&(o.values=o.values.filter(function(d,h){return!(h in l.failures)})),o)}function Ui(r,o){return l=r,((c=o).lower===void 0||(c.lowerOpen?0<ct(l,c.lower):0<=ct(l,c.lower)))&&(r=r,(o=o).upper===void 0||(o.upperOpen?ct(r,o.upper)<0:ct(r,o.upper)<=0));var l,c}function gl(r,o,K,c,d,h){if(!K||K.length===0)return r;var b=o.query.index,E=b.multiEntry,T=o.query.range,R=c.schema.primaryKey.extractKey,B=b.extractKey,I=(b.lowLevelIndex||b).extractKey,K=K.reduce(function($,j){var L=$,F=[];if(j.type==="add"||j.type==="put")for(var V=new Kt,z=j.values.length-1;0<=z;--z){var X,ae=j.values[z],ve=R(ae);V.hasKey(ve)||(X=B(ae),(E&&f(X)?X.some(function(ke){return Ui(ke,T)}):Ui(X,T))&&(V.addKey(ve),F.push(ae)))}switch(j.type){case"add":var Te=new Kt().addKeys(o.values?$.map(function(Ke){return R(Ke)}):$),L=$.concat(o.values?F.filter(function(Ke){return Ke=R(Ke),!Te.hasKey(Ke)&&(Te.addKey(Ke),!0)}):F.map(function(Ke){return R(Ke)}).filter(function(Ke){return!Te.hasKey(Ke)&&(Te.addKey(Ke),!0)}));break;case"put":var ge=new Kt().addKeys(j.values.map(function(Ke){return R(Ke)}));L=$.filter(function(Ke){return!ge.hasKey(o.values?R(Ke):Ke)}).concat(o.values?F:F.map(function(Ke){return R(Ke)}));break;case"delete":var we=new Kt().addKeys(j.keys);L=$.filter(function(Ke){return!we.hasKey(o.values?R(Ke):Ke)});break;case"deleteRange":var Oe=j.range;L=$.filter(function(Ke){return!Ui(R(Ke),Oe)})}return L},r);return K===r?r:(K.sort(function($,j){return ct(I($),I(j))||ct(R($),R(j))}),o.limit&&o.limit<1/0&&(K.length>o.limit?K.length=o.limit:r.length===o.limit&&K.length<o.limit&&(d.dirty=!0)),h?Object.freeze(K):K)}function vl(r,o){return ct(r.lower,o.lower)===0&&ct(r.upper,o.upper)===0&&!!r.lowerOpen==!!o.lowerOpen&&!!r.upperOpen==!!o.upperOpen}function Rf(r,o){return(function(l,c,d,h){if(l===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=ct(l,c))===0){if(d&&h)return 0;if(d)return 1;if(h)return-1}return c})(r.lower,o.lower,r.lowerOpen,o.lowerOpen)<=0&&0<=(function(l,c,d,h){if(l===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=ct(l,c))===0){if(d&&h)return 0;if(d)return-1;if(h)return 1}return c})(r.upper,o.upper,r.upperOpen,o.upperOpen)}function Df(r,o,l,c){r.subscribers.add(l),c.addEventListener("abort",function(){var d,h;r.subscribers.delete(l),r.subscribers.size===0&&(d=r,h=o,setTimeout(function(){d.subscribers.size===0&&Se(h,d)},3e3))})}var Pf={stack:"dbcore",level:0,name:"Cache",create:function(r){var o=r.schema.name;return s(s({},r),{transaction:function(l,c,d){var h,b,E=r.transaction(l,c,d);return c==="readwrite"&&(b=(h=new AbortController).signal,d=function(T){return function(){if(h.abort(),c==="readwrite"){for(var R=new Set,B=0,I=l;B<I.length;B++){var K=I[B],$=$r["idb://".concat(o,"/").concat(K)];if($){var j=r.table(K),L=$.optimisticOps.filter(function(Ke){return Ke.trans===E});if(E._explicit&&T&&E.mutatedParts)for(var F=0,V=Object.values($.queries.query);F<V.length;F++)for(var z=0,X=(Te=V[F]).slice();z<X.length;z++)Mi((ge=X[z]).obsSet,E.mutatedParts)&&(Se(Te,ge),ge.subscribers.forEach(function(Ke){return R.add(Ke)}));else if(0<L.length){$.optimisticOps=$.optimisticOps.filter(function(Ke){return Ke.trans!==E});for(var ae=0,ve=Object.values($.queries.query);ae<ve.length;ae++)for(var Te,ge,we,Oe=0,ke=(Te=ve[ae]).slice();Oe<ke.length;Oe++)(ge=ke[Oe]).res!=null&&E.mutatedParts&&(T&&!ge.dirty?(we=Object.isFrozen(ge.res),we=gl(ge.res,ge.req,L,j,ge,we),ge.dirty?(Se(Te,ge),ge.subscribers.forEach(function(Ke){return R.add(Ke)})):we!==ge.res&&(ge.res=we,ge.promise=Re.resolve({result:we}))):(ge.dirty&&Se(Te,ge),ge.subscribers.forEach(function(Ke){return R.add(Ke)})))}}}R.forEach(function(Ke){return Ke()})}}},E.addEventListener("abort",d(!1),{signal:b}),E.addEventListener("error",d(!1),{signal:b}),E.addEventListener("complete",d(!0),{signal:b})),E},table:function(l){var c=r.table(l),d=c.schema.primaryKey;return s(s({},c),{mutate:function(h){var b=Me.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(h);var E=$r["idb://".concat(o,"/").concat(l)];return E?(b=c.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||Ki(d,h).some(function(T){return T==null}))?(E.optimisticOps.push(h),h.mutatedParts&&To(h.mutatedParts),b.then(function(T){0<T.numFailures&&(Se(E.optimisticOps,h),(T=ml(0,h,T))&&E.optimisticOps.push(T),h.mutatedParts&&To(h.mutatedParts))}),b.catch(function(){Se(E.optimisticOps,h),h.mutatedParts&&To(h.mutatedParts)})):b.then(function(T){var R=ml(0,s(s({},h),{values:h.values.map(function(B,I){var K;return T.failures[I]?B:(B=(K=d.keyPath)!==null&&K!==void 0&&K.includes(".")?Z(B):s({},B),$e(B,d.keyPath,T.results[I]),B)})}),T);E.optimisticOps.push(R),queueMicrotask(function(){return h.mutatedParts&&To(h.mutatedParts)})}),b):c.mutate(h)},query:function(h){if(!pl(Me,c)||!hl("query",h))return c.query(h);var b=((R=Me.trans)===null||R===void 0?void 0:R.db._options.cache)==="immutable",I=Me,E=I.requery,T=I.signal,R=(function(j,L,F,V){var z=$r["idb://".concat(j,"/").concat(L)];if(!z)return[];if(!(L=z.queries[F]))return[null,!1,z,null];var X=L[(V.query?V.query.index.name:null)||""];if(!X)return[null,!1,z,null];switch(F){case"query":var ae=X.find(function(ve){return ve.req.limit===V.limit&&ve.req.values===V.values&&vl(ve.req.query.range,V.query.range)});return ae?[ae,!0,z,X]:[X.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=V.limit&&(!V.values||ve.req.values)&&Rf(ve.req.query.range,V.query.range)}),!1,z,X];case"count":return ae=X.find(function(ve){return vl(ve.req.query.range,V.query.range)}),[ae,!!ae,z,X]}})(o,l,"query",h),B=R[0],I=R[1],K=R[2],$=R[3];return B&&I?B.obsSet=h.obsSet:(I=c.query(h).then(function(j){var L=j.result;if(B&&(B.res=L),b){for(var F=0,V=L.length;F<V;++F)Object.freeze(L[F]);Object.freeze(L)}else j.result=Z(L);return j}).catch(function(j){return $&&B&&Se($,B),Promise.reject(j)}),B={obsSet:h.obsSet,promise:I,subscribers:new Set,type:"query",req:h,dirty:!1},$?$.push(B):($=[B],(K=K||($r["idb://".concat(o,"/").concat(l)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=$)),Df(B,$,E,T),B.promise.then(function(j){return{result:gl(j.result,h,K?.optimisticOps,c,B,b)}})}})}})}};function Ro(r,o){return new Proxy(r,{get:function(l,c,d){return c==="db"?o:Reflect.get(l,c,d)}})}var Kn=(Ot.prototype.version=function(r){if(isNaN(r)||r<.1)throw new W.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new W.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,l=o.filter(function(c){return c._cfg.version===r})[0];return l||(l=new this.Version(r),o.push(l),o.sort(_f),l.stores({}),this._state.autoSchema=!1,l)},Ot.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||Me.letThrough||this._vip)?r():new Re(function(l,c){if(o._state.openComplete)return c(new W.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new W.DatabaseClosed);o.open().catch(y)}o._state.dbReadyPromise.then(l,c)}).then(r)},Ot.prototype.use=function(r){var o=r.stack,l=r.create,c=r.level,d=r.name;return d&&this.unuse({stack:o,name:d}),r=this._middlewares[o]||(this._middlewares[o]=[]),r.push({stack:o,create:l,level:c??10,name:d}),r.sort(function(h,b){return h.level-b.level}),this},Ot.prototype.unuse=function(r){var o=r.stack,l=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:!!l&&d.name!==l})),this},Ot.prototype.open=function(){var r=this;return Tn(Ct,function(){return Ef(r)})},Ot.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=ar.indexOf(this);if(0<=o&&ar.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new Re(function(l){r.dbReadyResolve=l}),r.openCanceller=new Re(function(l,c){r.cancelOpen=c}))},Ot.prototype.close=function(l){var o=(l===void 0?{disableAutoOpen:!0}:l).disableAutoOpen,l=this._state;o?(l.isBeingOpened&&l.cancelOpen(new W.DatabaseClosed),this._close(),l.autoOpen=!1,l.dbOpenError=new W.DatabaseClosed):(this._close(),l.autoOpen=this._options.autoOpen||l.isBeingOpened,l.openComplete=!1,l.dbOpenError=null)},Ot.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var l=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new Re(function(d,h){function b(){o.close(r);var E=o._deps.indexedDB.deleteDatabase(o.name);E.onsuccess=wt(function(){var T,R,B;T=o._deps,R=o.name,B=T.indexedDB,T=T.IDBKeyRange,Di(B)||R===rs||Ri(B,T).delete(R).catch(y),d()}),E.onerror=Y(h),E.onblocked=o._fireOnBlocked}if(l)throw new W.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(b):b()})},Ot.prototype.backendDB=function(){return this.idbdb},Ot.prototype.isOpen=function(){return this.idbdb!==null},Ot.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},Ot.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ot.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ot.prototype,"tables",{get:function(){var r=this;return u(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),Ot.prototype.transaction=function(){var r=(function(o,l,c){var d=arguments.length;if(d<2)throw new W.InvalidArgument("Too few arguments");for(var h=new Array(d-1);--d;)h[d-1]=arguments[d];return c=h.pop(),[o,ze(h),c]}).apply(this,arguments);return this._transaction.apply(this,r)},Ot.prototype._transaction=function(r,o,l){var c=this,d=Me.trans;d&&d.db===this&&r.indexOf("!")===-1||(d=null);var h,b,E=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");try{if(b=o.map(function(R){if(R=R instanceof c.Table?R.name:R,typeof R!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return R}),r=="r"||r===Ss)h=Ss;else{if(r!="rw"&&r!=Es)throw new W.InvalidArgument("Invalid transaction mode: "+r);h=Es}if(d){if(d.mode===Ss&&h===Es){if(!E)throw new W.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&b.forEach(function(R){if(d&&d.storeNames.indexOf(R)===-1){if(!E)throw new W.SubTransaction("Table "+R+" not included in parent transaction.");d=null}}),E&&d&&!d.active&&(d=null)}}catch(R){return d?d._promise(null,function(B,I){I(R)}):St(R)}var T=(function R(B,I,K,$,j){return Re.resolve().then(function(){var L=Me.transless||Me,F=B._createTransaction(I,K,B._dbSchema,$);if(F.explicit=!0,L={trans:F,transless:L},$)F.idbtrans=$.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(X){return X.name===H.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return R(B,I,K,null,j)})):St(X)}var V,z=lt(j);return z&&Nn(),L=Re.follow(function(){var X;(V=j.call(F,F))&&(z?(X=pn.bind(null,null),V.then(X,X)):typeof V.next=="function"&&typeof V.throw=="function"&&(V=Bi(V)))},L),(V&&typeof V.then=="function"?Re.resolve(V).then(function(X){return F.active?X:St(new W.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):L.then(function(){return V})).then(function(X){return $&&F._resolve(),F._completion.then(function(){return X})}).catch(function(X){return F._reject(X),St(X)})})}).bind(null,this,h,b,d,l);return d?d._promise(h,T,"lock"):Me.trans?Tn(Me.transless,function(){return c._whenReady(T)}):this._whenReady(T)},Ot.prototype.table=function(r){if(!g(this._allTables,r))throw new W.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},Ot);function Ot(r,o){var l=this;this._middlewares={},this.verno=0;var c=Ot.dependencies;this._options=o=s({addons:Ot.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,h,b,E,T,R={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:y,dbReadyPromise:null,cancelOpen:y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};R.dbReadyPromise=new Re(function(I){R.dbReadyResolve=I}),R.openCanceller=new Re(function(I,K){R.cancelOpen=K}),this._state=R,this.name=r,this.on=Tr(this,"populate","blocked","versionchange","close",{ready:[pe,y]}),this.once=function(I,K){var $=function(){for(var j=[],L=0;L<arguments.length;L++)j[L]=arguments[L];l.on(I).unsubscribe($),K.apply(l,j)};return l.on(I,$)},this.on.ready.subscribe=D(this.on.ready.subscribe,function(I){return function(K,$){Ot.vip(function(){var j,L=l._state;L.openComplete?(L.dbOpenError||Re.resolve().then(K),$&&I(K)):L.onReadyBeingFired?(L.onReadyBeingFired.push(K),$&&I(K)):(I(K),j=l,$||I(function F(){j.on.ready.unsubscribe(K),j.on.ready.unsubscribe(F)}))})}}),this.Collection=(d=this,Or(Si.prototype,function(V,F){this.db=d;var $=mo,j=null;if(F)try{$=F()}catch(z){j=z}var L=V._ctx,F=L.table,V=F.hook.reading.fire;this._ctx={table:F,index:L.index,isPrimKey:!L.index||F.schema.primKey.keyPath&&L.index===F.schema.primKey.name,range:$,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:j,or:L.or,valueMapper:V!==_?V:null}})),this.Table=(h=this,Or(bo.prototype,function(I,K,$){this.db=h,this._tx=$,this.name=I,this.schema=K,this.hook=h._allTables[I]?h._allTables[I].hook:Tr(null,{creating:[ee,y],reading:[P,_],updating:[xe,y],deleting:[te,y]})})),this.Transaction=(b=this,Or(Et.prototype,function(I,K,$,j,L){var F=this;I!=="readonly"&&K.forEach(function(V){V=(V=$[V])===null||V===void 0?void 0:V.yProps,V&&(K=K.concat(V.map(function(z){return z.updatesTable})))}),this.db=b,this.mode=I,this.storeNames=K,this.schema=$,this.chromeTransactionDurability=j,this.idbtrans=null,this.on=Tr(this,"complete","error","abort"),this.parent=L||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(V,z){F._resolve=V,F._reject=z}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(V){var z=F.active;return F.active=!1,F.on.error.fire(V),F.parent?F.parent._reject(V):z&&F.idbtrans&&F.idbtrans.abort(),St(V)})})),this.Version=(E=this,Or(Sf.prototype,function(I){this.db=E,this._cfg={version:I,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(T=this,Or(S.prototype,function(I,K,$){if(this.db=T,this._ctx={table:I,index:K===":id"?null:K,or:$},this._cmp=this._ascending=ct,this._descending=function(j,L){return ct(L,j)},this._max=function(j,L){return 0<ct(j,L)?j:L},this._min=function(j,L){return ct(j,L)<0?j:L},this._IDBKeyRange=T._deps.IDBKeyRange,!this._IDBKeyRange)throw new W.MissingAPI})),this.on("versionchange",function(I){0<I.newVersion?console.warn("Another connection wants to upgrade database '".concat(l.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(l.name,"'. Closing db now to resume the delete request.")),l.close({disableAutoOpen:!1})}),this.on("blocked",function(I){!I.newVersion||I.newVersion<I.oldVersion?console.warn("Dexie.delete('".concat(l.name,"') was blocked")):console.warn("Upgrade '".concat(l.name,"' blocked by other connection holding version ").concat(I.oldVersion/10))}),this._maxKey=on(o.IDBKeyRange),this._createTransaction=function(I,K,$,j){return new l.Transaction(I,K,$,l._options.chromeTransactionDurability,j)},this._fireOnBlocked=function(I){l.on("blocked").fire(I),ar.filter(function(K){return K.name===l.name&&K!==l&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(I)})},this.use(Tf),this.use(Pf),this.use(Of),this.use(If),this.use(Af);var B=new Proxy(this,{get:function(I,K,$){if(K==="_vip")return!0;if(K==="table")return function(L){return Ro(l.table(L),B)};var j=Reflect.get(I,K,$);return j instanceof bo?Ro(j,B):K==="tables"?j.map(function(L){return Ro(L,B)}):K==="_createTransaction"?function(){return Ro(j.apply(this,arguments),B)}:j}});this.vip=B,c.forEach(function(I){return I(l)})}var Do,hn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",$f=(qi.prototype.subscribe=function(r,o,l){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:o,complete:l})},qi.prototype[hn]=function(){return this},qi);function qi(r){this._subscribe=r}try{Do={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{Do={indexedDB:null,IDBKeyRange:null}}function yl(r){var o,l=!1,c=new $f(function(d){var h=lt(r),b,E=!1,T={},R={},B={get closed(){return E},unsubscribe:function(){E||(E=!0,b&&b.abort(),I&&Le.storagemutated.unsubscribe($))}};d.start&&d.start(B);var I=!1,K=function(){return ns(j)},$=function(L){Ao(T,L),Mi(R,T)&&K()},j=function(){var L,F,V;!E&&Do.indexedDB&&(T={},L={},b&&b.abort(),b=new AbortController,V=(function(z){var X=nr();try{h&&Nn();var ae=wn(r,z);return ae=h?ae.finally(pn):ae}finally{X&&rr()}})(F={subscr:L,signal:b.signal,requery:K,querier:r,trans:null}),Promise.resolve(V).then(function(z){l=!0,o=z,E||F.signal.aborted||(T={},(function(X){for(var ae in X)if(g(X,ae))return;return 1})(R=L)||I||(Le(Ne,$),I=!0),ns(function(){return!E&&d.next&&d.next(z)}))},function(z){l=!1,["DatabaseClosedError","AbortError"].includes(z?.name)||E||ns(function(){E||d.error&&d.error(z)})}))};return setTimeout(K,0),B});return c.hasValue=function(){return l},c.getValue=function(){return o},c}var Mr=Kn;function Vi(r){var o=ur;try{ur=!0,Le.storagemutated.fire(r),Li(r,!0)}finally{ur=o}}w(Mr,s(s({},Ue),{delete:function(r){return new Mr(r,{addons:[]}).delete()},exists:function(r){return new Mr(r,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return o=Mr.dependencies,l=o.indexedDB,o=o.IDBKeyRange,(Di(l)?Promise.resolve(l.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==rs})}):Ri(l,o).toCollection().primaryKeys()).then(r)}catch{return St(new W.MissingAPI)}var o,l},defineClass:function(){return function(r){p(this,r)}},ignoreTransaction:function(r){return Me.trans?Tn(Me.transless,r):r()},vip:Pi,async:function(r){return function(){try{var o=Bi(r.apply(this,arguments));return o&&typeof o.then=="function"?o:Re.resolve(o)}catch(l){return St(l)}}},spawn:function(r,o,l){try{var c=Bi(r.apply(l,o||[]));return c&&typeof c.then=="function"?c:Re.resolve(c)}catch(d){return St(d)}},currentTransaction:{get:function(){return Me.trans||null}},waitFor:function(r,o){return o=Re.resolve(typeof r=="function"?Mr.ignoreTransaction(r):r).timeout(o||6e4),Me.trans?Me.trans.waitFor(o):o},Promise:Re,debug:{get:function(){return oe},set:function(r){_e(r)}},derive:J,extend:p,props:w,override:D,Events:Tr,on:Le,liveQuery:yl,extendObservabilitySet:Ao,getByKeyPath:je,setByKeyPath:$e,delByKeyPath:function(r,o){typeof o=="string"?$e(r,o,void 0):"length"in o&&[].map.call(o,function(l){$e(r,l,void 0)})},shallowClone:at,deepClone:Z,getObjectDiff:Fi,cmp:ct,asap:Pe,minKey:-1/0,addons:[],connections:ar,errnames:H,dependencies:Do,cache:$r,semVer:"4.2.1",version:"4.2.1".split(".").map(function(r){return parseInt(r)}).reduce(function(r,o,l){return r+o/Math.pow(10,2*l)})})),Mr.maxKey=on(Mr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Le(Ne,function(r){ur||(r=new CustomEvent(Ee,{detail:r}),ur=!0,dispatchEvent(r),ur=!1)}),addEventListener(Ee,function(r){r=r.detail,ur||Vi(r)}));var cs,ur=!1,bl=function(){};return typeof BroadcastChannel<"u"&&((bl=function(){(cs=new BroadcastChannel(Ee)).onmessage=function(r){return r.data&&Vi(r.data)}})(),typeof cs.unref=="function"&&cs.unref(),Le(Ne,function(r){ur||cs.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!Kn.disableBfCache&&r.persisted){oe&&console.debug("Dexie: handling persisted pagehide"),cs?.close();for(var o=0,l=ar;o<l.length;o++)l[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(r){!Kn.disableBfCache&&r.persisted&&(oe&&console.debug("Dexie: handling persisted pageshow"),bl(),Vi({all:new Kt(-1/0,[[]])}))})),Re.rejectionMapper=function(r,o){return!r||r instanceof q||r instanceof TypeError||r instanceof SyntaxError||!r.name||!Ie[r.name]?r:(o=new Ie[r.name](o||r.message,r),"stack"in r&&O(o,"stack",{get:function(){return this.inner.stack}}),o)},_e(oe),s(Kn,Object.freeze({__proto__:null,Dexie:Kn,liveQuery:yl,Entity:Ir,cmp:ct,PropModification:Ar,replacePrefix:function(r,o){return new Ar({replacePrefix:[r,o]})},add:function(r){return new Ar({add:r})},remove:function(r){return new Ar({remove:r})},default:Kn,RangeSet:Kt,mergeRanges:Ds,rangesOverlap:ll}),{default:Kn}),Kn})})(Go)),Go.exports}var km=_m();const Aa=wm(km),_c=Symbol.for("Dexie"),ri=globalThis[_c]||(globalThis[_c]=Aa);if(Aa.semVer!==ri.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Aa.semVer} and ${ri.semVer}`);const{liveQuery:y0,mergeRanges:b0,rangesOverlap:w0,RangeSet:x0,cmp:_0,Entity:k0,PropModification:C0,replacePrefix:S0,add:E0,remove:I0,DexieYProvider:A0}=ri,Cm="jotrip",Sm=1;class Em extends ri{notes;tabs;collections;images;meta;constructor(){super(Cm),this.version(Sm).stores({notes:"id, updatedAt, primaryDate",tabs:"id, noteId, updatedAt",collections:"id",images:"id, noteId, tabId",meta:"key"})}}let aa=null;function el(){return aa||(aa=new Em),aa}async function lf(){const e=el();return e.isOpen()||await e.open(),e}const He=el(),Gr=()=>new Date().toISOString(),bi=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2),cf=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().replace(/-/g,"").slice(0,12):Math.random().toString(36).slice(2,14),Im=async()=>{for(let e=0;e<5;e++){const t=cf();if(!await He.notes.get(t))return t}return bi()},Am=async()=>{for(let e=0;e<5;e++){const t=cf();if(!await He.tabs.get(t))return t}return bi()};async function tl(e){const n={id:await Im(),title:e.title,collectionIds:e.collectionIds??[],tabOrder:e.tabOrder??[],primaryDate:e.primaryDate,createdAt:Gr(),updatedAt:Gr()};return await He.notes.add(n),n}function Ta(e){return He.notes.get(e)}async function Nt(e,t){const n=await He.notes.get(e);if(!n)return;const s={...n,...t,updatedAt:Gr()};return await He.notes.put(s),s}async function nl(e){await xi("note",e),await He.transaction("rw",He.notes,He.tabs,He.images,async()=>{await He.tabs.where("noteId").equals(e).delete(),await He.images.where("noteId").equals(e).delete(),await He.notes.delete(e)})}function Cs(){return He.notes.orderBy("updatedAt").reverse().toArray()}async function wi(){return(await Cs()).filter(t=>!t.archivedAt)}async function Tm(){return(await Cs()).filter(t=>!!t.archivedAt)}async function Ws(e){const n={id:await Am(),noteId:e.noteId,name:e.name,content:e.content,updatedAt:Gr()};return await He.tabs.add(n),n}function Om(e){return He.tabs.get(e)}async function kc(e,t){const n=await He.tabs.get(e);if(!n)return;const s={...n,...t,updatedAt:Gr()};return await He.tabs.put(s),s}async function uf(e){const t=await He.tabs.get(e);t&&(await xi("tab",e),await He.transaction("rw",He.tabs,He.images,He.notes,async()=>{await He.images.where("tabId").equals(t.id).delete(),await He.tabs.delete(t.id);const n=await He.notes.get(t.noteId);if(n){const s=n.tabOrder.filter(i=>i!==t.id);await He.notes.put({...n,tabOrder:s,updatedAt:Gr()})}}))}function Cc(e){return He.tabs.where("noteId").equals(e).sortBy("updatedAt")}function Jr(){return He.tabs.toArray()}async function ff(e){const t={id:e.id??bi(),noteId:e.noteId,tabId:e.tabId,mime:e.mime,blob:e.blob,width:e.width,height:e.height,createdAt:Gr(),thumbnailDataUrl:e.thumbnailDataUrl};return await He.images.add(t),t}function Oa(e){return He.images.get(e)}function Rm(e){return xi("image",e).then(()=>He.images.delete(e))}function io(e={}){return e.tabId?He.images.where("tabId").equals(e.tabId).toArray():e.noteId?He.images.where("noteId").equals(e.noteId).toArray():He.images.toArray()}function Dm(){return He.meta.toArray()}async function Sc(){await He.transaction("rw",[He.notes,He.tabs,He.images,He.collections,He.meta],async()=>{await Promise.all([He.notes.clear(),He.tabs.clear(),He.images.clear(),He.collections.clear(),He.meta.clear()])})}async function xi(e,t,n){const s=n??new Date().toISOString(),a={key:`tombstone:${e}:${t}`,value:{kind:e,id:t,updatedAt:s}};return await He.meta.put(a),a}async function Pm(e){const t=await He.meta.where("key").startsWith("tombstone:").toArray();if(!e)return t;const n=Date.parse(e);return t.filter(s=>{const i=s.value?.updatedAt;return i&&Date.parse(i)>n})}function $m(e){return He.notes.put(e)}function Mm(e){return He.tabs.put(e)}function Nm(e){return He.images.put(e)}async function vr(e,t){const n={key:e,value:t};return await He.meta.put(n),n}async function cn(e){return(await He.meta.get(e))?.value}const Ra=he(!1),df=he(!1);Yd(async()=>{const e=await cn("sync:enabled");df.value=!!e});const jm=e=>`notes/${e}.json`,Lm=e=>`tabs/${e}.json`,Bm=e=>`images/${e}.json`,Fm=(e,t)=>`deleted/${e}s/${t}.json`,rl=e=>{const t={},n=btoa(`${e.username}:${e.password}`);return t.Authorization=`Basic ${n}`,t},la=e=>{const t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);let n="";const s=32768;for(let i=0;i<t.length;i+=s){const a=t.subarray(i,i+s);n+=String.fromCharCode(...a)}return btoa(n)},ca=e=>{const t=atob(e),n=t.length,s=new Uint8Array(n);for(let i=0;i<n;i++)s[i]=t.charCodeAt(i);return s},pf=async(e,t)=>{const n=new TextEncoder().encode(e),s=await crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},Bo=async(e,t)=>{const n=crypto.getRandomValues(new Uint8Array(16)),s=crypto.getRandomValues(new Uint8Array(12)),i=await pf(t,n),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},i,new TextEncoder().encode(e));return{version:"1",salt:la(n),iv:la(s),ciphertext:la(a)}},Km=async(e,t)=>{const n=ca(e.salt),s=ca(e.iv),i=ca(e.ciphertext),a=await pf(t,n),u=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},a,i);return new TextDecoder().decode(u)},Um=async(e,t)=>{const n=await fetch(e,{headers:{...rl(t)}});if(!n.ok)throw new Error(`Request failed ${n.status}`);return n.json()},Fo=async(e,t,n)=>{const s=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/octet-stream",...rl(n)},body:t});if(!s.ok)throw new Error(`PUT failed ${s.status}`);return s.json()},qm=async(e,t)=>{const n=await fetch(e,{headers:{...rl(t)}});if(!n.ok)throw new Error(`GET failed ${n.status}`);const s=await n.arrayBuffer();return new TextDecoder().decode(s)},Vm=e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>t(s.result.split(",")[1]??""),s.onerror=n,s.readAsDataURL(e.blob)}),Hm=(e,t)=>{const n=atob(e),s=n.length,i=new Uint8Array(s);for(let a=0;a<s;a++)i[a]=n.charCodeAt(a);return new Blob([i],{type:t})},Wm=async e=>{if(e.kind==="note"){const t=await Ta(e.note.id);if(t&&t.updatedAt&&e.note.updatedAt&&new Date(e.note.updatedAt).getTime()<=new Date(t.updatedAt).getTime()){console.debug("[sync] skip note (stale)",e.note.id);return}await $m(e.note),console.debug("[sync] applied note",e.note.id,e.note.title);return}if(e.kind==="tab"){const t=await Om(e.tab.id);if(t&&t.updatedAt&&e.tab.updatedAt&&new Date(e.tab.updatedAt).getTime()<=new Date(t.updatedAt).getTime()){console.debug("[sync] skip tab (stale)",e.tab.id);return}await Mm(e.tab),console.debug("[sync] applied tab",e.tab.id);return}if(e.kind==="image"){const t=await Oa(e.image.id);if(t?.createdAt&&e.image.createdAt&&new Date(e.image.createdAt).getTime()<=new Date(t.createdAt).getTime()){console.debug("[sync] skip image (stale)",e.image.id);return}const n=e.base64?Hm(e.base64,e.image.mime):e.image.blob;await Nm({...e.image,blob:n}),console.debug("[sync] applied image",e.image.id);return}e.kind==="tombstone"&&(console.debug("[sync] apply tombstone",e.target,e.id),await xi(e.target,e.id,e.updatedAt),e.target==="note"?await nl(e.id):e.target==="tab"?await uf(e.id):e.target==="image"&&await Rm(e.id))},zm=async(e,t)=>{const n=t?`?since=${encodeURIComponent(t)}`:"",{changes:s,now:i}=await Um(`${e.baseUrl}/changes${n}`,e);console.debug("[sync] pull",{since:t,count:s?.length??0});let a=i?Date.parse(i):0;for(const u of s||[]){const f=u?.key;if(f){if(u.updatedAt){const p=Date.parse(u.updatedAt);p>a&&(a=p)}try{const p=await qm(`${e.baseUrl}/blob/${encodeURIComponent(f)}`,e),v=JSON.parse(p),m=await Km(v,e.passphrase),g=JSON.parse(m);console.debug("[sync] apply",{key:f,kind:g.kind,updatedAt:u.updatedAt}),await Wm(g)}catch(p){console.error("Failed to apply change",f,p)}}}return a||null},Gm=async(e,t)=>{const n=t?Date.parse(t):0,[s,i,a,u]=await Promise.all([Cs(),Jr(),io(),Pm(t)]);for(const f of s){if(n&&Date.parse(f.updatedAt)<=n)continue;const v=await Bo(JSON.stringify({kind:"note",note:f}),e.passphrase);await Fo(`${e.baseUrl}/blob/${encodeURIComponent(jm(f.id))}`,JSON.stringify(v),e)}for(const f of i){if(n&&Date.parse(f.updatedAt)<=n)continue;const v=await Bo(JSON.stringify({kind:"tab",tab:f}),e.passphrase);await Fo(`${e.baseUrl}/blob/${encodeURIComponent(Lm(f.id))}`,JSON.stringify(v),e)}for(const f of a){if(n&&Date.parse(f.createdAt)<=n&&Date.parse(f.createdAt)<=n)continue;const p={kind:"image",image:{...f,blob:void 0},base64:await Vm(f)},v=await Bo(JSON.stringify(p),e.passphrase);await Fo(`${e.baseUrl}/blob/${encodeURIComponent(Bm(f.id))}`,JSON.stringify(v),e)}for(const f of u){const p=f.value,v={kind:"tombstone",target:p.kind,id:p.id,updatedAt:p.updatedAt},m=await Bo(JSON.stringify(v),e.passphrase);await Fo(`${e.baseUrl}/blob/${encodeURIComponent(Fm(p.kind,p.id))}`,JSON.stringify(m),e)}},hf=async e=>{const t=e.baseUrl?.trim().replace(/\/+$/,"");if(!t)throw new Error("Missing base URL");const n=await cn("sync:last");console.debug("[sync] starting",{last:n});const s=await zm({...e,baseUrl:t},n);console.debug("[sync] pull done",{latestRemote:s?new Date(s).toISOString():null}),await Gm({...e,baseUrl:t},n);const i=s||Date.now(),a=new Date(i).toISOString();return await vr("sync:last",a),console.debug("[sync] finished",{next:a}),a},Ym=600*1e3;let Ko=null,Ns=null;const Jm=async()=>{if(!await cn("sync:enabled"))return null;const t=(await cn("sync:url"))?.trim()||"",n=(await cn("sync:username"))?.trim()||"",s=(await cn("sync:password"))?.trim()||"",i=(await cn("sync:passphrase"))?.trim()||"";return!t||!n||!s||!i?null:{baseUrl:t,username:n,password:s,passphrase:i}},Qm=async e=>Ns||(Ns=(async()=>{const t=await Jm();if(t)try{Ra.value=!0;const n=await hf(t);await vr("sync:last",n),e&&console.debug("[sync] completed",e,n),window.dispatchEvent(new CustomEvent("jotrip:sync-complete",{detail:{ts:n,reason:e}}))}catch(n){console.error("[sync] failed",e,n)}finally{Ra.value=!1,Ns=null}})(),Ns),Yr=(e="manual")=>{Qm(e)},Xm=()=>{document.visibilityState==="visible"&&Yr("visibility")},Zm=()=>{Ko&&(clearInterval(Ko),Ko=null),Yr("startup"),Ko=window.setInterval(()=>Yr("interval"),Ym),document.addEventListener("visibilitychange",Xm)},eg={class:"h-full overflow-hidden bg-[#060913] text-slate-100"},tg={class:"mx-auto flex h-full max-w-6xl flex-col px-0 py-2 sm:px-6 sm:py-8",style:{"padding-bottom":"0"}},ng={class:"flex shrink-0 items-center justify-between border-b border-white/10 bg-gradient-to-b from-slate-950/80 to-slate-950/40 px-2 py-1 backdrop-blur sm:px-0"},rg={class:"flex text-white"},sg={class:"flex items-center gap-2"},og={class:"mt-2 flex-1 px-0 sm:px-0 overflow-hidden"},ig={class:"flex h-full min-h-0 flex-col border-0 bg-transparent sm:border sm:border-white/10 sm:bg-white/5 sm:p-6 sm:shadow-2xl sm:shadow-indigo-900/30"},ag={class:"flex-1 min-h-0 overflow-auto"},lg={key:0,class:"fixed inset-y-0 right-0 z-50 w-72 bg-slate-900/95 p-4 shadow-2xl shadow-black/70 sm:w-80 sm:p-6"},cg={class:"mt-4 space-y-2 sm:mt-6"},ug={class:"rounded border border-white/10 bg-white/5 p-3 text-xs text-slate-200"},fg={class:"grid grid-cols-2 gap-2"},dg={class:"rounded border border-white/10 bg-black/10 p-2"},pg={class:"text-sm font-semibold text-white"},hg={class:"rounded border border-white/10 bg-black/10 p-2"},mg={class:"text-sm font-semibold text-white"},gg={class:"rounded border border-white/10 bg-black/10 p-2"},vg={class:"text-sm font-semibold text-white"},yg={class:"rounded border border-white/10 bg-black/10 p-2"},bg={class:"text-sm font-semibold text-white"},wg=Zt({__name:"AppLayout",setup(e){const t=[{label:"Import",to:{name:"import"}},{label:"Settings",to:{name:"settings"}},{label:"Help",to:{name:"help"}},{label:"About",to:{name:"about"}}],n=he(!1),s=()=>{n.value=!n.value},i=()=>{n.value=!1},a=Je(()=>Ra.value),u=Je(()=>df.value),f=he({notes:0,tabs:0,images:0,bytes:0}),p=ue=>new TextEncoder().encode(ue).byteLength,v=ue=>{if(ue<1024)return`${ue} B`;const U=ue/1024;return U<1024?`${U.toFixed(1)} KB`:`${(U/1024).toFixed(1)} MB`},m=async()=>{const[ue,U,N]=await Promise.all([Cs(),Jr(),io()]),D={notes:ue.length,tabs:U.length,images:N.length,bytes:0};for(const Q of ue)D.bytes+=p(Q.title??"");for(const Q of U)D.bytes+=p(Q.content??"");for(const Q of N)D.bytes+=Q.blob?.size??0,Q.thumbnailDataUrl&&(D.bytes+=p(Q.thumbnailDataUrl));f.value=D},g=()=>m();fn(()=>{m(),window.addEventListener("jotrip:sync-complete",g)}),xr(()=>{window.removeEventListener("jotrip:sync-complete",g)});const w=he(null),A=Je(()=>!!w.value),O=ue=>{ue.preventDefault(),w.value=ue},J=async()=>{if(!w.value)return;const ue=w.value;w.value=null,await ue.prompt()};return fn(()=>{window.addEventListener("beforeinstallprompt",O)}),xr(()=>{window.removeEventListener("beforeinstallprompt",O)}),(ue,U)=>(le(),fe("div",eg,[k("div",tg,[k("header",ng,[k("nav",rg,[_t(tn(ps),{to:{name:"home"},class:kt(["px-3 py-1.5 text-sm font-semibold",ue.$route.name==="home"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Hn(()=>[...U[2]||(U[2]=[yr(" Home ",-1)])]),_:1},8,["class"]),_t(tn(ps),{to:{name:"notes"},class:kt(["px-3 py-1.5 text-sm font-semibold",ue.$route.name==="notes"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Hn(()=>[...U[3]||(U[3]=[yr(" Jots ",-1)])]),_:1},8,["class"]),_t(tn(ps),{to:{name:"calendar"},class:kt(["px-3 py-1.5 text-sm font-semibold",ue.$route.name==="calendar"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Hn(()=>[...U[4]||(U[4]=[yr(" Calendar ",-1)])]),_:1},8,["class"])]),k("div",sg,[_t(tn(ps),{to:{name:"note-editor",params:{id:"new"}},class:"border border-indigo-300/30 bg-indigo-500/20 px-3 py-1.5 text-sm font-semibold text-white hover:border-indigo-200/60"},{default:Hn(()=>[...U[5]||(U[5]=[yr(" + Jot ",-1)])]),_:1}),A.value?(le(),fe("button",{key:0,type:"button",class:"hidden border border-emerald-300/40 bg-emerald-500/20 px-3 py-1.5 text-sm font-semibold text-white hover:border-emerald-200/60 sm:inline-flex",onClick:J}," Install app ")):nt("",!0),k("button",{type:"button",class:"border border-white/10 px-3 py-1.5 text-white transition hover:border-white/40",onClick:s,"aria-label":"Open menu"},"  ")])]),k("main",og,[k("div",ig,[k("div",ag,[_t(tn(Za))])])])]),_t(_a,{name:"fade"},{default:Hn(()=>[n.value?(le(),fe("div",{key:0,class:"fixed inset-0 z-40 bg-black/60 sm:hidden",onClick:i})):nt("",!0)]),_:1}),_t(_a,{name:"slide"},{default:Hn(()=>[n.value?(le(),fe("aside",lg,[k("div",{class:"flex items-center justify-between text-white"},[U[6]||(U[6]=k("div",{class:"flex items-center gap-2"},[k("img",{src:ym,alt:"logo",class:"h-6 w-6 rounded-sm object-contain"}),k("p",{class:"text-sm font-semibold uppercase tracking-[0.15em] text-slate-200"},"jot.rip")],-1)),k("button",{type:"button",class:"border border-white/20 px-3 py-1 text-xs",onClick:i},"")]),k("nav",cg,[k("div",ug,[U[11]||(U[11]=k("p",{class:"mb-2 text-[11px] uppercase tracking-wide text-slate-400"},"Stats",-1)),k("div",fg,[k("div",dg,[U[7]||(U[7]=k("p",{class:"text-[11px] text-slate-400"},"Jots",-1)),k("p",pg,qe(f.value.notes),1)]),k("div",hg,[U[8]||(U[8]=k("p",{class:"text-[11px] text-slate-400"},"Tabs",-1)),k("p",mg,qe(f.value.tabs),1)]),k("div",gg,[U[9]||(U[9]=k("p",{class:"text-[11px] text-slate-400"},"Images",-1)),k("p",vg,qe(f.value.images),1)]),k("div",yg,[U[10]||(U[10]=k("p",{class:"text-[11px] text-slate-400"},"Bytes",-1)),k("p",bg,qe(v(f.value.bytes)),1)])])]),(le(),fe(mt,null,Mt(t,N=>_t(tn(ps),{key:N.label,to:N.to,class:kt(["flex items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3",[ue.$route.name===N.to?.name?"border-indigo-400 bg-indigo-500/20 text-white":"border-white/10 text-slate-200 hover:border-white/30 hover:text-white"]]),onClick:i},{default:Hn(()=>[yr(qe(N.label)+" ",1),U[12]||(U[12]=k("span",{"aria-hidden":"true"},"",-1))]),_:2},1032,["to","class"])),64)),u.value?(le(),fe("button",{key:0,type:"button",class:kt(["flex w-full items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3",a.value?"border-emerald-400 bg-emerald-500/20 text-white animate-pulse":"border-white/10 text-slate-200 hover:border-white/30 hover:text-white"]),onClick:U[0]||(U[0]=()=>{i(),tn(Yr)("manual-button")})},[...U[13]||(U[13]=[k("span",null,"Sync now",-1),k("span",{"aria-hidden":"true"},"",-1)])],2)):nt("",!0),A.value?(le(),fe("button",{key:1,type:"button",class:kt(["flex w-full items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3","border-emerald-300/40 bg-emerald-500/20 text-white"]),onClick:U[1]||(U[1]=()=>{i(),J()})},[...U[14]||(U[14]=[k("span",null,"Install app",-1),k("span",{"aria-hidden":"true"},"",-1)])])):nt("",!0)])])):nt("",!0)]),_:1})]))}}),ao=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},xg=ao(wg,[["__scopeId","data-v-37893952"]]),Ec=new Map,Ic=/@(\d{4}-\d{2}-\d{2})(\[[^\]]+\])?/g,Ac=e=>e.toString().padStart(2,"0"),_g=e=>`${e.getFullYear()}-${Ac(e.getMonth()+1)}-${Ac(e.getDate())}`,Da=e=>{const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return null;const n=Number(t[1]),s=Number(t[2])-1,i=Number(t[3]),a=new Date(n,s,i);return Number.isNaN(a.getTime())?null:a},kg=(e,t)=>new Date(e,t+1,0).getDate(),si=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},Cg=(e,t)=>si(e,t*7),mf=(e,t)=>{const n=new Date(e),s=n.getMonth(),i=n.getDate(),a=s+t,u=new Date(n);u.setDate(1),u.setMonth(a);const f=kg(u.getFullYear(),u.getMonth());return u.setDate(Math.min(i,f)),u},Sg=(e,t)=>mf(e,t*12),Tc=(e,t,n)=>n==="d"?si(e,t):n==="w"?Cg(e,t):n==="m"?mf(e,t):Sg(e,t),Eg=e=>{const t={};if(!e)return t;const s=(e.startsWith("[")?e.slice(1,-1):e).split(",").map(i=>i.trim()).filter(Boolean);for(const i of s){const a=i.match(/^(s|r)(\d+)([dwmy])$/i);if(a){const f=a[1]?.toLowerCase(),p=Number(a[2]),v=a[3]?.toLowerCase();if(!Number.isFinite(p)||p<=0)continue;f==="s"&&(t.span={n:p,unit:v}),f==="r"&&(t.repeat={n:p,unit:v});continue}const u=i.match(/^(span|repeat)=(\d+)([dwmy])$/i);if(u){const f=u[1]?.toLowerCase(),p=Number(u[2]),v=u[3]?.toLowerCase();if(!Number.isFinite(p)||p<=0)continue;f==="span"&&(t.span={n:p,unit:v}),f==="repeat"&&(t.repeat={n:p,unit:v})}}return t},Ig=(e,t,n)=>{const s=[],i=e.content.replace(/\r\n/g,`
`).split(`
`);let a=0,u=0;return i.forEach((f,p)=>{Ic.lastIndex=0;let v;for(;v=Ic.exec(f);){const m=v[1];if(!m)continue;const g=v[2],w=Eg(g),A=v.index+v[0].length,O=f.slice(A).trim();s.push({tokenDate:m,noteId:t.id,noteTitle:t.title??"Untitled",firstTabName:n,noteColor:t.color??null,tabId:e.id,occurrenceIndex:a,textAfterToken:O,lineSnippet:O.slice(0,40),lineIndex:p,tokenRules:w}),a++}u+=f.length+1}),s},Ag=(e,t,n,s)=>e.getTime()<=s.getTime()&&t.getTime()>=n.getTime(),Oc=(e,t,n)=>{const s=Da(e.tokenDate);if(!s)return[];s.setHours(0,0,0,0);const i=e.tokenRules.span??{n:1,unit:"d"},a=e.tokenRules.repeat,u=800,f=[];let p=s;for(let v=0;v<u;v++){const m=si(Tc(p,i.n,i.unit),-1);if(p.getTime()>n.getTime())break;if(Ag(p,m,t,n)){const g=new Date(Math.max(p.getTime(),t.getTime()));g.setHours(0,0,0,0);const w=new Date(Math.min(m.getTime(),n.getTime()));w.setHours(0,0,0,0);for(let A=new Date(g);A.getTime()<=w.getTime();A=si(A,1)){const{tokenRules:O,...J}=e;f.push({...J,date:_g(A),tokenDate:e.tokenDate})}}if(!a)break;p=Tc(p,a.n,a.unit)}return f},sl=(e,t,n)=>{const s=Da(n.start),i=Da(n.end);if(!s||!i)return[];s.setHours(0,0,0,0),i.setHours(0,0,0,0);const a=new Map(e.map(m=>[m.id,m])),u=new Map(t.map(m=>[m.id,m])),f=new Map;t.forEach(m=>{const g=f.get(m.noteId)??[];g.push(m),f.set(m.noteId,g)});const p=new Map;e.forEach(m=>{const g=m.tabOrder?.[0],w=(g?u.get(g):void 0)??(f.get(m.id)??[])[0];w?.name&&p.set(m.id,w.name)});const v=[];return t.forEach(m=>{const g=a.get(m.noteId);if(!g)return;const w=p.get(g.id),A=`${m.id}:${m.updatedAt}:${g.updatedAt}:${w??""}`,O=Ec.get(m.id);if(O&&O.key===A){O.entries.forEach(ue=>v.push(...Oc(ue,s,i)));return}const J=Ig(m,g,w);Ec.set(m.id,{key:A,entries:J}),J.forEach(ue=>v.push(...Oc(ue,s,i)))}),v},Tg={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},Og={class:"flex flex-1 min-h-0 flex-col overflow-hidden px-2 sm:px-0"},Rg={class:"flex items-center justify-between"},Dg={class:"text-sm font-semibold text-white"},Pg={class:"mt-3 flex items-center gap-2 overflow-x-auto overflow-y-hidden pb-1 text-xs text-white no-scrollbar"},$g=["onClick"],Mg={class:"truncate max-w-[160px]"},Ng={class:"mt-2 grid flex-1 min-h-0 grid-cols-7 grid-rows-6 gap-0.5 text-sm overflow-hidden"},jg=["onClick"],Lg={class:"relative px-1 pt-1 sm:px-2 sm:pt-2"},Bg={key:0,class:"absolute right-1 top-1 text-[10px] text-white/50 sm:right-2 sm:top-2"},Fg={class:"flex-1 overflow-hidden px-1 pb-0 sm:px-2 sm:pb-2"},Kg=["onClick"],Ug={class:"w-full rounded-3xl border border-white/10 bg-slate-900/95 p-3 text-white shadow-2xl sm:max-w-md sm:p-4"},qg={class:"flex items-center justify-between"},Vg={class:"text-sm font-semibold"},Hg={class:"mt-4 space-y-3"},Wg=["onClick"],zg={class:"font-semibold text-white"},Gg={class:"mt-1 flex items-center gap-2 text-slate-300"},Yg={class:"min-w-0 truncate"},Jg={key:0,class:"rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-slate-300"},Rc="jotrip:calendar:hiddenNotes",Qg=Zt({__name:"Calendar",setup(e){const t=oo(),n=he(new Date),s=he([]),i=he([]),a=he([]),u=he(null),f=he(!0),p=he(!1),v=he(null),m=he(new Set),g=he(new Set),w=he(!1),A=ie=>ie.toString().padStart(2,"0"),O=(ie,q,M)=>`${ie}-${A(q+1)}-${A(M)}`,J=Je(()=>{const ie=new Date;return O(ie.getFullYear(),ie.getMonth(),ie.getDate())}),ue=Je(()=>new Date(n.value.getFullYear(),n.value.getMonth(),1)),U=Je(()=>n.value.toLocaleDateString(void 0,{month:"long",year:"numeric"})),N=Je(()=>ue.value.getDay()),D=Je(()=>{const ie=new Map;return s.value.forEach(q=>{const M=ie.get(q.date)??[];M.push(q),ie.set(q.date,M)}),ie}),Q=Je(()=>{const ie=n.value.getFullYear(),q=n.value.getMonth(),M=new Date(ie,q,1),re=new Date(ie,q,1-N.value),be=[];for(let H=0;H<42;H++){const de=new Date(re);de.setDate(re.getDate()+H),be.push({day:de.getDate(),date:O(de.getFullYear(),de.getMonth(),de.getDate()),inCurrentMonth:de.getMonth()===M.getMonth()&&de.getFullYear()===M.getFullYear()})}return be}),Pe=()=>{if(u.value)return;const ie=new Date;u.value=O(ie.getFullYear(),ie.getMonth(),ie.getDate())},je=async()=>{f.value=!0;const[ie,q]=await Promise.all([wi(),Jr()]),M=new Set(ie.map(re=>re.id));i.value=ie,a.value=q.filter(re=>M.has(re.noteId)),$e(),w.value||(ot(),w.value=!0,$e()),f.value=!1,Pe()},$e=()=>{if(!Q.value.length)return;const ie=Q.value[0]?.date,q=Q.value[Q.value.length-1]?.date;if(!ie||!q)return;const M=sl(i.value,a.value,{start:ie,end:q});g.value=new Set(M.map(re=>re.noteId)),s.value=M.filter(re=>!m.value.has(re.noteId))},at=ie=>{const q=new Date(n.value);q.setMonth(q.getMonth()+ie),n.value=q,$e()},Be=ie=>{if(u.value=ie,p.value){const q=D.value.get(ie)??[];v.value={date:ie,entries:q}}},ze=(ie,q)=>{q?.stopPropagation();const M=(ie.textAfterToken||"").slice(0,10);t.push({name:"note-editor",params:{id:ie.noteId},query:{date:ie.tokenDate,tab:ie.tabId,...M?{snippet:M}:{}}}),v.value=null},Ge=ie=>{const q=(ie.textAfterToken||"").trim();return q.length?q:ie.firstTabName||ie.noteTitle},se=ie=>ie.noteColor??null,Z=Je(()=>p.value?3:6),De=ie=>{const q=new Set(m.value);q.has(ie)?q.delete(ie):q.add(ie),m.value=q,$e()},me=ie=>!m.value.has(ie),Ce=Je(()=>i.value.filter(ie=>g.value.has(ie.id))),ne=Je(()=>Ce.value.length>0&&m.value.size>=Ce.value.length),Se=(ie,q)=>{const M=ie.color??null;return q?{border:M?`1px solid ${M}`:"1px solid rgba(52,211,153,0.4)",backgroundColor:M?`${M}25`:"rgba(52,211,153,0.12)",color:M?"#fff":"rgb(52,211,153)"}:{border:M?`1px solid ${M}55`:"1px solid rgba(255,255,255,0.2)",backgroundColor:"rgba(255,255,255,0.05)",color:"#ffffff99"}},Ye=()=>{Ce.value.length&&(m.value.size===0?m.value=new Set(Ce.value.map(ie=>ie.id)):m.value=new Set,$e())},ot=()=>{try{const ie=window.localStorage.getItem(Rc);if(!ie)return;const q=JSON.parse(ie);if(!Array.isArray(q))return;const M=new Set(Ce.value.map(be=>be.id)),re=q.filter(be=>M.has(be));m.value=new Set(re)}catch{}};yn(()=>m.value,ie=>{try{window.localStorage.setItem(Rc,JSON.stringify(Array.from(ie)))}catch{}},{deep:!0}),fn(je);const lt=()=>{p.value=window.matchMedia("(max-width: 640px)").matches};return fn(()=>{lt(),window.addEventListener("resize",lt)}),xr(()=>{window.removeEventListener("resize",lt)}),(ie,q)=>(le(),fe(mt,null,[k("section",Tg,[k("div",Og,[k("div",Rg,[k("button",{type:"button",class:"border border-white/10 px-3 py-1 text-xs text-white hover:border-white/30",onClick:q[0]||(q[0]=M=>at(-1))},"  "),k("div",Dg,qe(U.value),1),k("button",{type:"button",class:"border border-white/10 px-3 py-1 text-xs text-white hover:border-white/30",onClick:q[1]||(q[1]=M=>at(1))},"  ")]),k("div",Pg,[k("button",{type:"button",class:kt(["shrink-0 rounded border px-3 py-2",m.value.size===0?"border-indigo-300/50 bg-indigo-500/20":"border-white/20 bg-white/10"]),onClick:Ye},qe(ne.value?"-":"*"),3),(le(!0),fe(mt,null,Mt(Ce.value,M=>(le(),fe("button",{key:M.id,type:"button",class:"flex shrink-0 items-center gap-2 rounded px-3 py-2 border",style:vt(Se(M,me(M.id))),onClick:re=>De(M.id)},[k("span",Mg,qe(M.title||"Untitled"),1)],12,$g))),128))]),q[4]||(q[4]=k("div",{class:"mt-3 grid grid-cols-7 gap-1 text-center text-xs text-slate-400 sm:mt-4"},[k("span",null,"Sun"),k("span",null,"Mon"),k("span",null,"Tue"),k("span",null,"Wed"),k("span",null,"Thu"),k("span",null,"Fri"),k("span",null,"Sat")],-1)),k("div",Ng,[(le(!0),fe(mt,null,Mt(Q.value,(M,re)=>(le(),fe("button",{key:re,type:"button",class:kt(["flex h-full flex-col border text-left text-white transition",[M.inCurrentMonth?D.value.get(M.date)?"border-indigo-300/50 bg-indigo-500/10":"border-white/10 bg-white/5":"border-white/10 bg-black/20 text-slate-500",u.value===M.date?"ring-2 ring-indigo-400":""]]),onClick:be=>Be(M.date)},[k("div",Lg,[k("span",{class:kt(["text-sm font-semibold",M.date===J.value?"text-white":"text-white/60"])},qe(M.day),3),(D.value.get(M.date)?.length??0)>Z.value?(le(),fe("span",Bg," +"+qe((D.value.get(M.date)?.length??0)-Z.value),1)):nt("",!0)]),k("div",Fg,[(le(!0),fe(mt,null,Mt((D.value.get(M.date)||[]).slice(0,Z.value),be=>(le(),fe("p",{key:be.noteId+be.tabId+be.occurrenceIndex+be.date,class:"truncate text-[10px] text-indigo-100 hover:text-white sm:text-[11px]",onClick:nn(H=>!p.value&&ze(be,H),["stop"])},[k("span",{class:"inline border-b",style:vt({borderColor:se(be)??"rgba(255,255,255,0.25)"})},qe(Ge(be)),5)],8,Kg))),128))])],10,jg))),128))])])]),_t(_a,{name:"fade"},{default:Hn(()=>[v.value?(le(),fe("div",{key:0,class:"fixed inset-0 z-50 flex items-end bg-black/70 p-2 sm:items-center sm:p-4",onClick:q[3]||(q[3]=nn(M=>v.value=null,["self"]))},[k("div",Ug,[k("div",qg,[k("p",Vg,"Entries for "+qe(v.value.date),1),k("button",{type:"button",class:"rounded-full border border-white/20 px-3 py-1 text-xs",onClick:q[2]||(q[2]=M=>v.value=null)}," Close ")]),k("ul",Hg,[(le(!0),fe(mt,null,Mt(v.value.entries,M=>(le(),fe("li",{key:M.noteId+M.tabId+M.occurrenceIndex+M.date,class:"rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-slate-200",onClick:re=>ze(M)},[k("p",zg,qe(M.noteTitle),1),k("div",Gg,[k("span",{class:"h-2.5 w-2.5 shrink-0",style:vt({backgroundColor:se(M)??"rgba(255,255,255,0.25)"})},null,4),k("p",Yg,qe(Ge(M)),1)])],8,Wg))),128)),v.value.entries.length?nt("",!0):(le(),fe("li",Jg," No entries for this day. "))])])])):nt("",!0)]),_:1})],64))}}),Xg=ao(Qg,[["__scopeId","data-v-2f5d5b6e"]]),Zg={class:"space-y-6"},ev={class:"flex gap-3"},tv=["disabled"],nv={class:"space-y-3 rounded-2xl border border-white/10 bg-slate-900/50 p-5"},rv={class:"flex items-center justify-between"},sv={class:"text-xs text-slate-400"},ov={key:0,class:"rounded-xl border border-dashed border-white/10 bg-white/5 p-4 text-sm text-slate-300"},iv={class:"space-y-2"},av={class:"text-sm font-semibold text-white"},lv={class:"text-xs text-slate-400"},cv={class:"text-xs text-slate-500"},uv=["onClick"],fv=Zt({__name:"DbDemo",setup(e){const t=he([]),n=he(!0),s=he(!1),i=async()=>{n.value=!0,t.value=await Cs(),n.value=!1},a=async()=>{s.value=!0;const f=await tl({title:"Untitled note"}),p=await Ws({noteId:f.id,name:"Main",content:""});await Nt(f.id,{tabOrder:[p.id]}),await i(),s.value=!1},u=async f=>{await nl(f),await i()};return fn(async()=>{await lf(),await i()}),(f,p)=>(le(),fe("section",Zg,[p[2]||(p[2]=k("header",{class:"flex flex-col gap-2"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"DB Demo"),k("h1",{class:"text-2xl font-semibold text-white"},"IndexedDB CRUD"),k("p",{class:"text-sm text-slate-300"}," Temporary screen to prove the Dexie-backed repository works and persists after refresh. ")],-1)),k("div",ev,[k("button",{type:"button",class:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-700/30 transition hover:bg-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",onClick:a,disabled:s.value},qe(s.value?"Creating...":"Create jot + tab"),9,tv),p[0]||(p[0]=k("span",{class:"self-center text-xs text-slate-400"}," Jots persist across reloads; delete to clear. ",-1))]),k("div",nv,[k("div",rv,[p[1]||(p[1]=k("p",{class:"text-sm font-semibold text-white"},"Jots",-1)),k("span",sv,qe(n.value?"Loading...":`${t.value.length} stored`),1)]),!t.value.length&&!n.value?(le(),fe("div",ov," No jots yet. Create one to populate IndexedDB. ")):nt("",!0),k("ul",iv,[(le(!0),fe(mt,null,Mt(t.value,v=>(le(),fe("li",{key:v.id,class:"flex items-center justify-between rounded-xl border border-white/10 bg-white/5 px-4 py-3"},[k("div",null,[k("p",av,qe(v.title),1),k("p",lv," Updated: "+qe(new Date(v.updatedAt).toLocaleString()),1),k("p",cv,"Tabs: "+qe(v.tabOrder.length),1)]),k("button",{type:"button",class:"rounded-lg border border-white/20 px-3 py-1 text-xs font-semibold text-slate-200 transition hover:border-red-400 hover:text-red-200",onClick:m=>u(v.id)}," Delete ",8,uv)]))),128))])])]))}}),dv={},pv={class:"flex h-full min-h-0 flex-col gap-6 overflow-hidden"};function hv(e,t){return le(),fe("section",pv,[...t[0]||(t[0]=[Uu('<header class="shrink-0"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Help</p><h1 class="text-2xl font-semibold text-white">Quick reference</h1></header><div class="min-h-0 flex-1 space-y-4 overflow-auto px-2 pr-1 sm:px-0"><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Jots &amp; tabs</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Each jot has one or more tabs. Tab bar scrolls horizontally; add with +, rename, move, or delete (last tab cannot be deleted).</li><li>Pin a jot to keep it at the top. Archive hides it from Calendar; archived items sit at the bottom list.</li><li>Note color tints the editor, tab, and list accents.</li><li>Autosave runs as you type and when you navigate away. Title changes also save on blur/navigation.</li><li>Read-only: if the same jot is open in another browser tab, newcomers open in read-only to avoid clashes.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Editor basics</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Plain textarea with fixed line height; gutter shows icons for checkboxes, links, tags, dates, and images.</li><li>Checklists: use <span class="font-mono text-slate-100">- [ ]</span> or <span class="font-mono text-slate-100">- [x]</span>. Click the gutter checkbox to toggle.</li><li>Line wrapping is supported; gutter alignment adapts to wraps.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Tags</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Start a line with <span class="font-mono text-slate-100">#</span>; the rest of the line is the tag.</li><li><span class="font-mono text-slate-100">#</span> lines get a green highlight and gutter icon.</li><li><span class="font-mono text-slate-100">#!</span> makes a priority tag: orange highlight, bold, orange gutter icon, and sorted first.</li><li>Tags show in the Jots list, Home tag cloud, and are searchable (title + tags).</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Dates &amp; calendar</h2><p class="mt-2 text-sm text-slate-300"> Type a date token like <span class="font-mono text-slate-100">@today</span> and press space to normalize it into <span class="font-mono text-slate-100">@YYYY-MM-DD</span>. Everything after the token on that line becomes the calendar entry. </p><p class="mt-2 text-sm text-slate-300"> You can also add optional calendar rules directly after the date token using brackets. Both shorthand and named forms are supported: <span class="font-mono text-slate-100">@2025-12-22[s2d,r1y]</span> or <span class="font-mono text-slate-100">@2025-12-22[span=2d,repeat=1y]</span>. </p><div class="mt-4 grid gap-4 sm:grid-cols-2"><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Basics</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@today</span></li><li><span class="font-mono">@tomorrow</span></li><li><span class="font-mono">@yesterday</span></li><li><span class="font-mono">@inaweek</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Relative</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@in2days</span>, <span class="font-mono">@in10days</span></li><li><span class="font-mono">@in2weeks</span>, <span class="font-mono">@in3months</span></li><li><span class="font-mono">@in1year</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Week / Month / Year</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@thisweek</span> (Monday)</li><li><span class="font-mono">@nextweek</span> (next Monday)</li><li><span class="font-mono">@nextmonth</span></li><li><span class="font-mono">@nextyear</span></li><li><span class="font-mono">@eow</span>, <span class="font-mono">@eom</span>, <span class="font-mono">@eoy</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Weekdays</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@monday</span>  <span class="font-mono">@sunday</span></li><li><span class="font-mono">@mon</span>, <span class="font-mono">@tue</span>, <span class="font-mono">@wed</span>, <span class="font-mono">@thu</span>, <span class="font-mono">@fri</span></li><li><span class="font-mono">@sat</span>, <span class="font-mono">@sun</span></li><li><span class="font-mono">@nextmonday</span> (always future)</li></ul></div><div class="sm:col-span-2"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Business</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@weekday</span> (today if MonFri, else next Monday)</li><li><span class="font-mono">@nextweekday</span> (next MonFri day)</li></ul></div><div class="sm:col-span-2"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Calendar Rules</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li> Span: <span class="font-mono">s2d</span> or <span class="font-mono">span=2d</span> (units: <span class="font-mono">d</span>, <span class="font-mono">w</span>, <span class="font-mono">m</span>, <span class="font-mono">y</span>) </li><li> Repeat: <span class="font-mono">r2w</span> or <span class="font-mono">repeat=2w</span> (units: <span class="font-mono">d</span>, <span class="font-mono">w</span>, <span class="font-mono">m</span>, <span class="font-mono">y</span>) </li><li> Examples: <span class="font-mono">@2025-12-22[r1y]</span>, <span class="font-mono">@2022-12-22[s2d]</span>, <span class="font-mono">@2022-12-22[s1w,r2w]</span></li></ul></div></div></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Images</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Add images via Add Image button or paste. They are stored locally (and synced if enabled).</li><li>Editor inserts a placeholder line like <span class="font-mono text-slate-100">![image:abc123]</span>.</li><li>Gutter shows a thumbnail; tap to open the full image viewer. Deleting the placeholder keeps the image for safety until cleanup.</li><li>Exports embed images directly in the HTML; re-import recreates them.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Export &amp; import</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Export a jot to single-file HTML (includes tabs, text, images, and an import button inside) or to plain text.</li><li>Import page accepts exported HTML and recreates the jot (new id).</li><li>Settings has Export all and Clear all data (with double confirm).</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Sync</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Enter your <span class="font-mono text-slate-100">user/pass/phrase</span> bundle and server URL in Settings (server defaults to current origin).</li><li>Data is encrypted client-side with your passphrase; server stores encrypted blobs per user. Auth is Basic (user/password) auto-provisioned on first request.</li><li>Triggers: on load, interval (if enabled), when app regains focus, when opening the jot list, on tab/note change, and via the menu Sync now (visible when sync is on).</li><li>Deletes propagate via tombstones (notes, tabs, images).</li><li>Multiple browser tabs: the first to open a jot is editable; others open read-only and will refresh when changes arrive.</li><li>To change your user/pass/phrase, export a backup, wipe local + remote data, create a new bundle, then import the backup.</li></ul></section></div>',2)])])}const mv=ao(dv,[["render",hv]]),Dc=/\bhttps?:\/\/[^\s<>"')]+/g,Pc=/@(\d{4}-\d{2}-\d{2})/g,$c=/!\[image:([^\]]+)\]/g,gv=/^\s*-\s\[( |x|X)\]/;function to(e){const t=[],n=[],s=[],i=[],a=[];return e.split(`
`).forEach((u,f)=>{$c.lastIndex=0,Dc.lastIndex=0,Pc.lastIndex=0;const p=u.match(gv);if(p){const w=(p[1]??"").toLowerCase();t.push({lineIndex:f,checked:w==="x"})}let v;for(;v=$c.exec(u);){const w=v?.[1];w&&n.push({lineIndex:f,imageId:w})}let m;for(;m=Dc.exec(u);){const w=m?.[0];w&&s.push({lineIndex:f,url:w})}if(u.startsWith("#!")){const w=u.slice(2).trim();w&&i.push({lineIndex:f,tag:w,priority:!0})}else if(u.startsWith("#")){const w=u.slice(1).trim();w&&i.push({lineIndex:f,tag:w,priority:!1})}let g;for(;g=Pc.exec(u);){if(!g)continue;const w=g.index+g[0].length,A=u.slice(w).trim(),O=g[1];O&&a.push({lineIndex:f,date:O,entryText:A})}}),{checklists:t,images:n,urls:s,tags:i,dates:a}}const vv={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},yv={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},bv={class:"border border-white/10 bg-white/5 p-3 sm:p-4"},wv={key:0,class:"mt-3 text-sm text-slate-300"},xv={key:1,class:"mt-3 space-y-2"},_v=["onClick"],kv={class:"flex items-center gap-2"},Cv={class:"min-w-0 truncate font-semibold"},Sv={class:"mt-1 truncate text-xs text-slate-300"},Ev={key:0,class:"border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},Iv={class:"mt-3 border border-white/10 bg-white/5 p-3 sm:mt-4 sm:p-4"},Av={key:0,class:"mt-3 text-sm text-slate-300"},Tv={key:1,class:"mt-3 space-y-2"},Ov=["onClick"],Rv={class:"truncate font-semibold"},Dv={class:"mt-1 text-xs text-slate-400"},Pv={key:0,class:"border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},$v={class:"mt-3 border border-white/10 bg-white/5 p-3 sm:mt-4 sm:p-4"},Mv={key:0,class:"mt-3 text-sm text-slate-300"},Nv={key:1,class:"mt-3"},jv={class:"flex flex-wrap gap-2"},Lv=["onClick"],Bv={key:0,class:"mt-2 border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},Fv=Zt({__name:"Home",setup(e){const t=oo(),n=he(!0),s=he([]),i=he([]),a=he([]),u=w=>w.toString().padStart(2,"0"),f=()=>{const w=new Date;return`${w.getFullYear()}-${u(w.getMonth()+1)}-${u(w.getDate())}`},p=w=>{const A=(w.textAfterToken||"").trim();return A.length?A:w.firstTabName||w.noteTitle},v=w=>{const A=(w.textAfterToken||"").slice(0,10);t.push({name:"note-editor",params:{id:w.noteId},query:{date:w.tokenDate,tab:w.tabId,...A?{snippet:A}:{}}})},m=(w,A,O)=>t.push({name:"note-editor",params:{id:w},query:A?{tab:A,...O!=null?{line:O}:{}}:{}});return fn(async()=>{n.value=!0;const[w,A]=await Promise.all([wi(),Jr()]),O=new Set(w.map(N=>N.id)),J=A.filter(N=>O.has(N.noteId)),ue=f();s.value=sl(w,J,{start:ue,end:ue}),i.value=w.filter(N=>!!N.pinnedAt).sort((N,D)=>{const Q=N.pinnedAt?new Date(N.pinnedAt).getTime():0;return(D.pinnedAt?new Date(D.pinnedAt).getTime():0)-Q}).map(N=>({id:N.id,title:N.title||"Untitled",updatedAt:N.updatedAt,color:N.color??null}));const U=[];for(const N of J)to(N.content).tags.forEach(Q=>{U.push({tag:Q.tag,priority:Q.priority,noteId:N.noteId,tabId:N.id,updatedAt:w.find(Pe=>Pe.id===N.noteId)?.updatedAt||N.updatedAt,color:w.find(Pe=>Pe.id===N.noteId)?.color??null,lineIndex:Q.lineIndex})});a.value=U.sort((N,D)=>(N.priority?1:0)!=(D.priority?1:0)?(D.priority?1:0)-(N.priority?1:0):new Date(D.updatedAt).getTime()-new Date(N.updatedAt).getTime()),n.value=!1}),(w,A)=>(le(),fe("section",vv,[k("div",yv,[k("div",bv,[A[0]||(A[0]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Today",-1)),n.value?(le(),fe("div",wv,"Loading")):(le(),fe("div",xv,[(le(!0),fe(mt,null,Mt(s.value,O=>(le(),fe("button",{key:O.noteId+O.tabId+O.occurrenceIndex+O.date,type:"button",class:"w-full border border-white/10 bg-slate-900/40 p-3 text-left text-sm text-white hover:border-white/20",onClick:J=>v(O)},[k("div",kv,[k("span",{class:"h-3 w-1 shrink-0",style:vt(O.noteColor?{backgroundColor:O.noteColor}:{backgroundColor:"rgba(255,255,255,0.25)"})},null,4),k("span",Cv,qe(O.noteTitle),1)]),k("p",Sv,qe(p(O)),1)],8,_v))),128)),s.value.length?nt("",!0):(le(),fe("div",Ev," No events today. "))]))]),k("div",Iv,[A[1]||(A[1]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Pinned",-1)),n.value?(le(),fe("div",Av,"Loading")):(le(),fe("div",Tv,[(le(!0),fe(mt,null,Mt(i.value,O=>(le(),fe("button",{key:O.id,type:"button",class:"w-full border border-white/10 bg-slate-900/40 p-3 text-left text-sm text-white hover:border-white/20",style:vt(O.color?{borderLeft:`6px solid ${O.color}`}:void 0),onClick:J=>m(O.id)},[k("p",Rv,qe(O.title),1),k("p",Dv,"Updated "+qe(new Date(O.updatedAt).toLocaleString()),1)],12,Ov))),128)),i.value.length?nt("",!0):(le(),fe("div",Pv," No pinned jots. "))]))]),k("div",$v,[A[2]||(A[2]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Tags",-1)),n.value?(le(),fe("div",Mv,"Loading")):(le(),fe("div",Nv,[k("div",jv,[(le(!0),fe(mt,null,Mt(a.value,O=>(le(),fe("button",{key:O.tag+O.noteId,type:"button",class:"inline-flex items-center gap-2 rounded px-3 py-2 text-sm text-white",style:vt({border:O.priority?`1px solid ${O.color||"rgba(246,153,63,0.5)"}`:"1px solid transparent",backgroundColor:O.priority?O.color?`${O.color}20`:"rgba(246,153,63,0.12)":O.color?`${O.color}15`:"rgba(52,211,153,0.12)",color:O.color?"#fff":O.priority?"rgb(249,115,22)":"rgb(52,211,153)"}),onClick:J=>m(O.noteId,O.tabId,O.lineIndex)},[k("span",{class:kt(O.priority?"font-bold":"")}," #"+qe(O.tag.length>20?O.tag.slice(0,20)+"":O.tag),3)],12,Lv))),128))]),a.value.length?nt("",!0):(le(),fe("div",Bv," No tags found. "))]))])])]))}}),Kv={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},Uv={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},qv={class:"space-y-3 border border-white/10 bg-slate-900/40 p-3 sm:p-4"},Vv={class:"space-y-2"},Hv={key:0,class:"text-sm text-red-300"},Wv={key:1,class:"space-y-2 border border-yellow-300/30 bg-yellow-500/10 p-3 text-sm text-white"},zv=["disabled"],Gv={key:2,class:"space-y-2 text-sm text-slate-200"},Yv={class:"font-semibold"},Jv=["disabled"],Qv=Zt({__name:"Import",setup(e){const t=oo(),n=he(null),s=he(null),i=he(null),a=he(!1),u=()=>{n.value=null,s.value=null,i.value=null},f=async g=>{if(u(),!g)return;const w=await g.text();try{const O=JSON.parse(w);if(O&&O.type==="jotrip-backup"&&Array.isArray(O.notes)&&Array.isArray(O.tabs)){i.value=O;return}}catch{}const A=w.match(/<script[^>]+id=["']jotrip-export["'][^>]*>([\s\S]*?)<\/script>/);if(A?.[1])try{const O=JSON.parse(A[1]);s.value=O;return}catch{}n.value="Could not find supported export data."},p=(g,w)=>{const A=atob(g),O=new ArrayBuffer(A.length),J=new Uint8Array(O);for(let ue=0;ue<A.length;ue++)J[ue]=A.charCodeAt(ue);return new Blob([O],{type:w})},v=async()=>{if(s.value){a.value=!0;try{const g=await tl({title:s.value.note.title||"Imported note",tabOrder:[]}),w=new Map,A=new Map;if(s.value.images?.length)for(const J of s.value.images)A.set(J.id,bi());for(const J of s.value.tabs){const ue=J.content.replace(/!\[image:([^\]]+)\]/g,(N,D)=>{const Q=A.get(D);return Q?`![image:${Q}]`:N}),U=await Ws({noteId:g.id,name:J.name,content:ue});w.set(J.id,U.id)}const O=s.value.tabOrder.map(J=>w.get(J)).filter(J=>!!J);if(await Nt(g.id,{color:s.value.note.color??null,tabOrder:O}),s.value.images?.length)for(const J of s.value.images){const ue=w.get(J.tabId);if(!ue)continue;const U=p(J.base64,J.mime);await ff({id:A.get(J.id)??J.id,noteId:g.id,tabId:ue,mime:J.mime,blob:U,width:J.width,height:J.height,thumbnailDataUrl:J.thumbnailDataUrl})}t.push({name:"note-editor",params:{id:g.id}})}catch{n.value="Import failed."}finally{a.value=!1}}},m=async()=>{const g=i.value;if(!(!g||!window.confirm("Importing a backup will replace ALL local data. Continue?")||window.prompt("Type RESTORE to proceed with replacing all data")!=="RESTORE")){a.value=!0;try{const O=el(),J=(g.notes??[]).map(D=>JSON.parse(JSON.stringify(D))),ue=(g.tabs??[]).map(D=>JSON.parse(JSON.stringify(D))),U=(g.meta??[]).map(D=>({key:D.key,value:D.value})),N=await Promise.all((g.images??[]).map(async D=>({id:D.id,noteId:D.noteId,tabId:D.tabId,mime:D.mime,blob:p(D.base64,D.mime),width:D.width,height:D.height,createdAt:D.createdAt,thumbnailDataUrl:D.thumbnailDataUrl})));await O.transaction("rw",[O.notes,O.tabs,O.images,O.meta],async()=>{await Promise.all([O.notes.clear(),O.tabs.clear(),O.images.clear(),O.meta.clear()]),J.length&&await O.notes.bulkPut(J),ue.length&&await O.tabs.bulkPut(ue),N.length&&await O.images.bulkPut(N),U.length&&await O.meta.bulkPut(U)}),t.push({name:"home"})}catch(O){console.error(O),n.value="Import failed. See console for details."}finally{a.value=!1}}};return(g,w)=>(le(),fe("section",Kv,[w[3]||(w[3]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Import"),k("h1",{class:"text-2xl font-semibold text-white"},"Import exported note")],-1)),k("div",Uv,[k("div",qv,[k("div",Vv,[w[1]||(w[1]=k("p",{class:"text-sm text-slate-300"},"Choose an export file (.html single jot or .json full backup).",-1)),k("input",{type:"file",accept:".html,text/html,application/json,.json",onChange:w[0]||(w[0]=A=>f(A.target.files?.[0]))},null,32)]),n.value?(le(),fe("div",Hv,qe(n.value),1)):nt("",!0),i.value?(le(),fe("div",Wv,[w[2]||(w[2]=k("p",{class:"font-semibold"},"Backup detected",-1)),k("p",null,"Jots: "+qe(i.value.notes.length),1),k("p",null,"Tabs: "+qe(i.value.tabs.length),1),k("p",null,"Images: "+qe(i.value.images?.length??0),1),k("button",{type:"button",class:"border border-emerald-300/40 bg-emerald-500/20 px-3 py-2 text-sm text-white",disabled:a.value,onClick:m},qe(a.value?"Importing":"Import backup (replaces all data)"),9,zv)])):s.value?(le(),fe("div",Gv,[k("p",Yv,"Found: "+qe(s.value.note.title||"Untitled"),1),k("p",null,"Tabs: "+qe(s.value.tabs.length),1),k("p",null,"Images: "+qe(s.value.images?.length??0),1),k("button",{type:"button",class:"border border-emerald-300/40 bg-emerald-500/20 px-3 py-2 text-sm text-white",disabled:a.value,onClick:v},qe(a.value?"Importing":"Import jot"),9,Jv)])):nt("",!0)])])]))}}),gf=(e,t)=>{const n=e.lastIndexOf(`
`,t-1)+1,s=e.indexOf(`
`,t),i=s===-1?e.length:s,a=e.slice(n,i),f=a.startsWith("# ")?a.replace(/^#\s+/,""):`# ${a}`,p=f.length-a.length,v=e.slice(0,n)+f+e.slice(i),m=t+p;return{text:v,selectionStart:m,selectionEnd:m}},vf=(e,t)=>{const n=e.lastIndexOf(`
`,t-1)+1,s="- [ ] ",i=e.slice(0,n)+s+e.slice(n),a=t+s.length;return{text:i,selectionStart:a,selectionEnd:a}},Xv=["placeholder","readonly"],Zv=Zt({__name:"NoteEditorTextarea",props:{modelValue:{},placeholder:{},textareaClass:{},readonly:{type:Boolean}},emits:["update:modelValue","selection-change","tag-trigger","date-trigger","scroll","paste","cursor-line","wrap-cols"],setup(e,{expose:t,emit:n}){const s=e,i=n,a=he(null),u=he(null);let f=null,p=null,v=0,m=!1;const g=Je({get:()=>s.modelValue,set:q=>i("update:modelValue",q)}),w=()=>{const q=a.value;if(!q)return;i("selection-change",{start:q.selectionStart,end:q.selectionEnd});const M=q.value.slice(0,q.selectionStart).split(`
`).length-1;i("cursor-line",{lineIndex:M})},A=()=>{const q=a.value;if(!q)return;const M=q.selectionStart,re=q.value.slice(0,M).split(`
`).length-1,be=q.value.lastIndexOf(`
`,M-1)+1,H=q.value.slice(be,M),de=H.match(/(?:^|[\s])#([A-Za-z0-9_-]*)$/);de&&i("tag-trigger",{query:de[1]??"",lineIndex:re,charIndex:M-be});const W=H.match(/(?:^|[\s])@([^\s]*)$/);W&&i("date-trigger",{query:W[1]??"",lineIndex:re,charIndex:M-be})},O=(q="")=>{const M=a.value;if(!M)return!1;const re=M.selectionStart,be=M.value.lastIndexOf(`
`,re-1)+1,de=M.value.slice(be,re).match(/@([^\s]*)$/);if(!de)return!1;const W=de[1]??"",Ie=Z(W);if(!Ie)return!1;const Ue=re-W.length-1,y=M.value.slice(0,Ue),_=M.value.slice(M.selectionEnd),P=`${y}@${Ie}${q}${_}`,G=Ue+Ie.length+1+q.length;return u.value=G,i("update:modelValue",P),Yt(()=>ie()),!0},J=()=>{const q=a.value;if(!q||m)return!1;const M=q.selectionStart;if(!M)return!1;const re=q.value[M-1];if(re!==" "&&re!==`
`)return!1;const be=M-1,H=q.value.lastIndexOf(`
`,be-1)+1,W=q.value.slice(H,be).match(/@([^\s]*)$/);if(!W)return!1;const Ie=W[1]??"",Ue=Z(Ie);if(!Ue)return!1;const y=be-Ie.length-1,_=q.value.slice(0,y),P=q.value.slice(M),G=`${_}@${Ue}${re}${P}`,ee=y+1+Ue.length+1;return m=!0,u.value=ee,i("update:modelValue",G),Yt(()=>{ie(),m=!1}),!0},ue=q=>{const M=a.value;if(!M)return;const re=M.selectionStart,be=M.value,H=be.slice(0,re)+q+be.slice(re+q.length),de=re+q.length;u.value=de,i("update:modelValue",H),Yt(()=>ie())},U=(q,M)=>{u.value=M,i("update:modelValue",q),Yt(()=>ie())},N=()=>{const q=a.value;if(!q)return!1;const M=q.selectionStart,re=q.selectionEnd;if(M!==re)return!1;const be=q.value,H=be.lastIndexOf(`
`,M-1)+1,de=be.indexOf(`
`,M),W=de===-1?be.length:de,Ie=be.slice(H,W);if(!/^\s*-\s\[( |x|X)\]/.test(Ie))return!1;if(/^\s*-\s\[\s\]\s*$/.test(Ie)){const P=be.slice(0,H),G=be.slice(W);return U(P+G,H),!0}const _=`
${Ie.match(/^(\s*)-/)?.[1]??""}- [ ] `;return U(be.slice(0,M)+_+be.slice(re),M+_.length),!0},D=q=>{const M=q.getFullYear(),re=String(q.getMonth()+1).padStart(2,"0"),be=String(q.getDate()).padStart(2,"0");return`${M}-${re}-${be}`},Q=(q,M)=>new Date(q,M+1,0).getDate(),Pe=(q,M)=>{const re=new Date(q);return re.setDate(re.getDate()+M),re},je=(q,M)=>Pe(q,M*7),$e=(q,M)=>{const re=new Date(q),be=re.getMonth(),H=re.getDate(),de=be+M,W=new Date(re);W.setDate(1),W.setMonth(de);const Ie=Q(W.getFullYear(),W.getMonth());return W.setDate(Math.min(H,Ie)),W},at=(q,M)=>$e(q,M*12),Be=q=>{const M=new Date(q),be=(M.getDay()+6)%7;return M.setHours(0,0,0,0),M.setDate(M.getDate()-be),M},ze=q=>{const M=Be(q),re=Pe(M,6);return re.setHours(0,0,0,0),re},Ge=q=>{const M=new Date(q),re=M.getFullYear(),be=M.getMonth(),H=new Date(re,be+1,0);return H.setHours(0,0,0,0),H},se=q=>{const M=new Date(q),re=new Date(M.getFullYear(),11,31);return re.setHours(0,0,0,0),re},Z=q=>{if(!q)return null;const M=q.toLowerCase(),re=new Date;if(M==="today")return D(re);if(M==="tomorrow")return D(Pe(re,1));if(M==="yesterday")return D(Pe(re,-1));if(M==="inaweek")return D(je(re,1));if(M==="nextweek")return D(Be(je(re,1)));if(M==="thisweek")return D(Be(re));if(M==="nextmonth")return D($e(re,1));if(M==="nextyear")return D(at(re,1));if(M==="eow")return D(ze(re));if(M==="eom")return D(Ge(re));if(M==="eoy")return D(se(re));if(M==="weekday"){const _=re.getDay();return _>=1&&_<=5?D(re):D(Be(je(re,1)))}if(M==="nextweekday"){const _=re.getDay();return _>=1&&_<=4?D(Pe(re,1)):D(Be(je(re,1)))}const be=M.match(/^in(\d+)(day|days|week|weeks|month|months|year|years)$/);if(be){const _=Number(be[1]);if(!Number.isFinite(_)||_<0)return null;const P=be[2];if(P==="day"||P==="days")return D(Pe(re,_));if(P==="week"||P==="weeks")return D(je(re,_));if(P==="month"||P==="months")return D($e(re,_));if(P==="year"||P==="years")return D(at(re,_))}const H={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},de={sun:"sunday",mon:"monday",tue:"tuesday",tues:"tuesday",wed:"wednesday",thu:"thursday",thur:"thursday",thurs:"thursday",fri:"friday",sat:"saturday"},W=de[M]??M;if(W in H){const _=H[W],P=new Date,G=P.getDay(),ee=(_-G+7)%7;return P.setDate(P.getDate()+ee),D(P)}const Ie=M.match(/^next([a-z]+)$/);if(Ie){const _=Ie[1]??"",P=de[_]??_;if(P in H){const G=H[P],ee=new Date,te=ee.getDay(),xe=(G-te+7)%7||7;return ee.setDate(ee.getDate()+xe),D(ee)}}const Ue=q.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(Ue){const _=Ue[1],P=Ue[2],G=Ue[3];return!_||!P||!G?null:`${_}-${P.padStart(2,"0")}-${G.padStart(2,"0")}`}const y=q.match(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/);if(y){const _=y[1],P=y[2],G=y[3];return!_||!P||!G?null:`${_}-${P.padStart(2,"0")}-${G.padStart(2,"0")}`}return null},De=()=>{J(),A(),w()},me=q=>{if(q.key===" "&&O(" ")&&q.preventDefault(),q.key==="Enter"){if(O(" ")){q.preventDefault(),ue(`
`);return}N()&&q.preventDefault()}},Ce=()=>{A(),w()},ne=()=>{const q=a.value;if(!q)return;const M=getComputedStyle(q),re=parseFloat(M.lineHeight),be=parseFloat(M.paddingTop),H=parseFloat(M.paddingBottom);i("scroll",{scrollTop:q.scrollTop,clientHeight:q.clientHeight,lineHeight:re,paddingTop:be,paddingBottom:H})},Se=q=>{if(p)return p;const M=document.createElement("textarea");return M.setAttribute("aria-hidden","true"),M.tabIndex=-1,M.style.position="absolute",M.style.left="-10000px",M.style.top="0",M.style.height="0",M.style.overflow="hidden",M.style.whiteSpace="pre-wrap",M.style.resize="none",document.body.appendChild(M),p=M,Ye(q),M},Ye=q=>{if(!p)return;const M=getComputedStyle(q);p.style.boxSizing=M.boxSizing,p.style.fontFamily=M.fontFamily,p.style.fontSize=M.fontSize,p.style.fontWeight=M.fontWeight,p.style.letterSpacing=M.letterSpacing,p.style.lineHeight=M.lineHeight,p.style.padding=M.padding,p.style.border=M.border,p.style.width=`${q.clientWidth}px`},ot=()=>{const q=a.value;if(!q)return;const M=Se(q);Ye(q),M.value="M";const re=M.scrollHeight;if(!re)return;const be=Ue=>Ue<=re+.5;let H=1,de=5e3,W=1;for(;H<=de;){const Ue=Math.floor((H+de)/2);M.value="M".repeat(Ue);const y=M.scrollHeight;be(y)?(W=Ue,H=Ue+1):de=Ue-1}const Ie=Math.max(1,W);Ie!==v&&(v=Ie,i("wrap-cols",{cols:Ie}))};t({focus:()=>a.value?.focus(),applyFormatting:q=>{const M=a.value;if(!M||s.readonly)return;const re=M.selectionStart,be=M.value;let H;q==="header"?H=gf(be,re):H=vf(be,re),i("update:modelValue",H.text),requestAnimationFrame(()=>{M.selectionStart=H.selectionStart,M.selectionEnd=H.selectionEnd,w()})}}),fn(()=>{w(),ne(),ot();const q=a.value;q&&"ResizeObserver"in window?(f=new ResizeObserver(()=>ot()),f.observe(q)):window.addEventListener("resize",ot)}),xr(()=>{f&&(f.disconnect(),f=null),window.removeEventListener("resize",ot),p&&p.parentNode&&p.parentNode.removeChild(p),p=null}),yn(()=>s.modelValue,()=>{requestAnimationFrame(()=>{ie(),w()})});const ie=()=>{const q=a.value;if(q&&u.value!==null){const M=u.value;q.selectionStart=M,q.selectionEnd=M,u.value=null}};return(q,M)=>qr((le(),fe("textarea",{ref_key:"textareaRef",ref:a,"onUpdate:modelValue":M[0]||(M[0]=re=>g.value=re),class:kt(["editor-textarea",e.textareaClass]),placeholder:e.placeholder,readonly:!!e.readonly,onInput:De,onKeyup:Ce,onSelect:w,onMouseup:w,onKeydown:me,onScroll:ne,onPaste:M[1]||(M[1]=re=>i("paste",re))},null,42,Xv)),[[bs,g.value]])}}),ey=["onMouseenter"],ty=["onClick"],ny=["onClick"],ry=["onClick"],sy=["src"],oy={key:1,class:"px-2"},iy=["onClick"],ay=["onClick"],Mc=5,ly=Zt({__name:"EditorGutter",props:{text:{},parsed:{},scrollTop:{},viewportHeight:{},lineHeight:{},paddingTop:{},paddingBottom:{},imageThumbs:{},activeLine:{},wrapCols:{}},emits:["toggle-checklist","line-tags","line-link","line-images","line-dates","request-image","hover-rect"],setup(e,{emit:t}){const n=e,s=t,i=Je(()=>n.text.replace(/\r\n/g,`
`).split(`
`)),a=Je(()=>Math.max(1,i.value.length)),u=Je(()=>{const U=new Map;return n.parsed.checklists.forEach(N=>{const D=U.get(N.lineIndex)??{};D.hasChecklist=!0,D.checklistChecked=N.checked,U.set(N.lineIndex,D)}),n.parsed.urls.forEach(N=>{const D=U.get(N.lineIndex)??{};D.urls=[...D.urls??[],N.url],U.set(N.lineIndex,D)}),n.parsed.tags.forEach(N=>{const D=U.get(N.lineIndex)??{};D.tags=[...D.tags??[],{tag:N.tag,priority:N.priority}],U.set(N.lineIndex,D)}),n.parsed.images.forEach(N=>{const D=U.get(N.lineIndex)??{};D.images=[...D.images??[],N.imageId],U.set(N.lineIndex,D)}),n.parsed.dates.forEach(N=>{const D=U.get(N.lineIndex)??{};D.dates=[...D.dates??[],N.date],U.set(N.lineIndex,D)}),U}),f=Je(()=>{const U=Math.max(1,n.wrapCols??Number.POSITIVE_INFINITY),N=new Array(a.value),D=new Array(a.value);let Q=0;for(let Pe=0;Pe<a.value;Pe++){const $e=(i.value[Pe]??"").length||0,at=U===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil($e/U));N[Pe]=Q,D[Pe]=at,Q+=at}return{rowStarts:N,rowCounts:D,totalRows:Q}}),p=U=>{const N=f.value.rowStarts,D=f.value.rowCounts;let Q=0,Pe=N.length-1,je=0;for(;Q<=Pe;){const $e=Q+Pe>>1;(N[$e]??0)<=U?(je=$e,Q=$e+1):Pe=$e-1}for(;je>0&&U<(N[je]??0);)je--;for(;je<D.length-1&&U>=(N[je]??0)+(D[je]??1);)je++;return je},v=Je(()=>{const U=n.paddingTop??0,N=Math.max(0,n.scrollTop-U),D=Math.max(0,Math.floor(N/n.lineHeight)-Mc),Q=Math.ceil(n.viewportHeight/n.lineHeight)+Mc*2,Pe=Math.min(f.value.totalRows,D+Q),je=p(D);let $e=je;for(;$e<a.value&&(f.value.rowStarts[$e]??0)<Pe;)$e++;return{startLine:je,endLine:$e}}),m=Je(()=>{const U=[];for(let N=v.value.startLine;N<v.value.endLine;N++){const D=u.value.get(N);U.push({lineIndex:N,meta:D,rowStart:f.value.rowStarts[N]??0,rowCount:f.value.rowCounts[N]??1})}return U}),g=Je(()=>{const U=new Set;return m.value.forEach(N=>{N.meta?.images?.forEach(D=>U.add(D))}),Array.from(U)});yn(()=>g.value,U=>{U.forEach(N=>s("request-image",{imageId:N}))},{immediate:!0});const w=(U,N)=>{N.preventDefault(),s("toggle-checklist",U)},A=(U,N)=>{N?.length&&s("line-tags",{lineIndex:U,tags:N.map(D=>D.tag)})},O=(U,N)=>{N?.length&&s("line-link",{lineIndex:U,urls:N})},J=(U,N)=>{N?.length&&s("line-images",{lineIndex:U,imageIds:N})},ue=(U,N)=>{N?.length&&s("line-dates",{lineIndex:U,dates:N})};return(U,N)=>(le(),fe("div",{class:"relative w-12 select-none overflow-hidden border-r border-white/10 bg-transparent",style:vt({height:`${e.viewportHeight||a.value*e.lineHeight}px`}),onMouseleave:N[5]||(N[5]=D=>s("hover-rect",null))},[k("div",{class:"absolute inset-0",style:vt({height:`${(e.paddingTop??0)+(e.paddingBottom??0)+f.value.totalRows*e.lineHeight}px`})},[(le(!0),fe(mt,null,Mt(m.value,D=>(le(),fe("div",{key:D.lineIndex,class:kt(["absolute left-0 right-0 flex items-center justify-stretch gap-0 px-0",[e.activeLine===D.lineIndex?D.meta?.tags?.some(Q=>Q.priority)?"bg-orange-500/15":"bg-white/10":"",e.activeLine!==D.lineIndex&&D.meta?.tags?.some(Q=>Q.priority)?"bg-orange-500/8":""]]),style:vt({height:`${D.rowCount*e.lineHeight}px`,transform:`translateY(${(e.paddingTop??0)+D.rowStart*e.lineHeight-e.scrollTop}px)`}),onMouseenter:Q=>s("hover-rect",{top:(e.paddingTop??0)+D.rowStart*e.lineHeight-e.scrollTop,height:D.rowCount*e.lineHeight})},[D.meta?.hasChecklist?(le(),fe("button",{key:0,class:kt(["icon-chip",D.meta.checklistChecked?"bg-amber-400/30 text-amber-100 border-amber-200/60":"bg-amber-400/15 text-amber-200"]),type:"button",onMousedown:N[0]||(N[0]=nn(()=>{},["prevent"])),onClick:Q=>w(D.lineIndex,Q)},qe(D.meta.checklistChecked?"":""),43,ty)):nt("",!0),D.meta?.dates?.length?(le(),fe("button",{key:1,class:"icon-chip bg-purple-400/15 text-purple-200 border border-white/15",type:"button",onMousedown:N[1]||(N[1]=nn(()=>{},["prevent"])),onClick:Q=>ue(D.lineIndex,D.meta.dates)},"  ",40,ny)):nt("",!0),D.meta?.images?.length?(le(),fe("button",{key:2,class:"icon-chip bg-indigo-400/15 text-indigo-200 p-0",type:"button",onMousedown:N[2]||(N[2]=nn(()=>{},["prevent"])),onClick:Q=>J(D.lineIndex,D.meta.images)},[D.meta.images[0]&&e.imageThumbs?.[D.meta.images[0]]?(le(),fe("img",{key:0,src:e.imageThumbs[D.meta.images[0]],alt:"thumb",class:"h-6 w-6 rounded-md object-cover"},null,8,sy)):(le(),fe("span",oy,""))],40,ry)):nt("",!0),D.meta?.urls?.length?(le(),fe("button",{key:3,class:"icon-chip bg-sky-400/15 text-sky-200",type:"button",onMousedown:N[3]||(N[3]=nn(()=>{},["prevent"])),onClick:Q=>O(D.lineIndex,D.meta.urls)},"  ",40,iy)):nt("",!0),D.meta?.tags?.length?(le(),fe("button",{key:4,class:kt(["icon-chip",D.meta.tags.some(Q=>Q.priority)?"bg-orange-400/15 text-orange-100 border-orange-200/50":"bg-emerald-400/15 text-emerald-200"]),type:"button",onMousedown:N[4]||(N[4]=nn(()=>{},["prevent"])),onClick:Q=>A(D.lineIndex,D.meta.tags)}," # ",42,ay)):nt("",!0)],46,ey))),128))],4)],36))}}),cy=ao(ly,[["__scopeId","data-v-ddcbe9f4"]]),uy={class:"relative max-h-full max-w-full bg-slate-900 p-3 shadow-2xl"},fy=["src"],dy={key:3,class:"h-64 w-64 rounded-xl bg-white/5"},py=Zt({__name:"ImageModal",props:{open:{type:Boolean},src:{},canPrev:{type:Boolean},canNext:{type:Boolean}},emits:["close","prev","next"],setup(e,{emit:t}){const n=t;return(s,i)=>e.open?(le(),fe("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",onClick:i[3]||(i[3]=nn(a=>n("close"),["self"]))},[k("div",uy,[k("button",{type:"button",class:"absolute right-2 top-2 bg-white/10 px-2 py-1 text-xs text-white hover:bg-white/20",onClick:i[0]||(i[0]=a=>n("close"))}," Close "),e.canPrev?(le(),fe("button",{key:0,type:"button",class:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/10 px-3 py-2 text-white hover:bg-white/20",onClick:i[1]||(i[1]=a=>n("prev")),"aria-label":"Previous image"},"  ")):nt("",!0),e.canNext?(le(),fe("button",{key:1,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/10 px-3 py-2 text-white hover:bg-white/20",onClick:i[2]||(i[2]=a=>n("next")),"aria-label":"Next image"},"  ")):nt("",!0),e.src?(le(),fe("img",{key:2,src:e.src,alt:"image",class:"max-h-[70vh] max-w-[80vw] rounded-xl object-contain"},null,8,fy)):(le(),fe("div",dy))])])):nt("",!0)}}),hy=1920,my=240;async function gy(e){const t=await vy(e),{canvas:n,mime:s,width:i,height:a}=await yy(t,hy),u=await by(n,s),p=(await wy(t)).toDataURL("image/webp",.8);return{blob:u,mime:s,width:i,height:a,thumbnailDataUrl:p}}async function vy(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const i=new Image;i.onload=()=>t(i),i.onerror=n,i.src=s.result},s.onerror=n,s.readAsDataURL(e)})}async function yy(e,t){const n=Math.min(1,t/Math.max(e.width,e.height)),s=Math.round(e.width*n),i=Math.round(e.height*n),a=document.createElement("canvas");a.width=s,a.height=i;const u=a.getContext("2d");if(!u)throw new Error("Canvas not supported");u.drawImage(e,0,0,s,i);const f=a.toDataURL("image/webp").length<a.toDataURL("image/jpeg",.85).length?"image/webp":"image/jpeg";return{canvas:a,mime:f,width:s,height:i}}async function by(e,t){return new Promise((n,s)=>{e.toBlob(i=>{i?n(i):s(new Error("Failed to create blob"))},t,t==="image/jpeg"?.85:.8)})}async function wy(e){const t=Math.min(1,my/Math.max(e.width,e.height)),n=Math.max(1,Math.round(e.width*t)),s=Math.max(1,Math.round(e.height*t)),i=document.createElement("canvas");i.width=n,i.height=s;const a=i.getContext("2d");if(!a)throw new Error("Canvas not supported");return a.drawImage(e,0,0,n,s),i}function Uo(e,t){const n=e.tabOrder||[],s=new Set(t.map(f=>f.id)),i=new Set,a=n.filter(f=>s.has(f)&&!i.has(f)&&!!i.add(f)),u=t.map(f=>f.id).filter(f=>!i.has(f)&&!!i.add(f));return[...a,...u]}const xy={key:0,class:"flex h-full min-h-0 flex-col gap-2 overflow-hidden sm:gap-4"},_y={key:0,class:"flex items-center gap-2 border border-yellow-400/40 bg-yellow-500/10 px-3 py-2 text-sm text-yellow-200"},ky={class:"relative flex shrink-0 items-center gap-2"},Cy=["onKeydown","disabled"],Sy={class:"relative"},Ey=["disabled"],Iy={class:"space-y-2"},Ay=["disabled"],Ty={class:"ml-2"},Oy={class:"grid grid-cols-8 gap-2"},Ry=["onClick","aria-label"],Dy=["disabled"],Py={class:"grid grid-cols-8 gap-2"},$y=["onClick","aria-label"],My={class:"mb-3 max-h-40 space-y-2 overflow-auto border border-white/10 p-2"},Ny=["checked","onChange"],jy={class:"truncate"},Ly={class:"tab-strip relative flex items-center gap-2 overflow-y-visible whitespace-nowrap text-white text-sm shrink-0 order-1 sm:order-none"},By={class:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-visible no-scrollbar"},Fy={class:"pointer-events-none absolute left-0 top-0 bottom-0 w-1 bg-white/10","aria-hidden":"true"},Ky=["onClick","disabled"],Uy={key:0,class:"mr-1","aria-hidden":"true"},qy=["disabled"],Vy={class:"flex flex-wrap items-center border border-white/15 text-white text-lg sm:text-sm shrink-0 order-4 sm:order-none my-0",style:{"margin-top":"-0.5rem"}},Hy=["disabled"],Wy=["disabled"],zy=["disabled"],Gy=["disabled"],Yy=["disabled"],Jy={key:0,class:"self-center text-[11px] text-slate-400"},Qy={class:"ml-auto relative"},Xy=["disabled"],Zy={class:"flex flex-col gap-1"},eb=["disabled"],tb=["disabled"],nb=["disabled"],rb=["disabled"],sb=["disabled"],ob={class:"relative flex flex-1 min-h-0 items-start border border-white/10 bg-white/5 overflow-hidden order-3 sm:order-none"},ib={class:"flex items-center justify-between"},ab={class:"text-sm font-semibold"},lb={key:0,class:"mt-3 text-xs text-slate-300"},cb={key:1,class:"mt-3 max-h-[50vh] overflow-auto"},ub=["onClick"],fb={class:"flex items-center gap-2"},db={class:"min-w-0 truncate font-semibold"},pb={class:"mt-1 truncate text-xs text-slate-300"},hb={key:0,class:"border border-white/10 bg-white/5 p-3 text-xs text-slate-300"},mb={key:1,class:"text-sm text-slate-300"},gb=Zt({__name:"NoteEditor",setup(e){const t=gm(),n=oo(),s=he(null),i=he([]),a=he(null),u=he(""),f=he(null),p=he(!0),v=he(!1),m=he({start:0,end:0}),g=he(null),w=he(0),A=he(0),O=he(22),J=he(0),ue=he(0),U=he({}),N=Je(()=>{const x=new Set,S=[];return Ae.value.images.forEach(C=>{x.has(C.imageId)||(x.add(C.imageId),S.push(C.imageId))}),S}),D=he(null),Q=he(null),Pe=he(null),je=he(0),$e=Je(()=>Math.max(0,J.value+je.value*O.value-w.value)),at=he(null),Be=he(0),ze=he(null);let Ge=null;const se=he(null);let Z=null;const De=he(null),me=he(!1),Ce=he(null),ne=he({}),Se=he(null);let Ye=0;const ot=he(""),lt=he(null),ie=he(!1),q=he(null),M=he(null),re=he(!1),be=he([]),H=(x,S)=>{const C=new Set(be.value);S?C.add(x):C.delete(x),be.value=Array.from(C)},de=he(!1),W=he(null),Ie=he(null),Ue=()=>{de.value=!1},y=()=>{_e.value||(de.value=!de.value)},_=he(!1),P=he(null),G=he(null),ee=()=>{_.value=!1},te=()=>{_.value=!_.value},xe=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2),ye=Date.now(),pe=he(null),oe=he([]),_e=Je(()=>oe.value.some(x=>x.startedAt<ye)),Ae=Je(()=>to(u.value)),Fe=Je(()=>i.value.find(x=>x.id===a.value)||i.value[0]||null),Ve=Je(()=>i.value.map(x=>x.id)),Qe=Je(()=>{const x={};for(const S of i.value){const C=to(S.content||""),Y=C.checklists.length,ce=C.checklists.filter(Ne=>Ne.checked).length;x[S.id]={total:Y,checked:ce}}return x}),et=Je(()=>u.value.replace(/\r\n/g,`
`).split(`
`)),rt=Je(()=>{const x=Be.value>0?Be.value:Number.POSITIVE_INFINITY,S=new Array(et.value.length),C=new Array(et.value.length);let Y=0;for(let ce=0;ce<et.value.length;ce++){const Ne=(et.value[ce]??"").length,Ee=x===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(Ne/x));S[ce]=Y,C[ce]=Ee,Y+=Ee}return{rowStarts:S,rowCounts:C,totalRows:Y}}),It=x=>{const S=rt.value.rowStarts,C=rt.value.rowCounts;let Y=0,ce=S.length-1,Ne=0;for(;Y<=ce;){const Ee=Y+ce>>1;(S[Ee]??0)<=x?(Ne=Ee,Y=Ee+1):ce=Ee-1}for(;Ne>0&&x<(S[Ne]??0);)Ne--;for(;Ne<C.length-1&&x>=(S[Ne]??0)+(C[Ne]??1);)Ne++;return Ne},Tt=Je(()=>{const x=J.value??0,S=Math.max(0,w.value-x),C=Math.max(0,Math.floor(S/O.value)-6),Y=Math.ceil((A.value||0)/O.value)+12,ce=Math.min(rt.value.totalRows,C+Y),Ne=It(C);let Ee=Ne;for(;Ee<et.value.length&&(rt.value.rowStarts[Ee]??0)<ce;)Ee++;return{startLine:Ne,endLine:Ee}}),Lt=Je(()=>{const x=new Set,S=[];return Ae.value.tags.forEach(C=>{x.has(C.lineIndex)||(x.add(C.lineIndex),S.push({lineIndex:C.lineIndex,tag:C.tag,priority:C.priority}))}),S}),Dt=Je(()=>{const x=Tt.value.startLine,S=Tt.value.endLine,C=new Map(Lt.value.map(ce=>[ce.lineIndex,{tag:ce.tag,priority:ce.priority}])),Y=[];for(let ce=x;ce<S;ce++){const Ne=C.get(ce);if(!Ne)continue;const Ee=rt.value.rowStarts[ce]??0,Le=rt.value.rowCounts[ce]??1;Y.push({lineIndex:ce,top:(J.value??0)+Ee*O.value-w.value,height:Le*O.value,tag:Ne.tag,priority:Ne.priority})}return Y}),rn=(x,S)=>{x&&(oe.value.find(C=>C.id===x)||(oe.value=[...oe.value,{id:x,startedAt:S||Date.now()}]))},tr=x=>{oe.value=oe.value.filter(S=>S.id!==x)},Ct=x=>{const S=x.data;!S||!S.noteId||S.noteId!==s.value?.id||S.sessionId!==xe&&(S.type==="open"?(rn(S.sessionId||"",S.startedAt||Date.now()),!S.reply&&pe.value&&s.value&&pe.value.postMessage({type:"open",noteId:s.value.id,sessionId:xe,startedAt:ye,reply:!0})):S.type==="close"?tr(S.sessionId||""):S.type==="changed"&&(rn(S.sessionId||"",S.startedAt||Date.now()),Re(S.updatedAt)))},Me=()=>{if(!s.value)return;pe.value&&(pe.value.close(),pe.value=null);const x=new BroadcastChannel("jotrip-note-sync");x.onmessage=Ct,pe.value=x,x.postMessage({type:"open",noteId:s.value.id,sessionId:xe,startedAt:ye,reply:!1})},In=()=>{pe.value&&s.value&&pe.value.postMessage({type:"close",noteId:s.value.id,sessionId:xe}),pe.value?.close(),pe.value=null,oe.value=[]},dn=async()=>{await Yt();const x=f.value;x&&(x.focus(),x.select())},Qr=async()=>{const x=t.params.id;if(!x||x==="new"){const Ee=await tl({title:"Untitled note"}),Le=await Ws({noteId:Ee.id,name:"Main",content:""});await Nt(Ee.id,{tabOrder:[Le.id]}),n.replace({name:"note-editor",params:{id:Ee.id}}),s.value=Ee,ot.value=Ee.title,lt.value=Ee.color??null,i.value=[Le],a.value=Le.id,u.value=Le.content,p.value=!1,dn();return}const S=await Ta(x);if(!S){p.value=!1;return}s.value=S,ot.value=S.title,lt.value=S.color??null;let Y=await Cc(x);if(!Y.length){const Ee=await Ws({noteId:x,name:"Main",content:""});await Nt(x,{tabOrder:[Ee.id]}),Y=[Ee]}const ce=Uo(S,Y);i.value=ce.map(Ee=>Y.find(Le=>Le.id===Ee)).filter(Ee=>!!Ee),ce.some((Ee,Le)=>Ee!==(S.tabOrder[Le]??""))&&await Nt(S.id,{tabOrder:ce}),lo(ce);const Ne=i.value.find(Ee=>Ee.id===a.value);u.value=Ne?.content??"",p.value=!1,ts(),ns(),Me()},Re=async x=>{if(!s.value)return;const S=s.value.updatedAt;if(x&&S&&new Date(x).getTime()<=new Date(S).getTime())return;const C=await Ta(s.value.id);if(!C||S&&C.updatedAt&&new Date(C.updatedAt).getTime()<=new Date(S).getTime()&&!x)return;const Y=await Cc(C.id),ce=Uo(C,Y);i.value=ce.map(Ee=>Y.find(Le=>Le.id===Ee)).filter(Ee=>!!Ee),ce.some((Ee,Le)=>Ee!==(C.tabOrder[Le]??""))&&await Nt(C.id,{tabOrder:ce}),s.value=C,ot.value=C.title,lt.value=C.color??null;const Ne=i.value.find(Ee=>Ee.id===a.value)??i.value[0];a.value=Ne?.id??null,u.value=Ne?.content??""},Xr=x=>`jotrip:lastTab:${x}`,lo=x=>{if(!x.length){a.value=null;return}const S=t.query.tab,C=s.value?.id,Y=C?window.localStorage.getItem(Xr(C))??void 0:void 0,ce=S||Y||x[0],Ne=ce&&x.includes(ce)?ce:x[0];a.value=Ne??null},sn=async x=>{if(!Fe.value)return;const S=++Ye;if(v.value=!0,await kc(Fe.value.id,{content:x}),S===Ye){if(s.value){const C=await Nt(s.value.id,{});if(S!==Ye)return;C&&(s.value=C)}Fe.value&&(i.value=i.value.map(C=>C.id===Fe.value.id?{...C,content:x}:C)),v.value=!1,Sr(s.value?.updatedAt)}},co=x=>{m.value=x;const S=a.value,C=s.value?.id;if(S&&C){const Y=`jotrip:caret:${C}:${S}`,ce={start:x.start,end:x.end};window.localStorage.setItem(Y,JSON.stringify(ce))}},Sr=x=>{!s.value||!pe.value||pe.value.postMessage({type:"changed",noteId:s.value.id,sessionId:xe,startedAt:ye,updatedAt:x??s.value.updatedAt})},uo=async x=>{if(_e.value||!Fe.value)return;const{start:S}=m.value,C=u.value;let Y;x==="header"?Y=gf(C,S):Y=vf(C,S),u.value=Y.text,await sn(Y.text),await Yt();const ce=g.value?.$el;ce&&(ce.focus(),ce.setSelectionRange(Y.selectionStart,Y.selectionEnd)),m.value={start:Y.selectionStart,end:Y.selectionEnd}},_i=x=>{sr(x)},nr=async()=>{if(!s.value)return;const x=Uo(s.value,i.value);if(i.value=x.map(S=>i.value.find(C=>C.id===S)).filter(S=>!!S),x.some((S,C)=>S!==(s.value.tabOrder[C]??""))){const S=await Nt(s.value.id,{tabOrder:x});S?s.value=S:s.value={...s.value,tabOrder:x}}else s.value={...s.value,tabOrder:x}},rr=async(x,S)=>{const C=s.value?.id;if(!C)return;let Y=null;const ce=`jotrip:caret:${C}:${x}`;try{const ft=window.localStorage.getItem(ce);ft&&(Y=JSON.parse(ft))}catch{Y=null}const Ne=S.length,Ee=Y?.start??Ne,Le=Y?.end??Ne;await Yt();const Et=g.value?.$el;if(Et){const ft=Fn=>Math.max(0,Math.min(Fn,S.length)),Ft=ft(Ee),cr=ft(Le);Et.focus(),Et.setSelectionRange(Ft,cr),m.value={start:Ft,end:cr}}},Zr=x=>{const S=t.query.tab;if(x&&S===x)return;const C={...t.query};x?C.tab=x:delete C.tab,n.replace({name:"note-editor",params:t.params,query:C})},sr=async x=>{if(a.value===x)return;Fe.value&&(await sn(u.value),Yr("tab-switch")),a.value=x,s.value&&window.localStorage.setItem(Xr(s.value.id),x);const S=i.value.find(C=>C.id===x);S&&(u.value=S.content,rr(x,S.content)),Zr(x),ts()},wt=async()=>{if(_e.value||!s.value)return;Fe.value&&await sn(u.value);const x=`Tab ${i.value.length+1}`,S=await Ws({noteId:s.value.id,name:x,content:""}),C=s.value.tabOrder??[],Y=[S.id,...C];i.value=[S,...i.value],await sr(S.id);const ce=await Nt(s.value.id,{tabOrder:Y});ce?s.value=ce:s.value={...s.value,tabOrder:Y},await nr()},Pt=async x=>{if(_e.value||!x)return;const S=i.value.find(Y=>Y.id===x);if(!S)return;const C=window.prompt("Rename tab",S.name);C&&(await kc(x,{name:C}),i.value=i.value.map(Y=>Y.id===x?{...Y,name:C}:Y))},ki=async x=>{if(_e.value||!x)return;if(i.value.length<=1){window.alert("A note must have at least one tab.");return}if(!window.confirm("Delete this tab?"))return;const C=i.value.filter(ce=>ce.id!==x);await uf(x);const Y=Uo(s.value,C);if(await Nt(s.value.id,{tabOrder:Y}),i.value=C,!C.find(ce=>ce.id===a.value)){const ce=Y[0]||C[0]?.id||null;a.value=ce;const Ne=C.find(Ee=>Ee.id===ce);u.value=Ne?.content??""}},Er=async(x,S)=>{if(!x||!s.value)return;const C=[...Ve.value],Y=C.indexOf(x);if(Y===-1)return;const ce=Y+S;if(ce<0||ce>=C.length)return;const Ne=C[Y],Ee=C[ce];!Ne||!Ee||(C[Y]=Ee,C[ce]=Ne,i.value=C.map(Le=>i.value.find(Et=>Et.id===Le)).filter(Le=>!!Le),await Nt(s.value.id,{tabOrder:C}))},es=async x=>{if(!x||!s.value)return;const S=Ve.value.filter(C=>C!==x);S.unshift(x),i.value=S.map(C=>i.value.find(Y=>Y.id===C)).filter(C=>!!C),await Nt(s.value.id,{tabOrder:S})},or=async()=>{if(!s.value)return;const x=(ot.value??"").trim()||"Untitled note";if(x===s.value.title)return;const S=await Nt(s.value.id,{title:x});S&&(s.value=S),ot.value=S?.title??x,Sr(S?.updatedAt)},Ci=async()=>{if(!s.value||_e.value)return;const x=s.value.pinnedAt?null:new Date().toISOString(),S=await Nt(s.value.id,{pinnedAt:x});S&&(s.value=S),Sr(S?.updatedAt)},wn=[null,"#94a3b8","#f87171","#fb923c","#fbbf24","#a3e635","#34d399","#2dd4bf","#22d3ee","#60a5fa","#818cf8","#a78bfa","#e879f9","#fb7185","#f472b6","#c084fc"],Nn=async x=>{if(!s.value)return;lt.value=x;const S=await Nt(s.value.id,{color:x});S&&(s.value=S)},pn=()=>{ie.value=!1},ir=x=>{const S=Be.value>0?Be.value:Number.POSITIVE_INFINITY,C=u.value.replace(/\r\n/g,`
`).split(`
`),Y=Math.max(0,Math.min(x,C.length-1));let ce=0;for(let Le=0;Le<Y;Le++){const Et=(C[Le]??"").length,ft=S===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(Et/S));ce+=ft}const Ne=(C[Y]??"").length,Ee=S===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(Ne/S));return{rowStart:ce,rowCount:Ee}},fo=()=>{const x=g.value?.$el;if(!x)return{scrollTop:w.value,paddingTop:J.value??0};const S=getComputedStyle(x),C=parseFloat(S.paddingTop);return{scrollTop:x.scrollTop,paddingTop:Number.isFinite(C)?C:J.value??0}},An=x=>{Ge&&(window.clearTimeout(Ge),Ge=null);const{rowStart:S,rowCount:C}=ir(x),Y=fo();ze.value={top:Y.paddingTop+S*O.value-Y.scrollTop,height:C*O.value},Ge=window.setTimeout(()=>{ze.value=null,Ge=null},2e3)},po=(x,S)=>{const Y=u.value.replace(/\r\n/g,`
`).split(`
`);let ce=0;const Ne=/@(\d{4}-\d{2}-\d{2})/g;let Ee=null;for(let Le=0;Le<Y.length;Le++){const Et=Y[Le]??"";Ne.lastIndex=0;let ft;for(;ft=Ne.exec(Et);){if(ft[1]!==x)continue;const Ft=ft.index+ft[0].length,Fn=Et.slice(Ft).trim().slice(0,10),on=ce+ft.index;if(Ee||(Ee={pos:on,lineIndex:Le}),S&&Fn===S)return{pos:on,lineIndex:Le}}ce+=Et.length+1}return Ee},Tn=(x,S)=>{const C=g.value?.$el;if(!C)return;const{rowStart:Y}=ir(S);C.focus(),C.setSelectionRange(x,x);const ce=(J.value??0)+Y*O.value-A.value/2+O.value;Number.isNaN(ce)||(C.scrollTop=Math.max(0,ce),w.value=C.scrollTop,A.value=C.clientHeight)},ts=async()=>{const x=t.query.date;if(!x)return;const S=t.query.snippet;await Yt();const C=po(x,S);C&&(Tn(C.pos,C.lineIndex),requestAnimationFrame(()=>An(C.lineIndex)))},ns=async()=>{const x=t.query.line;if(!x)return;const S=Number(x);if(!Number.isFinite(S))return;await Yt(),St(S);const C={...t.query};delete C.line,n.replace({name:"note-editor",params:t.params,query:C})},St=x=>{if(!g.value?.$el)return;const C=Math.max(0,Math.min(x,et.value.length-1)),Y=et.value.slice(0,C).reduce((ce,Ne)=>ce+Ne.length+1,0);Tn(Y,C),jn(C)},jn=x=>{Z&&(window.clearTimeout(Z),Z=null);const{rowStart:S,rowCount:C}=ir(x),Y=fo();se.value={top:Y.paddingTop+S*O.value-Y.scrollTop,height:C*O.value},Z=window.setTimeout(()=>{se.value=null,Z=null},1200)},xn=async x=>{const S=u.value.split(`
`),C=S[x];if(C===void 0)return;const Y=/^(\s*-\s\[)( |x|X)(\])/;if(!Y.test(C))return;const ce=C.replace(Y,(Ee,Le,Et,ft)=>{const Ft=Et.toLowerCase()==="x"?" ":"x";return`${Le}${Ft}${ft}`});S[x]=ce;const Ne=S.join(`
`);u.value=Ne,await sn(Ne)},ho=x=>{const S=x.urls.length===1?x.urls[0]:window.prompt("Open which link?",x.urls.join(`
`));S&&window.open(S,"_blank"),g.value?.focus()},ar=()=>{g.value?.focus()},rs=async x=>{const S=x.imageIds[0];S&&await is(S),g.value?.focus()},Ss=async x=>{me.value=!0,De.value={date:x,entries:[]};const[S,C]=await Promise.all([wi(),Jr()]);De.value={date:x,entries:sl(S,C,{start:x,end:x})},me.value=!1},Es=x=>{const S=(x.textAfterToken||"").trim();return S.length?S:x.firstTabName||x.noteTitle},Ln=x=>{const S=(x.textAfterToken||"").slice(0,10);De.value=null,me.value=!1,n.push({name:"note-editor",params:{id:x.noteId},query:{date:x.tokenDate,tab:x.tabId,...S?{snippet:S}:{}}})},mo=x=>new Promise((S,C)=>{const Y=new FileReader;Y.onload=()=>S(Y.result),Y.onerror=C,Y.readAsDataURL(x)}),ss=async x=>{if(!s.value)return null;const S=s.value.id,C=i.value.filter(Le=>x.includes(Le.id)),Y=s.value.tabOrder.filter(Le=>x.includes(Le)),Ne=(await io({noteId:S})).filter(Le=>x.includes(Le.tabId)),Ee=[];for(const Le of Ne){const Et=await mo(Le.blob);Ee.push({id:Le.id,tabId:Le.tabId,mime:Le.mime,base64:Et.split(",")[1]??"",width:Le.width,height:Le.height,thumbnailDataUrl:Le.thumbnailDataUrl})}return{version:"1",note:{title:s.value.title,color:s.value.color??null},tabs:C.map(Le=>({id:Le.id,name:Le.name,content:Le.content})),tabOrder:Y,images:Ee}},Ir=x=>x.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),ct=x=>{if(!x)return"";const S={};x.images?.forEach(Ee=>{S[Ee.id]=`data:${Ee.mime};base64,${Ee.base64}`});const C=Ee=>Ee.split(`
`).map(ft=>Ir(ft).replace(/!\[image:([^\]]+)\]/g,(cr,Fn)=>{const on=S[Fn]??"";return on?`<a class="note-img-link" href="${on}" target="_blank" rel="noreferrer"><img class="note-img" data-full="${on}" src="${on}" /></a>`:cr})).join("<br>"),Y=x.tabs.map((Ee,Le)=>`<button class="tab-btn" data-tab="${Ee.id}">${Ir(Ee.name||`Tab ${Le+1}`)}</button>`).join(""),ce=x.tabs.map(Ee=>`<div class="tab-content" data-tab="${Ee.id}" style="display:none;">${C(Ee.content)}</div>`).join(""),Ne=x.tabOrder[0]??x.tabs[0]?.id??"";return`<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>${Ir(x.note.title||"Exported Note")}</title>
  <style>
    :root { --editor-font: 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', Menlo, Consolas, monospace; }
    body { font-family: var(--editor-font); background: #0b1021; color: #e5e7eb; margin: 0; padding: 16px; }
    h1 { margin: 0 0 12px; font-size: 20px; }
    .tabs { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
    .tab-btn { border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: #e5e7eb; padding: 6px 10px; cursor: pointer; }
    .tab-btn.active { border-color: rgba(129,140,248,0.8); background: rgba(129,140,248,0.15); }
    .tab-content { border: 1px solid rgba(255,255,255,0.1); padding: 12px; background: rgba(255,255,255,0.03); min-height: 200px; line-height: 1.6; font-family: var(--editor-font); }
    img.note-img { width: 100px; height: auto; display: block; margin: 8px 0; cursor: pointer; }
    .note-img-link { display: inline-block; }
  </style>
</head>
<body>
  <h1>${Ir(x.note.title||"Exported Note")}</h1>
  <div class="tabs">${Y}</div>
  <div class="tab-contents">${ce}</div>
  <script type="application/json" id="jotrip-export">${JSON.stringify(x)}<\/script>
  <script>
    (function() {
      const tabs = Array.from(document.querySelectorAll('.tab-btn'));
      const contents = Array.from(document.querySelectorAll('.tab-content'));
      const show = (id) => {
        tabs.forEach((t) => t.classList.toggle('active', t.dataset.tab === id));
        contents.forEach((c) => c.style.display = c.dataset.tab === id ? 'block' : 'none');
      };
      tabs.forEach((btn) => btn.addEventListener('click', () => show(btn.dataset.tab)));
      document.querySelectorAll('.note-img-link').forEach((link) => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const href = link.getAttribute('href');
          if (!href) return;
          const win = window.open('', '_blank');
          if (!win) return;
          win.document.write('<!doctype html><html><head><title>Image</title></head><body style="margin:0;background:#0b1021;display:flex;align-items:center;justify-content:center;"><img src="' + href + '" style="max-width:100%;max-height:100vh;" /></body></html>');
          win.document.close();
        });
      });
      show('${Ne}');
    })();
  <\/script>
</body>
</html>`},Is=(x,S,C="text/plain")=>{const Y=new Blob([S],{type:C}),ce=URL.createObjectURL(Y),Ne=document.createElement("a");Ne.href=ce,Ne.download=x,Ne.click(),URL.revokeObjectURL(ce)},go=()=>{be.value=i.value.map(x=>x.id),re.value=!0},os=async()=>{const x=await ss(be.value);if(!x)return;const S=ct(x);Is(`${s.value?.title||"note"}.html`,S,"text/html"),re.value=!1},Ar=()=>{if(!s.value)return;const x=[];i.value.forEach((S,C)=>{x.push(`=== ${S.name||"Tab "+(C+1)} ===`),x.push(S.content),x.push("")}),Is(`${s.value.title||"note"}.txt`,x.join(`
`),"text/plain"),re.value=!1},vo=async x=>{const S=x.dates.length===1?x.dates[0]:window.prompt("Which date?",x.dates.join(`
`))??void 0;S&&(await Ss(S),g.value?.focus())},yo=x=>{w.value=x.scrollTop,A.value=x.clientHeight,x.lineHeight&&(O.value=x.lineHeight),J.value=x.paddingTop,ue.value=x.paddingBottom},bo=x=>{je.value=x.lineIndex},gt=x=>{at.value=x},Tr=x=>{Be.value=x.cols},Or=async x=>{const S=x.imageId;if(U.value[S])return;const C=await Oa(S);C?.thumbnailDataUrl&&(U.value={...U.value,[S]:C.thumbnailDataUrl})},lr=()=>{_e.value||Pe.value?.click()},As=async()=>{if(_e.value)return;const x=g.value?.$el,S=new Date,C=S.getFullYear(),Y=String(S.getMonth()+1).padStart(2,"0"),ce=String(S.getDate()).padStart(2,"0"),Ne=`@${C}-${Y}-${ce} `,Ee=u.value,Le=x?x.selectionStart??Ee.length:Ee.length,Et=x?x.selectionEnd??Le:Le,ft=Ee.slice(0,Le)+Ne+Ee.slice(Et),Ft=Le+Ne.length;u.value=ft,m.value={start:Ft,end:Ft},await sn(ft),await Yt(),x&&(x.focus(),x.setSelectionRange(Ft,Ft))},Ts=async()=>{if(_e.value)return;const x=`
${u.value}`;u.value=x,await sn(x),await Yt();const S=g.value?.$el;S&&(S.focus(),S.setSelectionRange(0,0),S.scrollTop=0,w.value=S.scrollTop,A.value=S.clientHeight)},Rr=x=>{const S=x.target;if(ie.value){const C=q.value,Y=M.value;if(C&&C.contains(S)||Y&&Y.contains(S))return;pn()}if(De.value){const C=Ce.value;if(C&&C.contains(S))return;De.value=null,me.value=!1}if(re.value){const C=Se.value;if(C&&C.contains(S))return;re.value=!1}if(de.value){const C=W.value,Y=Ie.value;if(C&&C.contains(S)||Y&&Y.contains(S))return;de.value=!1}if(_.value){const C=P.value,Y=G.value;if(C&&C.contains(S)||Y&&Y.contains(S))return;_.value=!1}},wo=x=>{const S=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().split("-")[0]:Math.random().toString(36).slice(2,10),C=x?.name?.trim();if(!C)return S;const ce=C.replace(/\.[a-z0-9]+$/i,"").toLowerCase().replace(/[^a-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").slice(0,12);return ce?`${S}-${ce}`:S},Dr=async x=>{if(!x||!("length"in x)||!x.length||!s.value||!Fe.value)return;const S=Array.from(x);for(const C of S){if(!C.type.startsWith("image/"))continue;const Y=await gy(C),ce=wo(C),Ne=await ff({id:ce,noteId:s.value.id,tabId:Fe.value.id,mime:Y.mime,blob:Y.blob,width:Y.width,height:Y.height,thumbnailDataUrl:Y.thumbnailDataUrl});Ne.thumbnailDataUrl&&(U.value={...U.value,[Ne.id]:Ne.thumbnailDataUrl}),xo(Ne.id)}Pe.value&&(Pe.value.value="")},xo=x=>{const S=g.value?.$el,C=`![image:${x}]`,Y=u.value;if(S){const ce=S.selectionStart??Y.length,Ne=S.selectionEnd??ce,Ee=ce>0&&Y[ce-1]!==`
`?`
`:"",Le=Ne<Y.length?Y[Ne]!==`
`?`
`:"":`
`,Et=Y.slice(0,ce)+Ee+C+Le+Y.slice(Ne),ft=ce+Ee.length+C.length+Le.length;u.value=Et,sn(Et),Yt(()=>{S.focus(),S.setSelectionRange(ft,ft)})}else{const ce=`${Y}
${C}
`;u.value=ce,sn(ce)}},Si=x=>{const S=x.clipboardData?.items;if(!S)return;const C=Array.from(S).find(Y=>Y.type.startsWith("image/"));if(C){x.preventDefault();const Y=C.getAsFile();Y&&Dr([Y])}},ut=async x=>{if(ne.value[x])return ne.value[x];const S=await Oa(x);if(!S)return null;const C=URL.createObjectURL(S.blob);return ne.value={...ne.value,[x]:C},C},is=async x=>{D.value=x;const S=await ut(x);S&&(Q.value=S)},Ei=()=>{Q.value=null,D.value=null},Pr=Je(()=>D.value?N.value.indexOf(D.value):-1),Bt=Je(()=>Pr.value>0),Bn=Je(()=>Pr.value>=0&&Pr.value<N.value.length-1),as=async()=>{if(!Bt.value)return;const x=N.value[Pr.value-1];x&&await is(x)},On=async()=>{if(!Bn.value)return;const x=N.value[Pr.value+1];x&&await is(x)};return fn(async()=>{document.addEventListener("pointerdown",Rr,!0),await Qr()}),xr(()=>{document.removeEventListener("pointerdown",Rr,!0),Ge&&(window.clearTimeout(Ge),Ge=null),Z&&(window.clearTimeout(Z),Z=null),In(),or(),Yr("note-leave")}),yn(()=>t.query,()=>{const x=t.query.tab;if(x&&i.value.find(S=>S.id===x)){sr(x);return}ts(),ns()}),yn(()=>a.value,x=>{Zr(x)}),yn(()=>i.value,()=>{if(i.value.length&&!Fe.value){const x=i.value[0];x&&(a.value=x.id,u.value=x.content)}}),(x,S)=>!p.value&&s.value&&Fe.value?(le(),fe("section",xy,[_e.value?(le(),fe("div",_y,"  Read-only: open in another tab ")):nt("",!0),k("header",ky,[qr(k("input",{"onUpdate:modelValue":S[0]||(S[0]=C=>ot.value=C),class:"min-w-0 flex-1 h-10 border border-white/10 bg-white/5 px-3 text-xl font-semibold text-white outline-none sm:h-11 sm:px-4",placeholder:"Untitled note",onBlur:or,onKeydown:ih(nn(or,["prevent"]),["enter"]),disabled:_e.value,ref_key:"titleInputRef",ref:f},null,40,Cy),[[bs,ot.value]]),k("div",Sy,[k("button",{ref_key:"noteActionsTriggerRef",ref:G,type:"button",class:"h-10 w-10 border border-white/15 text-lg text-white sm:h-11 sm:w-11",onClick:te,disabled:_e.value,"aria-label":"Note actions"},"  ",8,Ey),_.value?(le(),fe("div",{key:0,ref_key:"noteActionsRef",ref:P,class:"absolute right-0 top-full z-40 mt-2 w-56 border border-white/15 bg-slate-900 p-3 text-sm text-white shadow-2xl"},[S[14]||(S[14]=k("p",{class:"mb-2 text-xs uppercase tracking-[0.2em] text-slate-400"},"Note actions",-1)),k("div",Iy,[k("button",{type:"button",class:"w-full border border-white/15 px-3 py-2 text-left text-xs",onClick:S[1]||(S[1]=()=>{Ci(),ee()}),disabled:_e.value},[k("span",{class:kt(s.value?.pinnedAt?"text-white":"text-white/40 grayscale")},"",2),k("span",Ty,qe(s.value?.pinnedAt?"Unpin note":"Pin note"),1)],8,Ay),k("div",null,[S[13]||(S[13]=k("p",{class:"mb-1 text-[11px] uppercase tracking-[0.2em] text-slate-500"},"Color",-1)),k("div",Oy,[(le(),fe(mt,null,Mt(wn,(C,Y)=>k("button",{key:Y,type:"button",class:kt(["h-7 w-7 border border-white/15",(lt.value??null)===(C??null)?"ring-2 ring-white/60":""]),style:vt({backgroundColor:C??"rgba(255,255,255,0.06)"}),onClick:()=>{Nn(C),pn(),ee()},"aria-label":C?`Set color ${C}`:"Set default color"},null,14,Ry)),64))])]),k("button",{type:"button",class:"w-full border border-white/15 px-3 py-2 text-left text-xs",onClick:S[2]||(S[2]=()=>{go(),ee()}),disabled:_e.value}," Export ",8,Dy)])],512)):nt("",!0)]),ie.value?(le(),fe("div",{key:0,ref_key:"colorPickerRef",ref:q,class:"absolute right-0 top-full z-40 mt-2 border border-white/15 bg-slate-900 p-2 shadow-2xl sm:p-3"},[k("div",Py,[(le(),fe(mt,null,Mt(wn,(C,Y)=>k("button",{key:Y,type:"button",class:kt(["h-7 w-7 border border-white/15",(lt.value??null)===(C??null)?"ring-2 ring-white/60":""]),style:vt({backgroundColor:C??"rgba(255,255,255,0.06)"}),onClick:ce=>{Nn(C),pn()},"aria-label":C?`Set color ${C}`:"Set default color"},null,14,$y)),64))])],512)):nt("",!0),re.value?(le(),fe("div",{key:1,ref_key:"exportPanelRef",ref:Se,class:"absolute right-0 top-full z-40 mt-2 w-56 border border-white/15 bg-slate-900 p-3 text-sm text-white shadow-2xl"},[S[15]||(S[15]=k("p",{class:"mb-2 text-xs uppercase tracking-[0.2em] text-slate-400"},"Export tabs",-1)),k("div",My,[(le(!0),fe(mt,null,Mt(i.value,C=>(le(),fe("label",{key:C.id,class:"flex items-center gap-2 text-xs"},[k("input",{type:"checkbox",class:"h-4 w-4",checked:be.value.includes(C.id),onChange:Y=>{const ce=Y.target.checked;H(C.id,ce)}},null,40,Ny),k("span",jy,qe(C.name),1)]))),128))]),k("div",{class:"flex gap-2"},[k("button",{class:"flex-1 border border-indigo-300/40 bg-indigo-500/20 px-2 py-1",onClick:os}," HTML "),k("button",{class:"flex-1 border border-white/20 px-2 py-1",onClick:Ar},"TXT")])],512)):nt("",!0)]),k("div",Ly,[k("div",By,[(le(!0),fe(mt,null,Mt(i.value,C=>(le(),fe("div",{key:C.id,class:"relative inline-flex"},[k("div",Fy,[Qe.value[C.id]?.total?(le(),fe("div",{key:0,class:"absolute bottom-0 left-0 right-0",style:vt({height:`${Math.round((Qe.value[C.id]?.checked||0)/Math.max(1,Qe.value[C.id]?.total||1)*100)}%`,backgroundColor:lt.value??"rgba(52, 211, 153, 0.8)"})},null,4)):nt("",!0)]),k("button",{class:kt(["px-2 py-1.5 pl-4 border-b border-white/10 sm:px-3 sm:py-2",a.value===C.id?"text-white":"bg-transparent text-slate-200"]),style:vt(a.value===C.id&&lt.value?{backgroundColor:lt.value,color:"#0b1021"}:void 0),onClick:Y=>_i(C.id),disabled:_e.value},[C.pinnedAt?(le(),fe("span",Uy,"")):nt("",!0),yr(" "+qe(C.name),1)],14,Ky)]))),128))]),k("button",{class:"shrink-0 px-2 py-1.5 text-lg sm:px-3 sm:py-2",type:"button",onClick:wt,disabled:_e.value},"  ",8,qy)]),k("div",Vy,[k("button",{class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:Ts,disabled:_e.value},"",8,Hy),k("button",{class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:S[3]||(S[3]=C=>uo("header")),disabled:_e.value},"#",8,Wy),k("button",{class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:S[4]||(S[4]=C=>uo("checklist")),disabled:_e.value},"",8,zy),k("button",{class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:As,disabled:_e.value},"@",8,Gy),k("button",{class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:lr,disabled:_e.value},"",8,Yy),v.value?(le(),fe("span",Jy,"Saving")):nt("",!0),k("div",Qy,[k("button",{ref_key:"tabActionsTriggerRef",ref:Ie,class:"toolbar-btn py-1.5 sm:py-2",type:"button",onClick:y,disabled:_e.value,"aria-label":"Tab actions"},"  ",8,Xy),de.value?(le(),fe("div",{key:0,ref_key:"tabActionsRef",ref:W,class:"absolute right-0 bottom-full sm:bottom-auto sm:top-full z-40 mb-2 sm:mt-2 w-44 border border-white/15 bg-slate-900 p-2 text-sm text-white shadow-2xl"},[S[16]||(S[16]=k("p",{class:"mb-2 px-2 text-[11px] uppercase tracking-[0.2em] text-slate-400"},"Tab actions",-1)),k("div",Zy,[k("button",{class:"w-full rounded px-3 py-2 text-left hover:bg-white/10 disabled:opacity-60",type:"button",onClick:S[5]||(S[5]=C=>a.value&&Er(a.value,-1)),disabled:_e.value||!a.value}," Move left ",8,eb),k("button",{class:"w-full rounded px-3 py-2 text-left hover:bg-white/10 disabled:opacity-60",type:"button",onClick:S[6]||(S[6]=C=>a.value&&Er(a.value,1)),disabled:_e.value||!a.value}," Move right ",8,tb),k("button",{class:"w-full rounded px-3 py-2 text-left hover:bg-white/10 disabled:opacity-60",type:"button",onClick:S[7]||(S[7]=C=>{a.value&&es(a.value),Ue()}),disabled:_e.value||!a.value}," Move to first ",8,nb),k("button",{class:"w-full rounded px-3 py-2 text-left hover:bg-white/10 disabled:opacity-60",type:"button",onClick:S[8]||(S[8]=C=>{a.value&&Pt(a.value),Ue()}),disabled:_e.value||!a.value}," Rename tab ",8,rb),k("button",{class:"w-full rounded px-3 py-2 text-left text-red-200 hover:bg-red-500/15 disabled:opacity-60",type:"button",onClick:S[9]||(S[9]=C=>{a.value&&ki(a.value),Ue()}),disabled:_e.value||!a.value}," Delete tab ",8,sb)])],512)):nt("",!0)])]),k("input",{ref_key:"fileInputRef",ref:Pe,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:S[10]||(S[10]=C=>Dr(C.target.files))},null,544),k("div",ob,[(le(!0),fe(mt,null,Mt(Dt.value,C=>(le(),fe("div",{key:C.lineIndex,class:kt(["pointer-events-none absolute left-0 right-0 z-0",C.priority?"bg-orange-500/15":"bg-emerald-500/15"]),style:vt({top:`${C.top}px`,height:`${C.height}px`})},null,6))),128)),at.value?(le(),fe("div",{key:0,class:"pointer-events-none absolute left-0 right-0 z-0 bg-white/10",style:vt({top:`${at.value.top}px`,height:`${at.value.height}px`})},null,4)):nt("",!0),se.value?(le(),fe("div",{key:1,class:"pointer-events-none absolute left-0 right-0 z-0 border-y border-emerald-200/40 bg-emerald-400/25",style:vt({top:`${se.value.top}px`,height:`${se.value.height}px`})},null,4)):nt("",!0),ze.value?(le(),fe("div",{key:2,class:"pointer-events-none absolute left-0 right-0 z-0 border-y border-yellow-200/30 bg-yellow-400/20",style:vt({top:`${ze.value.top}px`,height:`${ze.value.height}px`})},null,4)):nt("",!0),_t(cy,{class:"relative z-10",text:u.value,parsed:Ae.value,"scroll-top":w.value,"viewport-height":A.value,"line-height":O.value,"padding-top":J.value,"padding-bottom":ue.value,"image-thumbs":U.value,"active-line":je.value,onToggleChecklist:xn,onLineLink:ho,onLineTags:ar,onLineImages:rs,onLineDates:vo,onRequestImage:Or,"wrap-cols":Be.value,onHoverRect:gt},null,8,["text","parsed","scroll-top","viewport-height","line-height","padding-top","padding-bottom","image-thumbs","active-line","wrap-cols"]),k("div",{class:"relative z-10 flex-1 h-full",style:vt(lt.value?{boxShadow:`inset 4px 0 0 ${lt.value}`}:void 0)},[_t(Zv,{ref_key:"editorRef",ref:g,modelValue:u.value,"onUpdate:modelValue":[S[11]||(S[11]=C=>u.value=C),sn],class:"flex-1",placeholder:"Start typing your note...","textarea-class":"border-0 rounded-none bg-transparent shadow-none focus:border-transparent focus:ring-0",readonly:_e.value,onSelectionChange:co,onScroll:yo,onCursorLine:bo,onWrapCols:Tr,onPaste:Si},null,8,["modelValue","readonly"]),k("div",{class:"caret-line",style:vt({top:`${$e.value+O.value-1}px`,opacity:.5})},null,4)],4)]),De.value?(le(),fe("div",{key:1,ref_key:"datePopoverRef",ref:Ce,class:"fixed bottom-4 left-4 right-4 z-50 border border-white/15 bg-slate-900/95 p-4 text-white shadow-2xl sm:left-auto sm:right-6 sm:w-[420px]"},[k("div",ib,[k("p",ab,"Calendar: "+qe(De.value.date),1),k("button",{type:"button",class:"border border-white/15 px-3 py-1 text-xs",onClick:S[12]||(S[12]=C=>De.value=null)},"")]),me.value?(le(),fe("div",lb,"Loading")):(le(),fe("div",cb,[(le(!0),fe(mt,null,Mt(De.value.entries,C=>(le(),fe("button",{key:C.noteId+C.tabId+C.occurrenceIndex+C.date,type:"button",class:"mb-2 w-full border border-white/10 bg-white/5 p-3 text-left text-sm hover:border-white/20",onClick:Y=>Ln(C)},[k("div",fb,[k("span",{class:"h-3 w-1 shrink-0",style:vt(C.noteColor?{backgroundColor:C.noteColor}:{backgroundColor:"rgba(255,255,255,0.25)"})},null,4),k("span",db,qe(C.noteTitle),1)]),k("p",pb,qe(Es(C)),1)],8,ub))),128)),De.value.entries.length?nt("",!0):(le(),fe("div",hb," No entries for this day. "))]))],512)):nt("",!0),_t(py,{open:!!Q.value,src:Q.value||void 0,"can-prev":Bt.value,"can-next":Bn.value,onClose:Ei,onPrev:as,onNext:On},null,8,["open","src","can-prev","can-next"])])):(le(),fe("div",mb,"Loading editor"))}}),vb=ao(gb,[["__scopeId","data-v-951c0a3d"]]),yb={class:"flex h-full min-h-0 flex-col gap-3 overflow-hidden"},bb={class:"px-2 sm:px-0"},wb={class:"min-h-0 flex-1 overflow-auto overflow-x-hidden px-2 sm:px-0"},xb=["onClick"],_b={class:"flex items-center gap-2"},kb={class:"min-w-0 flex-1"},Cb={class:"truncate text-sm font-semibold text-white"},Sb={class:"truncate text-xs text-slate-400"},Eb={key:0,"aria-hidden":"true",class:"text-sm"},Ib=["onClick"],Ab={key:0,class:"no-scrollbar -mx-1 mt-1 flex overflow-x-auto overflow-y-hidden px-1"},Tb=["onClick"],Ob={key:1,class:"mt-2 h-1 w-full overflow-hidden bg-transparent","aria-label":"Checklist progress"},Rb=["onClick"],Db=["onClick"],Pb={key:0,class:"border border-dashed border-white/10 bg-white/5 p-4 text-sm text-slate-300"},$b={key:1,class:"mt-6 border-t border-white/10 pt-4"},Mb={class:"flex items-center justify-between gap-3 px-3 py-2 sm:px-4 sm:py-3"},Nb={class:"min-w-0 flex-1"},jb={class:"truncate text-sm font-semibold text-slate-300"},Lb={class:"truncate text-xs text-slate-500"},Bb={key:0,class:"mt-2 h-1 w-full overflow-hidden bg-white/10","aria-label":"Checklist progress"},Fb={class:"flex shrink-0 border border-white/10"},Kb=["onClick"],Ub=["onClick"],qb=Zt({__name:"NotesList",setup(e){const t=oo(),n=he([]),s=he([]),i=he(!1),a=he(""),u=he({}),f=he({}),p=he({}),v=he({}),m=he({}),g=he(null),w=me=>me.replace(/\r\n/g,`
`).split(`
`).length,A=me=>new TextEncoder().encode(me).byteLength,O=me=>{if(me<1024)return`${me} B`;const Ce=me/1024;return Ce<1024?`${Ce.toFixed(1)} KB`:`${(Ce/1024).toFixed(1)} MB`},J=me=>[...me].sort((Ce,ne)=>{const Se=Ce.pinnedAt?new Date(Ce.pinnedAt).getTime():0,Ye=ne.pinnedAt?new Date(ne.pinnedAt).getTime():0;return Se!==Ye?Ye-Se:new Date(ne.updatedAt).getTime()-new Date(Ce.updatedAt).getTime()}),ue=async()=>{i.value=!0;const[me,Ce,ne,Se]=await Promise.all([wi(),Tm(),Jr(),io()]);n.value=J(me),s.value=Ce,N(ne,Se),i.value=!1,console.debug("[notes] refresh",{active:n.value.map(Ye=>({id:Ye.id,title:Ye.title,updatedAt:Ye.updatedAt})),archived:s.value.map(Ye=>({id:Ye.id,title:Ye.title,updatedAt:Ye.updatedAt}))})},U=me=>{t.push({name:"note-editor",params:{id:me}})},N=(me,Ce)=>{const ne={},Se={},Ye={},ot={},lt={};for(const ie of me){Se[ie.noteId]=(Se[ie.noteId]??0)+1,ne[ie.noteId]=(ne[ie.noteId]??0)+w(ie.content),Ye[ie.noteId]=(Ye[ie.noteId]??0)+A(ie.content);const q=to(ie.content);if(q.checklists.length){const M=ot[ie.noteId]??{total:0,checked:0};M.total+=q.checklists.length,M.checked+=q.checklists.filter(re=>re.checked).length,ot[ie.noteId]=M}}for(const ie of me){const q=to(ie.content).tags.map(re=>({tag:re.tag,lineIndex:re.lineIndex,tabId:ie.id,priority:re.priority??!1})),M=lt[ie.noteId]??[];lt[ie.noteId]=[...M,...q].sort((re,be)=>Number(be.priority)-Number(re.priority))}for(const ie of Ce){const q=Ye[ie.noteId]??0;Ye[ie.noteId]=q+(ie.blob?.size??0),ie.thumbnailDataUrl&&(Ye[ie.noteId]=(Ye[ie.noteId]??0)+A(ie.thumbnailDataUrl))}for(const ie of[...n.value,...s.value])Ye[ie.id]=(Ye[ie.id]??0)+A(ie.title??"");u.value=ne,f.value=Se,p.value=Ye,v.value=ot,m.value=lt},D=async me=>{await Nt(me,{archivedAt:new Date().toISOString()}),await ue()},Q=async(me,Ce)=>{await Nt(me,{pinnedAt:Ce?null:new Date().toISOString()}),await ue()},Pe=(me,Ce,ne)=>{t.push({name:"note-editor",params:{id:me},query:{...Ce?{tab:Ce}:{},line:ne.toString()}})},je=async me=>{await Nt(me,{archivedAt:null}),await ue()},$e=async me=>{window.confirm("Permanently delete this note? This cannot be undone.")&&(await nl(me),await ue())},at=me=>{g.value=me},Be=()=>{g.value=null},ze=()=>{console.debug("[notes] sync complete  refresh"),ue()},Ge=me=>{if(!g.value)return;const Ce=me.target;if(!Ce)return;const ne=Ce.closest(".note-action-menu"),Se=Ce.closest(".note-more-btn");!ne&&!Se&&Be()};fn(()=>{ue(),window.addEventListener("jotrip:sync-complete",ze),window.addEventListener("pointerdown",Ge,!0)}),xr(()=>{window.removeEventListener("jotrip:sync-complete",ze),window.removeEventListener("pointerdown",Ge,!0)}),fn(()=>Yr("notes-list"));const se=(me,Ce)=>{const ne=a.value.trim().toLowerCase();if(!ne)return!0;const Se=(Ce||"").toLowerCase().includes(ne),ot=(m.value[me]??[]).some(lt=>(lt.tag||"").toLowerCase().includes(ne));return Se||ot},Z=Je(()=>n.value.filter(me=>se(me.id,me.title||""))),De=Je(()=>s.value.filter(me=>se(me.id,me.title||"")));return(me,Ce)=>(le(),fe("section",yb,[k("div",bb,[qr(k("input",{"onUpdate:modelValue":Ce[0]||(Ce[0]=ne=>a.value=ne),type:"search",class:"w-full border border-white/15 bg-black/30 px-3 py-2 text-sm text-white",placeholder:"Filter by title or #tag"},null,512),[[bs,a.value]])]),k("div",wb,[(le(!0),fe(mt,null,Mt(Z.value,ne=>(le(),fe("div",{key:ne.id,class:"mb-2"},[k("div",{class:kt(["note-card relative border border-white/10 bg-slate-900/40",ne.color?"has-note-color":""]),style:vt(ne.color?{"--note-color":ne.color}:void 0)},[k("button",{type:"button",class:"flex w-full flex-col gap-1 px-3 py-2 text-left sm:px-4 sm:py-3",onClick:()=>{if(g.value){Be();return}U(ne.id)}},[k("div",_b,[k("div",kb,[k("p",Cb,qe(ne.title||"Untitled"),1),k("p",Sb," Updated "+qe(new Date(ne.updatedAt).toLocaleString())+"  "+qe(f.value[ne.id]??0)+" tabs  "+qe(u.value[ne.id]??0)+" lines  "+qe(O(p.value[ne.id]??0)),1)]),ne.pinnedAt?(le(),fe("span",Eb,"")):nt("",!0),k("button",{type:"button",class:"shrink-0 rounded border border-white/15 px-2 py-1 text-xs text-white note-more-btn",onClick:nn(Se=>g.value===ne.id?Be():at(ne.id),["stop"]),"aria-label":"More actions"},"  ",8,Ib)]),m.value[ne.id]?.length?(le(),fe("div",Ab,[(le(!0),fe(mt,null,Mt(m.value[ne.id],Se=>(le(),fe("button",{key:Se.tag+":"+Se.tabId+":"+Se.lineIndex,type:"button",class:"mr-1 inline-flex shrink-0 px-2 py-1 text-[11px] last:mr-0",onClick:nn(Ye=>Pe(ne.id,Se.tabId,Se.lineIndex),["stop"]),style:vt({border:Se.priority?`1px solid ${ne.color||"rgba(246,153,63,0.5)"}`:"1px solid transparent",backgroundColor:Se.priority?ne.color?`${ne.color}20`:"rgba(246,153,63,0.12)":ne.color?`${ne.color}20`:"rgba(52,211,153,0.1)",color:ne.color?"#fff":Se.priority?"rgb(249,115,22)":"rgb(52,211,153)"})},[k("span",{class:kt(["truncate",Se.priority?"font-bold":""])}," #"+qe(Se.tag.length>20?Se.tag.slice(0,20)+"":Se.tag),3)],12,Tb))),128))])):nt("",!0),v.value[ne.id]?.total?(le(),fe("div",Ob,[k("div",{class:"h-full",style:vt({width:`${Math.round((v.value[ne.id]?.checked||0)/Math.max(1,v.value[ne.id]?.total||1)*100)}%`,background:ne.color?`linear-gradient(to right, ${ne.color}, ${ne.color}CC)`:"linear-gradient(to right, rgba(52,211,153,0.9), rgba(52,211,153,0.6))",borderBottom:ne.color?`1px solid ${ne.color}`:"1px solid rgba(52,211,153,0.8)"})},null,4)])):nt("",!0)],8,xb),g.value===ne.id?(le(),fe("div",{key:0,class:"note-action-menu absolute right-2 top-2 z-20 w-28 border border-white/15 bg-slate-900 text-sm text-white shadow-xl",onClick:nn(Be,["self"])},[k("button",{type:"button",class:"flex w-full items-center justify-between px-3 py-2 hover:bg-white/10",onClick:nn(Se=>{Q(ne.id,!!ne.pinnedAt),Be()},["stop"])},[Ce[1]||(Ce[1]=k("span",null,"Pin",-1)),k("span",{class:kt(ne.pinnedAt?"text-white":"text-white/40 grayscale")},"",2)],8,Rb),k("button",{type:"button",class:"flex w-full items-center justify-between px-3 py-2 hover:bg-white/10",onClick:nn(Se=>{D(ne.id),Be()},["stop"])},[...Ce[2]||(Ce[2]=[k("span",null,"Archive",-1),k("span",null,"",-1)])],8,Db)])):nt("",!0)],6)]))),128)),!n.value.length&&!i.value?(le(),fe("div",Pb," No notes yet. Create one to start editing. ")):nt("",!0),s.value.length?(le(),fe("div",$b,[Ce[3]||(Ce[3]=k("p",{class:"px-2 text-xs uppercase tracking-[0.2em] text-slate-500 sm:px-0"},"Archived",-1)),(le(!0),fe(mt,null,Mt(De.value,ne=>(le(),fe("div",{key:ne.id,class:kt(["note-card mt-2 border border-white/10 bg-slate-900/20 text-slate-400",ne.color?"has-note-color":""]),style:vt(ne.color?{"--note-color":ne.color}:void 0)},[k("div",Mb,[k("div",Nb,[k("p",jb,qe(ne.title||"Untitled"),1),k("p",Lb," Updated "+qe(new Date(ne.updatedAt).toLocaleString())+"  "+qe(f.value[ne.id]??0)+" tabs  "+qe(u.value[ne.id]??0)+" lines  "+qe(O(p.value[ne.id]??0)),1),v.value[ne.id]?.total?(le(),fe("div",Bb,[k("div",{class:"h-full bg-emerald-300/30",style:vt({width:`${Math.round((v.value[ne.id]?.checked||0)/Math.max(1,v.value[ne.id]?.total||1)*100)}%`})},null,4)])):nt("",!0)]),k("div",Fb,[k("button",{type:"button",class:"px-4 py-3 text-sm",onClick:Se=>je(ne.id)},"",8,Kb),k("button",{type:"button",class:"border-l border-white/10 px-4 py-3 text-sm text-red-200",onClick:Se=>$e(ne.id)},"  ",8,Ub)])])],6))),128))])):nt("",!0)])]))}}),Vb={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},Hb={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},Wb={class:"space-y-3 border border-white/10 bg-slate-900/40 p-3 sm:p-4"},zb={class:"flex items-center justify-between border border-white/5 bg-white/5 px-4 py-3"},Gb={class:"inline-flex items-center gap-2 text-sm text-slate-200"},Yb={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},Jb=["disabled"],Qb={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},Xb=["disabled"],Zb=["disabled"],e0={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},t0={class:"block space-y-1 text-sm text-slate-200"},n0={class:"flex gap-2"},r0=["type"],s0={class:"mt-2 flex gap-2"},o0={class:"absolute h-px w-px overflow-hidden","aria-hidden":"true"},i0={class:"block space-y-1 text-sm text-slate-200"},a0={class:"flex items-center justify-between text-sm text-white"},l0={class:"inline-flex items-center gap-2"},c0={class:"text-xs text-slate-400"},Nc="jotrip:theme",u0=Zt({__name:"Settings",setup(e){const t=he(!1),n=he(!1),s=he(!1),i=he(!1),a=he(""),u=he(""),f=he(""),p=he(""),v=he(""),m=he(!1),g=he(null),w=he(!1),A=he(null),O=he(null),J=se=>{document.documentElement.classList.toggle("theme-light",se),window.localStorage.setItem(Nc,se?"light":"dark")};fn(()=>{const se=window.localStorage.getItem(Nc),Z=window.matchMedia?.("(prefers-color-scheme: light)")?.matches??!1;t.value=se?se==="light":Z,J(t.value),cn("sync:passphrase").then(De=>u.value=De??""),cn("sync:url").then(De=>{if(De)f.value=De;else{const me=window.location,Ce=me.origin||`${me.protocol}//${me.host}`;f.value=Ce}}),cn("sync:username").then(De=>p.value=De??""),cn("sync:password").then(De=>v.value=De??""),cn("sync:enabled").then(De=>m.value=!!De),cn("sync:last").then(De=>g.value=De??null),D()}),yn(t,se=>J(se)),yn(()=>[p.value,v.value,u.value],()=>{D()});const ue=async()=>{Q(a.value),await Promise.all([vr("sync:passphrase",u.value.trim()),vr("sync:url",f.value.trim()),vr("sync:username",p.value.trim()),vr("sync:password",v.value.trim()),vr("sync:enabled",m.value)]),je()},U=async()=>{if(Q(a.value),await ue(),!m.value){window.alert("Enable sync first.");return}try{const se=await hf({baseUrl:f.value.trim(),username:p.value.trim(),password:v.value.trim(),passphrase:u.value.trim()});g.value=se,window.alert("Sync complete.")}catch(se){console.error(se),window.alert("Sync failed. Check console for details.")}},N=se=>{const Z="abcdefghijklmnopqrstuvwxyz",De=[];for(let me=0;me<se;me++){let Ce="";for(let ne=0;ne<6;ne++){const Se=Math.floor(Math.random()*Z.length);Ce+=Z[Se]}De.push(Ce)}return De.join("-")},D=()=>{if(!p.value&&!v.value&&!u.value){a.value="";return}a.value=`${p.value}/${v.value}/${u.value}`,je()},Q=se=>{const Z=se.split("/");p.value=Z[0]??"",v.value=Z[1]??"",u.value=Z.slice(2).join("/")||""},Pe=()=>{const se=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().split("-")[0]:Math.random().toString(36).slice(2,8),Z=Array.from(crypto.getRandomValues(new Uint8Array(8))).map(me=>(me%10).toString(10)).join(""),De=N(4);p.value=se,v.value=Z,u.value=De,D(),je()},je=()=>{const se=A.value,Z=O.value;se&&(se.value="jotrip-sync"),Z&&(Z.value=a.value,Z.focus(),Z.blur())},$e=se=>new Promise((Z,De)=>{const me=new FileReader;me.onload=()=>Z(me.result.split(",")[1]??""),me.onerror=De,me.readAsDataURL(se)}),at=(se,Z)=>{const De=new Blob([Z],{type:"application/json"}),me=URL.createObjectURL(De),Ce=document.createElement("a");Ce.href=me,Ce.download=se,Ce.click(),URL.revokeObjectURL(me)},Be=async()=>{n.value=!0;try{const[se,Z,De,me]=await Promise.all([Cs(),Jr(),io(),Dm()]),Ce=await Promise.all(De.map(async Se=>({...Se,base64:await $e(Se.blob)}))),ne={version:"backup-1",type:"jotrip-backup",exportedAt:new Date().toISOString(),notes:se,tabs:Z,images:Ce,meta:me};at(`jotrip-backup-${new Date().toISOString().slice(0,10)}.json`,JSON.stringify(ne))}finally{n.value=!1}},ze=async()=>{if(!(!window.confirm("This will delete all local data (jots, tabs, images). Continue?")||window.prompt("Type CLEAR to confirm wiping all data")!=="CLEAR")){s.value=!0;try{await Sc()}finally{s.value=!1}}},Ge=async()=>{Q(a.value);const se=f.value.trim().replace(/\/+$/,"");if(!se||!p.value||!v.value){window.alert("Set server URL and user/password/passphrase bundle first.");return}if(!(!window.confirm("This will delete ALL remote data for this account and then clear local data. Continue?")||window.prompt("Type WIPE to confirm remote + local delete")!=="WIPE")){i.value=!0;try{const me=await fetch(`${se}/wipe`,{method:"POST",headers:{Authorization:`Basic ${btoa(`${p.value}:${v.value}`)}`}});if(!me.ok)throw new Error(`Remote wipe failed ${me.status}`);await Sc(),await vr("sync:last",null),window.alert("Remote and local data cleared.")}catch(me){console.error(me),window.alert("Failed to clear remote data. Check console for details.")}finally{i.value=!1}}};return(se,Z)=>(le(),fe("section",Vb,[Z[19]||(Z[19]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Settings"),k("h1",{class:"text-2xl font-semibold text-white"},"Settings")],-1)),k("div",Hb,[k("div",Wb,[k("div",zb,[Z[11]||(Z[11]=k("div",null,[k("p",{class:"font-medium text-white"},"Theme"),k("p",{class:"text-sm text-slate-300"},"Toggle light mode (MVP).")],-1)),k("label",Gb,[Z[9]||(Z[9]=k("span",{class:"text-xs text-slate-400"},"Dark",-1)),qr(k("input",{"onUpdate:modelValue":Z[0]||(Z[0]=De=>t.value=De),type:"checkbox",class:"h-5 w-10 rounded-none border-white/20 bg-transparent"},null,512),[[ka,t.value]]),Z[10]||(Z[10]=k("span",{class:"text-xs text-slate-400"},"Light",-1))])]),k("div",Yb,[Z[12]||(Z[12]=k("div",null,[k("p",{class:"font-medium text-white"},"Data backup"),k("p",{class:"text-sm text-slate-300"},"Export all jots, tabs, images, and settings into one file.")],-1)),k("button",{type:"button",class:"w-full border border-indigo-300/30 bg-indigo-500/20 px-3 py-2 text-sm text-white",disabled:n.value,onClick:Be},qe(n.value?"Exporting":"Export all data"),9,Jb)]),k("div",Qb,[Z[13]||(Z[13]=k("div",null,[k("p",{class:"font-medium text-white"},"Danger zone"),k("p",{class:"text-sm text-slate-300"},"Wipe all local data (cannot be undone).")],-1)),k("button",{type:"button",class:"w-full border border-red-300/30 bg-red-500/20 px-3 py-2 text-sm text-white",disabled:s.value,onClick:ze},qe(s.value?"Clearing":"Clear all data"),9,Xb),k("button",{type:"button",class:"w-full border border-red-300/30 bg-red-700/30 px-3 py-2 text-sm text-white",disabled:i.value,onClick:Ge},qe(i.value?"Wiping remote":"Clear remote + local data"),9,Zb)]),k("div",e0,[Z[18]||(Z[18]=k("div",null,[k("p",{class:"font-medium text-white"},"Sync"),k("p",{class:"text-sm text-slate-300"}," Enter or generate a single user/passphrase bundle. Saved separately, but you only need to remember one field. ")],-1)),k("label",t0,[Z[14]||(Z[14]=k("span",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"User / Password / Passphrase",-1)),k("div",n0,[qr(k("input",{"onUpdate:modelValue":Z[1]||(Z[1]=De=>a.value=De),name:"password",type:w.value?"text":"password",class:"w-full border border-white/15 bg-black/20 px-3 py-2 text-white",placeholder:"user/password/passphrase",autocomplete:"new-password",onInput:Z[2]||(Z[2]=De=>Q(a.value)),onChange:Z[3]||(Z[3]=De=>Q(a.value)),onBlur:Z[4]||(Z[4]=De=>Q(a.value))},null,40,r0),[[th,a.value]]),k("button",{type:"button",class:"border border-white/15 bg-white/10 px-3 py-2 text-xs text-white",onClick:Z[5]||(Z[5]=De=>w.value=!w.value)},qe(w.value?"Hide":"Show"),1)]),k("div",s0,[k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-1 text-xs text-white",onClick:Pe}," Generate bundle "),k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-1 text-xs text-white",onClick:Z[6]||(Z[6]=De=>{a.value="",Q("")})}," Clear ")]),Z[15]||(Z[15]=k("p",{class:"text-xs text-slate-400"},"We recommend saving this in your browser password manager when prompted.",-1))]),k("form",o0,[k("input",{ref_key:"hiddenUserRef",ref:A,name:"username",autocomplete:"username"},null,512),k("input",{ref_key:"hiddenPassRef",ref:O,name:"password",type:"password",autocomplete:"new-password"},null,512)]),k("label",i0,[Z[16]||(Z[16]=k("span",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Server URL",-1)),qr(k("input",{"onUpdate:modelValue":Z[7]||(Z[7]=De=>f.value=De),type:"text",class:"w-full border border-white/15 bg-black/20 px-3 py-2 text-white",placeholder:"https://your-server"},null,512),[[bs,f.value]])]),k("div",a0,[k("label",l0,[qr(k("input",{"onUpdate:modelValue":Z[8]||(Z[8]=De=>m.value=De),type:"checkbox",class:"h-4 w-4 border-white/20 bg-black/30"},null,512),[[ka,m.value]]),Z[17]||(Z[17]=k("span",null,"Enable sync (polling not yet implemented)",-1))]),k("span",c0,"Last sync: "+qe(g.value||"Never"),1)]),k("div",{class:"flex gap-2"},[k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-2 text-sm text-white",onClick:ue}," Save settings "),k("button",{type:"button",class:"flex-1 border border-indigo-300/30 bg-indigo-500/20 px-3 py-2 text-sm text-white",onClick:U}," Sync now ")])])])])]))}}),f0={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},d0="https://github.com/cokeeffekt/jot.rip",p0=Zt({__name:"About",setup(e){return(t,n)=>(le(),fe("section",f0,[n[2]||(n[2]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"About"),k("h1",{class:"text-2xl font-semibold text-white"},"jot.rip")],-1)),k("div",{class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},[k("div",{class:"space-y-4 border border-white/10 bg-slate-900/40 p-4 text-sm text-slate-200 sm:p-5 leading-relaxed"},[n[1]||(n[1]=Uu("<p>I spent nearly twenty years trying to like note-taking apps.</p><p> I tried the clever ones, the beautiful ones, the ones with backlinks and graphs and promises of a better brain. I tried systems, workflows, methods with names. Every time, I bounced off. Too much structure, too much ceremony, too much friction between thought and text. </p><p> I always came back to plain text files. A folder. A cursor. Words on disk. It wasnt elegant, but it stayed out of my way. </p><p> Still, I kept looking for something better  something just as simple, but a little more intentional. Something that didnt demand an account, a cloud, or a philosophy. Something that assumed my thoughts were already complicated enough. </p><p>jot.rip is what that search quietly turned into.</p><p> Its offline-first, fast, and plain-text friendly. A single textarea editor. A predictable gutter. Optional sync, only if you want it. No accounts. No onboarding. No insistence that you do things the right way. </p><p> In the end, I never actually built my dream notes app. But after about twelve hours of back-and-forth, Codex did  and it turns out, thats good enough. </p><p>And its open source.</p><p>So if this is almost what you want, but not quite it, you too can go ask Codex to build what you want.</p><p>If you have an opinion or a feature request, fork it. If you find a bug, send a PR.</p>",10)),k("a",{href:d0,class:"inline-flex items-center gap-2 border border-indigo-300/40 bg-indigo-500/20 px-3 py-2 text-sm font-semibold text-white hover:border-indigo-200/60",target:"_blank",rel:"noreferrer"},[...n[0]||(n[0]=[yr(" View on GitHub ",-1),k("span",{"aria-hidden":"true"},"",-1)])])])])]))}}),h0=mm({history:Yh(),routes:[{path:"/",component:xg,children:[{path:"",name:"home",component:Fv},{path:"notes",name:"notes",component:qb},{path:"notes/:id",name:"note-editor",component:vb,props:!0},{path:"calendar",name:"calendar",component:Xg},{path:"settings",name:"settings",component:u0},{path:"import",name:"import",component:Qv},{path:"help",name:"help",component:mv},{path:"db-demo",name:"db-demo",component:fv},{path:"about",name:"about",component:p0}]}],scrollBehavior:()=>({top:0})});function m0(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(()=>{})})}const g0=()=>{const e=()=>{const t=window.visualViewport?.height??window.innerHeight;document.documentElement.style.setProperty("--app-height",`${t}px`)};e(),window.addEventListener("resize",e,{passive:!0}),window.visualViewport?.addEventListener("resize",e,{passive:!0}),window.visualViewport?.addEventListener("scroll",e,{passive:!0})},v0=()=>{const t=window.localStorage.getItem("jotrip:theme"),n=window.matchMedia?.("(prefers-color-scheme: light)")?.matches??!1,s=t==="light"||t==="dark"?t:n?"light":"dark";document.documentElement.classList.toggle("theme-light",s==="light")};g0();v0();const yf=ch(vm);yf.use(h0);yf.mount("#app");m0();lf().catch(()=>{});Zm();
