(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function Ta(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const yt={},rs=[],On=()=>{},$c=()=>!1,Zo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Oa=e=>e.startsWith("onUpdate:"),Nt=Object.assign,Ra=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Pf=Object.prototype.hasOwnProperty,dt=(e,t)=>Pf.call(e,t),We=Array.isArray,ss=e=>no(e)==="[object Map]",ds=e=>no(e)==="[object Set]",bl=e=>no(e)==="[object Date]",Ze=e=>typeof e=="function",Rt=e=>typeof e=="string",Dn=e=>typeof e=="symbol",vt=e=>e!==null&&typeof e=="object",Nc=e=>(vt(e)||Ze(e))&&Ze(e.then)&&Ze(e.catch),jc=Object.prototype.toString,no=e=>jc.call(e),Mf=e=>no(e).slice(8,-1),Lc=e=>no(e)==="[object Object]",Da=e=>Rt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ls=Ta(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ei=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},$f=/-\w/g,hr=ei(e=>e.replace($f,t=>t.slice(1).toUpperCase())),Nf=/\B([A-Z])/g,yr=ei(e=>e.replace(Nf,"-$1").toLowerCase()),Bc=ei(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ki=ei(e=>e?`on${Bc(e)}`:""),pr=(e,t)=>!Object.is(e,t),jo=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Fc=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},ti=e=>{const t=parseFloat(e);return isNaN(t)?e:t},jf=e=>{const t=Rt(e)?Number(e):NaN;return isNaN(t)?e:t};let wl;const ni=()=>wl||(wl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function mt(e){if(We(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],i=Rt(s)?Kf(s):mt(s);if(i)for(const l in i)t[l]=i[l]}return t}else if(Rt(e)||vt(e))return e}const Lf=/;(?![^(]*\))/g,Bf=/:([^]+)/,Ff=/\/\*[^]*?\*\//g;function Kf(e){const t={};return e.replace(Ff,"").split(Lf).forEach(n=>{if(n){const s=n.split(Bf);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function kt(e){let t="";if(Rt(e))t=e;else if(We(e))for(let n=0;n<e.length;n++){const s=kt(e[n]);s&&(t+=s+" ")}else if(vt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Uf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",qf=Ta(Uf);function Kc(e){return!!e||e===""}function Vf(e,t){if(e.length!==t.length)return!1;let n=!0;for(let s=0;n&&s<e.length;s++)n=Br(e[s],t[s]);return n}function Br(e,t){if(e===t)return!0;let n=bl(e),s=bl(t);if(n||s)return n&&s?e.getTime()===t.getTime():!1;if(n=Dn(e),s=Dn(t),n||s)return e===t;if(n=We(e),s=We(t),n||s)return n&&s?Vf(e,t):!1;if(n=vt(e),s=vt(t),n||s){if(!n||!s)return!1;const i=Object.keys(e).length,l=Object.keys(t).length;if(i!==l)return!1;for(const u in e){const f=e.hasOwnProperty(u),p=t.hasOwnProperty(u);if(f&&!p||!f&&p||!Br(e[u],t[u]))return!1}}return String(e)===String(t)}function Pa(e,t){return e.findIndex(n=>Br(n,t))}const Uc=e=>!!(e&&e.__v_isRef===!0),qe=e=>Rt(e)?e:e==null?"":We(e)||vt(e)&&(e.toString===jc||!Ze(e.toString))?Uc(e)?qe(e.value):JSON.stringify(e,qc,2):String(e),qc=(e,t)=>Uc(t)?qc(e,t.value):ss(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,i],l)=>(n[Ui(s,l)+" =>"]=i,n),{})}:ds(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ui(n))}:Dn(t)?Ui(t):vt(t)&&!We(t)&&!Lc(t)?String(t):t,Ui=(e,t="")=>{var n;return Dn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let Zt;class Hf{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Zt,!t&&Zt&&(this.index=(Zt.scopes||(Zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Zt;try{return Zt=this,t()}finally{Zt=n}}}on(){++this._on===1&&(this.prevScope=Zt,Zt=this)}off(){this._on>0&&--this._on===0&&(Zt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Wf(){return Zt}let wt;const qi=new WeakSet;class Vc{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Zt&&Zt.active&&Zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,qi.has(this)&&(qi.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Wc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xl(this),zc(this);const t=wt,n=gn;wt=this,gn=!0;try{return this.fn()}finally{Gc(this),wt=t,gn=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Na(t);this.deps=this.depsTail=void 0,xl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?qi.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ia(this)&&this.run()}get dirty(){return ia(this)}}let Hc=0,Bs,Fs;function Wc(e,t=!1){if(e.flags|=8,t){e.next=Fs,Fs=e;return}e.next=Bs,Bs=e}function Ma(){Hc++}function $a(){if(--Hc>0)return;if(Fs){let t=Fs;for(Fs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Bs;){let t=Bs;for(Bs=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function zc(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Gc(e){let t,n=e.depsTail,s=n;for(;s;){const i=s.prevDep;s.version===-1?(s===n&&(n=i),Na(s),zf(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}e.deps=t,e.depsTail=n}function ia(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Yc(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Yc(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===zs)||(e.globalVersion=zs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ia(e))))return;e.flags|=2;const t=e.dep,n=wt,s=gn;wt=e,gn=!0;try{zc(e);const i=e.fn(e._value);(t.version===0||pr(i,e._value))&&(e.flags|=128,e._value=i,t.version++)}catch(i){throw t.version++,i}finally{wt=n,gn=s,Gc(e),e.flags&=-3}}function Na(e,t=!1){const{dep:n,prevSub:s,nextSub:i}=e;if(s&&(s.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let l=n.computed.deps;l;l=l.nextDep)Na(l,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function zf(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let gn=!0;const Jc=[];function Gn(){Jc.push(gn),gn=!1}function Yn(){const e=Jc.pop();gn=e===void 0?!0:e}function xl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=wt;wt=void 0;try{t()}finally{wt=n}}}let zs=0;class Gf{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ja{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!wt||!gn||wt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==wt)n=this.activeLink=new Gf(wt,this),wt.deps?(n.prevDep=wt.depsTail,wt.depsTail.nextDep=n,wt.depsTail=n):wt.deps=wt.depsTail=n,Qc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=wt.depsTail,n.nextDep=void 0,wt.depsTail.nextDep=n,wt.depsTail=n,wt.deps===n&&(wt.deps=s)}return n}trigger(t){this.version++,zs++,this.notify(t)}notify(t){Ma();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{$a()}}}function Qc(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Qc(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const aa=new WeakMap,jr=Symbol(""),la=Symbol(""),Gs=Symbol("");function qt(e,t,n){if(gn&&wt){let s=aa.get(e);s||aa.set(e,s=new Map);let i=s.get(n);i||(s.set(n,i=new ja),i.map=s,i.key=n),i.track()}}function Hn(e,t,n,s,i,l){const u=aa.get(e);if(!u){zs++;return}const f=p=>{p&&p.trigger()};if(Ma(),t==="clear")u.forEach(f);else{const p=We(e),v=p&&Da(n);if(p&&n==="length"){const m=Number(s);u.forEach((g,w)=>{(w==="length"||w===Gs||!Dn(w)&&w>=m)&&f(g)})}else switch((n!==void 0||u.has(void 0))&&f(u.get(n)),v&&f(u.get(Gs)),t){case"add":p?v&&f(u.get("length")):(f(u.get(jr)),ss(e)&&f(u.get(la)));break;case"delete":p||(f(u.get(jr)),ss(e)&&f(u.get(la)));break;case"set":ss(e)&&f(u.get(jr));break}}$a()}function Zr(e){const t=ct(e);return t===e?t:(qt(t,"iterate",Gs),dn(e)?t:t.map(yn))}function ri(e){return qt(e=ct(e),"iterate",Gs),e}function lr(e,t){return Jn(e)?Lr(e)?as(yn(t)):as(t):yn(t)}const Yf={__proto__:null,[Symbol.iterator](){return Vi(this,Symbol.iterator,e=>lr(this,e))},concat(...e){return Zr(this).concat(...e.map(t=>We(t)?Zr(t):t))},entries(){return Vi(this,"entries",e=>(e[1]=lr(this,e[1]),e))},every(e,t){return Bn(this,"every",e,t,void 0,arguments)},filter(e,t){return Bn(this,"filter",e,t,n=>n.map(s=>lr(this,s)),arguments)},find(e,t){return Bn(this,"find",e,t,n=>lr(this,n),arguments)},findIndex(e,t){return Bn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Bn(this,"findLast",e,t,n=>lr(this,n),arguments)},findLastIndex(e,t){return Bn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Bn(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hi(this,"includes",e)},indexOf(...e){return Hi(this,"indexOf",e)},join(e){return Zr(this).join(e)},lastIndexOf(...e){return Hi(this,"lastIndexOf",e)},map(e,t){return Bn(this,"map",e,t,void 0,arguments)},pop(){return Ps(this,"pop")},push(...e){return Ps(this,"push",e)},reduce(e,...t){return _l(this,"reduce",e,t)},reduceRight(e,...t){return _l(this,"reduceRight",e,t)},shift(){return Ps(this,"shift")},some(e,t){return Bn(this,"some",e,t,void 0,arguments)},splice(...e){return Ps(this,"splice",e)},toReversed(){return Zr(this).toReversed()},toSorted(e){return Zr(this).toSorted(e)},toSpliced(...e){return Zr(this).toSpliced(...e)},unshift(...e){return Ps(this,"unshift",e)},values(){return Vi(this,"values",e=>lr(this,e))}};function Vi(e,t,n){const s=ri(e),i=s[t]();return s!==e&&!dn(e)&&(i._next=i.next,i.next=()=>{const l=i._next();return l.done||(l.value=n(l.value)),l}),i}const Jf=Array.prototype;function Bn(e,t,n,s,i,l){const u=ri(e),f=u!==e&&!dn(e),p=u[t];if(p!==Jf[t]){const g=p.apply(e,l);return f?yn(g):g}let v=n;u!==e&&(f?v=function(g,w){return n.call(this,lr(e,g),w,e)}:n.length>2&&(v=function(g,w){return n.call(this,g,w,e)}));const m=p.call(u,v,s);return f&&i?i(m):m}function _l(e,t,n,s){const i=ri(e);let l=n;return i!==e&&(dn(e)?n.length>3&&(l=function(u,f,p){return n.call(this,u,f,p,e)}):l=function(u,f,p){return n.call(this,u,lr(e,f),p,e)}),i[t](l,...s)}function Hi(e,t,n){const s=ct(e);qt(s,"iterate",Gs);const i=s[t](...n);return(i===-1||i===!1)&&Fa(n[0])?(n[0]=ct(n[0]),s[t](...n)):i}function Ps(e,t,n=[]){Gn(),Ma();const s=ct(e)[t].apply(e,n);return $a(),Yn(),s}const Qf=Ta("__proto__,__v_isRef,__isVue"),Xc=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dn));function Xf(e){Dn(e)||(e=String(e));const t=ct(this);return qt(t,"has",e),t.hasOwnProperty(e)}class Zc{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const i=this._isReadonly,l=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return l;if(n==="__v_raw")return s===(i?l?ld:ru:l?nu:tu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const u=We(t);if(!i){let p;if(u&&(p=Yf[n]))return p;if(n==="hasOwnProperty")return Xf}const f=Reflect.get(t,n,Vt(t)?t:s);if((Dn(n)?Xc.has(n):Qf(n))||(i||qt(t,"get",n),l))return f;if(Vt(f)){const p=u&&Da(n)?f:f.value;return i&&vt(p)?ua(p):p}return vt(f)?i?ua(f):si(f):f}}class eu extends Zc{constructor(t=!1){super(!1,t)}set(t,n,s,i){let l=t[n];const u=We(t)&&Da(n);if(!this._isShallow){const v=Jn(l);if(!dn(s)&&!Jn(s)&&(l=ct(l),s=ct(s)),!u&&Vt(l)&&!Vt(s))return v||(l.value=s),!0}const f=u?Number(n)<t.length:dt(t,n),p=Reflect.set(t,n,s,Vt(t)?t:i);return t===ct(i)&&(f?pr(s,l)&&Hn(t,"set",n,s):Hn(t,"add",n,s)),p}deleteProperty(t,n){const s=dt(t,n);t[n];const i=Reflect.deleteProperty(t,n);return i&&s&&Hn(t,"delete",n,void 0),i}has(t,n){const s=Reflect.has(t,n);return(!Dn(n)||!Xc.has(n))&&qt(t,"has",n),s}ownKeys(t){return qt(t,"iterate",We(t)?"length":jr),Reflect.ownKeys(t)}}class Zf extends Zc{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ed=new eu,td=new Zf,nd=new eu(!0);const ca=e=>e,To=e=>Reflect.getPrototypeOf(e);function rd(e,t,n){return function(...s){const i=this.__v_raw,l=ct(i),u=ss(l),f=e==="entries"||e===Symbol.iterator&&u,p=e==="keys"&&u,v=i[e](...s),m=n?ca:t?as:yn;return!t&&qt(l,"iterate",p?la:jr),{next(){const{value:g,done:w}=v.next();return w?{value:g,done:w}:{value:f?[m(g[0]),m(g[1])]:m(g),done:w}},[Symbol.iterator](){return this}}}}function Oo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function sd(e,t){const n={get(i){const l=this.__v_raw,u=ct(l),f=ct(i);e||(pr(i,f)&&qt(u,"get",i),qt(u,"get",f));const{has:p}=To(u),v=t?ca:e?as:yn;if(p.call(u,i))return v(l.get(i));if(p.call(u,f))return v(l.get(f));l!==u&&l.get(i)},get size(){const i=this.__v_raw;return!e&&qt(ct(i),"iterate",jr),i.size},has(i){const l=this.__v_raw,u=ct(l),f=ct(i);return e||(pr(i,f)&&qt(u,"has",i),qt(u,"has",f)),i===f?l.has(i):l.has(i)||l.has(f)},forEach(i,l){const u=this,f=u.__v_raw,p=ct(f),v=t?ca:e?as:yn;return!e&&qt(p,"iterate",jr),f.forEach((m,g)=>i.call(l,v(m),v(g),u))}};return Nt(n,e?{add:Oo("add"),set:Oo("set"),delete:Oo("delete"),clear:Oo("clear")}:{add(i){!t&&!dn(i)&&!Jn(i)&&(i=ct(i));const l=ct(this);return To(l).has.call(l,i)||(l.add(i),Hn(l,"add",i,i)),this},set(i,l){!t&&!dn(l)&&!Jn(l)&&(l=ct(l));const u=ct(this),{has:f,get:p}=To(u);let v=f.call(u,i);v||(i=ct(i),v=f.call(u,i));const m=p.call(u,i);return u.set(i,l),v?pr(l,m)&&Hn(u,"set",i,l):Hn(u,"add",i,l),this},delete(i){const l=ct(this),{has:u,get:f}=To(l);let p=u.call(l,i);p||(i=ct(i),p=u.call(l,i)),f&&f.call(l,i);const v=l.delete(i);return p&&Hn(l,"delete",i,void 0),v},clear(){const i=ct(this),l=i.size!==0,u=i.clear();return l&&Hn(i,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=rd(i,e,t)}),n}function La(e,t){const n=sd(e,t);return(s,i,l)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?s:Reflect.get(dt(n,i)&&i in s?n:s,i,l)}const od={get:La(!1,!1)},id={get:La(!1,!0)},ad={get:La(!0,!1)};const tu=new WeakMap,nu=new WeakMap,ru=new WeakMap,ld=new WeakMap;function cd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ud(e){return e.__v_skip||!Object.isExtensible(e)?0:cd(Mf(e))}function si(e){return Jn(e)?e:Ba(e,!1,ed,od,tu)}function su(e){return Ba(e,!1,nd,id,nu)}function ua(e){return Ba(e,!0,td,ad,ru)}function Ba(e,t,n,s,i){if(!vt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const l=ud(e);if(l===0)return e;const u=i.get(e);if(u)return u;const f=new Proxy(e,l===2?s:n);return i.set(e,f),f}function Lr(e){return Jn(e)?Lr(e.__v_raw):!!(e&&e.__v_isReactive)}function Jn(e){return!!(e&&e.__v_isReadonly)}function dn(e){return!!(e&&e.__v_isShallow)}function Fa(e){return e?!!e.__v_raw:!1}function ct(e){const t=e&&e.__v_raw;return t?ct(t):e}function fd(e){return!dt(e,"__v_skip")&&Object.isExtensible(e)&&Fc(e,"__v_skip",!0),e}const yn=e=>vt(e)?si(e):e,as=e=>vt(e)?ua(e):e;function Vt(e){return e?e.__v_isRef===!0:!1}function ye(e){return ou(e,!1)}function dd(e){return ou(e,!0)}function ou(e,t){return Vt(e)?e:new pd(e,t)}class pd{constructor(t,n){this.dep=new ja,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ct(t),this._value=n?t:yn(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||dn(t)||Jn(t);t=s?t:ct(t),pr(t,n)&&(this._rawValue=t,this._value=s?t:yn(t),this.dep.trigger())}}function en(e){return Vt(e)?e.value:e}const hd={get:(e,t,n)=>t==="__v_raw"?e:en(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const i=e[t];return Vt(i)&&!Vt(n)?(i.value=n,!0):Reflect.set(e,t,n,s)}};function iu(e){return Lr(e)?e:new Proxy(e,hd)}class md{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ja(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&wt!==this)return Wc(this,!0),!0}get value(){const t=this.dep.track();return Yc(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gd(e,t,n=!1){let s,i;return Ze(e)?s=e:(s=e.get,i=e.set),new md(s,i,n)}const Ro={},qo=new WeakMap;let Dr;function vd(e,t=!1,n=Dr){if(n){let s=qo.get(n);s||qo.set(n,s=[]),s.push(e)}}function yd(e,t,n=yt){const{immediate:s,deep:i,once:l,scheduler:u,augmentJob:f,call:p}=n,v=X=>i?X:dn(X)||i===!1||i===0?Wn(X,1):Wn(X);let m,g,w,S,P=!1,Q=!1;if(Vt(e)?(g=()=>e.value,P=dn(e)):Lr(e)?(g=()=>v(e),P=!0):We(e)?(Q=!0,P=e.some(X=>Lr(X)||dn(X)),g=()=>e.map(X=>{if(Vt(X))return X.value;if(Lr(X))return v(X);if(Ze(X))return p?p(X,2):X()})):Ze(e)?t?g=p?()=>p(e,2):e:g=()=>{if(w){Gn();try{w()}finally{Yn()}}const X=Dr;Dr=m;try{return p?p(e,3,[S]):e(S)}finally{Dr=X}}:g=On,t&&i){const X=g,$e=i===!0?1/0:i;g=()=>Wn(X(),$e)}const se=Wf(),M=()=>{m.stop(),se&&se.active&&Ra(se.effects,m)};if(l&&t){const X=t;t=(...$e)=>{X(...$e),M()}}let B=Q?new Array(e.length).fill(Ro):Ro;const $=X=>{if(!(!(m.flags&1)||!m.dirty&&!X))if(t){const $e=m.run();if(i||P||(Q?$e.some((Pe,De)=>pr(Pe,B[De])):pr($e,B))){w&&w();const Pe=Dr;Dr=m;try{const De=[$e,B===Ro?void 0:Q&&B[0]===Ro?[]:B,S];B=$e,p?p(t,3,De):t(...De)}finally{Dr=Pe}}}else m.run()};return f&&f($),m=new Vc(g),m.scheduler=u?()=>u($,!1):$,S=X=>vd(X,!1,m),w=m.onStop=()=>{const X=qo.get(m);if(X){if(p)p(X,4);else for(const $e of X)$e();qo.delete(m)}},t?s?$(!0):B=m.run():u?u($.bind(null,!0),!0):m.run(),M.pause=m.pause.bind(m),M.resume=m.resume.bind(m),M.stop=M,M}function Wn(e,t=1/0,n){if(t<=0||!vt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Vt(e))Wn(e.value,t,n);else if(We(e))for(let s=0;s<e.length;s++)Wn(e[s],t,n);else if(ds(e)||ss(e))e.forEach(s=>{Wn(s,t,n)});else if(Lc(e)){for(const s in e)Wn(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Wn(e[s],t,n)}return e}function ro(e,t,n,s){try{return s?e(...s):e()}catch(i){oi(i,t,n)}}function bn(e,t,n,s){if(Ze(e)){const i=ro(e,t,n,s);return i&&Nc(i)&&i.catch(l=>{oi(l,t,n)}),i}if(We(e)){const i=[];for(let l=0;l<e.length;l++)i.push(bn(e[l],t,n,s));return i}}function oi(e,t,n,s=!0){const i=t?t.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:u}=t&&t.appContext.config||yt;if(t){let f=t.parent;const p=t.proxy,v=`https://vuejs.org/error-reference/#runtime-${n}`;for(;f;){const m=f.ec;if(m){for(let g=0;g<m.length;g++)if(m[g](e,p,v)===!1)return}f=f.parent}if(l){Gn(),ro(l,null,10,[e,p,v]),Yn();return}}bd(e,n,i,s,u)}function bd(e,t,n,s=!0,i=!1){if(i)throw e;console.error(e)}const Gt=[];let An=-1;const os=[];let cr=null,es=0;const au=Promise.resolve();let Vo=null;function mn(e){const t=Vo||au;return e?t.then(this?e.bind(this):e):t}function wd(e){let t=An+1,n=Gt.length;for(;t<n;){const s=t+n>>>1,i=Gt[s],l=Ys(i);l<e||l===e&&i.flags&2?t=s+1:n=s}return t}function Ka(e){if(!(e.flags&1)){const t=Ys(e),n=Gt[Gt.length-1];!n||!(e.flags&2)&&t>=Ys(n)?Gt.push(e):Gt.splice(wd(t),0,e),e.flags|=1,lu()}}function lu(){Vo||(Vo=au.then(uu))}function xd(e){We(e)?os.push(...e):cr&&e.id===-1?cr.splice(es+1,0,e):e.flags&1||(os.push(e),e.flags|=1),lu()}function kl(e,t,n=An+1){for(;n<Gt.length;n++){const s=Gt[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;Gt.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function cu(e){if(os.length){const t=[...new Set(os)].sort((n,s)=>Ys(n)-Ys(s));if(os.length=0,cr){cr.push(...t);return}for(cr=t,es=0;es<cr.length;es++){const n=cr[es];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}cr=null,es=0}}const Ys=e=>e.id==null?e.flags&2?-1:1/0:e.id;function uu(e){try{for(An=0;An<Gt.length;An++){const t=Gt[An];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ro(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;An<Gt.length;An++){const t=Gt[An];t&&(t.flags&=-2)}An=-1,Gt.length=0,cu(),Vo=null,(Gt.length||os.length)&&uu()}}let fn=null,fu=null;function Ho(e){const t=fn;return fn=e,fu=e&&e.type.__scopeId||null,t}function Un(e,t=fn,n){if(!t||e._n)return e;const s=(...i)=>{s._d&&Go(-1);const l=Ho(t);let u;try{u=e(...i)}finally{Ho(l),s._d&&Go(1)}return u};return s._n=!0,s._c=!0,s._d=!0,s}function $r(e,t){if(fn===null)return e;const n=ui(fn),s=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[l,u,f,p=yt]=t[i];l&&(Ze(l)&&(l={mounted:l,updated:l}),l.deep&&Wn(u),s.push({dir:l,instance:n,value:u,oldValue:void 0,arg:f,modifiers:p}))}return e}function Ar(e,t,n,s){const i=e.dirs,l=t&&t.dirs;for(let u=0;u<i.length;u++){const f=i[u];l&&(f.oldValue=l[u].value);let p=f.dir[s];p&&(Gn(),bn(p,n,8,[e.el,f,e,t]),Yn())}}const _d=Symbol("_vte"),du=e=>e.__isTeleport,Vn=Symbol("_leaveCb"),Do=Symbol("_enterCb");function kd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return an(()=>{e.isMounted=!0}),mr(()=>{e.isUnmounting=!0}),e}const un=[Function,Array],pu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:un,onEnter:un,onAfterEnter:un,onEnterCancelled:un,onBeforeLeave:un,onLeave:un,onAfterLeave:un,onLeaveCancelled:un,onBeforeAppear:un,onAppear:un,onAfterAppear:un,onAppearCancelled:un},hu=e=>{const t=e.subTree;return t.component?hu(t.component):t},Cd={name:"BaseTransition",props:pu,setup(e,{slots:t}){const n=Ku(),s=kd();return()=>{const i=t.default&&vu(t.default(),!0);if(!i||!i.length)return;const l=mu(i),u=ct(e),{mode:f}=u;if(s.isLeaving)return Wi(l);const p=Cl(l);if(!p)return Wi(l);let v=fa(p,u,s,n,g=>v=g);p.type!==Yt&&Js(p,v);let m=n.subTree&&Cl(n.subTree);if(m&&m.type!==Yt&&!Pr(m,p)&&hu(n).type!==Yt){let g=fa(m,u,s,n);if(Js(m,g),f==="out-in"&&p.type!==Yt)return s.isLeaving=!0,g.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete g.afterLeave,m=void 0},Wi(l);f==="in-out"&&p.type!==Yt?g.delayLeave=(w,S,P)=>{const Q=gu(s,m);Q[String(m.key)]=m,w[Vn]=()=>{S(),w[Vn]=void 0,delete v.delayedLeave,m=void 0},v.delayedLeave=()=>{P(),delete v.delayedLeave,m=void 0}}:m=void 0}else m&&(m=void 0);return l}}};function mu(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==Yt){t=n;break}}return t}const Sd=Cd;function gu(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function fa(e,t,n,s,i){const{appear:l,mode:u,persisted:f=!1,onBeforeEnter:p,onEnter:v,onAfterEnter:m,onEnterCancelled:g,onBeforeLeave:w,onLeave:S,onAfterLeave:P,onLeaveCancelled:Q,onBeforeAppear:se,onAppear:M,onAfterAppear:B,onAppearCancelled:$}=t,X=String(e.key),$e=gu(n,e),Pe=(Me,Ue)=>{Me&&bn(Me,s,9,Ue)},De=(Me,Ue)=>{const Ye=Ue[1];Pe(Me,Ue),We(Me)?Me.every(V=>V.length<=1)&&Ye():Me.length<=1&&Ye()},rt={mode:u,persisted:f,beforeEnter(Me){let Ue=p;if(!n.isMounted)if(l)Ue=se||p;else return;Me[Vn]&&Me[Vn](!0);const Ye=$e[X];Ye&&Pr(e,Ye)&&Ye.el[Vn]&&Ye.el[Vn](),Pe(Ue,[Me])},enter(Me){let Ue=v,Ye=m,V=g;if(!n.isMounted)if(l)Ue=M||v,Ye=B||m,V=$||g;else return;let H=!1;const ae=Me[Do]=fe=>{H||(H=!0,fe?Pe(V,[Me]):Pe(Ye,[Me]),rt.delayedLeave&&rt.delayedLeave(),Me[Do]=void 0)};Ue?De(Ue,[Me,ae]):ae()},leave(Me,Ue){const Ye=String(e.key);if(Me[Do]&&Me[Do](!0),n.isUnmounting)return Ue();Pe(w,[Me]);let V=!1;const H=Me[Vn]=ae=>{V||(V=!0,Ue(),ae?Pe(Q,[Me]):Pe(P,[Me]),Me[Vn]=void 0,$e[Ye]===e&&delete $e[Ye])};$e[Ye]=e,S?De(S,[Me,H]):H()},clone(Me){const Ue=fa(Me,t,n,s,i);return i&&i(Ue),Ue}};return rt}function Wi(e){if(ii(e))return e=gr(e),e.children=null,e}function Cl(e){if(!ii(e))return du(e.type)&&e.children?mu(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Ze(n.default))return n.default()}}function Js(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Js(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function vu(e,t=!1,n){let s=[],i=0;for(let l=0;l<e.length;l++){let u=e[l];const f=n==null?u.key:String(n)+String(u.key!=null?u.key:l);u.type===gt?(u.patchFlag&128&&i++,s=s.concat(vu(u.children,t,f))):(t||u.type!==Yt)&&s.push(f!=null?gr(u,{key:f}):u)}if(i>1)for(let l=0;l<s.length;l++)s[l].patchFlag=-2;return s}function Qt(e,t){return Ze(e)?Nt({name:e.name},t,{setup:e}):e}function yu(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Wo=new WeakMap;function Ks(e,t,n,s,i=!1){if(We(e)){e.forEach((P,Q)=>Ks(P,t&&(We(t)?t[Q]:t),n,s,i));return}if(Us(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Ks(e,t,n,s.component.subTree);return}const l=s.shapeFlag&4?ui(s.component):s.el,u=i?null:l,{i:f,r:p}=e,v=t&&t.r,m=f.refs===yt?f.refs={}:f.refs,g=f.setupState,w=ct(g),S=g===yt?$c:P=>dt(w,P);if(v!=null&&v!==p){if(Sl(t),Rt(v))m[v]=null,S(v)&&(g[v]=null);else if(Vt(v)){v.value=null;const P=t;P.k&&(m[P.k]=null)}}if(Ze(p))ro(p,f,12,[u,m]);else{const P=Rt(p),Q=Vt(p);if(P||Q){const se=()=>{if(e.f){const M=P?S(p)?g[p]:m[p]:p.value;if(i)We(M)&&Ra(M,l);else if(We(M))M.includes(l)||M.push(l);else if(P)m[p]=[l],S(p)&&(g[p]=m[p]);else{const B=[l];p.value=B,e.k&&(m[e.k]=B)}}else P?(m[p]=u,S(p)&&(g[p]=u)):Q&&(p.value=u,e.k&&(m[e.k]=u))};if(u){const M=()=>{se(),Wo.delete(e)};M.id=-1,Wo.set(e,M),rn(M,n)}else Sl(e),se()}}}function Sl(e){const t=Wo.get(e);t&&(t.flags|=8,Wo.delete(e))}ni().requestIdleCallback;ni().cancelIdleCallback;const Us=e=>!!e.type.__asyncLoader,ii=e=>e.type.__isKeepAlive;function Ed(e,t){bu(e,"a",t)}function Id(e,t){bu(e,"da",t)}function bu(e,t,n=Jt){const s=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(ai(t,s,n),n){let i=n.parent;for(;i&&i.parent;)ii(i.parent.vnode)&&Ad(s,t,n,i),i=i.parent}}function Ad(e,t,n,s){const i=ai(t,e,s,!0);wu(()=>{Ra(s[t],i)},n)}function ai(e,t,n=Jt,s=!1){if(n){const i=n[e]||(n[e]=[]),l=t.__weh||(t.__weh=(...u)=>{Gn();const f=so(n),p=bn(t,n,e,u);return f(),Yn(),p});return s?i.unshift(l):i.push(l),l}}const Qn=e=>(t,n=Jt)=>{(!Xs||e==="sp")&&ai(e,(...s)=>t(...s),n)},Td=Qn("bm"),an=Qn("m"),Od=Qn("bu"),Rd=Qn("u"),mr=Qn("bum"),wu=Qn("um"),Dd=Qn("sp"),Pd=Qn("rtg"),Md=Qn("rtc");function $d(e,t=Jt){ai("ec",e,t)}const Nd=Symbol.for("v-ndc");function Lt(e,t,n,s){let i;const l=n,u=We(e);if(u||Rt(e)){const f=u&&Lr(e);let p=!1,v=!1;f&&(p=!dn(e),v=Jn(e),e=ri(e)),i=new Array(e.length);for(let m=0,g=e.length;m<g;m++)i[m]=t(p?v?as(yn(e[m])):yn(e[m]):e[m],m,void 0,l)}else if(typeof e=="number"){i=new Array(e);for(let f=0;f<e;f++)i[f]=t(f+1,f,void 0,l)}else if(vt(e))if(e[Symbol.iterator])i=Array.from(e,(f,p)=>t(f,p,void 0,l));else{const f=Object.keys(e);i=new Array(f.length);for(let p=0,v=f.length;p<v;p++){const m=f[p];i[p]=t(e[m],m,p,l)}}else i=[];return i}const da=e=>e?Uu(e)?ui(e):da(e.parent):null,qs=Nt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>da(e.parent),$root:e=>da(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>_u(e),$forceUpdate:e=>e.f||(e.f=()=>{Ka(e.update)}),$nextTick:e=>e.n||(e.n=mn.bind(e.proxy)),$watch:e=>Gd.bind(e)}),zi=(e,t)=>e!==yt&&!e.__isScriptSetup&&dt(e,t),jd={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:i,props:l,accessCache:u,type:f,appContext:p}=e;if(t[0]!=="$"){const w=u[t];if(w!==void 0)switch(w){case 1:return s[t];case 2:return i[t];case 4:return n[t];case 3:return l[t]}else{if(zi(s,t))return u[t]=1,s[t];if(i!==yt&&dt(i,t))return u[t]=2,i[t];if(dt(l,t))return u[t]=3,l[t];if(n!==yt&&dt(n,t))return u[t]=4,n[t];pa&&(u[t]=0)}}const v=qs[t];let m,g;if(v)return t==="$attrs"&&qt(e.attrs,"get",""),v(e);if((m=f.__cssModules)&&(m=m[t]))return m;if(n!==yt&&dt(n,t))return u[t]=4,n[t];if(g=p.config.globalProperties,dt(g,t))return g[t]},set({_:e},t,n){const{data:s,setupState:i,ctx:l}=e;return zi(i,t)?(i[t]=n,!0):s!==yt&&dt(s,t)?(s[t]=n,!0):dt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(l[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:i,props:l,type:u}},f){let p;return!!(n[f]||e!==yt&&f[0]!=="$"&&dt(e,f)||zi(t,f)||dt(l,f)||dt(s,f)||dt(qs,f)||dt(i.config.globalProperties,f)||(p=u.__cssModules)&&p[f])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:dt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function El(e){return We(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let pa=!0;function Ld(e){const t=_u(e),n=e.proxy,s=e.ctx;pa=!1,t.beforeCreate&&Il(t.beforeCreate,e,"bc");const{data:i,computed:l,methods:u,watch:f,provide:p,inject:v,created:m,beforeMount:g,mounted:w,beforeUpdate:S,updated:P,activated:Q,deactivated:se,beforeDestroy:M,beforeUnmount:B,destroyed:$,unmounted:X,render:$e,renderTracked:Pe,renderTriggered:De,errorCaptured:rt,serverPrefetch:Me,expose:Ue,inheritAttrs:Ye,components:V,directives:H,filters:ae}=t;if(v&&Bd(v,s,null),u)for(const ne in u){const be=u[ne];Ze(be)&&(s[ne]=be.bind(n))}if(i){const ne=i.call(n,n);vt(ne)&&(e.data=si(ne))}if(pa=!0,l)for(const ne in l){const be=l[ne],ze=Ze(be)?be.bind(n,n):Ze(be.get)?be.get.bind(n,n):On,tt=!Ze(be)&&Ze(be.set)?be.set.bind(n):On,bt=Je({get:ze,set:tt});Object.defineProperty(s,ne,{enumerable:!0,configurable:!0,get:()=>bt.value,set:ut=>bt.value=ut})}if(f)for(const ne in f)xu(f[ne],s,n,ne);if(p){const ne=Ze(p)?p.call(n):p;Reflect.ownKeys(ne).forEach(be=>{Lo(be,ne[be])})}m&&Il(m,e,"c");function me(ne,be){We(be)?be.forEach(ze=>ne(ze.bind(n))):be&&ne(be.bind(n))}if(me(Td,g),me(an,w),me(Od,S),me(Rd,P),me(Ed,Q),me(Id,se),me($d,rt),me(Md,Pe),me(Pd,De),me(mr,B),me(wu,X),me(Dd,Me),We(Ue))if(Ue.length){const ne=e.exposed||(e.exposed={});Ue.forEach(be=>{Object.defineProperty(ne,be,{get:()=>n[be],set:ze=>n[be]=ze,enumerable:!0})})}else e.exposed||(e.exposed={});$e&&e.render===On&&(e.render=$e),Ye!=null&&(e.inheritAttrs=Ye),V&&(e.components=V),H&&(e.directives=H),Me&&yu(e)}function Bd(e,t,n=On){We(e)&&(e=ha(e));for(const s in e){const i=e[s];let l;vt(i)?"default"in i?l=vn(i.from||s,i.default,!0):l=vn(i.from||s):l=vn(i),Vt(l)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):t[s]=l}}function Il(e,t,n){bn(We(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function xu(e,t,n,s){let i=s.includes(".")?Cu(n,s):()=>n[s];if(Rt(e)){const l=t[e];Ze(l)&&Rn(i,l)}else if(Ze(e))Rn(i,e.bind(n));else if(vt(e))if(We(e))e.forEach(l=>xu(l,t,n,s));else{const l=Ze(e.handler)?e.handler.bind(n):t[e.handler];Ze(l)&&Rn(i,l,e)}}function _u(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:i,optionsCache:l,config:{optionMergeStrategies:u}}=e.appContext,f=l.get(t);let p;return f?p=f:!i.length&&!n&&!s?p=t:(p={},i.length&&i.forEach(v=>zo(p,v,u,!0)),zo(p,t,u)),vt(t)&&l.set(t,p),p}function zo(e,t,n,s=!1){const{mixins:i,extends:l}=t;l&&zo(e,l,n,!0),i&&i.forEach(u=>zo(e,u,n,!0));for(const u in t)if(!(s&&u==="expose")){const f=Fd[u]||n&&n[u];e[u]=f?f(e[u],t[u]):t[u]}return e}const Fd={data:Al,props:Tl,emits:Tl,methods:js,computed:js,beforeCreate:Wt,created:Wt,beforeMount:Wt,mounted:Wt,beforeUpdate:Wt,updated:Wt,beforeDestroy:Wt,beforeUnmount:Wt,destroyed:Wt,unmounted:Wt,activated:Wt,deactivated:Wt,errorCaptured:Wt,serverPrefetch:Wt,components:js,directives:js,watch:Ud,provide:Al,inject:Kd};function Al(e,t){return t?e?function(){return Nt(Ze(e)?e.call(this,this):e,Ze(t)?t.call(this,this):t)}:t:e}function Kd(e,t){return js(ha(e),ha(t))}function ha(e){if(We(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Wt(e,t){return e?[...new Set([].concat(e,t))]:t}function js(e,t){return e?Nt(Object.create(null),e,t):t}function Tl(e,t){return e?We(e)&&We(t)?[...new Set([...e,...t])]:Nt(Object.create(null),El(e),El(t??{})):t}function Ud(e,t){if(!e)return t;if(!t)return e;const n=Nt(Object.create(null),e);for(const s in t)n[s]=Wt(e[s],t[s]);return n}function ku(){return{app:null,config:{isNativeTag:$c,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qd=0;function Vd(e,t){return function(s,i=null){Ze(s)||(s=Nt({},s)),i!=null&&!vt(i)&&(i=null);const l=ku(),u=new WeakSet,f=[];let p=!1;const v=l.app={_uid:qd++,_component:s,_props:i,_container:null,_context:l,_instance:null,version:Sp,get config(){return l.config},set config(m){},use(m,...g){return u.has(m)||(m&&Ze(m.install)?(u.add(m),m.install(v,...g)):Ze(m)&&(u.add(m),m(v,...g))),v},mixin(m){return l.mixins.includes(m)||l.mixins.push(m),v},component(m,g){return g?(l.components[m]=g,v):l.components[m]},directive(m,g){return g?(l.directives[m]=g,v):l.directives[m]},mount(m,g,w){if(!p){const S=v._ceVNode||xt(s,i);return S.appContext=l,w===!0?w="svg":w===!1&&(w=void 0),e(S,m,w),p=!0,v._container=m,m.__vue_app__=v,ui(S.component)}},onUnmount(m){f.push(m)},unmount(){p&&(bn(f,v._instance,16),e(null,v._container),delete v._container.__vue_app__)},provide(m,g){return l.provides[m]=g,v},runWithContext(m){const g=is;is=v;try{return m()}finally{is=g}}};return v}}let is=null;function Lo(e,t){if(Jt){let n=Jt.provides;const s=Jt.parent&&Jt.parent.provides;s===n&&(n=Jt.provides=Object.create(s)),n[e]=t}}function vn(e,t,n=!1){const s=Ku();if(s||is){let i=is?is._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ze(t)?t.call(s&&s.proxy):t}}const Hd=Symbol.for("v-scx"),Wd=()=>vn(Hd);function zd(e,t){return Ua(e,null,t)}function Rn(e,t,n){return Ua(e,t,n)}function Ua(e,t,n=yt){const{immediate:s,deep:i,flush:l,once:u}=n,f=Nt({},n),p=t&&s||!t&&l!=="post";let v;if(Xs){if(l==="sync"){const S=Wd();v=S.__watcherHandles||(S.__watcherHandles=[])}else if(!p){const S=()=>{};return S.stop=On,S.resume=On,S.pause=On,S}}const m=Jt;f.call=(S,P,Q)=>bn(S,m,P,Q);let g=!1;l==="post"?f.scheduler=S=>{rn(S,m&&m.suspense)}:l!=="sync"&&(g=!0,f.scheduler=(S,P)=>{P?S():Ka(S)}),f.augmentJob=S=>{t&&(S.flags|=4),g&&(S.flags|=2,m&&(S.id=m.uid,S.i=m))};const w=yd(e,t,f);return Xs&&(v?v.push(w):p&&w()),w}function Gd(e,t,n){const s=this.proxy,i=Rt(e)?e.includes(".")?Cu(s,e):()=>s[e]:e.bind(s,s);let l;Ze(t)?l=t:(l=t.handler,n=t);const u=so(this),f=Ua(i,l.bind(s),n);return u(),f}function Cu(e,t){const n=t.split(".");return()=>{let s=e;for(let i=0;i<n.length&&s;i++)s=s[n[i]];return s}}const Yd=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${hr(t)}Modifiers`]||e[`${yr(t)}Modifiers`];function Jd(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||yt;let i=n;const l=t.startsWith("update:"),u=l&&Yd(s,t.slice(7));u&&(u.trim&&(i=n.map(m=>Rt(m)?m.trim():m)),u.number&&(i=n.map(ti)));let f,p=s[f=Ki(t)]||s[f=Ki(hr(t))];!p&&l&&(p=s[f=Ki(yr(t))]),p&&bn(p,e,6,i);const v=s[f+"Once"];if(v){if(!e.emitted)e.emitted={};else if(e.emitted[f])return;e.emitted[f]=!0,bn(v,e,6,i)}}const Qd=new WeakMap;function Su(e,t,n=!1){const s=n?Qd:t.emitsCache,i=s.get(e);if(i!==void 0)return i;const l=e.emits;let u={},f=!1;if(!Ze(e)){const p=v=>{const m=Su(v,t,!0);m&&(f=!0,Nt(u,m))};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}return!l&&!f?(vt(e)&&s.set(e,null),null):(We(l)?l.forEach(p=>u[p]=null):Nt(u,l),vt(e)&&s.set(e,u),u)}function li(e,t){return!e||!Zo(t)?!1:(t=t.slice(2).replace(/Once$/,""),dt(e,t[0].toLowerCase()+t.slice(1))||dt(e,yr(t))||dt(e,t))}function Ol(e){const{type:t,vnode:n,proxy:s,withProxy:i,propsOptions:[l],slots:u,attrs:f,emit:p,render:v,renderCache:m,props:g,data:w,setupState:S,ctx:P,inheritAttrs:Q}=e,se=Ho(e);let M,B;try{if(n.shapeFlag&4){const X=i||s,$e=X;M=Tn(v.call($e,X,m,g,S,w,P)),B=f}else{const X=t;M=Tn(X.length>1?X(g,{attrs:f,slots:u,emit:p}):X(g,null)),B=t.props?f:Xd(f)}}catch(X){Vs.length=0,oi(X,e,1),M=xt(Yt)}let $=M;if(B&&Q!==!1){const X=Object.keys(B),{shapeFlag:$e}=$;X.length&&$e&7&&(l&&X.some(Oa)&&(B=Zd(B,l)),$=gr($,B,!1,!0))}return n.dirs&&($=gr($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&Js($,n.transition),M=$,Ho(se),M}const Xd=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zo(n))&&((t||(t={}))[n]=e[n]);return t},Zd=(e,t)=>{const n={};for(const s in e)(!Oa(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function ep(e,t,n){const{props:s,children:i,component:l}=e,{props:u,children:f,patchFlag:p}=t,v=l.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&p>=0){if(p&1024)return!0;if(p&16)return s?Rl(s,u,v):!!u;if(p&8){const m=t.dynamicProps;for(let g=0;g<m.length;g++){const w=m[g];if(u[w]!==s[w]&&!li(v,w))return!0}}}else return(i||f)&&(!f||!f.$stable)?!0:s===u?!1:s?u?Rl(s,u,v):!0:!!u;return!1}function Rl(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let i=0;i<s.length;i++){const l=s[i];if(t[l]!==e[l]&&!li(n,l))return!0}return!1}function tp({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const Eu={},Iu=()=>Object.create(Eu),Au=e=>Object.getPrototypeOf(e)===Eu;function np(e,t,n,s=!1){const i={},l=Iu();e.propsDefaults=Object.create(null),Tu(e,t,i,l);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);n?e.props=s?i:su(i):e.type.props?e.props=i:e.props=l,e.attrs=l}function rp(e,t,n,s){const{props:i,attrs:l,vnode:{patchFlag:u}}=e,f=ct(i),[p]=e.propsOptions;let v=!1;if((s||u>0)&&!(u&16)){if(u&8){const m=e.vnode.dynamicProps;for(let g=0;g<m.length;g++){let w=m[g];if(li(e.emitsOptions,w))continue;const S=t[w];if(p)if(dt(l,w))S!==l[w]&&(l[w]=S,v=!0);else{const P=hr(w);i[P]=ma(p,f,P,S,e,!1)}else S!==l[w]&&(l[w]=S,v=!0)}}}else{Tu(e,t,i,l)&&(v=!0);let m;for(const g in f)(!t||!dt(t,g)&&((m=yr(g))===g||!dt(t,m)))&&(p?n&&(n[g]!==void 0||n[m]!==void 0)&&(i[g]=ma(p,f,g,void 0,e,!0)):delete i[g]);if(l!==f)for(const g in l)(!t||!dt(t,g))&&(delete l[g],v=!0)}v&&Hn(e.attrs,"set","")}function Tu(e,t,n,s){const[i,l]=e.propsOptions;let u=!1,f;if(t)for(let p in t){if(Ls(p))continue;const v=t[p];let m;i&&dt(i,m=hr(p))?!l||!l.includes(m)?n[m]=v:(f||(f={}))[m]=v:li(e.emitsOptions,p)||(!(p in s)||v!==s[p])&&(s[p]=v,u=!0)}if(l){const p=ct(n),v=f||yt;for(let m=0;m<l.length;m++){const g=l[m];n[g]=ma(i,p,g,v[g],e,!dt(v,g))}}return u}function ma(e,t,n,s,i,l){const u=e[n];if(u!=null){const f=dt(u,"default");if(f&&s===void 0){const p=u.default;if(u.type!==Function&&!u.skipFactory&&Ze(p)){const{propsDefaults:v}=i;if(n in v)s=v[n];else{const m=so(i);s=v[n]=p.call(null,t),m()}}else s=p;i.ce&&i.ce._setProp(n,s)}u[0]&&(l&&!f?s=!1:u[1]&&(s===""||s===yr(n))&&(s=!0))}return s}const sp=new WeakMap;function Ou(e,t,n=!1){const s=n?sp:t.propsCache,i=s.get(e);if(i)return i;const l=e.props,u={},f=[];let p=!1;if(!Ze(e)){const m=g=>{p=!0;const[w,S]=Ou(g,t,!0);Nt(u,w),S&&f.push(...S)};!n&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!l&&!p)return vt(e)&&s.set(e,rs),rs;if(We(l))for(let m=0;m<l.length;m++){const g=hr(l[m]);Dl(g)&&(u[g]=yt)}else if(l)for(const m in l){const g=hr(m);if(Dl(g)){const w=l[m],S=u[g]=We(w)||Ze(w)?{type:w}:Nt({},w),P=S.type;let Q=!1,se=!0;if(We(P))for(let M=0;M<P.length;++M){const B=P[M],$=Ze(B)&&B.name;if($==="Boolean"){Q=!0;break}else $==="String"&&(se=!1)}else Q=Ze(P)&&P.name==="Boolean";S[0]=Q,S[1]=se,(Q||dt(S,"default"))&&f.push(g)}}const v=[u,f];return vt(e)&&s.set(e,v),v}function Dl(e){return e[0]!=="$"&&!Ls(e)}const qa=e=>e==="_"||e==="_ctx"||e==="$stable",Va=e=>We(e)?e.map(Tn):[Tn(e)],op=(e,t,n)=>{if(t._n)return t;const s=Un((...i)=>Va(t(...i)),n);return s._c=!1,s},Ru=(e,t,n)=>{const s=e._ctx;for(const i in e){if(qa(i))continue;const l=e[i];if(Ze(l))t[i]=op(i,l,s);else if(l!=null){const u=Va(l);t[i]=()=>u}}},Du=(e,t)=>{const n=Va(t);e.slots.default=()=>n},Pu=(e,t,n)=>{for(const s in t)(n||!qa(s))&&(e[s]=t[s])},ip=(e,t,n)=>{const s=e.slots=Iu();if(e.vnode.shapeFlag&32){const i=t._;i?(Pu(s,t,n),n&&Fc(s,"_",i,!0)):Ru(t,s)}else t&&Du(e,t)},ap=(e,t,n)=>{const{vnode:s,slots:i}=e;let l=!0,u=yt;if(s.shapeFlag&32){const f=t._;f?n&&f===1?l=!1:Pu(i,t,n):(l=!t.$stable,Ru(t,i)),u=t}else t&&(Du(e,t),u={default:1});if(l)for(const f in i)!qa(f)&&u[f]==null&&delete i[f]},rn=dp;function lp(e){return cp(e)}function cp(e,t){const n=ni();n.__VUE__=!0;const{insert:s,remove:i,patchProp:l,createElement:u,createText:f,createComment:p,setText:v,setElementText:m,parentNode:g,nextSibling:w,setScopeId:S=On,insertStaticContent:P}=e,Q=(y,x,R,J=null,ee=null,te=null,Se=void 0,_e=null,ge=!!x.dynamicChildren)=>{if(y===x)return;y&&!Pr(y,x)&&(J=W(y),ut(y,ee,te,!0),y=null),x.patchFlag===-2&&(ge=!1,x.dynamicChildren=null);const{type:oe,ref:Ke,shapeFlag:Ae}=x;switch(oe){case ci:se(y,x,R,J);break;case Yt:M(y,x,R,J);break;case Bo:y==null&&B(x,R,J,Se);break;case gt:V(y,x,R,J,ee,te,Se,_e,ge);break;default:Ae&1?$e(y,x,R,J,ee,te,Se,_e,ge):Ae&6?H(y,x,R,J,ee,te,Se,_e,ge):(Ae&64||Ae&128)&&oe.process(y,x,R,J,ee,te,Se,_e,ge,we)}Ke!=null&&ee?Ks(Ke,y&&y.ref,te,x||y,!x):Ke==null&&y&&y.ref!=null&&Ks(y.ref,null,te,y,!0)},se=(y,x,R,J)=>{if(y==null)s(x.el=f(x.children),R,J);else{const ee=x.el=y.el;x.children!==y.children&&v(ee,x.children)}},M=(y,x,R,J)=>{y==null?s(x.el=p(x.children||""),R,J):x.el=y.el},B=(y,x,R,J)=>{[y.el,y.anchor]=P(y.children,x,R,J,y.el,y.anchor)},$=({el:y,anchor:x},R,J)=>{let ee;for(;y&&y!==x;)ee=w(y),s(y,R,J),y=ee;s(x,R,J)},X=({el:y,anchor:x})=>{let R;for(;y&&y!==x;)R=w(y),i(y),y=R;i(x)},$e=(y,x,R,J,ee,te,Se,_e,ge)=>{if(x.type==="svg"?Se="svg":x.type==="math"&&(Se="mathml"),y==null)Pe(x,R,J,ee,te,Se,_e,ge);else{const oe=y.el&&y.el._isVueCE?y.el:null;try{oe&&oe._beginPatch(),Me(y,x,ee,te,Se,_e,ge)}finally{oe&&oe._endPatch()}}},Pe=(y,x,R,J,ee,te,Se,_e)=>{let ge,oe;const{props:Ke,shapeFlag:Ae,transition:Be,dirs:Ve}=y;if(ge=y.el=u(y.type,te,Ke&&Ke.is,Ke),Ae&8?m(ge,y.children):Ae&16&&rt(y.children,ge,null,J,ee,Gi(y,te),Se,_e),Ve&&Ar(y,null,J,"created"),De(ge,y,y.scopeId,Se,J),Ke){for(const at in Ke)at!=="value"&&!Ls(at)&&l(ge,at,null,Ke[at],te,J);"value"in Ke&&l(ge,"value",null,Ke.value,te),(oe=Ke.onVnodeBeforeMount)&&In(oe,J,y)}Ve&&Ar(y,null,J,"beforeMount");const Qe=up(ee,Be);Qe&&Be.beforeEnter(ge),s(ge,x,R),((oe=Ke&&Ke.onVnodeMounted)||Qe||Ve)&&rn(()=>{oe&&In(oe,J,y),Qe&&Be.enter(ge),Ve&&Ar(y,null,J,"mounted")},ee)},De=(y,x,R,J,ee)=>{if(R&&S(y,R),J)for(let te=0;te<J.length;te++)S(y,J[te]);if(ee){let te=ee.subTree;if(x===te||Nu(te.type)&&(te.ssContent===x||te.ssFallback===x)){const Se=ee.vnode;De(y,Se,Se.scopeId,Se.slotScopeIds,ee.parent)}}},rt=(y,x,R,J,ee,te,Se,_e,ge=0)=>{for(let oe=ge;oe<y.length;oe++){const Ke=y[oe]=_e?ur(y[oe]):Tn(y[oe]);Q(null,Ke,x,R,J,ee,te,Se,_e)}},Me=(y,x,R,J,ee,te,Se)=>{const _e=x.el=y.el;let{patchFlag:ge,dynamicChildren:oe,dirs:Ke}=x;ge|=y.patchFlag&16;const Ae=y.props||yt,Be=x.props||yt;let Ve;if(R&&Tr(R,!1),(Ve=Be.onVnodeBeforeUpdate)&&In(Ve,R,x,y),Ke&&Ar(x,y,R,"beforeUpdate"),R&&Tr(R,!0),(Ae.innerHTML&&Be.innerHTML==null||Ae.textContent&&Be.textContent==null)&&m(_e,""),oe?Ue(y.dynamicChildren,oe,_e,R,J,Gi(x,ee),te):Se||be(y,x,_e,null,R,J,Gi(x,ee),te,!1),ge>0){if(ge&16)Ye(_e,Ae,Be,R,ee);else if(ge&2&&Ae.class!==Be.class&&l(_e,"class",null,Be.class,ee),ge&4&&l(_e,"style",Ae.style,Be.style,ee),ge&8){const Qe=x.dynamicProps;for(let at=0;at<Qe.length;at++){const lt=Qe[at],Ct=Ae[lt],Dt=Be[lt];(Dt!==Ct||lt==="value")&&l(_e,lt,Ct,Dt,ee,R)}}ge&1&&y.children!==x.children&&m(_e,x.children)}else!Se&&oe==null&&Ye(_e,Ae,Be,R,ee);((Ve=Be.onVnodeUpdated)||Ke)&&rn(()=>{Ve&&In(Ve,R,x,y),Ke&&Ar(x,y,R,"updated")},J)},Ue=(y,x,R,J,ee,te,Se)=>{for(let _e=0;_e<x.length;_e++){const ge=y[_e],oe=x[_e],Ke=ge.el&&(ge.type===gt||!Pr(ge,oe)||ge.shapeFlag&198)?g(ge.el):R;Q(ge,oe,Ke,null,J,ee,te,Se,!0)}},Ye=(y,x,R,J,ee)=>{if(x!==R){if(x!==yt)for(const te in x)!Ls(te)&&!(te in R)&&l(y,te,x[te],null,ee,J);for(const te in R){if(Ls(te))continue;const Se=R[te],_e=x[te];Se!==_e&&te!=="value"&&l(y,te,_e,Se,ee,J)}"value"in R&&l(y,"value",x.value,R.value,ee)}},V=(y,x,R,J,ee,te,Se,_e,ge)=>{const oe=x.el=y?y.el:f(""),Ke=x.anchor=y?y.anchor:f("");let{patchFlag:Ae,dynamicChildren:Be,slotScopeIds:Ve}=x;Ve&&(_e=_e?_e.concat(Ve):Ve),y==null?(s(oe,R,J),s(Ke,R,J),rt(x.children||[],R,Ke,ee,te,Se,_e,ge)):Ae>0&&Ae&64&&Be&&y.dynamicChildren?(Ue(y.dynamicChildren,Be,R,ee,te,Se,_e),(x.key!=null||ee&&x===ee.subTree)&&Mu(y,x,!0)):be(y,x,R,Ke,ee,te,Se,_e,ge)},H=(y,x,R,J,ee,te,Se,_e,ge)=>{x.slotScopeIds=_e,y==null?x.shapeFlag&512?ee.ctx.activate(x,R,J,Se,ge):ae(x,R,J,ee,te,Se,ge):fe(y,x,ge)},ae=(y,x,R,J,ee,te,Se)=>{const _e=y.component=bp(y,J,ee);if(ii(y)&&(_e.ctx.renderer=we),wp(_e,!1,Se),_e.asyncDep){if(ee&&ee.registerDep(_e,me,Se),!y.el){const ge=_e.subTree=xt(Yt);M(null,ge,x,R),y.placeholder=ge.el}}else me(_e,y,x,R,ee,te,Se)},fe=(y,x,R)=>{const J=x.component=y.component;if(ep(y,x,R))if(J.asyncDep&&!J.asyncResolved){ne(J,x,R);return}else J.next=x,J.update();else x.el=y.el,J.vnode=x},me=(y,x,R,J,ee,te,Se)=>{const _e=()=>{if(y.isMounted){let{next:Ae,bu:Be,u:Ve,parent:Qe,vnode:at}=y;{const Pt=$u(y);if(Pt){Ae&&(Ae.el=at.el,ne(y,Ae,Se)),Pt.asyncDep.then(()=>{y.isUnmounted||_e()});return}}let lt=Ae,Ct;Tr(y,!1),Ae?(Ae.el=at.el,ne(y,Ae,Se)):Ae=at,Be&&jo(Be),(Ct=Ae.props&&Ae.props.onVnodeBeforeUpdate)&&In(Ct,Qe,Ae,at),Tr(y,!0);const Dt=Ol(y),St=y.subTree;y.subTree=Dt,Q(St,Dt,g(St.el),W(St),y,ee,te),Ae.el=Dt.el,lt===null&&tp(y,Dt.el),Ve&&rn(Ve,ee),(Ct=Ae.props&&Ae.props.onVnodeUpdated)&&rn(()=>In(Ct,Qe,Ae,at),ee)}else{let Ae;const{el:Be,props:Ve}=x,{bm:Qe,m:at,parent:lt,root:Ct,type:Dt}=y,St=Us(x);Tr(y,!1),Qe&&jo(Qe),!St&&(Ae=Ve&&Ve.onVnodeBeforeMount)&&In(Ae,lt,x),Tr(y,!0);{Ct.ce&&Ct.ce._def.shadowRoot!==!1&&Ct.ce._injectChildStyle(Dt);const Pt=y.subTree=Ol(y);Q(null,Pt,R,J,y,ee,te),x.el=Pt.el}if(at&&rn(at,ee),!St&&(Ae=Ve&&Ve.onVnodeMounted)){const Pt=x;rn(()=>In(Ae,lt,Pt),ee)}(x.shapeFlag&256||lt&&Us(lt.vnode)&&lt.vnode.shapeFlag&256)&&y.a&&rn(y.a,ee),y.isMounted=!0,x=R=J=null}};y.scope.on();const ge=y.effect=new Vc(_e);y.scope.off();const oe=y.update=ge.run.bind(ge),Ke=y.job=ge.runIfDirty.bind(ge);Ke.i=y,Ke.id=y.uid,ge.scheduler=()=>Ka(Ke),Tr(y,!0),oe()},ne=(y,x,R)=>{x.component=y;const J=y.vnode.props;y.vnode=x,y.next=null,rp(y,x.props,J,R),ap(y,x.children,R),Gn(),kl(y),Yn()},be=(y,x,R,J,ee,te,Se,_e,ge=!1)=>{const oe=y&&y.children,Ke=y?y.shapeFlag:0,Ae=x.children,{patchFlag:Be,shapeFlag:Ve}=x;if(Be>0){if(Be&128){tt(oe,Ae,R,J,ee,te,Se,_e,ge);return}else if(Be&256){ze(oe,Ae,R,J,ee,te,Se,_e,ge);return}}Ve&8?(Ke&16&&je(oe,ee,te),Ae!==oe&&m(R,Ae)):Ke&16?Ve&16?tt(oe,Ae,R,J,ee,te,Se,_e,ge):je(oe,ee,te,!0):(Ke&8&&m(R,""),Ve&16&&rt(Ae,R,J,ee,te,Se,_e,ge))},ze=(y,x,R,J,ee,te,Se,_e,ge)=>{y=y||rs,x=x||rs;const oe=y.length,Ke=x.length,Ae=Math.min(oe,Ke);let Be;for(Be=0;Be<Ae;Be++){const Ve=x[Be]=ge?ur(x[Be]):Tn(x[Be]);Q(y[Be],Ve,R,null,ee,te,Se,_e,ge)}oe>Ke?je(y,ee,te,!0,!1,Ae):rt(x,R,J,ee,te,Se,_e,ge,Ae)},tt=(y,x,R,J,ee,te,Se,_e,ge)=>{let oe=0;const Ke=x.length;let Ae=y.length-1,Be=Ke-1;for(;oe<=Ae&&oe<=Be;){const Ve=y[oe],Qe=x[oe]=ge?ur(x[oe]):Tn(x[oe]);if(Pr(Ve,Qe))Q(Ve,Qe,R,null,ee,te,Se,_e,ge);else break;oe++}for(;oe<=Ae&&oe<=Be;){const Ve=y[Ae],Qe=x[Be]=ge?ur(x[Be]):Tn(x[Be]);if(Pr(Ve,Qe))Q(Ve,Qe,R,null,ee,te,Se,_e,ge);else break;Ae--,Be--}if(oe>Ae){if(oe<=Be){const Ve=Be+1,Qe=Ve<Ke?x[Ve].el:J;for(;oe<=Be;)Q(null,x[oe]=ge?ur(x[oe]):Tn(x[oe]),R,Qe,ee,te,Se,_e,ge),oe++}}else if(oe>Be)for(;oe<=Ae;)ut(y[oe],ee,te,!0),oe++;else{const Ve=oe,Qe=oe,at=new Map;for(oe=Qe;oe<=Be;oe++){const _t=x[oe]=ge?ur(x[oe]):Tn(x[oe]);_t.key!=null&&at.set(_t.key,oe)}let lt,Ct=0;const Dt=Be-Qe+1;let St=!1,Pt=0;const Xt=new Array(Dt);for(oe=0;oe<Dt;oe++)Xt[oe]=0;for(oe=Ve;oe<=Ae;oe++){const _t=y[oe];if(Ct>=Dt){ut(_t,ee,te,!0);continue}let Re;if(_t.key!=null)Re=at.get(_t.key);else for(lt=Qe;lt<=Be;lt++)if(Xt[lt-Qe]===0&&Pr(_t,x[lt])){Re=lt;break}Re===void 0?ut(_t,ee,te,!0):(Xt[Re-Qe]=oe+1,Re>=Pt?Pt=Re:St=!0,Q(_t,x[Re],R,null,ee,te,Se,_e,ge),Ct++)}const Pn=St?fp(Xt):rs;for(lt=Pn.length-1,oe=Dt-1;oe>=0;oe--){const _t=Qe+oe,Re=x[_t],xn=x[_t+1],ln=_t+1<Ke?xn.el||xn.placeholder:J;Xt[oe]===0?Q(null,Re,R,ln,ee,te,Se,_e,ge):St&&(lt<0||oe!==Pn[lt]?bt(Re,R,ln,2):lt--)}}},bt=(y,x,R,J,ee=null)=>{const{el:te,type:Se,transition:_e,children:ge,shapeFlag:oe}=y;if(oe&6){bt(y.component.subTree,x,R,J);return}if(oe&128){y.suspense.move(x,R,J);return}if(oe&64){Se.move(y,x,R,we);return}if(Se===gt){s(te,x,R);for(let Ae=0;Ae<ge.length;Ae++)bt(ge[Ae],x,R,J);s(y.anchor,x,R);return}if(Se===Bo){$(y,x,R);return}if(J!==2&&oe&1&&_e)if(J===0)_e.beforeEnter(te),s(te,x,R),rn(()=>_e.enter(te),ee);else{const{leave:Ae,delayLeave:Be,afterLeave:Ve}=_e,Qe=()=>{y.ctx.isUnmounted?i(te):s(te,x,R)},at=()=>{te._isLeaving&&te[Vn](!0),Ae(te,()=>{Qe(),Ve&&Ve()})};Be?Be(te,Qe,at):at()}else s(te,x,R)},ut=(y,x,R,J=!1,ee=!1)=>{const{type:te,props:Se,ref:_e,children:ge,dynamicChildren:oe,shapeFlag:Ke,patchFlag:Ae,dirs:Be,cacheIndex:Ve}=y;if(Ae===-2&&(ee=!1),_e!=null&&(Gn(),Ks(_e,null,R,y,!0),Yn()),Ve!=null&&(x.renderCache[Ve]=void 0),Ke&256){x.ctx.deactivate(y);return}const Qe=Ke&1&&Be,at=!Us(y);let lt;if(at&&(lt=Se&&Se.onVnodeBeforeUnmount)&&In(lt,x,y),Ke&6)le(y.component,R,J);else{if(Ke&128){y.suspense.unmount(R,J);return}Qe&&Ar(y,null,x,"beforeUnmount"),Ke&64?y.type.remove(y,x,R,we,J):oe&&!oe.hasOnce&&(te!==gt||Ae>0&&Ae&64)?je(oe,x,R,!1,!0):(te===gt&&Ae&384||!ee&&Ke&16)&&je(ge,x,R),J&&Y(y)}(at&&(lt=Se&&Se.onVnodeUnmounted)||Qe)&&rn(()=>{lt&&In(lt,x,y),Qe&&Ar(y,null,x,"unmounted")},R)},Y=y=>{const{type:x,el:R,anchor:J,transition:ee}=y;if(x===gt){z(R,J);return}if(x===Bo){X(y);return}const te=()=>{i(R),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(y.shapeFlag&1&&ee&&!ee.persisted){const{leave:Se,delayLeave:_e}=ee,ge=()=>Se(R,te);_e?_e(y.el,te,ge):ge()}else te()},z=(y,x)=>{let R;for(;y!==x;)R=w(y),i(y),y=R;i(x)},le=(y,x,R)=>{const{bum:J,scope:ee,job:te,subTree:Se,um:_e,m:ge,a:oe}=y;Pl(ge),Pl(oe),J&&jo(J),ee.stop(),te&&(te.flags|=8,ut(Se,y,x,R)),_e&&rn(_e,x),rn(()=>{y.isUnmounted=!0},x)},je=(y,x,R,J=!1,ee=!1,te=0)=>{for(let Se=te;Se<y.length;Se++)ut(y[Se],x,R,J,ee)},W=y=>{if(y.shapeFlag&6)return W(y.component.subTree);if(y.shapeFlag&128)return y.suspense.next();const x=w(y.anchor||y.el),R=x&&x[_d];return R?w(R):x};let de=!1;const U=(y,x,R)=>{y==null?x._vnode&&ut(x._vnode,null,null,!0):Q(x._vnode||null,y,x,null,null,null,R),x._vnode=y,de||(de=!0,kl(),cu(),de=!1)},we={p:Q,um:ut,m:bt,r:Y,mt:ae,mc:rt,pc:be,pbc:Ue,n:W,o:e};return{render:U,hydrate:void 0,createApp:Vd(U)}}function Gi({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Tr({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function up(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Mu(e,t,n=!1){const s=e.children,i=t.children;if(We(s)&&We(i))for(let l=0;l<s.length;l++){const u=s[l];let f=i[l];f.shapeFlag&1&&!f.dynamicChildren&&((f.patchFlag<=0||f.patchFlag===32)&&(f=i[l]=ur(i[l]),f.el=u.el),!n&&f.patchFlag!==-2&&Mu(u,f)),f.type===ci&&f.patchFlag!==-1&&(f.el=u.el),f.type===Yt&&!f.el&&(f.el=u.el)}}function fp(e){const t=e.slice(),n=[0];let s,i,l,u,f;const p=e.length;for(s=0;s<p;s++){const v=e[s];if(v!==0){if(i=n[n.length-1],e[i]<v){t[s]=i,n.push(s);continue}for(l=0,u=n.length-1;l<u;)f=l+u>>1,e[n[f]]<v?l=f+1:u=f;v<e[n[l]]&&(l>0&&(t[s]=n[l-1]),n[l]=s)}}for(l=n.length,u=n[l-1];l-- >0;)n[l]=u,u=t[u];return n}function $u(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:$u(t)}function Pl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Nu=e=>e.__isSuspense;function dp(e,t){t&&t.pendingBranch?We(e)?t.effects.push(...e):t.effects.push(e):xd(e)}const gt=Symbol.for("v-fgt"),ci=Symbol.for("v-txt"),Yt=Symbol.for("v-cmt"),Bo=Symbol.for("v-stc"),Vs=[];let on=null;function ce(e=!1){Vs.push(on=e?null:[])}function pp(){Vs.pop(),on=Vs[Vs.length-1]||null}let Qs=1;function Go(e,t=!1){Qs+=e,e<0&&on&&t&&(on.hasOnce=!0)}function ju(e){return e.dynamicChildren=Qs>0?on||rs:null,pp(),Qs>0&&on&&on.push(e),e}function ue(e,t,n,s,i,l){return ju(k(e,t,n,s,i,l,!0))}function Lu(e,t,n,s,i){return ju(xt(e,t,n,s,i,!0))}function Yo(e){return e?e.__v_isVNode===!0:!1}function Pr(e,t){return e.type===t.type&&e.key===t.key}const Bu=({key:e})=>e??null,Fo=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Rt(e)||Vt(e)||Ze(e)?{i:fn,r:e,k:t,f:!!n}:e:null);function k(e,t=null,n=null,s=0,i=null,l=e===gt?0:1,u=!1,f=!1){const p={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Bu(t),ref:t&&Fo(t),scopeId:fu,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:fn};return f?(Ha(p,n),l&128&&e.normalize(p)):n&&(p.shapeFlag|=Rt(n)?8:16),Qs>0&&!u&&on&&(p.patchFlag>0||l&6)&&p.patchFlag!==32&&on.push(p),p}const xt=hp;function hp(e,t=null,n=null,s=0,i=null,l=!1){if((!e||e===Nd)&&(e=Yt),Yo(e)){const f=gr(e,t,!0);return n&&Ha(f,n),Qs>0&&!l&&on&&(f.shapeFlag&6?on[on.indexOf(e)]=f:on.push(f)),f.patchFlag=-2,f}if(Cp(e)&&(e=e.__vccOpts),t){t=mp(t);let{class:f,style:p}=t;f&&!Rt(f)&&(t.class=kt(f)),vt(p)&&(Fa(p)&&!We(p)&&(p=Nt({},p)),t.style=mt(p))}const u=Rt(e)?1:Nu(e)?128:du(e)?64:vt(e)?4:Ze(e)?2:0;return k(e,t,n,s,i,u,l,!0)}function mp(e){return e?Fa(e)||Au(e)?Nt({},e):e:null}function gr(e,t,n=!1,s=!1){const{props:i,ref:l,patchFlag:u,children:f,transition:p}=e,v=t?gp(i||{},t):i,m={__v_isVNode:!0,__v_skip:!0,type:e.type,props:v,key:v&&Bu(v),ref:t&&t.ref?n&&l?We(l)?l.concat(Fo(t)):[l,Fo(t)]:Fo(t):l,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:f,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==gt?u===-1?16:u|16:u,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:p,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gr(e.ssContent),ssFallback:e.ssFallback&&gr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return p&&s&&Js(m,p.clone(m)),m}function Mr(e=" ",t=0){return xt(ci,null,e,t)}function Fu(e,t){const n=xt(Bo,null,e);return n.staticCount=t,n}function st(e="",t=!1){return t?(ce(),Lu(Yt,null,e)):xt(Yt,null,e)}function Tn(e){return e==null||typeof e=="boolean"?xt(Yt):We(e)?xt(gt,null,e.slice()):Yo(e)?ur(e):xt(ci,null,String(e))}function ur(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gr(e)}function Ha(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(We(t))n=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),Ha(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!Au(t)?t._ctx=fn:i===3&&fn&&(fn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ze(t)?(t={default:t,_ctx:fn},n=32):(t=String(t),s&64?(n=16,t=[Mr(t)]):n=8);e.children=t,e.shapeFlag|=n}function gp(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=kt([t.class,s.class]));else if(i==="style")t.style=mt([t.style,s.style]);else if(Zo(i)){const l=t[i],u=s[i];u&&l!==u&&!(We(l)&&l.includes(u))&&(t[i]=l?[].concat(l,u):u)}else i!==""&&(t[i]=s[i])}return t}function In(e,t,n,s=null){bn(e,t,7,[n,s])}const vp=ku();let yp=0;function bp(e,t,n){const s=e.type,i=(t?t.appContext:e.appContext)||vp,l={uid:yp++,vnode:e,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ou(s,i),emitsOptions:Su(s,i),emit:null,emitted:null,propsDefaults:yt,inheritAttrs:s.inheritAttrs,ctx:yt,data:yt,props:yt,attrs:yt,slots:yt,refs:yt,setupState:yt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=t?t.root:l,l.emit=Jd.bind(null,l),e.ce&&e.ce(l),l}let Jt=null;const Ku=()=>Jt||fn;let Jo,ga;{const e=ni(),t=(n,s)=>{let i;return(i=e[n])||(i=e[n]=[]),i.push(s),l=>{i.length>1?i.forEach(u=>u(l)):i[0](l)}};Jo=t("__VUE_INSTANCE_SETTERS__",n=>Jt=n),ga=t("__VUE_SSR_SETTERS__",n=>Xs=n)}const so=e=>{const t=Jt;return Jo(e),e.scope.on(),()=>{e.scope.off(),Jo(t)}},Ml=()=>{Jt&&Jt.scope.off(),Jo(null)};function Uu(e){return e.vnode.shapeFlag&4}let Xs=!1;function wp(e,t=!1,n=!1){t&&ga(t);const{props:s,children:i}=e.vnode,l=Uu(e);np(e,s,l,t),ip(e,i,n||t);const u=l?xp(e,t):void 0;return t&&ga(!1),u}function xp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,jd);const{setup:s}=n;if(s){Gn();const i=e.setupContext=s.length>1?kp(e):null,l=so(e),u=ro(s,e,0,[e.props,i]),f=Nc(u);if(Yn(),l(),(f||e.sp)&&!Us(e)&&yu(e),f){if(u.then(Ml,Ml),t)return u.then(p=>{$l(e,p)}).catch(p=>{oi(p,e,0)});e.asyncDep=u}else $l(e,u)}else qu(e)}function $l(e,t,n){Ze(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:vt(t)&&(e.setupState=iu(t)),qu(e)}function qu(e,t,n){const s=e.type;e.render||(e.render=s.render||On);{const i=so(e);Gn();try{Ld(e)}finally{Yn(),i()}}}const _p={get(e,t){return qt(e,"get",""),e[t]}};function kp(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,_p),slots:e.slots,emit:e.emit,expose:t}}function ui(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(iu(fd(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qs)return qs[n](e)},has(t,n){return n in t||n in qs}})):e.proxy}function Cp(e){return Ze(e)&&"__vccOpts"in e}const Je=(e,t)=>gd(e,t,Xs);function Wa(e,t,n){try{Go(-1);const s=arguments.length;return s===2?vt(t)&&!We(t)?Yo(t)?xt(e,null,[t]):xt(e,t):xt(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&Yo(n)&&(n=[n]),xt(e,t,n))}finally{Go(1)}}const Sp="3.5.25";let va;const Nl=typeof window<"u"&&window.trustedTypes;if(Nl)try{va=Nl.createPolicy("vue",{createHTML:e=>e})}catch{}const Vu=va?e=>va.createHTML(e):e=>e,Ep="http://www.w3.org/2000/svg",Ip="http://www.w3.org/1998/Math/MathML",qn=typeof document<"u"?document:null,jl=qn&&qn.createElement("template"),Ap={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const i=t==="svg"?qn.createElementNS(Ep,e):t==="mathml"?qn.createElementNS(Ip,e):n?qn.createElement(e,{is:n}):qn.createElement(e);return e==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:e=>qn.createTextNode(e),createComment:e=>qn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>qn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,i,l){const u=n?n.previousSibling:t.lastChild;if(i&&(i===l||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===l||!(i=i.nextSibling)););else{jl.innerHTML=Vu(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const f=jl.content;if(s==="svg"||s==="mathml"){const p=f.firstChild;for(;p.firstChild;)f.appendChild(p.firstChild);f.removeChild(p)}t.insertBefore(f,n)}return[u?u.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},ir="transition",Ms="animation",Zs=Symbol("_vtc"),Hu={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Tp=Nt({},pu,Hu),Op=e=>(e.displayName="Transition",e.props=Tp,e),ya=Op((e,{slots:t})=>Wa(Sd,Rp(e),t)),Or=(e,t=[])=>{We(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ll=e=>e?We(e)?e.some(t=>t.length>1):e.length>1:!1;function Rp(e){const t={};for(const V in e)V in Hu||(t[V]=e[V]);if(e.css===!1)return t;const{name:n="v",type:s,duration:i,enterFromClass:l=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:f=`${n}-enter-to`,appearFromClass:p=l,appearActiveClass:v=u,appearToClass:m=f,leaveFromClass:g=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:S=`${n}-leave-to`}=e,P=Dp(i),Q=P&&P[0],se=P&&P[1],{onBeforeEnter:M,onEnter:B,onEnterCancelled:$,onLeave:X,onLeaveCancelled:$e,onBeforeAppear:Pe=M,onAppear:De=B,onAppearCancelled:rt=$}=t,Me=(V,H,ae,fe)=>{V._enterCancelled=fe,Rr(V,H?m:f),Rr(V,H?v:u),ae&&ae()},Ue=(V,H)=>{V._isLeaving=!1,Rr(V,g),Rr(V,S),Rr(V,w),H&&H()},Ye=V=>(H,ae)=>{const fe=V?De:B,me=()=>Me(H,V,ae);Or(fe,[H,me]),Bl(()=>{Rr(H,V?p:l),Fn(H,V?m:f),Ll(fe)||Fl(H,s,Q,me)})};return Nt(t,{onBeforeEnter(V){Or(M,[V]),Fn(V,l),Fn(V,u)},onBeforeAppear(V){Or(Pe,[V]),Fn(V,p),Fn(V,v)},onEnter:Ye(!1),onAppear:Ye(!0),onLeave(V,H){V._isLeaving=!0;const ae=()=>Ue(V,H);Fn(V,g),V._enterCancelled?(Fn(V,w),ql(V)):(ql(V),Fn(V,w)),Bl(()=>{V._isLeaving&&(Rr(V,g),Fn(V,S),Ll(X)||Fl(V,s,se,ae))}),Or(X,[V,ae])},onEnterCancelled(V){Me(V,!1,void 0,!0),Or($,[V])},onAppearCancelled(V){Me(V,!0,void 0,!0),Or(rt,[V])},onLeaveCancelled(V){Ue(V),Or($e,[V])}})}function Dp(e){if(e==null)return null;if(vt(e))return[Yi(e.enter),Yi(e.leave)];{const t=Yi(e);return[t,t]}}function Yi(e){return jf(e)}function Fn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Zs]||(e[Zs]=new Set)).add(t)}function Rr(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Zs];n&&(n.delete(t),n.size||(e[Zs]=void 0))}function Bl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Pp=0;function Fl(e,t,n,s){const i=e._endId=++Pp,l=()=>{i===e._endId&&s()};if(n!=null)return setTimeout(l,n);const{type:u,timeout:f,propCount:p}=Mp(e,t);if(!u)return s();const v=u+"end";let m=0;const g=()=>{e.removeEventListener(v,w),l()},w=S=>{S.target===e&&++m>=p&&g()};setTimeout(()=>{m<p&&g()},f+1),e.addEventListener(v,w)}function Mp(e,t){const n=window.getComputedStyle(e),s=P=>(n[P]||"").split(", "),i=s(`${ir}Delay`),l=s(`${ir}Duration`),u=Kl(i,l),f=s(`${Ms}Delay`),p=s(`${Ms}Duration`),v=Kl(f,p);let m=null,g=0,w=0;t===ir?u>0&&(m=ir,g=u,w=l.length):t===Ms?v>0&&(m=Ms,g=v,w=p.length):(g=Math.max(u,v),m=g>0?u>v?ir:Ms:null,w=m?m===ir?l.length:p.length:0);const S=m===ir&&/\b(?:transform|all)(?:,|$)/.test(s(`${ir}Property`).toString());return{type:m,timeout:g,propCount:w,hasTransform:S}}function Kl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>Ul(n)+Ul(e[s])))}function Ul(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ql(e){return(e?e.ownerDocument:document).body.offsetHeight}function $p(e,t,n){const s=e[Zs];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Vl=Symbol("_vod"),Np=Symbol("_vsh"),jp=Symbol(""),Lp=/(?:^|;)\s*display\s*:/;function Bp(e,t,n){const s=e.style,i=Rt(n);let l=!1;if(n&&!i){if(t)if(Rt(t))for(const u of t.split(";")){const f=u.slice(0,u.indexOf(":")).trim();n[f]==null&&Ko(s,f,"")}else for(const u in t)n[u]==null&&Ko(s,u,"");for(const u in n)u==="display"&&(l=!0),Ko(s,u,n[u])}else if(i){if(t!==n){const u=s[jp];u&&(n+=";"+u),s.cssText=n,l=Lp.test(n)}}else t&&e.removeAttribute("style");Vl in e&&(e[Vl]=l?s.display:"",e[Np]&&(s.display="none"))}const Hl=/\s*!important$/;function Ko(e,t,n){if(We(n))n.forEach(s=>Ko(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Fp(e,t);Hl.test(n)?e.setProperty(yr(s),n.replace(Hl,""),"important"):e[s]=n}}const Wl=["Webkit","Moz","ms"],Ji={};function Fp(e,t){const n=Ji[t];if(n)return n;let s=hr(t);if(s!=="filter"&&s in e)return Ji[t]=s;s=Bc(s);for(let i=0;i<Wl.length;i++){const l=Wl[i]+s;if(l in e)return Ji[t]=l}return t}const zl="http://www.w3.org/1999/xlink";function Gl(e,t,n,s,i,l=qf(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(zl,t.slice(6,t.length)):e.setAttributeNS(zl,t,n):n==null||l&&!Kc(n)?e.removeAttribute(t):e.setAttribute(t,l?"":Dn(n)?String(n):n)}function Yl(e,t,n,s,i){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Vu(n):n);return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const f=l==="OPTION"?e.getAttribute("value")||"":e.value,p=n==null?e.type==="checkbox"?"on":"":String(n);(f!==p||!("_value"in e))&&(e.value=p),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const f=typeof e[t];f==="boolean"?n=Kc(n):n==null&&f==="string"?(n="",u=!0):f==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(i||t)}function zn(e,t,n,s){e.addEventListener(t,n,s)}function Kp(e,t,n,s){e.removeEventListener(t,n,s)}const Jl=Symbol("_vei");function Up(e,t,n,s,i=null){const l=e[Jl]||(e[Jl]={}),u=l[t];if(s&&u)u.value=s;else{const[f,p]=qp(t);if(s){const v=l[t]=Wp(s,i);zn(e,f,v,p)}else u&&(Kp(e,f,u,p),l[t]=void 0)}}const Ql=/(?:Once|Passive|Capture)$/;function qp(e){let t;if(Ql.test(e)){t={};let s;for(;s=e.match(Ql);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):yr(e.slice(2)),t]}let Qi=0;const Vp=Promise.resolve(),Hp=()=>Qi||(Vp.then(()=>Qi=0),Qi=Date.now());function Wp(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;bn(zp(s,n.value),t,5,[s])};return n.value=e,n.attached=Hp(),n}function zp(e,t){if(We(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Xl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Gp=(e,t,n,s,i,l)=>{const u=i==="svg";t==="class"?$p(e,s,u):t==="style"?Bp(e,n,s):Zo(t)?Oa(t)||Up(e,t,n,s,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Yp(e,t,s,u))?(Yl(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Gl(e,t,s,u,l,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Rt(s))?Yl(e,hr(t),s,l,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Gl(e,t,s,u))};function Yp(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Xl(t)&&Ze(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=e.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Xl(t)&&Rt(n)?!1:t in e}const vr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return We(t)?n=>jo(t,n):t};function Jp(e){e.target.composing=!0}function Zl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pn=Symbol("_assign");function ec(e,t,n){return t&&(e=e.trim()),n&&(e=ti(e)),e}const ls={created(e,{modifiers:{lazy:t,trim:n,number:s}},i){e[pn]=vr(i);const l=s||i.props&&i.props.type==="number";zn(e,t?"change":"input",u=>{u.target.composing||e[pn](ec(e.value,n,l))}),(n||l)&&zn(e,"change",()=>{e.value=ec(e.value,n,l)}),t||(zn(e,"compositionstart",Jp),zn(e,"compositionend",Zl),zn(e,"change",Zl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:i,number:l}},u){if(e[pn]=vr(u),e.composing)return;const f=(l||e.type==="number")&&!/^0\d/.test(e.value)?ti(e.value):e.value,p=t??"";f!==p&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||i&&e.value.trim()===p)||(e.value=p))}},ba={deep:!0,created(e,t,n){e[pn]=vr(n),zn(e,"change",()=>{const s=e._modelValue,i=cs(e),l=e.checked,u=e[pn];if(We(s)){const f=Pa(s,i),p=f!==-1;if(l&&!p)u(s.concat(i));else if(!l&&p){const v=[...s];v.splice(f,1),u(v)}}else if(ds(s)){const f=new Set(s);l?f.add(i):f.delete(i),u(f)}else u(Wu(e,l))})},mounted:tc,beforeUpdate(e,t,n){e[pn]=vr(n),tc(e,t,n)}};function tc(e,{value:t,oldValue:n},s){e._modelValue=t;let i;if(We(t))i=Pa(t,s.props.value)>-1;else if(ds(t))i=t.has(s.props.value);else{if(t===n)return;i=Br(t,Wu(e,!0))}e.checked!==i&&(e.checked=i)}const Qp={created(e,{value:t},n){e.checked=Br(t,n.props.value),e[pn]=vr(n),zn(e,"change",()=>{e[pn](cs(e))})},beforeUpdate(e,{value:t,oldValue:n},s){e[pn]=vr(s),t!==n&&(e.checked=Br(t,s.props.value))}},Xp={deep:!0,created(e,{value:t,modifiers:{number:n}},s){const i=ds(t);zn(e,"change",()=>{const l=Array.prototype.filter.call(e.options,u=>u.selected).map(u=>n?ti(cs(u)):cs(u));e[pn](e.multiple?i?new Set(l):l:l[0]),e._assigning=!0,mn(()=>{e._assigning=!1})}),e[pn]=vr(s)},mounted(e,{value:t}){nc(e,t)},beforeUpdate(e,t,n){e[pn]=vr(n)},updated(e,{value:t}){e._assigning||nc(e,t)}};function nc(e,t){const n=e.multiple,s=We(t);if(!(n&&!s&&!ds(t))){for(let i=0,l=e.options.length;i<l;i++){const u=e.options[i],f=cs(u);if(n)if(s){const p=typeof f;p==="string"||p==="number"?u.selected=t.some(v=>String(v)===String(f)):u.selected=Pa(t,f)>-1}else u.selected=t.has(f);else if(Br(cs(u),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function cs(e){return"_value"in e?e._value:e.value}function Wu(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Zp={created(e,t,n){Po(e,t,n,null,"created")},mounted(e,t,n){Po(e,t,n,null,"mounted")},beforeUpdate(e,t,n,s){Po(e,t,n,s,"beforeUpdate")},updated(e,t,n,s){Po(e,t,n,s,"updated")}};function eh(e,t){switch(e){case"SELECT":return Xp;case"TEXTAREA":return ls;default:switch(t){case"checkbox":return ba;case"radio":return Qp;default:return ls}}}function Po(e,t,n,s,i){const u=eh(e.tagName,n.props&&n.props.type)[i];u&&u(e,t,n,s)}const th=["ctrl","shift","alt","meta"],nh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>th.some(n=>e[`${n}Key`]&&!t.includes(n))},tn=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=((i,...l)=>{for(let u=0;u<t.length;u++){const f=nh[t[u]];if(f&&f(i,t))return}return e(i,...l)}))},rh={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},sh=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=(i=>{if(!("key"in i))return;const l=yr(i.key);if(t.some(u=>u===l||rh[u]===l))return e(i)}))},oh=Nt({patchProp:Gp},Ap);let rc;function ih(){return rc||(rc=lp(oh))}const ah=((...e)=>{const t=ih().createApp(...e),{mount:n}=t;return t.mount=s=>{const i=ch(s);if(!i)return;const l=t._component;!Ze(l)&&!l.render&&!l.template&&(l.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const u=n(i,!1,lh(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t});function lh(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ch(e){return Rt(e)?document.querySelector(e):e}const ts=typeof document<"u";function zu(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function uh(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&zu(e.default)}const ft=Object.assign;function Xi(e,t){const n={};for(const s in t){const i=t[s];n[s]=wn(i)?i.map(e):e(i)}return n}const Hs=()=>{},wn=Array.isArray;function sc(e,t){const n={};for(const s in e)n[s]=s in t?t[s]:e[s];return n}const Gu=/#/g,fh=/&/g,dh=/\//g,ph=/=/g,hh=/\?/g,Yu=/\+/g,mh=/%5B/g,gh=/%5D/g,Ju=/%5E/g,vh=/%60/g,Qu=/%7B/g,yh=/%7C/g,Xu=/%7D/g,bh=/%20/g;function za(e){return e==null?"":encodeURI(""+e).replace(yh,"|").replace(mh,"[").replace(gh,"]")}function wh(e){return za(e).replace(Qu,"{").replace(Xu,"}").replace(Ju,"^")}function wa(e){return za(e).replace(Yu,"%2B").replace(bh,"+").replace(Gu,"%23").replace(fh,"%26").replace(vh,"`").replace(Qu,"{").replace(Xu,"}").replace(Ju,"^")}function xh(e){return wa(e).replace(ph,"%3D")}function _h(e){return za(e).replace(Gu,"%23").replace(hh,"%3F")}function kh(e){return _h(e).replace(dh,"%2F")}function eo(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const Ch=/\/$/,Sh=e=>e.replace(Ch,"");function Zi(e,t,n="/"){let s,i={},l="",u="";const f=t.indexOf("#");let p=t.indexOf("?");return p=f>=0&&p>f?-1:p,p>=0&&(s=t.slice(0,p),l=t.slice(p,f>0?f:t.length),i=e(l.slice(1))),f>=0&&(s=s||t.slice(0,f),u=t.slice(f,t.length)),s=Th(s??t,n),{fullPath:s+l+u,path:s,query:i,hash:eo(u)}}function Eh(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function oc(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Ih(e,t,n){const s=t.matched.length-1,i=n.matched.length-1;return s>-1&&s===i&&us(t.matched[s],n.matched[i])&&Zu(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function us(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Zu(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!Ah(e[n],t[n]))return!1;return!0}function Ah(e,t){return wn(e)?ic(e,t):wn(t)?ic(t,e):e?.valueOf()===t?.valueOf()}function ic(e,t){return wn(t)?e.length===t.length&&e.every((n,s)=>n===t[s]):e.length===1&&e[0]===t}function Th(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),s=e.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let l=n.length-1,u,f;for(u=0;u<s.length;u++)if(f=s[u],f!==".")if(f==="..")l>1&&l--;else break;return n.slice(0,l).join("/")+"/"+s.slice(u).join("/")}const ar={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let xa=(function(e){return e.pop="pop",e.push="push",e})({}),ea=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Oh(e){if(!e)if(ts){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Sh(e)}const Rh=/^[^#]+#/;function Dh(e,t){return e.replace(Rh,"#")+t}function Ph(e,t){const n=document.documentElement.getBoundingClientRect(),s=e.getBoundingClientRect();return{behavior:t.behavior,left:s.left-n.left-(t.left||0),top:s.top-n.top-(t.top||0)}}const fi=()=>({left:window.scrollX,top:window.scrollY});function Mh(e){let t;if("el"in e){const n=e.el,s=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?s?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=Ph(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ac(e,t){return(history.state?history.state.position-t:-1)+e}const _a=new Map;function $h(e,t){_a.set(e,t)}function Nh(e){const t=_a.get(e);return _a.delete(e),t}function jh(e){return typeof e=="string"||e&&typeof e=="object"}function ef(e){return typeof e=="string"||typeof e=="symbol"}let It=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const tf=Symbol("");It.MATCHER_NOT_FOUND+"",It.NAVIGATION_GUARD_REDIRECT+"",It.NAVIGATION_ABORTED+"",It.NAVIGATION_CANCELLED+"",It.NAVIGATION_DUPLICATED+"";function fs(e,t){return ft(new Error,{type:e,[tf]:!0},t)}function Kn(e,t){return e instanceof Error&&tf in e&&(t==null||!!(e.type&t))}const Lh=["params","query","hash"];function Bh(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const n of Lh)n in e&&(t[n]=e[n]);return JSON.stringify(t,null,2)}function Fh(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<n.length;++s){const i=n[s].replace(Yu," "),l=i.indexOf("="),u=eo(l<0?i:i.slice(0,l)),f=l<0?null:eo(i.slice(l+1));if(u in t){let p=t[u];wn(p)||(p=t[u]=[p]),p.push(f)}else t[u]=f}return t}function lc(e){let t="";for(let n in e){const s=e[n];if(n=xh(n),s==null){s!==void 0&&(t+=(t.length?"&":"")+n);continue}(wn(s)?s.map(i=>i&&wa(i)):[s&&wa(s)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function Kh(e){const t={};for(const n in e){const s=e[n];s!==void 0&&(t[n]=wn(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const Uh=Symbol(""),cc=Symbol(""),di=Symbol(""),Ga=Symbol(""),ka=Symbol("");function $s(){let e=[];function t(s){return e.push(s),()=>{const i=e.indexOf(s);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function fr(e,t,n,s,i,l=u=>u()){const u=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((f,p)=>{const v=w=>{w===!1?p(fs(It.NAVIGATION_ABORTED,{from:n,to:t})):w instanceof Error?p(w):jh(w)?p(fs(It.NAVIGATION_GUARD_REDIRECT,{from:t,to:w})):(u&&s.enterCallbacks[i]===u&&typeof w=="function"&&u.push(w),f())},m=l(()=>e.call(s&&s.instances[i],t,n,v));let g=Promise.resolve(m);e.length<3&&(g=g.then(v)),g.catch(w=>p(w))})}function ta(e,t,n,s,i=l=>l()){const l=[];for(const u of e)for(const f in u.components){let p=u.components[f];if(!(t!=="beforeRouteEnter"&&!u.instances[f]))if(zu(p)){const v=(p.__vccOpts||p)[t];v&&l.push(fr(v,n,s,u,f,i))}else{let v=p();l.push(()=>v.then(m=>{if(!m)throw new Error(`Couldn't resolve component "${f}" at "${u.path}"`);const g=uh(m)?m.default:m;u.mods[f]=m,u.components[f]=g;const w=(g.__vccOpts||g)[t];return w&&fr(w,n,s,u,f,i)()}))}}return l}function qh(e,t){const n=[],s=[],i=[],l=Math.max(t.matched.length,e.matched.length);for(let u=0;u<l;u++){const f=t.matched[u];f&&(e.matched.find(v=>us(v,f))?s.push(f):n.push(f));const p=e.matched[u];p&&(t.matched.find(v=>us(v,p))||i.push(p))}return[n,s,i]}let Vh=()=>location.protocol+"//"+location.host;function nf(e,t){const{pathname:n,search:s,hash:i}=t,l=e.indexOf("#");if(l>-1){let u=i.includes(e.slice(l))?e.slice(l).length:1,f=i.slice(u);return f[0]!=="/"&&(f="/"+f),oc(f,"")}return oc(n,e)+s+i}function Hh(e,t,n,s){let i=[],l=[],u=null;const f=({state:w})=>{const S=nf(e,location),P=n.value,Q=t.value;let se=0;if(w){if(n.value=S,t.value=w,u&&u===P){u=null;return}se=Q?w.position-Q.position:0}else s(S);i.forEach(M=>{M(n.value,P,{delta:se,type:xa.pop,direction:se?se>0?ea.forward:ea.back:ea.unknown})})};function p(){u=n.value}function v(w){i.push(w);const S=()=>{const P=i.indexOf(w);P>-1&&i.splice(P,1)};return l.push(S),S}function m(){if(document.visibilityState==="hidden"){const{history:w}=window;if(!w.state)return;w.replaceState(ft({},w.state,{scroll:fi()}),"")}}function g(){for(const w of l)w();l=[],window.removeEventListener("popstate",f),window.removeEventListener("pagehide",m),document.removeEventListener("visibilitychange",m)}return window.addEventListener("popstate",f),window.addEventListener("pagehide",m),document.addEventListener("visibilitychange",m),{pauseListeners:p,listen:v,destroy:g}}function uc(e,t,n,s=!1,i=!1){return{back:e,current:t,forward:n,replaced:s,position:window.history.length,scroll:i?fi():null}}function Wh(e){const{history:t,location:n}=window,s={value:nf(e,n)},i={value:t.state};i.value||l(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function l(p,v,m){const g=e.indexOf("#"),w=g>-1?(n.host&&document.querySelector("base")?e:e.slice(g))+p:Vh()+e+p;try{t[m?"replaceState":"pushState"](v,"",w),i.value=v}catch(S){console.error(S),n[m?"replace":"assign"](w)}}function u(p,v){l(p,ft({},t.state,uc(i.value.back,p,i.value.forward,!0),v,{position:i.value.position}),!0),s.value=p}function f(p,v){const m=ft({},i.value,t.state,{forward:p,scroll:fi()});l(m.current,m,!0),l(p,ft({},uc(s.value,p,null),{position:m.position+1},v),!1),s.value=p}return{location:s,state:i,push:f,replace:u}}function zh(e){e=Oh(e);const t=Wh(e),n=Hh(e,t.state,t.location,t.replace);function s(l,u=!0){u||n.pauseListeners(),history.go(l)}const i=ft({location:"",base:e,go:s,createHref:Dh.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}let Nr=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var Mt=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(Mt||{});const Gh={type:Nr.Static,value:""},Yh=/[a-zA-Z0-9_]/;function Jh(e){if(!e)return[[]];if(e==="/")return[[Gh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(S){throw new Error(`ERR (${n})/"${v}": ${S}`)}let n=Mt.Static,s=n;const i=[];let l;function u(){l&&i.push(l),l=[]}let f=0,p,v="",m="";function g(){v&&(n===Mt.Static?l.push({type:Nr.Static,value:v}):n===Mt.Param||n===Mt.ParamRegExp||n===Mt.ParamRegExpEnd?(l.length>1&&(p==="*"||p==="+")&&t(`A repeatable param (${v}) must be alone in its segment. eg: '/:ids+.`),l.push({type:Nr.Param,value:v,regexp:m,repeatable:p==="*"||p==="+",optional:p==="*"||p==="?"})):t("Invalid state to consume buffer"),v="")}function w(){v+=p}for(;f<e.length;){if(p=e[f++],p==="\\"&&n!==Mt.ParamRegExp){s=n,n=Mt.EscapeNext;continue}switch(n){case Mt.Static:p==="/"?(v&&g(),u()):p===":"?(g(),n=Mt.Param):w();break;case Mt.EscapeNext:w(),n=s;break;case Mt.Param:p==="("?n=Mt.ParamRegExp:Yh.test(p)?w():(g(),n=Mt.Static,p!=="*"&&p!=="?"&&p!=="+"&&f--);break;case Mt.ParamRegExp:p===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+p:n=Mt.ParamRegExpEnd:m+=p;break;case Mt.ParamRegExpEnd:g(),n=Mt.Static,p!=="*"&&p!=="?"&&p!=="+"&&f--,m="";break;default:t("Unknown state");break}}return n===Mt.ParamRegExp&&t(`Unfinished custom RegExp for param "${v}"`),g(),u(),i}const fc="[^/]+?",Qh={sensitive:!1,strict:!1,start:!0,end:!0};var zt=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(zt||{});const Xh=/[.+*?^${}()[\]/\\]/g;function Zh(e,t){const n=ft({},Qh,t),s=[];let i=n.start?"^":"";const l=[];for(const v of e){const m=v.length?[]:[zt.Root];n.strict&&!v.length&&(i+="/");for(let g=0;g<v.length;g++){const w=v[g];let S=zt.Segment+(n.sensitive?zt.BonusCaseSensitive:0);if(w.type===Nr.Static)g||(i+="/"),i+=w.value.replace(Xh,"\\$&"),S+=zt.Static;else if(w.type===Nr.Param){const{value:P,repeatable:Q,optional:se,regexp:M}=w;l.push({name:P,repeatable:Q,optional:se});const B=M||fc;if(B!==fc){S+=zt.BonusCustomRegExp;try{`${B}`}catch(X){throw new Error(`Invalid custom RegExp for param "${P}" (${B}): `+X.message)}}let $=Q?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;g||($=se&&v.length<2?`(?:/${$})`:"/"+$),se&&($+="?"),i+=$,S+=zt.Dynamic,se&&(S+=zt.BonusOptional),Q&&(S+=zt.BonusRepeatable),B===".*"&&(S+=zt.BonusWildcard)}m.push(S)}s.push(m)}if(n.strict&&n.end){const v=s.length-1;s[v][s[v].length-1]+=zt.BonusStrict}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const u=new RegExp(i,n.sensitive?"":"i");function f(v){const m=v.match(u),g={};if(!m)return null;for(let w=1;w<m.length;w++){const S=m[w]||"",P=l[w-1];g[P.name]=S&&P.repeatable?S.split("/"):S}return g}function p(v){let m="",g=!1;for(const w of e){(!g||!m.endsWith("/"))&&(m+="/"),g=!1;for(const S of w)if(S.type===Nr.Static)m+=S.value;else if(S.type===Nr.Param){const{value:P,repeatable:Q,optional:se}=S,M=P in v?v[P]:"";if(wn(M)&&!Q)throw new Error(`Provided param "${P}" is an array but it is not repeatable (* or + modifiers)`);const B=wn(M)?M.join("/"):M;if(!B)if(se)w.length<2&&(m.endsWith("/")?m=m.slice(0,-1):g=!0);else throw new Error(`Missing required param "${P}"`);m+=B}}return m||"/"}return{re:u,score:s,keys:l,parse:f,stringify:p}}function em(e,t){let n=0;for(;n<e.length&&n<t.length;){const s=t[n]-e[n];if(s)return s;n++}return e.length<t.length?e.length===1&&e[0]===zt.Static+zt.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===zt.Static+zt.Segment?1:-1:0}function rf(e,t){let n=0;const s=e.score,i=t.score;for(;n<s.length&&n<i.length;){const l=em(s[n],i[n]);if(l)return l;n++}if(Math.abs(i.length-s.length)===1){if(dc(s))return 1;if(dc(i))return-1}return i.length-s.length}function dc(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const tm={strict:!1,end:!0,sensitive:!1};function nm(e,t,n){const s=Zh(Jh(e.path),n),i=ft(s,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function rm(e,t){const n=[],s=new Map;t=sc(tm,t);function i(g){return s.get(g)}function l(g,w,S){const P=!S,Q=hc(g);Q.aliasOf=S&&S.record;const se=sc(t,g),M=[Q];if("alias"in g){const X=typeof g.alias=="string"?[g.alias]:g.alias;for(const $e of X)M.push(hc(ft({},Q,{components:S?S.record.components:Q.components,path:$e,aliasOf:S?S.record:Q})))}let B,$;for(const X of M){const{path:$e}=X;if(w&&$e[0]!=="/"){const Pe=w.record.path,De=Pe[Pe.length-1]==="/"?"":"/";X.path=w.record.path+($e&&De+$e)}if(B=nm(X,w,se),S?S.alias.push(B):($=$||B,$!==B&&$.alias.push(B),P&&g.name&&!mc(B)&&u(g.name)),sf(B)&&p(B),Q.children){const Pe=Q.children;for(let De=0;De<Pe.length;De++)l(Pe[De],B,S&&S.children[De])}S=S||B}return $?()=>{u($)}:Hs}function u(g){if(ef(g)){const w=s.get(g);w&&(s.delete(g),n.splice(n.indexOf(w),1),w.children.forEach(u),w.alias.forEach(u))}else{const w=n.indexOf(g);w>-1&&(n.splice(w,1),g.record.name&&s.delete(g.record.name),g.children.forEach(u),g.alias.forEach(u))}}function f(){return n}function p(g){const w=im(g,n);n.splice(w,0,g),g.record.name&&!mc(g)&&s.set(g.record.name,g)}function v(g,w){let S,P={},Q,se;if("name"in g&&g.name){if(S=s.get(g.name),!S)throw fs(It.MATCHER_NOT_FOUND,{location:g});se=S.record.name,P=ft(pc(w.params,S.keys.filter($=>!$.optional).concat(S.parent?S.parent.keys.filter($=>$.optional):[]).map($=>$.name)),g.params&&pc(g.params,S.keys.map($=>$.name))),Q=S.stringify(P)}else if(g.path!=null)Q=g.path,S=n.find($=>$.re.test(Q)),S&&(P=S.parse(Q),se=S.record.name);else{if(S=w.name?s.get(w.name):n.find($=>$.re.test(w.path)),!S)throw fs(It.MATCHER_NOT_FOUND,{location:g,currentLocation:w});se=S.record.name,P=ft({},w.params,g.params),Q=S.stringify(P)}const M=[];let B=S;for(;B;)M.unshift(B.record),B=B.parent;return{name:se,path:Q,params:P,matched:M,meta:om(M)}}e.forEach(g=>l(g));function m(){n.length=0,s.clear()}return{addRoute:l,resolve:v,removeRoute:u,clearRoutes:m,getRoutes:f,getRecordMatcher:i}}function pc(e,t){const n={};for(const s of t)s in e&&(n[s]=e[s]);return n}function hc(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:sm(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function sm(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const s in e.components)t[s]=typeof n=="object"?n[s]:n;return t}function mc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function om(e){return e.reduce((t,n)=>ft(t,n.meta),{})}function im(e,t){let n=0,s=t.length;for(;n!==s;){const l=n+s>>1;rf(e,t[l])<0?s=l:n=l+1}const i=am(e);return i&&(s=t.lastIndexOf(i,s-1)),s}function am(e){let t=e;for(;t=t.parent;)if(sf(t)&&rf(e,t)===0)return t}function sf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function gc(e){const t=vn(di),n=vn(Ga),s=Je(()=>{const p=en(e.to);return t.resolve(p)}),i=Je(()=>{const{matched:p}=s.value,{length:v}=p,m=p[v-1],g=n.matched;if(!m||!g.length)return-1;const w=g.findIndex(us.bind(null,m));if(w>-1)return w;const S=vc(p[v-2]);return v>1&&vc(m)===S&&g[g.length-1].path!==S?g.findIndex(us.bind(null,p[v-2])):w}),l=Je(()=>i.value>-1&&fm(n.params,s.value.params)),u=Je(()=>i.value>-1&&i.value===n.matched.length-1&&Zu(n.params,s.value.params));function f(p={}){if(um(p)){const v=t[en(e.replace)?"replace":"push"](en(e.to)).catch(Hs);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>v),v}return Promise.resolve()}return{route:s,href:Je(()=>s.value.href),isActive:l,isExactActive:u,navigate:f}}function lm(e){return e.length===1?e[0]:e}const cm=Qt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:gc,setup(e,{slots:t}){const n=si(gc(e)),{options:s}=vn(di),i=Je(()=>({[yc(e.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[yc(e.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=t.default&&lm(t.default(n));return e.custom?l:Wa("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},l)}}}),ns=cm;function um(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function fm(e,t){for(const n in t){const s=t[n],i=e[n];if(typeof s=="string"){if(s!==i)return!1}else if(!wn(i)||i.length!==s.length||s.some((l,u)=>l.valueOf()!==i[u].valueOf()))return!1}return!0}function vc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const yc=(e,t,n)=>e??t??n,dm=Qt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const s=vn(ka),i=Je(()=>e.route||s.value),l=vn(cc,0),u=Je(()=>{let v=en(l);const{matched:m}=i.value;let g;for(;(g=m[v])&&!g.components;)v++;return v}),f=Je(()=>i.value.matched[u.value]);Lo(cc,Je(()=>u.value+1)),Lo(Uh,f),Lo(ka,i);const p=ye();return Rn(()=>[p.value,f.value,e.name],([v,m,g],[w,S,P])=>{m&&(m.instances[g]=v,S&&S!==m&&v&&v===w&&(m.leaveGuards.size||(m.leaveGuards=S.leaveGuards),m.updateGuards.size||(m.updateGuards=S.updateGuards))),v&&m&&(!S||!us(m,S)||!w)&&(m.enterCallbacks[g]||[]).forEach(Q=>Q(v))},{flush:"post"}),()=>{const v=i.value,m=e.name,g=f.value,w=g&&g.components[m];if(!w)return bc(n.default,{Component:w,route:v});const S=g.props[m],P=S?S===!0?v.params:typeof S=="function"?S(v):S:null,se=Wa(w,ft({},P,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(g.instances[m]=null)},ref:p}));return bc(n.default,{Component:se,route:v})||se}}});function bc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ya=dm;function pm(e){const t=rm(e.routes,e),n=e.parseQuery||Fh,s=e.stringifyQuery||lc,i=e.history,l=$s(),u=$s(),f=$s(),p=dd(ar);let v=ar;ts&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=Xi.bind(null,W=>""+W),g=Xi.bind(null,kh),w=Xi.bind(null,eo);function S(W,de){let U,we;return ef(W)?(U=t.getRecordMatcher(W),we=de):we=W,t.addRoute(we,U)}function P(W){const de=t.getRecordMatcher(W);de&&t.removeRoute(de)}function Q(){return t.getRoutes().map(W=>W.record)}function se(W){return!!t.getRecordMatcher(W)}function M(W,de){if(de=ft({},de||p.value),typeof W=="string"){const R=Zi(n,W,de.path),J=t.resolve({path:R.path},de),ee=i.createHref(R.fullPath);return ft(R,J,{params:w(J.params),hash:eo(R.hash),redirectedFrom:void 0,href:ee})}let U;if(W.path!=null)U=ft({},W,{path:Zi(n,W.path,de.path).path});else{const R=ft({},W.params);for(const J in R)R[J]==null&&delete R[J];U=ft({},W,{params:g(R)}),de.params=g(de.params)}const we=t.resolve(U,de),Ce=W.hash||"";we.params=m(w(we.params));const y=Eh(s,ft({},W,{hash:wh(Ce),path:we.path})),x=i.createHref(y);return ft({fullPath:y,hash:Ce,query:s===lc?Kh(W.query):W.query||{}},we,{redirectedFrom:void 0,href:x})}function B(W){return typeof W=="string"?Zi(n,W,p.value.path):ft({},W)}function $(W,de){if(v!==W)return fs(It.NAVIGATION_CANCELLED,{from:de,to:W})}function X(W){return De(W)}function $e(W){return X(ft(B(W),{replace:!0}))}function Pe(W,de){const U=W.matched[W.matched.length-1];if(U&&U.redirect){const{redirect:we}=U;let Ce=typeof we=="function"?we(W,de):we;return typeof Ce=="string"&&(Ce=Ce.includes("?")||Ce.includes("#")?Ce=B(Ce):{path:Ce},Ce.params={}),ft({query:W.query,hash:W.hash,params:Ce.path!=null?{}:W.params},Ce)}}function De(W,de){const U=v=M(W),we=p.value,Ce=W.state,y=W.force,x=W.replace===!0,R=Pe(U,we);if(R)return De(ft(B(R),{state:typeof R=="object"?ft({},Ce,R.state):Ce,force:y,replace:x}),de||U);const J=U;J.redirectedFrom=de;let ee;return!y&&Ih(s,we,U)&&(ee=fs(It.NAVIGATION_DUPLICATED,{to:J,from:we}),bt(we,we,!0,!1)),(ee?Promise.resolve(ee):Ue(J,we)).catch(te=>Kn(te)?Kn(te,It.NAVIGATION_GUARD_REDIRECT)?te:tt(te):be(te,J,we)).then(te=>{if(te){if(Kn(te,It.NAVIGATION_GUARD_REDIRECT))return De(ft({replace:x},B(te.to),{state:typeof te.to=="object"?ft({},Ce,te.to.state):Ce,force:y}),de||J)}else te=V(J,we,!0,x,Ce);return Ye(J,we,te),te})}function rt(W,de){const U=$(W,de);return U?Promise.reject(U):Promise.resolve()}function Me(W){const de=z.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(W):W()}function Ue(W,de){let U;const[we,Ce,y]=qh(W,de);U=ta(we.reverse(),"beforeRouteLeave",W,de);for(const R of we)R.leaveGuards.forEach(J=>{U.push(fr(J,W,de))});const x=rt.bind(null,W,de);return U.push(x),je(U).then(()=>{U=[];for(const R of l.list())U.push(fr(R,W,de));return U.push(x),je(U)}).then(()=>{U=ta(Ce,"beforeRouteUpdate",W,de);for(const R of Ce)R.updateGuards.forEach(J=>{U.push(fr(J,W,de))});return U.push(x),je(U)}).then(()=>{U=[];for(const R of y)if(R.beforeEnter)if(wn(R.beforeEnter))for(const J of R.beforeEnter)U.push(fr(J,W,de));else U.push(fr(R.beforeEnter,W,de));return U.push(x),je(U)}).then(()=>(W.matched.forEach(R=>R.enterCallbacks={}),U=ta(y,"beforeRouteEnter",W,de,Me),U.push(x),je(U))).then(()=>{U=[];for(const R of u.list())U.push(fr(R,W,de));return U.push(x),je(U)}).catch(R=>Kn(R,It.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function Ye(W,de,U){f.list().forEach(we=>Me(()=>we(W,de,U)))}function V(W,de,U,we,Ce){const y=$(W,de);if(y)return y;const x=de===ar,R=ts?history.state:{};U&&(we||x?i.replace(W.fullPath,ft({scroll:x&&R&&R.scroll},Ce)):i.push(W.fullPath,Ce)),p.value=W,bt(W,de,U,x),tt()}let H;function ae(){H||(H=i.listen((W,de,U)=>{if(!le.listening)return;const we=M(W),Ce=Pe(we,le.currentRoute.value);if(Ce){De(ft(Ce,{replace:!0,force:!0}),we).catch(Hs);return}v=we;const y=p.value;ts&&$h(ac(y.fullPath,U.delta),fi()),Ue(we,y).catch(x=>Kn(x,It.NAVIGATION_ABORTED|It.NAVIGATION_CANCELLED)?x:Kn(x,It.NAVIGATION_GUARD_REDIRECT)?(De(ft(B(x.to),{force:!0}),we).then(R=>{Kn(R,It.NAVIGATION_ABORTED|It.NAVIGATION_DUPLICATED)&&!U.delta&&U.type===xa.pop&&i.go(-1,!1)}).catch(Hs),Promise.reject()):(U.delta&&i.go(-U.delta,!1),be(x,we,y))).then(x=>{x=x||V(we,y,!1),x&&(U.delta&&!Kn(x,It.NAVIGATION_CANCELLED)?i.go(-U.delta,!1):U.type===xa.pop&&Kn(x,It.NAVIGATION_ABORTED|It.NAVIGATION_DUPLICATED)&&i.go(-1,!1)),Ye(we,y,x)}).catch(Hs)}))}let fe=$s(),me=$s(),ne;function be(W,de,U){tt(W);const we=me.list();return we.length?we.forEach(Ce=>Ce(W,de,U)):console.error(W),Promise.reject(W)}function ze(){return ne&&p.value!==ar?Promise.resolve():new Promise((W,de)=>{fe.add([W,de])})}function tt(W){return ne||(ne=!W,ae(),fe.list().forEach(([de,U])=>W?U(W):de()),fe.reset()),W}function bt(W,de,U,we){const{scrollBehavior:Ce}=e;if(!ts||!Ce)return Promise.resolve();const y=!U&&Nh(ac(W.fullPath,0))||(we||!U)&&history.state&&history.state.scroll||null;return mn().then(()=>Ce(W,de,y)).then(x=>x&&Mh(x)).catch(x=>be(x,W,de))}const ut=W=>i.go(W);let Y;const z=new Set,le={currentRoute:p,listening:!0,addRoute:S,removeRoute:P,clearRoutes:t.clearRoutes,hasRoute:se,getRoutes:Q,resolve:M,options:e,push:X,replace:$e,go:ut,back:()=>ut(-1),forward:()=>ut(1),beforeEach:l.add,beforeResolve:u.add,afterEach:f.add,onError:me.add,isReady:ze,install(W){W.component("RouterLink",ns),W.component("RouterView",Ya),W.config.globalProperties.$router=le,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>en(p)}),ts&&!Y&&p.value===ar&&(Y=!0,X(i.location).catch(we=>{}));const de={};for(const we in ar)Object.defineProperty(de,we,{get:()=>p.value[we],enumerable:!0});W.provide(di,le),W.provide(Ga,su(de)),W.provide(ka,p);const U=W.unmount;z.add(W),W.unmount=function(){z.delete(W),z.size<1&&(v=ar,H&&H(),H=null,p.value=ar,Y=!1,ne=!1),U()}}};function je(W){return W.reduce((de,U)=>de.then(()=>Me(U)),Promise.resolve())}return le}function oo(){return vn(di)}function hm(e){return vn(Ga)}const mm=Qt({__name:"App",setup(e){return(t,n)=>(ce(),Lu(en(Ya)))}}),gm="/pwa-icon-192.png";var vm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ym(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uo={exports:{}},bm=Uo.exports,wc;function wm(){return wc||(wc=1,(function(e,t){(function(n,s){e.exports=s()})(bm,function(){var n=function(r,o){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])})(r,o)},s=function(){return(s=Object.assign||function(r){for(var o,a=1,c=arguments.length;a<c;a++)for(var d in o=arguments[a])Object.prototype.hasOwnProperty.call(o,d)&&(r[d]=o[d]);return r}).apply(this,arguments)};function i(r,o,a){for(var c,d=0,h=o.length;d<h;d++)!c&&d in o||((c=c||Array.prototype.slice.call(o,0,d))[d]=o[d]);return r.concat(c||Array.prototype.slice.call(o))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:vm,u=Object.keys,f=Array.isArray;function p(r,o){return typeof o!="object"||u(o).forEach(function(a){r[a]=o[a]}),r}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var v=Object.getPrototypeOf,m={}.hasOwnProperty;function g(r,o){return m.call(r,o)}function w(r,o){typeof o=="function"&&(o=o(v(r))),(typeof Reflect>"u"?u:Reflect.ownKeys)(o).forEach(function(a){P(r,a,o[a])})}var S=Object.defineProperty;function P(r,o,a,c){S(r,o,p(a&&g(a,"get")&&typeof a.get=="function"?{get:a.get,set:a.set,configurable:!0}:{value:a,configurable:!0,writable:!0},c))}function Q(r){return{from:function(o){return r.prototype=Object.create(o.prototype),P(r.prototype,"constructor",r),{extend:w.bind(null,r.prototype)}}}}var se=Object.getOwnPropertyDescriptor,M=[].slice;function B(r,o,a){return M.call(r,o,a)}function $(r,o){return o(r)}function X(r){if(!r)throw new Error("Assertion Failed")}function $e(r){l.setImmediate?setImmediate(r):setTimeout(r,0)}function Pe(r,o){if(typeof o=="string"&&g(r,o))return r[o];if(!o)return r;if(typeof o!="string"){for(var a=[],c=0,d=o.length;c<d;++c){var h=Pe(r,o[c]);a.push(h)}return a}var b=o.indexOf(".");if(b!==-1){var _=r[o.substr(0,b)];return _==null?void 0:Pe(_,o.substr(b+1))}}function De(r,o,a){if(r&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(r)))if(typeof o!="string"&&"length"in o){X(typeof a!="string"&&"length"in a);for(var c=0,d=o.length;c<d;++c)De(r,o[c],a[c])}else{var h,b,_=o.indexOf(".");_!==-1?(h=o.substr(0,_),(b=o.substr(_+1))===""?a===void 0?f(r)&&!isNaN(parseInt(h))?r.splice(h,1):delete r[h]:r[h]=a:De(_=!(_=r[h])||!g(r,h)?r[h]={}:_,b,a)):a===void 0?f(r)&&!isNaN(parseInt(o))?r.splice(o,1):delete r[o]:r[o]=a}}function rt(r){var o,a={};for(o in r)g(r,o)&&(a[o]=r[o]);return a}var Me=[].concat;function Ue(r){return Me.apply([],r)}var Qe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ue([8,16,32,64].map(function(r){return["Int","Uint","Float"].map(function(o){return o+r+"Array"})}))).filter(function(r){return l[r]}),Ye=new Set(Qe.map(function(r){return l[r]})),V=null;function H(r){return V=new WeakMap,r=(function o(a){if(!a||typeof a!="object")return a;var c=V.get(a);if(c)return c;if(f(a)){c=[],V.set(a,c);for(var d=0,h=a.length;d<h;++d)c.push(o(a[d]))}else if(Ye.has(a.constructor))c=a;else{var b,_=v(a);for(b in c=_===Object.prototype?{}:Object.create(_),V.set(a,c),a)g(a,b)&&(c[b]=o(a[b]))}return c})(r),V=null,r}var ae={}.toString;function fe(r){return ae.call(r).slice(8,-1)}var me=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof me=="symbol"?function(r){var o;return r!=null&&(o=r[me])&&o.apply(r)}:function(){return null};function be(r,o){return o=r.indexOf(o),0<=o&&r.splice(o,1),0<=o}var ze={};function tt(r){var o,a,c,d;if(arguments.length===1){if(f(r))return r.slice();if(this===ze&&typeof r=="string")return[r];if(d=ne(r)){for(a=[];!(c=d.next()).done;)a.push(c.value);return a}if(r==null)return[r];if(typeof(o=r.length)!="number")return[r];for(a=new Array(o);o--;)a[o]=r[o];return a}for(o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return a}var bt=typeof Symbol<"u"?function(r){return r[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ve=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ve),ut={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Y(r,o){this.name=r,this.message=o}function z(r,o){return r+". Errors: "+Object.keys(o).map(function(a){return o[a].toString()}).filter(function(a,c,d){return d.indexOf(a)===c}).join(`
`)}function le(r,o,a,c){this.failures=o,this.failedKeys=c,this.successCount=a,this.message=z(r,o)}function je(r,o){this.name="BulkError",this.failures=Object.keys(o).map(function(a){return o[a]}),this.failuresByPos=o,this.message=z(r,this.failures)}Q(Y).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Q(le).from(Y),Q(je).from(Y);var W=cn.reduce(function(r,o){return r[o]=o+"Error",r},{}),de=Y,U=cn.reduce(function(r,o){var a=o+"Error";function c(d,h){this.name=a,d?typeof d=="string"?(this.message="".concat(d).concat(h?`
 `+h:""),this.inner=h||null):typeof d=="object"&&(this.message="".concat(d.name," ").concat(d.message),this.inner=d):(this.message=ut[o]||a,this.inner=null)}return Q(c).from(de),r[o]=c,r},{});U.Syntax=SyntaxError,U.Type=TypeError,U.Range=RangeError;var we=Ve.reduce(function(r,o){return r[o+"Error"]=U[o],r},{}),Ce=cn.reduce(function(r,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(r[o+"Error"]=U[o]),r},{});function y(){}function x(r){return r}function R(r,o){return r==null||r===x?o:function(a){return o(r(a))}}function J(r,o){return function(){r.apply(this,arguments),o.apply(this,arguments)}}function ee(r,o){return r===y?o:function(){var a=r.apply(this,arguments);a!==void 0&&(arguments[0]=a);var c=this.onsuccess,d=this.onerror;this.onsuccess=null,this.onerror=null;var h=o.apply(this,arguments);return c&&(this.onsuccess=this.onsuccess?J(c,this.onsuccess):c),d&&(this.onerror=this.onerror?J(d,this.onerror):d),h!==void 0?h:a}}function te(r,o){return r===y?o:function(){r.apply(this,arguments);var a=this.onsuccess,c=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?J(a,this.onsuccess):a),c&&(this.onerror=this.onerror?J(c,this.onerror):c)}}function Se(r,o){return r===y?o:function(a){var c=r.apply(this,arguments);p(a,c);var d=this.onsuccess,h=this.onerror;return this.onsuccess=null,this.onerror=null,a=o.apply(this,arguments),d&&(this.onsuccess=this.onsuccess?J(d,this.onsuccess):d),h&&(this.onerror=this.onerror?J(h,this.onerror):h),c===void 0?a===void 0?void 0:a:p(c,a)}}function _e(r,o){return r===y?o:function(){return o.apply(this,arguments)!==!1&&r.apply(this,arguments)}}function ge(r,o){return r===y?o:function(){var a=r.apply(this,arguments);if(a&&typeof a.then=="function"){for(var c=this,d=arguments.length,h=new Array(d);d--;)h[d]=arguments[d];return a.then(function(){return o.apply(c,h)})}return o.apply(this,arguments)}}Ce.ModifyError=le,Ce.DexieError=Y,Ce.BulkError=je;var oe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ke(r){oe=r}var Ae={},Be=100,Qe=typeof Promise>"u"?[]:(function(){var r=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[r,v(r),r];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,v(o),r]})(),Ve=Qe[0],cn=Qe[1],Qe=Qe[2],cn=cn&&cn.then,at=Ve&&Ve.constructor,lt=!!Qe,Ct=function(r,o){xn.push([r,o]),St&&(queueMicrotask(gs),St=!1)},Dt=!0,St=!0,Pt=[],Xt=[],Pn=x,_t={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:y,pgp:!1,env:{},finalize:y},Re=_t,xn=[],ln=0,qr=[];function Te(r){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=Re;if(typeof r!="function"){if(r!==Ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&hs(this,this._value))}this._state=null,this._value=null,++o.ref,(function a(c,d){try{d(function(h){if(c._state===null){if(h===c)throw new TypeError("A promise cannot be resolved with itself.");var b=c._lib&&Mn();h&&typeof h.then=="function"?a(c,function(_,A){h instanceof Te?h._then(_,A):h.then(_,A)}):(c._state=!0,c._value=h,co(c)),b&&Xn()}},hs.bind(null,c))}catch(h){hs(c,h)}})(this,r)}var br={get:function(){var r=Re,o=Wr;function a(c,d){var h=this,b=!r.global&&(r!==Re||o!==Wr),_=b&&!kn(),A=new Te(function(O,L){ms(h,new lo(ys(c,r,b,_),ys(d,r,b,_),O,L,r))});return this._consoleTask&&(A._consoleTask=this._consoleTask),A}return a.prototype=Ae,a},set:function(r){P(this,"then",r&&r.prototype===Ae?br:{get:function(){return r},set:br.set})}};function lo(r,o,a,c,d){this.onFulfilled=typeof r=="function"?r:null,this.onRejected=typeof o=="function"?o:null,this.resolve=a,this.reject=c,this.psd=d}function hs(r,o){var a,c;Xt.push(o),r._state===null&&(a=r._lib&&Mn(),o=Pn(o),r._state=!1,r._value=o,c=r,Pt.some(function(d){return d._value===c._value})||Pt.push(c),co(r),a&&Xn())}function co(r){var o=r._listeners;r._listeners=[];for(var a=0,c=o.length;a<c;++a)ms(r,o[a]);var d=r._PSD;--d.ref||d.finalize(),ln===0&&(++ln,Ct(function(){--ln==0&&vs()},[]))}function ms(r,o){if(r._state!==null){var a=r._state?o.onFulfilled:o.onRejected;if(a===null)return(r._state?o.resolve:o.reject)(r._value);++o.psd.ref,++ln,Ct(uo,[a,r,o])}else r._listeners.push(o)}function uo(r,o,a){try{var c,d=o._value;!o._state&&Xt.length&&(Xt=[]),c=oe&&o._consoleTask?o._consoleTask.run(function(){return r(d)}):r(d),o._state||Xt.indexOf(d)!==-1||(function(h){for(var b=Pt.length;b;)if(Pt[--b]._value===h._value)return Pt.splice(b,1)})(o),a.resolve(c)}catch(h){a.reject(h)}finally{--ln==0&&vs(),--a.psd.ref||a.psd.finalize()}}function gs(){$n(_t,function(){Mn()&&Xn()})}function Mn(){var r=Dt;return St=Dt=!1,r}function Xn(){var r,o,a;do for(;0<xn.length;)for(r=xn,xn=[],a=r.length,o=0;o<a;++o){var c=r[o];c[0].apply(null,c[1])}while(0<xn.length);St=Dt=!0}function vs(){var r=Pt;Pt=[],r.forEach(function(c){c._PSD.onunhandled.call(null,c._value,c)});for(var o=qr.slice(0),a=o.length;a;)o[--a]()}function wr(r){return new Te(Ae,!1,r)}function pt(r,o){var a=Re;return function(){var c=Mn(),d=Re;try{return Cn(a,!0),r.apply(this,arguments)}catch(h){o&&o(h)}finally{Cn(d,!1),c&&Xn()}}}w(Te.prototype,{then:br,_then:function(r,o){ms(this,new lo(null,null,r,o,Re))},catch:function(r){if(arguments.length===1)return this.then(null,r);var o=r,a=arguments[1];return typeof o=="function"?this.then(null,function(c){return(c instanceof o?a:wr)(c)}):this.then(null,function(c){return(c&&c.name===o?a:wr)(c)})},finally:function(r){return this.then(function(o){return Te.resolve(r()).then(function(){return o})},function(o){return Te.resolve(r()).then(function(){return wr(o)})})},timeout:function(r,o){var a=this;return r<1/0?new Te(function(c,d){var h=setTimeout(function(){return d(new U.Timeout(o))},r);a.then(c,d).finally(clearTimeout.bind(null,h))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&P(Te.prototype,Symbol.toStringTag,"Dexie.Promise"),_t.env=xr(),w(Te,{all:function(){var r=tt.apply(null,arguments).map(zr);return new Te(function(o,a){r.length===0&&o([]);var c=r.length;r.forEach(function(d,h){return Te.resolve(d).then(function(b){r[h]=b,--c||o(r)},a)})})},resolve:function(r){return r instanceof Te?r:r&&typeof r.then=="function"?new Te(function(o,a){r.then(o,a)}):new Te(Ae,!0,r)},reject:wr,race:function(){var r=tt.apply(null,arguments).map(zr);return new Te(function(o,a){r.map(function(c){return Te.resolve(c).then(o,a)})})},PSD:{get:function(){return Re},set:function(r){return Re=r}},totalEchoes:{get:function(){return Wr}},newPSD:_n,usePSD:$n,scheduler:{get:function(){return Ct},set:function(r){Ct=r}},rejectionMapper:{get:function(){return Pn},set:function(r){Pn=r}},follow:function(r,o){return new Te(function(a,c){return _n(function(d,h){var b=Re;b.unhandleds=[],b.onunhandled=h,b.finalize=J(function(){var _,A=this;_=function(){A.unhandleds.length===0?d():h(A.unhandleds[0])},qr.push(function O(){_(),qr.splice(qr.indexOf(O),1)}),++ln,Ct(function(){--ln==0&&vs()},[])},b.finalize),r()},o,a,c)})}}),at&&(at.allSettled&&P(Te,"allSettled",function(){var r=tt.apply(null,arguments).map(zr);return new Te(function(o){r.length===0&&o([]);var a=r.length,c=new Array(a);r.forEach(function(d,h){return Te.resolve(d).then(function(b){return c[h]={status:"fulfilled",value:b}},function(b){return c[h]={status:"rejected",reason:b}}).then(function(){return--a||o(c)})})})}),at.any&&typeof AggregateError<"u"&&P(Te,"any",function(){var r=tt.apply(null,arguments).map(zr);return new Te(function(o,a){r.length===0&&a(new AggregateError([]));var c=r.length,d=new Array(c);r.forEach(function(h,b){return Te.resolve(h).then(function(_){return o(_)},function(_){d[b]=_,--c||a(new AggregateError(d))})})})}),at.withResolvers&&(Te.withResolvers=at.withResolvers));var At={awaits:0,echoes:0,id:0},gi=0,Vr=[],Hr=0,Wr=0,vi=0;function _n(r,o,a,c){var d=Re,h=Object.create(d);return h.parent=d,h.ref=0,h.global=!1,h.id=++vi,_t.env,h.env=lt?{Promise:Te,PromiseProp:{value:Te,configurable:!0,writable:!0},all:Te.all,race:Te.race,allSettled:Te.allSettled,any:Te.any,resolve:Te.resolve,reject:Te.reject}:{},o&&p(h,o),++d.ref,h.finalize=function(){--this.parent.ref||this.parent.finalize()},c=$n(h,r,a,c),h.ref===0&&h.finalize(),c}function Zn(){return At.id||(At.id=++gi),++At.awaits,At.echoes+=Be,At.id}function kn(){return!!At.awaits&&(--At.awaits==0&&(At.id=0),At.echoes=At.awaits*Be,!0)}function zr(r){return At.echoes&&r&&r.constructor===at?(Zn(),r.then(function(o){return kn(),o},function(o){return kn(),Et(o)})):r}function yi(){var r=Vr[Vr.length-1];Vr.pop(),Cn(r,!1)}function Cn(r,o){var a,c=Re;(o?!At.echoes||Hr++&&r===Re:!Hr||--Hr&&r===Re)||queueMicrotask(o?(function(d){++Wr,At.echoes&&--At.echoes!=0||(At.echoes=At.awaits=At.id=0),Vr.push(Re),Cn(d,!0)}).bind(null,r):yi),r!==Re&&(Re=r,c===_t&&(_t.env=xr()),lt&&(a=_t.env.Promise,o=r.env,(c.global||r.global)&&(Object.defineProperty(l,"Promise",o.PromiseProp),a.all=o.all,a.race=o.race,a.resolve=o.resolve,a.reject=o.reject,o.allSettled&&(a.allSettled=o.allSettled),o.any&&(a.any=o.any))))}function xr(){var r=l.Promise;return lt?{Promise:r,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:r.all,race:r.race,allSettled:r.allSettled,any:r.any,resolve:r.resolve,reject:r.reject}:{}}function $n(r,o,a,c,d){var h=Re;try{return Cn(r,!0),o(a,c,d)}finally{Cn(h,!1)}}function ys(r,o,a,c){return typeof r!="function"?r:function(){var d=Re;a&&Zn(),Cn(o,!0);try{return r.apply(this,arguments)}finally{Cn(d,!1),c&&queueMicrotask(kn)}}}function bs(r){Promise===at&&At.echoes===0?Hr===0?r():enqueueNativeMicroTask(r):setTimeout(r,0)}(""+cn).indexOf("[native code]")===-1&&(Zn=kn=y);var Et=Te.reject,Nn="",hn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",fo="String expected.",er=[],Gr="__dbnames",ws="readonly",xs="readwrite";function jn(r,o){return r?o?function(){return r.apply(this,arguments)&&o.apply(this,arguments)}:r:o}var _s={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yr(r){return typeof r!="string"||/\./.test(r)?function(o){return o}:function(o){return o[r]===void 0&&r in o&&delete(o=H(o))[r],o}}function ks(){throw U.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function it(r,o){try{var a=po(r),c=po(o);if(a!==c)return a==="Array"?1:c==="Array"?-1:a==="binary"?1:c==="binary"?-1:a==="string"?1:c==="string"?-1:a==="Date"?1:c!=="Date"?NaN:-1;switch(a){case"number":case"Date":case"string":return o<r?1:r<o?-1:0;case"binary":return(function(d,h){for(var b=d.length,_=h.length,A=b<_?b:_,O=0;O<A;++O)if(d[O]!==h[O])return d[O]<h[O]?-1:1;return b===_?0:b<_?-1:1})(ho(r),ho(o));case"Array":return(function(d,h){for(var b=d.length,_=h.length,A=b<_?b:_,O=0;O<A;++O){var L=it(d[O],h[O]);if(L!==0)return L}return b===_?0:b<_?-1:1})(r,o)}}catch{}return NaN}function po(r){var o=typeof r;return o!="object"?o:ArrayBuffer.isView(r)?"binary":(r=fe(r),r==="ArrayBuffer"?"binary":r)}function ho(r){return r instanceof Uint8Array?r:ArrayBuffer.isView(r)?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r)}function tr(r,o,a){var c=r.schema.yProps;return c?(o&&0<a.numFailures&&(o=o.filter(function(d,h){return!a.failures[h]})),Promise.all(c.map(function(d){return d=d.updatesTable,o?r.db.table(d).where("k").anyOf(o).delete():r.db.table(d).clear()})).then(function(){return a})):a}var _r=(nr.prototype.execute=function(r){var o=this["@@propmod"];if(o.add!==void 0){var a=o.add;if(f(a))return i(i([],f(r)?r:[],!0),a).sort();if(typeof a=="number")return(Number(r)||0)+a;if(typeof a=="bigint")try{return BigInt(r)+a}catch{return BigInt(0)+a}throw new TypeError("Invalid term ".concat(a))}if(o.remove!==void 0){var c=o.remove;if(f(c))return f(r)?r.filter(function(d){return!c.includes(d)}).sort():[];if(typeof c=="number")return Number(r)-c;if(typeof c=="bigint")try{return BigInt(r)-c}catch{return BigInt(0)-c}throw new TypeError("Invalid subtrahend ".concat(c))}return a=(a=o.replacePrefix)===null||a===void 0?void 0:a[0],a&&typeof r=="string"&&r.startsWith(a)?o.replacePrefix[1]+r.substring(a.length):r},nr);function nr(r){this["@@propmod"]=r}function Cs(r,o){for(var a=u(o),c=a.length,d=!1,h=0;h<c;++h){var b=a[h],_=o[b],A=Pe(r,b);_ instanceof _r?(De(r,b,_.execute(A)),d=!0):A!==_&&(De(r,b,_),d=!0)}return d}var Ss=(ht.prototype._trans=function(r,o,a){var c=this._tx||Re.trans,d=this.name,h=oe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(r==="readonly"?"read":"write"," ").concat(this.name));function b(O,L,E){if(!E.schema[d])throw new U.NotFound("Table "+d+" not part of transaction");return o(E.idbtrans,E)}var _=Mn();try{var A=c&&c.db._novip===this.db._novip?c===Re.trans?c._promise(r,b,a):_n(function(){return c._promise(r,b,a)},{trans:c,transless:Re.transless||Re}):(function O(L,E,K,D){if(L.idbdb&&(L._state.openComplete||Re.letThrough||L._vip)){var N=L._createTransaction(E,K,L._dbSchema);try{N.create(),L._state.PR1398_maxLoop=3}catch(j){return j.name===W.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return O(L,E,K,D)})):Et(j)}return N._promise(E,function(j,F){return _n(function(){return Re.trans=N,D(j,F,N)})}).then(function(j){if(E==="readwrite")try{N.idbtrans.commit()}catch{}return E==="readonly"?j:N._completion.then(function(){return j})})}if(L._state.openComplete)return Et(new U.DatabaseClosed(L._state.dbOpenError));if(!L._state.isBeingOpened){if(!L._state.autoOpen)return Et(new U.DatabaseClosed);L.open().catch(y)}return L._state.dbReadyPromise.then(function(){return O(L,E,K,D)})})(this.db,r,[this.name],b);return h&&(A._consoleTask=h,A=A.catch(function(O){return console.trace(O),Et(O)})),A}finally{_&&Xn()}},ht.prototype.get=function(r,o){var a=this;return r&&r.constructor===Object?this.where(r).first(o):r==null?Et(new U.Type("Invalid argument to Table.get()")):this._trans("readonly",function(c){return a.core.get({trans:c,key:r}).then(function(d){return a.hook.reading.fire(d)})}).then(o)},ht.prototype.where=function(r){if(typeof r=="string")return new this.db.WhereClause(this,r);if(f(r))return new this.db.WhereClause(this,"[".concat(r.join("+"),"]"));var o=u(r);if(o.length===1)return this.where(o[0]).equals(r[o[0]]);var a=this.schema.indexes.concat(this.schema.primKey).filter(function(_){if(_.compound&&o.every(function(O){return 0<=_.keyPath.indexOf(O)})){for(var A=0;A<o.length;++A)if(o.indexOf(_.keyPath[A])===-1)return!1;return!0}return!1}).sort(function(_,A){return _.keyPath.length-A.keyPath.length})[0];if(a&&this.db._maxKey!==Nn){var h=a.keyPath.slice(0,o.length);return this.where(h).equals(h.map(function(A){return r[A]}))}!a&&oe&&console.warn("The query ".concat(JSON.stringify(r)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var c=this.schema.idxByName;function d(_,A){return it(_,A)===0}var b=o.reduce(function(E,A){var O=E[0],L=E[1],E=c[A],K=r[A];return[O||E,O||!E?jn(L,E&&E.multi?function(D){return D=Pe(D,A),f(D)&&D.some(function(N){return d(K,N)})}:function(D){return d(K,Pe(D,A))}):L]},[null,null]),h=b[0],b=b[1];return h?this.where(h.name).equals(r[h.keyPath]).filter(b):a?this.filter(b):this.where(o).equals("")},ht.prototype.filter=function(r){return this.toCollection().and(r)},ht.prototype.count=function(r){return this.toCollection().count(r)},ht.prototype.offset=function(r){return this.toCollection().offset(r)},ht.prototype.limit=function(r){return this.toCollection().limit(r)},ht.prototype.each=function(r){return this.toCollection().each(r)},ht.prototype.toArray=function(r){return this.toCollection().toArray(r)},ht.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ht.prototype.orderBy=function(r){return new this.db.Collection(new this.db.WhereClause(this,f(r)?"[".concat(r.join("+"),"]"):r))},ht.prototype.reverse=function(){return this.toCollection().reverse()},ht.prototype.mapToClass=function(r){var o,a=this.db,c=this.name;function d(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=r).prototype instanceof ks&&((function(A,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");function L(){this.constructor=A}n(A,O),A.prototype=O===null?Object.create(O):(L.prototype=O.prototype,new L)})(d,o=r),Object.defineProperty(d.prototype,"db",{get:function(){return a},enumerable:!1,configurable:!0}),d.prototype.table=function(){return c},r=d);for(var h=new Set,b=r.prototype;b;b=v(b))Object.getOwnPropertyNames(b).forEach(function(A){return h.add(A)});function _(A){if(!A)return A;var O,L=Object.create(r.prototype);for(O in A)if(!h.has(O))try{L[O]=A[O]}catch{}return L}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=_,this.hook("reading",_),r},ht.prototype.defineClass=function(){return this.mapToClass(function(r){p(this,r)})},ht.prototype.add=function(r,o){var a=this,c=this.schema.primKey,d=c.auto,h=c.keyPath,b=r;return h&&d&&(b=Yr(h)(r)),this._trans("readwrite",function(_){return a.core.mutate({trans:_,type:"add",keys:o!=null?[o]:null,values:[b]})}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):_.lastResult}).then(function(_){if(h)try{De(r,h,_)}catch{}return _})},ht.prototype.upsert=function(r,o){var a=this,c=this.schema.primKey.keyPath;return this._trans("readwrite",function(d){return a.core.get({trans:d,key:r}).then(function(h){var b=h??{};return Cs(b,o),c&&De(b,c,r),a.core.mutate({trans:d,type:"put",values:[b],keys:[r],upsert:!0,updates:{keys:[r],changeSpecs:[o]}}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):!!h})})})},ht.prototype.update=function(r,o){return typeof r!="object"||f(r)?this.where(":id").equals(r).modify(o):(r=Pe(r,this.schema.primKey.keyPath),r===void 0?Et(new U.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(o))},ht.prototype.put=function(r,o){var a=this,c=this.schema.primKey,d=c.auto,h=c.keyPath,b=r;return h&&d&&(b=Yr(h)(r)),this._trans("readwrite",function(_){return a.core.mutate({trans:_,type:"put",values:[b],keys:o!=null?[o]:null})}).then(function(_){return _.numFailures?Te.reject(_.failures[0]):_.lastResult}).then(function(_){if(h)try{De(r,h,_)}catch{}return _})},ht.prototype.delete=function(r){var o=this;return this._trans("readwrite",function(a){return o.core.mutate({trans:a,type:"delete",keys:[r]}).then(function(c){return tr(o,[r],c)}).then(function(c){return c.numFailures?Te.reject(c.failures[0]):void 0})})},ht.prototype.clear=function(){var r=this;return this._trans("readwrite",function(o){return r.core.mutate({trans:o,type:"deleteRange",range:_s}).then(function(a){return tr(r,null,a)})}).then(function(o){return o.numFailures?Te.reject(o.failures[0]):void 0})},ht.prototype.bulkGet=function(r){var o=this;return this._trans("readonly",function(a){return o.core.getMany({keys:r,trans:a}).then(function(c){return c.map(function(d){return o.hook.reading.fire(d)})})})},ht.prototype.bulkAdd=function(r,o,a){var c=this,d=Array.isArray(o)?o:void 0,h=(a=a||(d?void 0:o))?a.allKeys:void 0;return this._trans("readwrite",function(b){var O=c.schema.primKey,_=O.auto,O=O.keyPath;if(O&&d)throw new U.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,O=O&&_?r.map(Yr(O)):r;return c.core.mutate({trans:b,type:"add",keys:d,values:O,wantResults:h}).then(function(N){var E=N.numFailures,K=N.results,D=N.lastResult,N=N.failures;if(E===0)return h?K:D;throw new je("".concat(c.name,".bulkAdd(): ").concat(E," of ").concat(A," operations failed"),N)})})},ht.prototype.bulkPut=function(r,o,a){var c=this,d=Array.isArray(o)?o:void 0,h=(a=a||(d?void 0:o))?a.allKeys:void 0;return this._trans("readwrite",function(b){var O=c.schema.primKey,_=O.auto,O=O.keyPath;if(O&&d)throw new U.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(d&&d.length!==r.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");var A=r.length,O=O&&_?r.map(Yr(O)):r;return c.core.mutate({trans:b,type:"put",keys:d,values:O,wantResults:h}).then(function(N){var E=N.numFailures,K=N.results,D=N.lastResult,N=N.failures;if(E===0)return h?K:D;throw new je("".concat(c.name,".bulkPut(): ").concat(E," of ").concat(A," operations failed"),N)})})},ht.prototype.bulkUpdate=function(r){var o=this,a=this.core,c=r.map(function(b){return b.key}),d=r.map(function(b){return b.changes}),h=[];return this._trans("readwrite",function(b){return a.getMany({trans:b,keys:c,cache:"clone"}).then(function(_){var A=[],O=[];r.forEach(function(E,K){var D=E.key,N=E.changes,j=_[K];if(j){for(var F=0,q=Object.keys(N);F<q.length;F++){var G=q[F],Z=N[G];if(G===o.schema.primKey.keyPath){if(it(Z,D)!==0)throw new U.Constraint("Cannot update primary key in bulkUpdate()")}else De(j,G,Z)}h.push(K),A.push(D),O.push(j)}});var L=A.length;return a.mutate({trans:b,type:"put",keys:A,values:O,updates:{keys:c,changeSpecs:d}}).then(function(E){var K=E.numFailures,D=E.failures;if(K===0)return L;for(var N=0,j=Object.keys(D);N<j.length;N++){var F,q=j[N],G=h[Number(q)];G!=null&&(F=D[q],delete D[q],D[G]=F)}throw new je("".concat(o.name,".bulkUpdate(): ").concat(K," of ").concat(L," operations failed"),D)})})})},ht.prototype.bulkDelete=function(r){var o=this,a=r.length;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:r}).then(function(d){return tr(o,r,d)})}).then(function(b){var d=b.numFailures,h=b.lastResult,b=b.failures;if(d===0)return h;throw new je("".concat(o.name,".bulkDelete(): ").concat(d," of ").concat(a," operations failed"),b)})},ht);function ht(){}function kr(r){function o(b,_){if(_){for(var A=arguments.length,O=new Array(A-1);--A;)O[A-1]=arguments[A];return a[b].subscribe.apply(null,O),r}if(typeof b=="string")return a[b]}var a={};o.addEventType=h;for(var c=1,d=arguments.length;c<d;++c)h(arguments[c]);return o;function h(b,_,A){if(typeof b!="object"){var O;_=_||_e;var L={subscribers:[],fire:A=A||y,subscribe:function(E){L.subscribers.indexOf(E)===-1&&(L.subscribers.push(E),L.fire=_(L.fire,E))},unsubscribe:function(E){L.subscribers=L.subscribers.filter(function(K){return K!==E}),L.fire=L.subscribers.reduce(_,A)}};return a[b]=o[b]=L}u(O=b).forEach(function(E){var K=O[E];if(f(K))h(E,O[E][0],O[E][1]);else{if(K!=="asap")throw new U.InvalidArgument("Invalid event config");var D=h(E,x,function(){for(var N=arguments.length,j=new Array(N);N--;)j[N]=arguments[N];D.subscribers.forEach(function(F){$e(function(){F.apply(null,j)})})})}})}}function C(r,o){return Q(o).from({prototype:r}),o}function I(r,o){return!(r.filter||r.algorithm||r.or)&&(o?r.justLimit:!r.replayFilter)}function T(r,o){r.filter=jn(r.filter,o)}function ie(r,o,a){var c=r.replayFilter;r.replayFilter=c?function(){return jn(c(),o())}:o,r.justLimit=a&&!c}function pe(r,o){if(r.isPrimKey)return o.primaryKey;var a=o.getIndexByKeyPath(r.index);if(!a)throw new U.Schema("KeyPath "+r.index+" on object store "+o.name+" is not indexed");return a}function Le(r,o,a){var c=pe(r,o.schema);return o.openCursor({trans:a,values:!r.keysOnly,reverse:r.dir==="prev",unique:!!r.unique,query:{index:c,range:r.range}})}function Oe(r,o,a,c){var d=r.replayFilter?jn(r.filter,r.replayFilter()):r.filter;if(r.or){var h={},b=function(_,A,O){var L,E;d&&!d(A,O,function(K){return A.stop(K)},function(K){return A.fail(K)})||((E=""+(L=A.primaryKey))=="[object ArrayBuffer]"&&(E=""+new Uint8Array(L)),g(h,E)||(h[E]=!0,o(_,A,O)))};return Promise.all([r.or._iterate(b,a),Fe(Le(r,c,a),r.algorithm,b,!r.keysOnly&&r.valueMapper)])}return Fe(Le(r,c,a),jn(r.algorithm,d),o,!r.keysOnly&&r.valueMapper)}function Fe(r,o,a,c){var d=pt(c?function(h,b,_){return a(c(h),b,_)}:a);return r.then(function(h){if(h)return h.start(function(){var b=function(){return h.continue()};o&&!o(h,function(_){return b=_},function(_){h.stop(_),b=y},function(_){h.fail(_),b=y})||d(h.value,h,function(_){return b=_}),b()})})}var jt=(Ge.prototype._read=function(r,o){var a=this._ctx;return a.error?a.table._trans(null,Et.bind(null,a.error)):a.table._trans("readonly",r).then(o)},Ge.prototype._write=function(r){var o=this._ctx;return o.error?o.table._trans(null,Et.bind(null,o.error)):o.table._trans("readwrite",r,"locked")},Ge.prototype._addAlgorithm=function(r){var o=this._ctx;o.algorithm=jn(o.algorithm,r)},Ge.prototype._iterate=function(r,o){return Oe(this._ctx,r,o,this._ctx.table.core)},Ge.prototype.clone=function(r){var o=Object.create(this.constructor.prototype),a=Object.create(this._ctx);return r&&p(a,r),o._ctx=a,o},Ge.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ge.prototype.each=function(r){var o=this._ctx;return this._read(function(a){return Oe(o,r,a,o.table.core)})},Ge.prototype.count=function(r){var o=this;return this._read(function(a){var c=o._ctx,d=c.table.core;if(I(c,!0))return d.count({trans:a,query:{index:pe(c,d.schema),range:c.range}}).then(function(b){return Math.min(b,c.limit)});var h=0;return Oe(c,function(){return++h,!1},a,d).then(function(){return h})}).then(r)},Ge.prototype.sortBy=function(r,o){var a=r.split(".").reverse(),c=a[0],d=a.length-1;function h(A,O){return O?h(A[a[O]],O-1):A[c]}var b=this._ctx.dir==="next"?1:-1;function _(A,O){return it(h(A,d),h(O,d))*b}return this.toArray(function(A){return A.sort(_)}).then(o)},Ge.prototype.toArray=function(r){var o=this;return this._read(function(a){var c=o._ctx;if(c.dir==="next"&&I(c,!0)&&0<c.limit){var d=c.valueMapper,h=pe(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:h,range:c.range}}).then(function(_){return _=_.result,d?_.map(d):_})}var b=[];return Oe(c,function(_){return b.push(_)},a,c.table.core).then(function(){return b})},r)},Ge.prototype.offset=function(r){var o=this._ctx;return r<=0||(o.offset+=r,I(o)?ie(o,function(){var a=r;return function(c,d){return a===0||(a===1?--a:d(function(){c.advance(a),a=0}),!1)}}):ie(o,function(){var a=r;return function(){return--a<0}})),this},Ge.prototype.limit=function(r){return this._ctx.limit=Math.min(this._ctx.limit,r),ie(this._ctx,function(){var o=r;return function(a,c,d){return--o<=0&&c(d),0<=o}},!0),this},Ge.prototype.until=function(r,o){return T(this._ctx,function(a,c,d){return!r(a.value)||(c(d),o)}),this},Ge.prototype.first=function(r){return this.limit(1).toArray(function(o){return o[0]}).then(r)},Ge.prototype.last=function(r){return this.reverse().first(r)},Ge.prototype.filter=function(r){var o;return T(this._ctx,function(a){return r(a.value)}),(o=this._ctx).isMatch=jn(o.isMatch,r),this},Ge.prototype.and=function(r){return this.filter(r)},Ge.prototype.or=function(r){return new this.db.WhereClause(this._ctx.table,r,this)},Ge.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ge.prototype.desc=function(){return this.reverse()},Ge.prototype.eachKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,c){r(c.key,c)})},Ge.prototype.eachUniqueKey=function(r){return this._ctx.unique="unique",this.eachKey(r)},Ge.prototype.eachPrimaryKey=function(r){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(a,c){r(c.primaryKey,c)})},Ge.prototype.keys=function(r){var o=this._ctx;o.keysOnly=!o.isMatch;var a=[];return this.each(function(c,d){a.push(d.key)}).then(function(){return a}).then(r)},Ge.prototype.primaryKeys=function(r){var o=this._ctx;if(o.dir==="next"&&I(o,!0)&&0<o.limit)return this._read(function(c){var d=pe(o,o.table.core.schema);return o.table.core.query({trans:c,values:!1,limit:o.limit,query:{index:d,range:o.range}})}).then(function(c){return c.result}).then(r);o.keysOnly=!o.isMatch;var a=[];return this.each(function(c,d){a.push(d.primaryKey)}).then(function(){return a}).then(r)},Ge.prototype.uniqueKeys=function(r){return this._ctx.unique="unique",this.keys(r)},Ge.prototype.firstKey=function(r){return this.limit(1).keys(function(o){return o[0]}).then(r)},Ge.prototype.lastKey=function(r){return this.reverse().firstKey(r)},Ge.prototype.distinct=function(){var r=this._ctx,r=r.index&&r.table.schema.idxByName[r.index];if(!r||!r.multi)return this;var o={};return T(this._ctx,function(d){var c=d.primaryKey.toString(),d=g(o,c);return o[c]=!0,!d}),this},Ge.prototype.modify=function(r){var o=this,a=this._ctx;return this._write(function(c){var d=typeof r=="function"?r:function(j){return Cs(j,r)},h=a.table.core,O=h.schema.primaryKey,b=O.outbound,_=O.extractKey,A=200,O=o.db._options.modifyChunkSize;O&&(A=typeof O=="object"?O[h.name]||O["*"]||200:O);function L(j,G){var q=G.failures,G=G.numFailures;K+=j-G;for(var Z=0,re=u(q);Z<re.length;Z++){var ve=re[Z];E.push(q[ve])}}var E=[],K=0,D=[],N=r===Cr;return o.clone().primaryKeys().then(function(j){function F(G){var Z=Math.min(A,j.length-G),re=j.slice(G,G+Z);return(N?Promise.resolve([]):h.getMany({trans:c,keys:re,cache:"immutable"})).then(function(ve){var Ee=[],he=[],xe=b?[]:null,Ie=N?re:[];if(!N)for(var ke=0;ke<Z;++ke){var Ne=ve[ke],et={value:H(Ne),primKey:j[G+ke]};d.call(et,et.value,et)!==!1&&(et.value==null?Ie.push(j[G+ke]):b||it(_(Ne),_(et.value))===0?(he.push(et.value),b&&xe.push(j[G+ke])):(Ie.push(j[G+ke]),Ee.push(et.value)))}return Promise.resolve(0<Ee.length&&h.mutate({trans:c,type:"add",values:Ee}).then(function(nt){for(var ot in nt.failures)Ie.splice(parseInt(ot),1);L(Ee.length,nt)})).then(function(){return(0<he.length||q&&typeof r=="object")&&h.mutate({trans:c,type:"put",keys:xe,values:he,criteria:q,changeSpec:typeof r!="function"&&r,isAdditionalChunk:0<G}).then(function(nt){return L(he.length,nt)})}).then(function(){return(0<Ie.length||q&&N)&&h.mutate({trans:c,type:"delete",keys:Ie,criteria:q,isAdditionalChunk:0<G}).then(function(nt){return tr(a.table,Ie,nt)}).then(function(nt){return L(Ie.length,nt)})}).then(function(){return j.length>G+Z&&F(G+A)})})}var q=I(a)&&a.limit===1/0&&(typeof r!="function"||N)&&{index:a.index,range:a.range};return F(0).then(function(){if(0<E.length)throw new le("Error modifying one or more objects",E,K,D);return j.length})})})},Ge.prototype.delete=function(){var r=this._ctx,o=r.range;return!I(r)||r.table.schema.yProps||!r.isPrimKey&&o.type!==3?this.modify(Cr):this._write(function(a){var c=r.table.core.schema.primaryKey,d=o;return r.table.core.count({trans:a,query:{index:c,range:d}}).then(function(h){return r.table.core.mutate({trans:a,type:"deleteRange",range:d}).then(function(A){var _=A.failures,A=A.numFailures;if(A)throw new le("Could not delete some values",Object.keys(_).map(function(O){return _[O]}),h-A);return h-A})})})},Ge);function Ge(){}var Cr=function(r,o){return o.value=null};function mo(r,o){return r<o?-1:r===o?0:1}function Es(r,o){return o<r?-1:r===o?0:1}function Tt(r,o,a){return r=r instanceof nl?new r.Collection(r):r,r._ctx.error=new(a||TypeError)(o),r}function Jr(r){return new r.Collection(r,function(){return tl("")}).limit(0)}function go(r,o,a,c){var d,h,b,_,A,O,L,E=a.length;if(!a.every(function(N){return typeof N=="string"}))return Tt(r,fo);function K(N){d=N==="next"?function(F){return F.toUpperCase()}:function(F){return F.toLowerCase()},h=N==="next"?function(F){return F.toLowerCase()}:function(F){return F.toUpperCase()},b=N==="next"?mo:Es;var j=a.map(function(F){return{lower:h(F),upper:d(F)}}).sort(function(F,q){return b(F.lower,q.lower)});_=j.map(function(F){return F.upper}),A=j.map(function(F){return F.lower}),L=(O=N)==="next"?"":c}K("next"),r=new r.Collection(r,function(){return rr(_[0],A[E-1]+c)}),r._ondirectionchange=function(N){K(N)};var D=0;return r._addAlgorithm(function(N,j,F){var q=N.key;if(typeof q!="string")return!1;var G=h(q);if(o(G,A,D))return!0;for(var Z=null,re=D;re<E;++re){var ve=(function(Ee,he,xe,Ie,ke,Ne){for(var et=Math.min(Ee.length,Ie.length),nt=-1,ot=0;ot<et;++ot){var nn=he[ot];if(nn!==Ie[ot])return ke(Ee[ot],xe[ot])<0?Ee.substr(0,ot)+xe[ot]+xe.substr(ot+1):ke(Ee[ot],Ie[ot])<0?Ee.substr(0,ot)+Ie[ot]+xe.substr(ot+1):0<=nt?Ee.substr(0,nt)+he[nt]+xe.substr(nt+1):null;ke(Ee[ot],nn)<0&&(nt=ot)}return et<Ie.length&&Ne==="next"?Ee+xe.substr(Ee.length):et<Ee.length&&Ne==="prev"?Ee.substr(0,xe.length):nt<0?null:Ee.substr(0,nt)+Ie[nt]+xe.substr(nt+1)})(q,G,_[re],A[re],b,O);ve===null&&Z===null?D=re+1:(Z===null||0<b(Z,ve))&&(Z=ve)}return j(Z!==null?function(){N.continue(Z+L)}:F),!1}),r}function rr(r,o,a,c){return{type:2,lower:r,upper:o,lowerOpen:a,upperOpen:c}}function tl(r){return{type:1,lower:r,upper:r}}var nl=(Object.defineProperty($t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$t.prototype.between=function(r,o,a,c){a=a!==!1,c=c===!0;try{return 0<this._cmp(r,o)||this._cmp(r,o)===0&&(a||c)&&(!a||!c)?Jr(this):new this.Collection(this,function(){return rr(r,o,!a,!c)})}catch{return Tt(this,hn)}},$t.prototype.equals=function(r){return r==null?Tt(this,hn):new this.Collection(this,function(){return tl(r)})},$t.prototype.above=function(r){return r==null?Tt(this,hn):new this.Collection(this,function(){return rr(r,void 0,!0)})},$t.prototype.aboveOrEqual=function(r){return r==null?Tt(this,hn):new this.Collection(this,function(){return rr(r,void 0,!1)})},$t.prototype.below=function(r){return r==null?Tt(this,hn):new this.Collection(this,function(){return rr(void 0,r,!1,!0)})},$t.prototype.belowOrEqual=function(r){return r==null?Tt(this,hn):new this.Collection(this,function(){return rr(void 0,r)})},$t.prototype.startsWith=function(r){return typeof r!="string"?Tt(this,fo):this.between(r,r+Nn,!0,!0)},$t.prototype.startsWithIgnoreCase=function(r){return r===""?this.startsWith(r):go(this,function(o,a){return o.indexOf(a[0])===0},[r],Nn)},$t.prototype.equalsIgnoreCase=function(r){return go(this,function(o,a){return o===a[0]},[r],"")},$t.prototype.anyOfIgnoreCase=function(){var r=tt.apply(ze,arguments);return r.length===0?Jr(this):go(this,function(o,a){return a.indexOf(o)!==-1},r,"")},$t.prototype.startsWithAnyOfIgnoreCase=function(){var r=tt.apply(ze,arguments);return r.length===0?Jr(this):go(this,function(o,a){return a.some(function(c){return o.indexOf(c)===0})},r,Nn)},$t.prototype.anyOf=function(){var r=this,o=tt.apply(ze,arguments),a=this._cmp;try{o.sort(a)}catch{return Tt(this,hn)}if(o.length===0)return Jr(this);var c=new this.Collection(this,function(){return rr(o[0],o[o.length-1])});c._ondirectionchange=function(h){a=h==="next"?r._ascending:r._descending,o.sort(a)};var d=0;return c._addAlgorithm(function(h,b,_){for(var A=h.key;0<a(A,o[d]);)if(++d===o.length)return b(_),!1;return a(A,o[d])===0||(b(function(){h.continue(o[d])}),!1)}),c},$t.prototype.notEqual=function(r){return this.inAnyRange([[-1/0,r],[r,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$t.prototype.noneOf=function(){var r=tt.apply(ze,arguments);if(r.length===0)return new this.Collection(this);try{r.sort(this._ascending)}catch{return Tt(this,hn)}var o=r.reduce(function(a,c){return a?a.concat([[a[a.length-1][1],c]]):[[-1/0,c]]},null);return o.push([r[r.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},$t.prototype.inAnyRange=function(q,o){var a=this,c=this._cmp,d=this._ascending,h=this._descending,b=this._min,_=this._max;if(q.length===0)return Jr(this);if(!q.every(function(G){return G[0]!==void 0&&G[1]!==void 0&&d(G[0],G[1])<=0}))return Tt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",U.InvalidArgument);var A=!o||o.includeLowers!==!1,O=o&&o.includeUppers===!0,L,E=d;function K(G,Z){return E(G[0],Z[0])}try{(L=q.reduce(function(G,Z){for(var re=0,ve=G.length;re<ve;++re){var Ee=G[re];if(c(Z[0],Ee[1])<0&&0<c(Z[1],Ee[0])){Ee[0]=b(Ee[0],Z[0]),Ee[1]=_(Ee[1],Z[1]);break}}return re===ve&&G.push(Z),G},[])).sort(K)}catch{return Tt(this,hn)}var D=0,N=O?function(G){return 0<d(G,L[D][1])}:function(G){return 0<=d(G,L[D][1])},j=A?function(G){return 0<h(G,L[D][0])}:function(G){return 0<=h(G,L[D][0])},F=N,q=new this.Collection(this,function(){return rr(L[0][0],L[L.length-1][1],!A,!O)});return q._ondirectionchange=function(G){E=G==="next"?(F=N,d):(F=j,h),L.sort(K)},q._addAlgorithm(function(G,Z,re){for(var ve,Ee=G.key;F(Ee);)if(++D===L.length)return Z(re),!1;return!N(ve=Ee)&&!j(ve)||(a._cmp(Ee,L[D][1])===0||a._cmp(Ee,L[D][0])===0||Z(function(){E===d?G.continue(L[D][0]):G.continue(L[D][1])}),!1)}),q},$t.prototype.startsWithAnyOf=function(){var r=tt.apply(ze,arguments);return r.every(function(o){return typeof o=="string"})?r.length===0?Jr(this):this.inAnyRange(r.map(function(o){return[o,o+Nn]})):Tt(this,"startsWithAnyOf() only works with strings")},$t);function $t(){}function Sn(r){return pt(function(o){return Is(o),r(o.target.error),!1})}function Is(r){r.stopPropagation&&r.stopPropagation(),r.preventDefault&&r.preventDefault()}var As="storagemutated",bi="x-storagemutated-1",sr=kr(null,As),gf=(En.prototype._lock=function(){return X(!Re.global),++this._reculock,this._reculock!==1||Re.global||(Re.lockOwnerFor=this),this},En.prototype._unlock=function(){if(X(!Re.global),--this._reculock==0)for(Re.global||(Re.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var r=this._blockedFuncs.shift();try{$n(r[1],r[0])}catch{}}return this},En.prototype._locked=function(){return this._reculock&&Re.lockOwnerFor!==this},En.prototype.create=function(r){var o=this;if(!this.mode)return this;var a=this.db.idbdb,c=this.db._state.dbOpenError;if(X(!this.idbtrans),!r&&!a)switch(c&&c.name){case"DatabaseClosedError":throw new U.DatabaseClosed(c);case"MissingAPIError":throw new U.MissingAPI(c.message,c);default:throw new U.OpenFailed(c)}if(!this.active)throw new U.TransactionInactive;return X(this._completion._state===null),(r=this.idbtrans=r||(this.db.core||a).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=pt(function(d){Is(d),o._reject(r.error)}),r.onabort=pt(function(d){Is(d),o.active&&o._reject(new U.Abort(r.error)),o.active=!1,o.on("abort").fire(d)}),r.oncomplete=pt(function(){o.active=!1,o._resolve(),"mutatedParts"in r&&sr.storagemutated.fire(r.mutatedParts)}),this},En.prototype._promise=function(r,o,a){var c=this;if(r==="readwrite"&&this.mode!=="readwrite")return Et(new U.ReadOnly("Transaction is readonly"));if(!this.active)return Et(new U.TransactionInactive);if(this._locked())return new Te(function(h,b){c._blockedFuncs.push([function(){c._promise(r,o,a).then(h,b)},Re])});if(a)return _n(function(){var h=new Te(function(b,_){c._lock();var A=o(b,_,c);A&&A.then&&A.then(b,_)});return h.finally(function(){return c._unlock()}),h._lib=!0,h});var d=new Te(function(h,b){var _=o(h,b,c);_&&_.then&&_.then(h,b)});return d._lib=!0,d},En.prototype._root=function(){return this.parent?this.parent._root():this},En.prototype.waitFor=function(r){var o,a=this._root(),c=Te.resolve(r);a._waitingFor?a._waitingFor=a._waitingFor.then(function(){return c}):(a._waitingFor=c,a._waitingQueue=[],o=a.idbtrans.objectStore(a.storeNames[0]),(function h(){for(++a._spinCount;a._waitingQueue.length;)a._waitingQueue.shift()();a._waitingFor&&(o.get(-1/0).onsuccess=h)})());var d=a._waitingFor;return new Te(function(h,b){c.then(function(_){return a._waitingQueue.push(pt(h.bind(null,_)))},function(_){return a._waitingQueue.push(pt(b.bind(null,_)))}).finally(function(){a._waitingFor===d&&(a._waitingFor=null)})})},En.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new U.Abort))},En.prototype.table=function(r){var o=this._memoizedTables||(this._memoizedTables={});if(g(o,r))return o[r];var a=this.schema[r];if(!a)throw new U.NotFound("Table "+r+" not part of transaction");return a=new this.db.Table(r,a,this),a.core=this.db.core.table(r),o[r]=a},En);function En(){}function wi(r,o,a,c,d,h,b,_){return{name:r,keyPath:o,unique:a,multi:c,auto:d,compound:h,src:(a&&!b?"&":"")+(c?"*":"")+(d?"++":"")+rl(o),type:_}}function rl(r){return typeof r=="string"?r:r?"["+[].join.call(r,"+")+"]":""}function xi(r,o,a){return{name:r,primKey:o,indexes:a,mappedClass:null,idxByName:(c=function(d){return[d.name,d]},a.reduce(function(d,h,b){return b=c(h,b),b&&(d[b[0]]=b[1]),d},{}))};var c}var Ts=function(r){try{return r.only([[]]),Ts=function(){return[[]]},[[]]}catch{return Ts=function(){return Nn},Nn}};function _i(r){return r==null?function(){}:typeof r=="string"?(o=r).split(".").length===1?function(a){return a[o]}:function(a){return Pe(a,o)}:function(a){return Pe(a,r)};var o}function sl(r){return[].slice.call(r)}var vf=0;function Os(r){return r==null?":id":typeof r=="string"?r:"[".concat(r.join("+"),"]")}function yf(r,o,A){function c(F){if(F.type===3)return null;if(F.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var D=F.lower,N=F.upper,j=F.lowerOpen,F=F.upperOpen;return D===void 0?N===void 0?null:o.upperBound(N,!!F):N===void 0?o.lowerBound(D,!!j):o.bound(D,N,!!j,!!F)}function d(K){var D,N=K.name;return{name:N,schema:K,mutate:function(j){var F=j.trans,q=j.type,G=j.keys,Z=j.values,re=j.range;return new Promise(function(ve,Ee){ve=pt(ve);var he=F.objectStore(N),xe=he.keyPath==null,Ie=q==="put"||q==="add";if(!Ie&&q!=="delete"&&q!=="deleteRange")throw new Error("Invalid operation type: "+q);var ke,Ne=(G||Z||{length:1}).length;if(G&&Z&&G.length!==Z.length)throw new Error("Given keys array must have same length as given values array.");if(Ne===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function et(Ht){++nn,Is(Ht)}var nt=[],ot=[],nn=0;if(q==="deleteRange"){if(re.type===4)return ve({numFailures:nn,failures:ot,results:[],lastResult:void 0});re.type===3?nt.push(ke=he.clear()):nt.push(ke=he.delete(c(re)))}else{var xe=Ie?xe?[Z,G]:[Z,null]:[G,null],Xe=xe[0],Ft=xe[1];if(Ie)for(var Kt=0;Kt<Ne;++Kt)nt.push(ke=Ft&&Ft[Kt]!==void 0?he[q](Xe[Kt],Ft[Kt]):he[q](Xe[Kt])),ke.onerror=et;else for(Kt=0;Kt<Ne;++Kt)nt.push(ke=he[q](Xe[Kt])),ke.onerror=et}function Ao(Ht){Ht=Ht.target.result,nt.forEach(function(Ir,Fi){return Ir.error!=null&&(ot[Fi]=Ir.error)}),ve({numFailures:nn,failures:ot,results:q==="delete"?G:nt.map(function(Ir){return Ir.result}),lastResult:Ht})}ke.onerror=function(Ht){et(Ht),Ao(Ht)},ke.onsuccess=Ao})},getMany:function(j){var F=j.trans,q=j.keys;return new Promise(function(G,Z){G=pt(G);for(var re,ve=F.objectStore(N),Ee=q.length,he=new Array(Ee),xe=0,Ie=0,ke=function(nt){nt=nt.target,he[nt._pos]=nt.result,++Ie===xe&&G(he)},Ne=Sn(Z),et=0;et<Ee;++et)q[et]!=null&&((re=ve.get(q[et]))._pos=et,re.onsuccess=ke,re.onerror=Ne,++xe);xe===0&&G(he)})},get:function(j){var F=j.trans,q=j.key;return new Promise(function(G,Z){G=pt(G);var re=F.objectStore(N).get(q);re.onsuccess=function(ve){return G(ve.target.result)},re.onerror=Sn(Z)})},query:(D=O,function(j){return new Promise(function(F,q){F=pt(F);var G,Z,re,xe=j.trans,ve=j.values,Ee=j.limit,ke=j.query,he=Ee===1/0?void 0:Ee,Ie=ke.index,ke=ke.range,xe=xe.objectStore(N),Ie=Ie.isPrimaryKey?xe:xe.index(Ie.name),ke=c(ke);if(Ee===0)return F({result:[]});D?((he=ve?Ie.getAll(ke,he):Ie.getAllKeys(ke,he)).onsuccess=function(Ne){return F({result:Ne.target.result})},he.onerror=Sn(q)):(G=0,Z=!ve&&"openKeyCursor"in Ie?Ie.openKeyCursor(ke):Ie.openCursor(ke),re=[],Z.onsuccess=function(Ne){var et=Z.result;return et?(re.push(ve?et.value:et.primaryKey),++G===Ee?F({result:re}):void et.continue()):F({result:re})},Z.onerror=Sn(q))})}),openCursor:function(j){var F=j.trans,q=j.values,G=j.query,Z=j.reverse,re=j.unique;return new Promise(function(ve,Ee){ve=pt(ve);var Ie=G.index,he=G.range,xe=F.objectStore(N),xe=Ie.isPrimaryKey?xe:xe.index(Ie.name),Ie=Z?re?"prevunique":"prev":re?"nextunique":"next",ke=!q&&"openKeyCursor"in xe?xe.openKeyCursor(c(he),Ie):xe.openCursor(c(he),Ie);ke.onerror=Sn(Ee),ke.onsuccess=pt(function(Ne){var et,nt,ot,nn,Xe=ke.result;Xe?(Xe.___id=++vf,Xe.done=!1,et=Xe.continue.bind(Xe),nt=(nt=Xe.continuePrimaryKey)&&nt.bind(Xe),ot=Xe.advance.bind(Xe),nn=function(){throw new Error("Cursor not stopped")},Xe.trans=F,Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=function(){throw new Error("Cursor not started")},Xe.fail=pt(Ee),Xe.next=function(){var Ft=this,Kt=1;return this.start(function(){return Kt--?Ft.continue():Ft.stop()}).then(function(){return Ft})},Xe.start=function(Ft){function Kt(){if(ke.result)try{Ft()}catch(Ht){Xe.fail(Ht)}else Xe.done=!0,Xe.start=function(){throw new Error("Cursor behind last entry")},Xe.stop()}var Ao=new Promise(function(Ht,Ir){Ht=pt(Ht),ke.onerror=Sn(Ir),Xe.fail=Ir,Xe.stop=function(Fi){Xe.stop=Xe.continue=Xe.continuePrimaryKey=Xe.advance=nn,Ht(Fi)}});return ke.onsuccess=pt(function(Ht){ke.onsuccess=Kt,Kt()}),Xe.continue=et,Xe.continuePrimaryKey=nt,Xe.advance=ot,Kt(),Ao},ve(Xe)):ve(null)},Ee)})},count:function(j){var F=j.query,q=j.trans,G=F.index,Z=F.range;return new Promise(function(re,ve){var Ee=q.objectStore(N),he=G.isPrimaryKey?Ee:Ee.index(G.name),Ee=c(Z),he=Ee?he.count(Ee):he.count();he.onsuccess=pt(function(xe){return re(xe.target.result)}),he.onerror=Sn(ve)})}}}var h,b,_,L=(b=A,_=sl((h=r).objectStoreNames),{schema:{name:h.name,tables:_.map(function(K){return b.objectStore(K)}).map(function(K){var D=K.keyPath,F=K.autoIncrement,N=f(D),j={},F={name:K.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:D==null,compound:N,keyPath:D,autoIncrement:F,unique:!0,extractKey:_i(D)},indexes:sl(K.indexNames).map(function(q){return K.index(q)}).map(function(re){var G=re.name,Z=re.unique,ve=re.multiEntry,re=re.keyPath,ve={name:G,compound:f(re),keyPath:re,unique:Z,multiEntry:ve,extractKey:_i(re)};return j[Os(re)]=ve}),getIndexByKeyPath:function(q){return j[Os(q)]}};return j[":id"]=F.primaryKey,D!=null&&(j[Os(D)]=F.primaryKey),F})},hasGetAll:0<_.length&&"getAll"in b.objectStore(_[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),A=L.schema,O=L.hasGetAll,L=A.tables.map(d),E={};return L.forEach(function(K){return E[K.name]=K}),{stack:"dbcore",transaction:r.transaction.bind(r),table:function(K){if(!E[K])throw new Error("Table '".concat(K,"' not found"));return E[K]},MIN_KEY:-1/0,MAX_KEY:Ts(o),schema:A}}function bf(r,o,a,c){var d=a.IDBKeyRange;return a.indexedDB,{dbcore:(c=yf(o,d,c),r.dbcore.reduce(function(h,b){return b=b.create,s(s({},h),b(h))},c))}}function vo(r,c){var a=c.db,c=bf(r._middlewares,a,r._deps,c);r.core=c.dbcore,r.tables.forEach(function(d){var h=d.name;r.core.schema.tables.some(function(b){return b.name===h})&&(d.core=r.core.table(h),r[h]instanceof r.Table&&(r[h].core=d.core))})}function yo(r,o,a,c){a.forEach(function(d){var h=c[d];o.forEach(function(b){var _=(function A(O,L){return se(O,L)||(O=v(O))&&A(O,L)})(b,d);(!_||"value"in _&&_.value===void 0)&&(b===r.Transaction.prototype||b instanceof r.Transaction?P(b,d,{get:function(){return this.table(d)},set:function(A){S(this,d,{value:A,writable:!0,configurable:!0,enumerable:!0})}}):b[d]=new r.Table(d,h))})})}function ki(r,o){o.forEach(function(a){for(var c in a)a[c]instanceof r.Table&&delete a[c]})}function wf(r,o){return r._cfg.version-o._cfg.version}function xf(r,o,a,c){var d=r._dbSchema;a.objectStoreNames.contains("$meta")&&!d.$meta&&(d.$meta=xi("$meta",il("")[0],[]),r._storeNames.push("$meta"));var h=r._createTransaction("readwrite",r._storeNames,d);h.create(a),h._completion.catch(c);var b=h._reject.bind(h),_=Re.transless||Re;_n(function(){return Re.trans=h,Re.transless=_,o!==0?(vo(r,a),O=o,((A=h).storeNames.includes("$meta")?A.table("$meta").get("version").then(function(L){return L??O}):Te.resolve(O)).then(function(L){return K=L,D=h,N=a,j=[],L=(E=r)._versions,F=E._dbSchema=wo(0,E.idbdb,N),(L=L.filter(function(q){return q._cfg.version>=K})).length!==0?(L.forEach(function(q){j.push(function(){var G=F,Z=q._cfg.dbschema;xo(E,G,N),xo(E,Z,N),F=E._dbSchema=Z;var re=Ci(G,Z);re.add.forEach(function(Ie){Si(N,Ie[0],Ie[1].primKey,Ie[1].indexes)}),re.change.forEach(function(Ie){if(Ie.recreate)throw new U.Upgrade("Not yet support for changing primary key");var ke=N.objectStore(Ie.name);Ie.add.forEach(function(Ne){return bo(ke,Ne)}),Ie.change.forEach(function(Ne){ke.deleteIndex(Ne.name),bo(ke,Ne)}),Ie.del.forEach(function(Ne){return ke.deleteIndex(Ne)})});var ve=q._cfg.contentUpgrade;if(ve&&q._cfg.version>K){vo(E,N),D._memoizedTables={};var Ee=rt(Z);re.del.forEach(function(Ie){Ee[Ie]=G[Ie]}),ki(E,[E.Transaction.prototype]),yo(E,[E.Transaction.prototype],u(Ee),Ee),D.schema=Ee;var he,xe=bt(ve);return xe&&Zn(),re=Te.follow(function(){var Ie;(he=ve(D))&&xe&&(Ie=kn.bind(null,null),he.then(Ie,Ie))}),he&&typeof he.then=="function"?Te.resolve(he):re.then(function(){return he})}}),j.push(function(G){var Z,re,ve=q._cfg.dbschema;Z=ve,re=G,[].slice.call(re.db.objectStoreNames).forEach(function(Ee){return Z[Ee]==null&&re.db.deleteObjectStore(Ee)}),ki(E,[E.Transaction.prototype]),yo(E,[E.Transaction.prototype],E._storeNames,E._dbSchema),D.schema=E._dbSchema}),j.push(function(G){E.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(E.idbdb.version/10)===q._cfg.version?(E.idbdb.deleteObjectStore("$meta"),delete E._dbSchema.$meta,E._storeNames=E._storeNames.filter(function(Z){return Z!=="$meta"})):G.objectStore("$meta").put(q._cfg.version,"version"))})}),(function q(){return j.length?Te.resolve(j.shift()(D.idbtrans)).then(q):Te.resolve()})().then(function(){ol(F,N)})):Te.resolve();var E,K,D,N,j,F}).catch(b)):(u(d).forEach(function(L){Si(a,L,d[L].primKey,d[L].indexes)}),vo(r,a),void Te.follow(function(){return r.on.populate.fire(h)}).catch(b));var A,O})}function _f(r,o){ol(r._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var a=wo(0,r.idbdb,o);xo(r,r._dbSchema,o);for(var c=0,d=Ci(a,r._dbSchema).change;c<d.length;c++){var h=(function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var _=o.objectStore(b.name);b.add.forEach(function(A){oe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(A.src)),bo(_,A)})})(d[c]);if(typeof h=="object")return h.value}}function Ci(r,o){var a,c={del:[],add:[],change:[]};for(a in r)o[a]||c.del.push(a);for(a in o){var d=r[a],h=o[a];if(d){var b={name:a,def:h,recreate:!1,del:[],add:[],change:[]};if(""+(d.primKey.keyPath||"")!=""+(h.primKey.keyPath||"")||d.primKey.auto!==h.primKey.auto)b.recreate=!0,c.change.push(b);else{var _=d.idxByName,A=h.idxByName,O=void 0;for(O in _)A[O]||b.del.push(O);for(O in A){var L=_[O],E=A[O];L?L.src!==E.src&&b.change.push(E):b.add.push(E)}(0<b.del.length||0<b.add.length||0<b.change.length)&&c.change.push(b)}}else c.add.push([a,h])}return c}function Si(r,o,a,c){var d=r.db.createObjectStore(o,a.keyPath?{keyPath:a.keyPath,autoIncrement:a.auto}:{autoIncrement:a.auto});return c.forEach(function(h){return bo(d,h)}),d}function ol(r,o){u(r).forEach(function(a){o.db.objectStoreNames.contains(a)||(oe&&console.debug("Dexie: Creating missing table",a),Si(o,a,r[a].primKey,r[a].indexes))})}function bo(r,o){r.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function wo(r,o,a){var c={};return B(o.objectStoreNames,0).forEach(function(d){for(var h=a.objectStore(d),b=wi(rl(O=h.keyPath),O||"",!0,!1,!!h.autoIncrement,O&&typeof O!="string",!0),_=[],A=0;A<h.indexNames.length;++A){var L=h.index(h.indexNames[A]),O=L.keyPath,L=wi(L.name,O,!!L.unique,!!L.multiEntry,!1,O&&typeof O!="string",!1);_.push(L)}c[d]=xi(d,b,_)}),c}function xo(r,o,a){for(var c=a.db.objectStoreNames,d=0;d<c.length;++d){var h=c[d],b=a.objectStore(h);r._hasGetAll="getAll"in b;for(var _=0;_<b.indexNames.length;++_){var A=b.indexNames[_],O=b.index(A).keyPath,L=typeof O=="string"?O:"["+B(O).join("+")+"]";!o[h]||(O=o[h].idxByName[L])&&(O.name=A,delete o[h].idxByName[L],o[h].idxByName[A]=O)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function il(r){return r.split(",").map(function(o,a){var h=o.split(":"),c=(d=h[1])===null||d===void 0?void 0:d.trim(),d=(o=h[0].trim()).replace(/([&*]|\+\+)/g,""),h=/^\[/.test(d)?d.match(/^\[(.*)\]$/)[1].split("+"):d;return wi(d,h||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),f(h),a===0,c)})}var kf=(Qr.prototype._createTableSchema=xi,Qr.prototype._parseIndexSyntax=il,Qr.prototype._parseStoresSpec=function(r,o){var a=this;u(r).forEach(function(c){if(r[c]!==null){var d=a._parseIndexSyntax(r[c]),h=d.shift();if(!h)throw new U.Schema("Invalid schema for table "+c+": "+r[c]);if(h.unique=!0,h.multi)throw new U.Schema("Primary key cannot be multiEntry*");d.forEach(function(b){if(b.auto)throw new U.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new U.Schema("Index must have a name and cannot be an empty string")}),d=a._createTableSchema(c,h,d),o[c]=d}})},Qr.prototype.stores=function(a){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,a):a;var a=o._versions,c={},d={};return a.forEach(function(h){p(c,h._cfg.storesSource),d=h._cfg.dbschema={},h._parseStoresSpec(c,d)}),o._dbSchema=d,ki(o,[o._allTables,o,o.Transaction.prototype]),yo(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],u(d),d),o._storeNames=u(d),this},Qr.prototype.upgrade=function(r){return this._cfg.contentUpgrade=ge(this._cfg.contentUpgrade||y,r),this},Qr);function Qr(){}function Ei(r,o){var a=r._dbNamesDB;return a||(a=r._dbNamesDB=new Ln(Gr,{addons:[],indexedDB:r,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),a.table("dbnames")}function Ii(r){return r&&typeof r.databases=="function"}function Ai(r){return _n(function(){return Re.letThrough=!0,r()})}function Ti(r){return!("from"in r)}var Bt=function(r,o){if(!this){var a=new Bt;return r&&"d"in r&&p(a,r),a}p(this,arguments.length?{d:1,from:r,to:1<arguments.length?o:r}:{d:0})};function Rs(r,o,a){var c=it(o,a);if(!isNaN(c)){if(0<c)throw RangeError();if(Ti(r))return p(r,{from:o,to:a,d:1});var d=r.l,c=r.r;if(it(a,r.from)<0)return d?Rs(d,o,a):r.l={from:o,to:a,d:1,l:null,r:null},ll(r);if(0<it(o,r.to))return c?Rs(c,o,a):r.r={from:o,to:a,d:1,l:null,r:null},ll(r);it(o,r.from)<0&&(r.from=o,r.l=null,r.d=c?c.d+1:1),0<it(a,r.to)&&(r.to=a,r.r=null,r.d=r.l?r.l.d+1:1),a=!r.r,d&&!r.l&&Ds(r,d),c&&a&&Ds(r,c)}}function Ds(r,o){Ti(o)||(function a(c,A){var h=A.from,b=A.to,_=A.l,A=A.r;Rs(c,h,b),_&&a(c,_),A&&a(c,A)})(r,o)}function al(r,o){var a=_o(o),c=a.next();if(c.done)return!1;for(var d=c.value,h=_o(r),b=h.next(d.from),_=b.value;!c.done&&!b.done;){if(it(_.from,d.to)<=0&&0<=it(_.to,d.from))return!0;it(d.from,_.from)<0?d=(c=a.next(_.from)).value:_=(b=h.next(d.from)).value}return!1}function _o(r){var o=Ti(r)?null:{s:0,n:r};return{next:function(a){for(var c=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,c)for(;o.n.l&&it(a,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!c||it(a,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function ll(r){var o,a,c=(((o=r.r)===null||o===void 0?void 0:o.d)||0)-(((a=r.l)===null||a===void 0?void 0:a.d)||0),d=1<c?"r":c<-1?"l":"";d&&(o=d=="r"?"l":"r",a=s({},r),c=r[d],r.from=c.from,r.to=c.to,r[d]=c[d],a[d]=c[o],(r[o]=a).d=cl(a)),r.d=cl(r)}function cl(a){var o=a.r,a=a.l;return(o?a?Math.max(o.d,a.d):o.d:a?a.d:0)+1}function ko(r,o){return u(o).forEach(function(a){r[a]?Ds(r[a],o[a]):r[a]=(function c(d){var h,b,_={};for(h in d)g(d,h)&&(b=d[h],_[h]=!b||typeof b!="object"||Ye.has(b.constructor)?b:c(b));return _})(o[a])}),r}function Oi(r,o){return r.all||o.all||Object.keys(r).some(function(a){return o[a]&&al(o[a],r[a])})}w(Bt.prototype,((cn={add:function(r){return Ds(this,r),this},addKey:function(r){return Rs(this,r,r),this},addKeys:function(r){var o=this;return r.forEach(function(a){return Rs(o,a,a)}),this},hasKey:function(r){var o=_o(this).next(r).value;return o&&it(o.from,r)<=0&&0<=it(o.to,r)}})[me]=function(){return _o(this)},cn));var Sr={},Ri={},Di=!1;function Co(r){ko(Ri,r),Di||(Di=!0,setTimeout(function(){Di=!1,Pi(Ri,!(Ri={}))},0))}function Pi(r,o){o===void 0&&(o=!1);var a=new Set;if(r.all)for(var c=0,d=Object.values(Sr);c<d.length;c++)ul(b=d[c],r,a,o);else for(var h in r){var b,_=/^idb\:\/\/(.*)\/(.*)\//.exec(h);_&&(h=_[1],_=_[2],(b=Sr["idb://".concat(h,"/").concat(_)])&&ul(b,r,a,o))}a.forEach(function(A){return A()})}function ul(r,o,a,c){for(var d=[],h=0,b=Object.entries(r.queries.query);h<b.length;h++){for(var _=b[h],A=_[0],O=[],L=0,E=_[1];L<E.length;L++){var K=E[L];Oi(o,K.obsSet)?K.subscribers.forEach(function(F){return a.add(F)}):c&&O.push(K)}c&&d.push([A,O])}if(c)for(var D=0,N=d;D<N.length;D++){var j=N[D],A=j[0],O=j[1];r.queries.query[A]=O}}function Cf(r){var o=r._state,a=r._deps.indexedDB;if(o.isBeingOpened||r.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Et(o.dbOpenError):r});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var c=o.openCanceller,d=Math.round(10*r.verno),h=!1;function b(){if(o.openCanceller!==c)throw new U.DatabaseClosed("db.open() was cancelled")}function _(){return new Te(function(K,D){if(b(),!a)throw new U.MissingAPI;var N=r.name,j=o.autoSchema||!d?a.open(N):a.open(N,d);if(!j)throw new U.MissingAPI;j.onerror=Sn(D),j.onblocked=pt(r._fireOnBlocked),j.onupgradeneeded=pt(function(F){var q;L=j.transaction,o.autoSchema&&!r._options.allowEmptyDB?(j.onerror=Is,L.abort(),j.result.close(),(q=a.deleteDatabase(N)).onsuccess=q.onerror=pt(function(){D(new U.NoSuchDatabase("Database ".concat(N," doesnt exist")))})):(L.onerror=Sn(D),F=F.oldVersion>Math.pow(2,62)?0:F.oldVersion,E=F<1,r.idbdb=j.result,h&&_f(r,L),xf(r,F/10,L,D))},D),j.onsuccess=pt(function(){L=null;var F,q,G,Z,re,ve=r.idbdb=j.result,Ee=B(ve.objectStoreNames);if(0<Ee.length)try{var he=ve.transaction((Z=Ee).length===1?Z[0]:Z,"readonly");if(o.autoSchema)q=ve,G=he,(F=r).verno=q.version/10,G=F._dbSchema=wo(0,q,G),F._storeNames=B(q.objectStoreNames,0),yo(F,[F._allTables],u(G),G);else if(xo(r,r._dbSchema,he),((re=Ci(wo(0,(re=r).idbdb,he),re._dbSchema)).add.length||re.change.some(function(xe){return xe.add.length||xe.change.length}))&&!h)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),d=ve.version+1,h=!0,K(_());vo(r,he)}catch{}er.push(r),ve.onversionchange=pt(function(xe){o.vcFired=!0,r.on("versionchange").fire(xe)}),ve.onclose=pt(function(){r.close({disableAutoOpen:!1})}),E&&(re=r._deps,he=N,ve=re.indexedDB,re=re.IDBKeyRange,Ii(ve)||he===Gr||Ei(ve,re).put({name:he}).catch(y)),K()},D)}).catch(function(K){switch(K?.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),_();break;case"VersionError":if(0<d)return d=0,_()}return Te.reject(K)})}var A,O=o.dbReadyResolve,L=null,E=!1;return Te.race([c,(typeof navigator>"u"?Te.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(K){function D(){return indexedDB.databases().finally(K)}A=setInterval(D,100),D()}).finally(function(){return clearInterval(A)}):Promise.resolve()).then(_)]).then(function(){return b(),o.onReadyBeingFired=[],Te.resolve(Ai(function(){return r.on.ready.fire(r.vip)})).then(function K(){if(0<o.onReadyBeingFired.length){var D=o.onReadyBeingFired.reduce(ge,y);return o.onReadyBeingFired=[],Te.resolve(Ai(function(){return D(r.vip)})).then(K)}})}).finally(function(){o.openCanceller===c&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(K){o.dbOpenError=K;try{L&&L.abort()}catch{}return c===o.openCanceller&&r._close(),Et(K)}).finally(function(){o.openComplete=!0,O()}).then(function(){var K;return E&&(K={},r.tables.forEach(function(D){D.schema.indexes.forEach(function(N){N.name&&(K["idb://".concat(r.name,"/").concat(D.name,"/").concat(N.name)]=new Bt(-1/0,[[[]]]))}),K["idb://".concat(r.name,"/").concat(D.name,"/")]=K["idb://".concat(r.name,"/").concat(D.name,"/:dels")]=new Bt(-1/0,[[[]]])}),sr(As).fire(K),Pi(K,!0)),r})}function Mi(r){function o(h){return r.next(h)}var a=d(o),c=d(function(h){return r.throw(h)});function d(h){return function(A){var _=h(A),A=_.value;return _.done?A:A&&typeof A.then=="function"?A.then(a,c):f(A)?Promise.all(A).then(a,c):a(A)}}return d(o)()}function So(r,o,a){for(var c=f(r)?r.slice():[r],d=0;d<a;++d)c.push(o);return c}var Sf={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(r){return s(s({},r),{table:function(o){var a=r.table(o),c=a.schema,d={},h=[];function b(E,K,D){var N=Os(E),j=d[N]=d[N]||[],F=E==null?0:typeof E=="string"?1:E.length,q=0<K,q=s(s({},D),{name:q?"".concat(N,"(virtual-from:").concat(D.name,")"):D.name,lowLevelIndex:D,isVirtual:q,keyTail:K,keyLength:F,extractKey:_i(E),unique:!q&&D.unique});return j.push(q),q.isPrimaryKey||h.push(q),1<F&&b(F===2?E[0]:E.slice(0,F-1),K+1,D),j.sort(function(G,Z){return G.keyTail-Z.keyTail}),q}o=b(c.primaryKey.keyPath,0,c.primaryKey),d[":id"]=[o];for(var _=0,A=c.indexes;_<A.length;_++){var O=A[_];b(O.keyPath,0,O)}function L(E){var K,D=E.query.index;return D.isVirtual?s(s({},E),{query:{index:D.lowLevelIndex,range:(K=E.query.range,D=D.keyTail,{type:K.type===1?2:K.type,lower:So(K.lower,K.lowerOpen?r.MAX_KEY:r.MIN_KEY,D),lowerOpen:!0,upper:So(K.upper,K.upperOpen?r.MIN_KEY:r.MAX_KEY,D),upperOpen:!0})}}):E}return s(s({},a),{schema:s(s({},c),{primaryKey:o,indexes:h,getIndexByKeyPath:function(E){return(E=d[Os(E)])&&E[0]}}),count:function(E){return a.count(L(E))},query:function(E){return a.query(L(E))},openCursor:function(E){var K=E.query.index,D=K.keyTail,N=K.isVirtual,j=K.keyLength;return N?a.openCursor(L(E)).then(function(q){return q&&F(q)}):a.openCursor(E);function F(q){return Object.create(q,{continue:{value:function(G){G!=null?q.continue(So(G,E.reverse?r.MAX_KEY:r.MIN_KEY,D)):E.unique?q.continue(q.key.slice(0,j).concat(E.reverse?r.MIN_KEY:r.MAX_KEY,D)):q.continue()}},continuePrimaryKey:{value:function(G,Z){q.continuePrimaryKey(So(G,r.MAX_KEY,D),Z)}},primaryKey:{get:function(){return q.primaryKey}},key:{get:function(){var G=q.key;return j===1?G[0]:G.slice(0,j)}},value:{get:function(){return q.value}}})}}})}})}};function $i(r,o,a,c){return a=a||{},c=c||"",u(r).forEach(function(d){var h,b,_;g(o,d)?(h=r[d],b=o[d],typeof h=="object"&&typeof b=="object"&&h&&b?(_=fe(h))!==fe(b)?a[c+d]=o[d]:_==="Object"?$i(h,b,a,c+d+"."):h!==b&&(a[c+d]=o[d]):h!==b&&(a[c+d]=o[d])):a[c+d]=void 0}),u(o).forEach(function(d){g(r,d)||(a[c+d]=o[d])}),a}function Ni(r,o){return o.type==="delete"?o.keys:o.keys||o.values.map(r.extractKey)}var Ef={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(r){return s(s({},r),{table:function(o){var a=r.table(o),c=a.schema.primaryKey;return s(s({},a),{mutate:function(d){var h=Re.trans,b=h.table(o).hook,_=b.deleting,A=b.creating,O=b.updating;switch(d.type){case"add":if(A.fire===y)break;return h._promise("readwrite",function(){return L(d)},!0);case"put":if(A.fire===y&&O.fire===y)break;return h._promise("readwrite",function(){return L(d)},!0);case"delete":if(_.fire===y)break;return h._promise("readwrite",function(){return L(d)},!0);case"deleteRange":if(_.fire===y)break;return h._promise("readwrite",function(){return(function E(K,D,N){return a.query({trans:K,values:!1,query:{index:c,range:D},limit:N}).then(function(j){var F=j.result;return L({type:"delete",keys:F,trans:K}).then(function(q){return 0<q.numFailures?Promise.reject(q.failures[0]):F.length<N?{failures:[],numFailures:0,lastResult:void 0}:E(K,s(s({},D),{lower:F[F.length-1],lowerOpen:!0}),N)})})})(d.trans,d.range,1e4)},!0)}return a.mutate(d);function L(E){var K,D,N,j=Re.trans,F=E.keys||Ni(c,E);if(!F)throw new Error("Keys missing");return(E=E.type==="add"||E.type==="put"?s(s({},E),{keys:F}):s({},E)).type!=="delete"&&(E.values=i([],E.values)),E.keys&&(E.keys=i([],E.keys)),K=a,N=F,((D=E).type==="add"?Promise.resolve([]):K.getMany({trans:D.trans,keys:N,cache:"immutable"})).then(function(q){var G=F.map(function(Z,re){var ve,Ee,he,xe=q[re],Ie={onerror:null,onsuccess:null};return E.type==="delete"?_.fire.call(Ie,Z,xe,j):E.type==="add"||xe===void 0?(ve=A.fire.call(Ie,Z,E.values[re],j),Z==null&&ve!=null&&(E.keys[re]=Z=ve,c.outbound||De(E.values[re],c.keyPath,Z))):(ve=$i(xe,E.values[re]),(Ee=O.fire.call(Ie,ve,Z,xe,j))&&(he=E.values[re],Object.keys(Ee).forEach(function(ke){g(he,ke)?he[ke]=Ee[ke]:De(he,ke,Ee[ke])}))),Ie});return a.mutate(E).then(function(Z){for(var re=Z.failures,ve=Z.results,Ee=Z.numFailures,Z=Z.lastResult,he=0;he<F.length;++he){var xe=(ve||F)[he],Ie=G[he];xe==null?Ie.onerror&&Ie.onerror(re[he]):Ie.onsuccess&&Ie.onsuccess(E.type==="put"&&q[he]?E.values[he]:xe)}return{failures:re,results:ve,numFailures:Ee,lastResult:Z}}).catch(function(Z){return G.forEach(function(re){return re.onerror&&re.onerror(Z)}),Promise.reject(Z)})})}}})}})}};function fl(r,o,a){try{if(!o||o.keys.length<r.length)return null;for(var c=[],d=0,h=0;d<o.keys.length&&h<r.length;++d)it(o.keys[d],r[h])===0&&(c.push(a?H(o.values[d]):o.values[d]),++h);return c.length===r.length?c:null}catch{return null}}var If={stack:"dbcore",level:-1,create:function(r){return{table:function(o){var a=r.table(o);return s(s({},a),{getMany:function(c){if(!c.cache)return a.getMany(c);var d=fl(c.keys,c.trans._cache,c.cache==="clone");return d?Te.resolve(d):a.getMany(c).then(function(h){return c.trans._cache={keys:c.keys,values:c.cache==="clone"?H(h):h},h})},mutate:function(c){return c.type!=="add"&&(c.trans._cache=null),a.mutate(c)}})}}}};function dl(r,o){return r.trans.mode==="readonly"&&!!r.subscr&&!r.trans.explicit&&r.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function pl(r,o){switch(r){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Af={stack:"dbcore",level:0,name:"Observability",create:function(r){var o=r.schema.name,a=new Bt(r.MIN_KEY,r.MAX_KEY);return s(s({},r),{transaction:function(c,d,h){if(Re.subscr&&d!=="readonly")throw new U.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Re.querier));return r.transaction(c,d,h)},table:function(c){var d=r.table(c),h=d.schema,b=h.primaryKey,E=h.indexes,_=b.extractKey,A=b.outbound,O=b.autoIncrement&&E.filter(function(D){return D.compound&&D.keyPath.includes(b.keyPath)}),L=s(s({},d),{mutate:function(D){function N(ke){return ke="idb://".concat(o,"/").concat(c,"/").concat(ke),Z[ke]||(Z[ke]=new Bt)}var j,F,q,G=D.trans,Z=D.mutatedParts||(D.mutatedParts={}),re=N(""),ve=N(":dels"),Ee=D.type,Ie=D.type==="deleteRange"?[D.range]:D.type==="delete"?[D.keys]:D.values.length<50?[Ni(b,D).filter(function(ke){return ke}),D.values]:[],he=Ie[0],xe=Ie[1],Ie=D.trans._cache;return f(he)?(re.addKeys(he),(Ie=Ee==="delete"||he.length===xe.length?fl(he,Ie):null)||ve.addKeys(he),(Ie||xe)&&(j=N,F=Ie,q=xe,h.indexes.forEach(function(ke){var Ne=j(ke.name||"");function et(ot){return ot!=null?ke.extractKey(ot):null}function nt(ot){return ke.multiEntry&&f(ot)?ot.forEach(function(nn){return Ne.addKey(nn)}):Ne.addKey(ot)}(F||q).forEach(function(ot,Ft){var Xe=F&&et(F[Ft]),Ft=q&&et(q[Ft]);it(Xe,Ft)!==0&&(Xe!=null&&nt(Xe),Ft!=null&&nt(Ft))})}))):he?(xe={from:(xe=he.lower)!==null&&xe!==void 0?xe:r.MIN_KEY,to:(xe=he.upper)!==null&&xe!==void 0?xe:r.MAX_KEY},ve.add(xe),re.add(xe)):(re.add(a),ve.add(a),h.indexes.forEach(function(ke){return N(ke.name).add(a)})),d.mutate(D).then(function(ke){return!he||D.type!=="add"&&D.type!=="put"||(re.addKeys(ke.results),O&&O.forEach(function(Ne){for(var et=D.values.map(function(Xe){return Ne.extractKey(Xe)}),nt=Ne.keyPath.findIndex(function(Xe){return Xe===b.keyPath}),ot=0,nn=ke.results.length;ot<nn;++ot)et[ot][nt]=ke.results[ot];N(Ne.name).addKeys(et)})),G.mutatedParts=ko(G.mutatedParts||{},Z),ke})}}),E=function(N){var j=N.query,N=j.index,j=j.range;return[N,new Bt((N=j.lower)!==null&&N!==void 0?N:r.MIN_KEY,(j=j.upper)!==null&&j!==void 0?j:r.MAX_KEY)]},K={get:function(D){return[b,new Bt(D.key)]},getMany:function(D){return[b,new Bt().addKeys(D.keys)]},count:E,query:E,openCursor:E};return u(K).forEach(function(D){L[D]=function(N){var j=Re.subscr,F=!!j,q=dl(Re,d)&&pl(D,N)?N.obsSet={}:j;if(F){var G=function(xe){return xe="idb://".concat(o,"/").concat(c,"/").concat(xe),q[xe]||(q[xe]=new Bt)},Z=G(""),re=G(":dels"),j=K[D](N),F=j[0],j=j[1];if((D==="query"&&F.isPrimaryKey&&!N.values?re:G(F.name||"")).add(j),!F.isPrimaryKey){if(D!=="count"){var ve=D==="query"&&A&&N.values&&d.query(s(s({},N),{values:!1}));return d[D].apply(this,arguments).then(function(xe){if(D==="query"){if(A&&N.values)return ve.then(function(et){return et=et.result,Z.addKeys(et),xe});var Ie=N.values?xe.result.map(_):xe.result;(N.values?Z:re).addKeys(Ie)}else if(D==="openCursor"){var ke=xe,Ne=N.values;return ke&&Object.create(ke,{key:{get:function(){return re.addKey(ke.primaryKey),ke.key}},primaryKey:{get:function(){var et=ke.primaryKey;return re.addKey(et),et}},value:{get:function(){return Ne&&Z.addKey(ke.primaryKey),ke.value}}})}return xe})}re.add(a)}}return d[D].apply(this,arguments)}}),L}})}};function hl(r,o,a){if(a.numFailures===0)return o;if(o.type==="deleteRange")return null;var c=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return a.numFailures===c?null:(o=s({},o),f(o.keys)&&(o.keys=o.keys.filter(function(d,h){return!(h in a.failures)})),"values"in o&&f(o.values)&&(o.values=o.values.filter(function(d,h){return!(h in a.failures)})),o)}function ji(r,o){return a=r,((c=o).lower===void 0||(c.lowerOpen?0<it(a,c.lower):0<=it(a,c.lower)))&&(r=r,(o=o).upper===void 0||(o.upperOpen?it(r,o.upper)<0:it(r,o.upper)<=0));var a,c}function ml(r,o,K,c,d,h){if(!K||K.length===0)return r;var b=o.query.index,_=b.multiEntry,A=o.query.range,O=c.schema.primaryKey.extractKey,L=b.extractKey,E=(b.lowLevelIndex||b).extractKey,K=K.reduce(function(D,N){var j=D,F=[];if(N.type==="add"||N.type==="put")for(var q=new Bt,G=N.values.length-1;0<=G;--G){var Z,re=N.values[G],ve=O(re);q.hasKey(ve)||(Z=L(re),(_&&f(Z)?Z.some(function(ke){return ji(ke,A)}):ji(Z,A))&&(q.addKey(ve),F.push(re)))}switch(N.type){case"add":var Ee=new Bt().addKeys(o.values?D.map(function(Ne){return O(Ne)}):D),j=D.concat(o.values?F.filter(function(Ne){return Ne=O(Ne),!Ee.hasKey(Ne)&&(Ee.addKey(Ne),!0)}):F.map(function(Ne){return O(Ne)}).filter(function(Ne){return!Ee.hasKey(Ne)&&(Ee.addKey(Ne),!0)}));break;case"put":var he=new Bt().addKeys(N.values.map(function(Ne){return O(Ne)}));j=D.filter(function(Ne){return!he.hasKey(o.values?O(Ne):Ne)}).concat(o.values?F:F.map(function(Ne){return O(Ne)}));break;case"delete":var xe=new Bt().addKeys(N.keys);j=D.filter(function(Ne){return!xe.hasKey(o.values?O(Ne):Ne)});break;case"deleteRange":var Ie=N.range;j=D.filter(function(Ne){return!ji(O(Ne),Ie)})}return j},r);return K===r?r:(K.sort(function(D,N){return it(E(D),E(N))||it(O(D),O(N))}),o.limit&&o.limit<1/0&&(K.length>o.limit?K.length=o.limit:r.length===o.limit&&K.length<o.limit&&(d.dirty=!0)),h?Object.freeze(K):K)}function gl(r,o){return it(r.lower,o.lower)===0&&it(r.upper,o.upper)===0&&!!r.lowerOpen==!!o.lowerOpen&&!!r.upperOpen==!!o.upperOpen}function Tf(r,o){return(function(a,c,d,h){if(a===void 0)return c!==void 0?-1:0;if(c===void 0)return 1;if((c=it(a,c))===0){if(d&&h)return 0;if(d)return 1;if(h)return-1}return c})(r.lower,o.lower,r.lowerOpen,o.lowerOpen)<=0&&0<=(function(a,c,d,h){if(a===void 0)return c!==void 0?1:0;if(c===void 0)return-1;if((c=it(a,c))===0){if(d&&h)return 0;if(d)return-1;if(h)return 1}return c})(r.upper,o.upper,r.upperOpen,o.upperOpen)}function Of(r,o,a,c){r.subscribers.add(a),c.addEventListener("abort",function(){var d,h;r.subscribers.delete(a),r.subscribers.size===0&&(d=r,h=o,setTimeout(function(){d.subscribers.size===0&&be(h,d)},3e3))})}var Rf={stack:"dbcore",level:0,name:"Cache",create:function(r){var o=r.schema.name;return s(s({},r),{transaction:function(a,c,d){var h,b,_=r.transaction(a,c,d);return c==="readwrite"&&(b=(h=new AbortController).signal,d=function(A){return function(){if(h.abort(),c==="readwrite"){for(var O=new Set,L=0,E=a;L<E.length;L++){var K=E[L],D=Sr["idb://".concat(o,"/").concat(K)];if(D){var N=r.table(K),j=D.optimisticOps.filter(function(Ne){return Ne.trans===_});if(_._explicit&&A&&_.mutatedParts)for(var F=0,q=Object.values(D.queries.query);F<q.length;F++)for(var G=0,Z=(Ee=q[F]).slice();G<Z.length;G++)Oi((he=Z[G]).obsSet,_.mutatedParts)&&(be(Ee,he),he.subscribers.forEach(function(Ne){return O.add(Ne)}));else if(0<j.length){D.optimisticOps=D.optimisticOps.filter(function(Ne){return Ne.trans!==_});for(var re=0,ve=Object.values(D.queries.query);re<ve.length;re++)for(var Ee,he,xe,Ie=0,ke=(Ee=ve[re]).slice();Ie<ke.length;Ie++)(he=ke[Ie]).res!=null&&_.mutatedParts&&(A&&!he.dirty?(xe=Object.isFrozen(he.res),xe=ml(he.res,he.req,j,N,he,xe),he.dirty?(be(Ee,he),he.subscribers.forEach(function(Ne){return O.add(Ne)})):xe!==he.res&&(he.res=xe,he.promise=Te.resolve({result:xe}))):(he.dirty&&be(Ee,he),he.subscribers.forEach(function(Ne){return O.add(Ne)})))}}}O.forEach(function(Ne){return Ne()})}}},_.addEventListener("abort",d(!1),{signal:b}),_.addEventListener("error",d(!1),{signal:b}),_.addEventListener("complete",d(!0),{signal:b})),_},table:function(a){var c=r.table(a),d=c.schema.primaryKey;return s(s({},c),{mutate:function(h){var b=Re.trans;if(d.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return c.mutate(h);var _=Sr["idb://".concat(o,"/").concat(a)];return _?(b=c.mutate(h),h.type!=="add"&&h.type!=="put"||!(50<=h.values.length||Ni(d,h).some(function(A){return A==null}))?(_.optimisticOps.push(h),h.mutatedParts&&Co(h.mutatedParts),b.then(function(A){0<A.numFailures&&(be(_.optimisticOps,h),(A=hl(0,h,A))&&_.optimisticOps.push(A),h.mutatedParts&&Co(h.mutatedParts))}),b.catch(function(){be(_.optimisticOps,h),h.mutatedParts&&Co(h.mutatedParts)})):b.then(function(A){var O=hl(0,s(s({},h),{values:h.values.map(function(L,E){var K;return A.failures[E]?L:(L=(K=d.keyPath)!==null&&K!==void 0&&K.includes(".")?H(L):s({},L),De(L,d.keyPath,A.results[E]),L)})}),A);_.optimisticOps.push(O),queueMicrotask(function(){return h.mutatedParts&&Co(h.mutatedParts)})}),b):c.mutate(h)},query:function(h){if(!dl(Re,c)||!pl("query",h))return c.query(h);var b=((O=Re.trans)===null||O===void 0?void 0:O.db._options.cache)==="immutable",E=Re,_=E.requery,A=E.signal,O=(function(N,j,F,q){var G=Sr["idb://".concat(N,"/").concat(j)];if(!G)return[];if(!(j=G.queries[F]))return[null,!1,G,null];var Z=j[(q.query?q.query.index.name:null)||""];if(!Z)return[null,!1,G,null];switch(F){case"query":var re=Z.find(function(ve){return ve.req.limit===q.limit&&ve.req.values===q.values&&gl(ve.req.query.range,q.query.range)});return re?[re,!0,G,Z]:[Z.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=q.limit&&(!q.values||ve.req.values)&&Tf(ve.req.query.range,q.query.range)}),!1,G,Z];case"count":return re=Z.find(function(ve){return gl(ve.req.query.range,q.query.range)}),[re,!!re,G,Z]}})(o,a,"query",h),L=O[0],E=O[1],K=O[2],D=O[3];return L&&E?L.obsSet=h.obsSet:(E=c.query(h).then(function(N){var j=N.result;if(L&&(L.res=j),b){for(var F=0,q=j.length;F<q;++F)Object.freeze(j[F]);Object.freeze(j)}else N.result=H(j);return N}).catch(function(N){return D&&L&&be(D,L),Promise.reject(N)}),L={obsSet:h.obsSet,promise:E,subscribers:new Set,type:"query",req:h,dirty:!1},D?D.push(L):(D=[L],(K=K||(Sr["idb://".concat(o,"/").concat(a)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[h.query.index.name||""]=D)),Of(L,D,_,A),L.promise.then(function(N){return{result:ml(N.result,h,K?.optimisticOps,c,L,b)}})}})}})}};function Eo(r,o){return new Proxy(r,{get:function(a,c,d){return c==="db"?o:Reflect.get(a,c,d)}})}var Ln=(Ot.prototype.version=function(r){if(isNaN(r)||r<.1)throw new U.Type("Given version is not a positive number");if(r=Math.round(10*r)/10,this.idbdb||this._state.isBeingOpened)throw new U.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,r);var o=this._versions,a=o.filter(function(c){return c._cfg.version===r})[0];return a||(a=new this.Version(r),o.push(a),o.sort(wf),a.stores({}),this._state.autoSchema=!1,a)},Ot.prototype._whenReady=function(r){var o=this;return this.idbdb&&(this._state.openComplete||Re.letThrough||this._vip)?r():new Te(function(a,c){if(o._state.openComplete)return c(new U.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void c(new U.DatabaseClosed);o.open().catch(y)}o._state.dbReadyPromise.then(a,c)}).then(r)},Ot.prototype.use=function(r){var o=r.stack,a=r.create,c=r.level,d=r.name;return d&&this.unuse({stack:o,name:d}),r=this._middlewares[o]||(this._middlewares[o]=[]),r.push({stack:o,create:a,level:c??10,name:d}),r.sort(function(h,b){return h.level-b.level}),this},Ot.prototype.unuse=function(r){var o=r.stack,a=r.name,c=r.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(d){return c?d.create!==c:!!a&&d.name!==a})),this},Ot.prototype.open=function(){var r=this;return $n(_t,function(){return Cf(r)})},Ot.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var r=this._state,o=er.indexOf(this);if(0<=o&&er.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}r.isBeingOpened||(r.dbReadyPromise=new Te(function(a){r.dbReadyResolve=a}),r.openCanceller=new Te(function(a,c){r.cancelOpen=c}))},Ot.prototype.close=function(a){var o=(a===void 0?{disableAutoOpen:!0}:a).disableAutoOpen,a=this._state;o?(a.isBeingOpened&&a.cancelOpen(new U.DatabaseClosed),this._close(),a.autoOpen=!1,a.dbOpenError=new U.DatabaseClosed):(this._close(),a.autoOpen=this._options.autoOpen||a.isBeingOpened,a.openComplete=!1,a.dbOpenError=null)},Ot.prototype.delete=function(r){var o=this;r===void 0&&(r={disableAutoOpen:!0});var a=0<arguments.length&&typeof arguments[0]!="object",c=this._state;return new Te(function(d,h){function b(){o.close(r);var _=o._deps.indexedDB.deleteDatabase(o.name);_.onsuccess=pt(function(){var A,O,L;A=o._deps,O=o.name,L=A.indexedDB,A=A.IDBKeyRange,Ii(L)||O===Gr||Ei(L,A).delete(O).catch(y),d()}),_.onerror=Sn(h),_.onblocked=o._fireOnBlocked}if(a)throw new U.InvalidArgument("Invalid closeOptions argument to db.delete()");c.isBeingOpened?c.dbReadyPromise.then(b):b()})},Ot.prototype.backendDB=function(){return this.idbdb},Ot.prototype.isOpen=function(){return this.idbdb!==null},Ot.prototype.hasBeenClosed=function(){var r=this._state.dbOpenError;return r&&r.name==="DatabaseClosed"},Ot.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Ot.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Ot.prototype,"tables",{get:function(){var r=this;return u(this._allTables).map(function(o){return r._allTables[o]})},enumerable:!1,configurable:!0}),Ot.prototype.transaction=function(){var r=(function(o,a,c){var d=arguments.length;if(d<2)throw new U.InvalidArgument("Too few arguments");for(var h=new Array(d-1);--d;)h[d-1]=arguments[d];return c=h.pop(),[o,Ue(h),c]}).apply(this,arguments);return this._transaction.apply(this,r)},Ot.prototype._transaction=function(r,o,a){var c=this,d=Re.trans;d&&d.db===this&&r.indexOf("!")===-1||(d=null);var h,b,_=r.indexOf("?")!==-1;r=r.replace("!","").replace("?","");try{if(b=o.map(function(O){if(O=O instanceof c.Table?O.name:O,typeof O!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return O}),r=="r"||r===ws)h=ws;else{if(r!="rw"&&r!=xs)throw new U.InvalidArgument("Invalid transaction mode: "+r);h=xs}if(d){if(d.mode===ws&&h===xs){if(!_)throw new U.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");d=null}d&&b.forEach(function(O){if(d&&d.storeNames.indexOf(O)===-1){if(!_)throw new U.SubTransaction("Table "+O+" not included in parent transaction.");d=null}}),_&&d&&!d.active&&(d=null)}}catch(O){return d?d._promise(null,function(L,E){E(O)}):Et(O)}var A=(function O(L,E,K,D,N){return Te.resolve().then(function(){var j=Re.transless||Re,F=L._createTransaction(E,K,L._dbSchema,D);if(F.explicit=!0,j={trans:F,transless:j},D)F.idbtrans=D.idbtrans;else try{F.create(),F.idbtrans._explicit=!0,L._state.PR1398_maxLoop=3}catch(Z){return Z.name===W.InvalidState&&L.isOpen()&&0<--L._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),L.close({disableAutoOpen:!1}),L.open().then(function(){return O(L,E,K,null,N)})):Et(Z)}var q,G=bt(N);return G&&Zn(),j=Te.follow(function(){var Z;(q=N.call(F,F))&&(G?(Z=kn.bind(null,null),q.then(Z,Z)):typeof q.next=="function"&&typeof q.throw=="function"&&(q=Mi(q)))},j),(q&&typeof q.then=="function"?Te.resolve(q).then(function(Z){return F.active?Z:Et(new U.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):j.then(function(){return q})).then(function(Z){return D&&F._resolve(),F._completion.then(function(){return Z})}).catch(function(Z){return F._reject(Z),Et(Z)})})}).bind(null,this,h,b,d,a);return d?d._promise(h,A,"lock"):Re.trans?$n(Re.transless,function(){return c._whenReady(A)}):this._whenReady(A)},Ot.prototype.table=function(r){if(!g(this._allTables,r))throw new U.InvalidTable("Table ".concat(r," does not exist"));return this._allTables[r]},Ot);function Ot(r,o){var a=this;this._middlewares={},this.verno=0;var c=Ot.dependencies;this._options=o=s({addons:Ot.addons,autoOpen:!0,indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},c=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var d,h,b,_,A,O={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:y,dbReadyPromise:null,cancelOpen:y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};O.dbReadyPromise=new Te(function(E){O.dbReadyResolve=E}),O.openCanceller=new Te(function(E,K){O.cancelOpen=K}),this._state=O,this.name=r,this.on=kr(this,"populate","blocked","versionchange","close",{ready:[ge,y]}),this.once=function(E,K){var D=function(){for(var N=[],j=0;j<arguments.length;j++)N[j]=arguments[j];a.on(E).unsubscribe(D),K.apply(a,N)};return a.on(E,D)},this.on.ready.subscribe=$(this.on.ready.subscribe,function(E){return function(K,D){Ot.vip(function(){var N,j=a._state;j.openComplete?(j.dbOpenError||Te.resolve().then(K),D&&E(K)):j.onReadyBeingFired?(j.onReadyBeingFired.push(K),D&&E(K)):(E(K),N=a,D||E(function F(){N.on.ready.unsubscribe(K),N.on.ready.unsubscribe(F)}))})}}),this.Collection=(d=this,C(jt.prototype,function(q,F){this.db=d;var D=_s,N=null;if(F)try{D=F()}catch(G){N=G}var j=q._ctx,F=j.table,q=F.hook.reading.fire;this._ctx={table:F,index:j.index,isPrimKey:!j.index||F.schema.primKey.keyPath&&j.index===F.schema.primKey.name,range:D,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:N,or:j.or,valueMapper:q!==x?q:null}})),this.Table=(h=this,C(Ss.prototype,function(E,K,D){this.db=h,this._tx=D,this.name=E,this.schema=K,this.hook=h._allTables[E]?h._allTables[E].hook:kr(null,{creating:[ee,y],reading:[R,x],updating:[Se,y],deleting:[te,y]})})),this.Transaction=(b=this,C(gf.prototype,function(E,K,D,N,j){var F=this;E!=="readonly"&&K.forEach(function(q){q=(q=D[q])===null||q===void 0?void 0:q.yProps,q&&(K=K.concat(q.map(function(G){return G.updatesTable})))}),this.db=b,this.mode=E,this.storeNames=K,this.schema=D,this.chromeTransactionDurability=N,this.idbtrans=null,this.on=kr(this,"complete","error","abort"),this.parent=j||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Te(function(q,G){F._resolve=q,F._reject=G}),this._completion.then(function(){F.active=!1,F.on.complete.fire()},function(q){var G=F.active;return F.active=!1,F.on.error.fire(q),F.parent?F.parent._reject(q):G&&F.idbtrans&&F.idbtrans.abort(),Et(q)})})),this.Version=(_=this,C(kf.prototype,function(E){this.db=_,this._cfg={version:E,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(A=this,C(nl.prototype,function(E,K,D){if(this.db=A,this._ctx={table:E,index:K===":id"?null:K,or:D},this._cmp=this._ascending=it,this._descending=function(N,j){return it(j,N)},this._max=function(N,j){return 0<it(N,j)?N:j},this._min=function(N,j){return it(N,j)<0?N:j},this._IDBKeyRange=A._deps.IDBKeyRange,!this._IDBKeyRange)throw new U.MissingAPI})),this.on("versionchange",function(E){0<E.newVersion?console.warn("Another connection wants to upgrade database '".concat(a.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(a.name,"'. Closing db now to resume the delete request.")),a.close({disableAutoOpen:!1})}),this.on("blocked",function(E){!E.newVersion||E.newVersion<E.oldVersion?console.warn("Dexie.delete('".concat(a.name,"') was blocked")):console.warn("Upgrade '".concat(a.name,"' blocked by other connection holding version ").concat(E.oldVersion/10))}),this._maxKey=Ts(o.IDBKeyRange),this._createTransaction=function(E,K,D,N){return new a.Transaction(E,K,D,a._options.chromeTransactionDurability,N)},this._fireOnBlocked=function(E){a.on("blocked").fire(E),er.filter(function(K){return K.name===a.name&&K!==a&&!K._state.vcFired}).map(function(K){return K.on("versionchange").fire(E)})},this.use(If),this.use(Rf),this.use(Af),this.use(Sf),this.use(Ef);var L=new Proxy(this,{get:function(E,K,D){if(K==="_vip")return!0;if(K==="table")return function(j){return Eo(a.table(j),L)};var N=Reflect.get(E,K,D);return N instanceof Ss?Eo(N,L):K==="tables"?N.map(function(j){return Eo(j,L)}):K==="_createTransaction"?function(){return Eo(N.apply(this,arguments),L)}:N}});this.vip=L,c.forEach(function(E){return E(a)})}var Io,cn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Df=(Li.prototype.subscribe=function(r,o,a){return this._subscribe(r&&typeof r!="function"?r:{next:r,error:o,complete:a})},Li.prototype[cn]=function(){return this},Li);function Li(r){this._subscribe=r}try{Io={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Io={indexedDB:null,IDBKeyRange:null}}function vl(r){var o,a=!1,c=new Df(function(d){var h=bt(r),b,_=!1,A={},O={},L={get closed(){return _},unsubscribe:function(){_||(_=!0,b&&b.abort(),E&&sr.storagemutated.unsubscribe(D))}};d.start&&d.start(L);var E=!1,K=function(){return bs(N)},D=function(j){ko(A,j),Oi(O,A)&&K()},N=function(){var j,F,q;!_&&Io.indexedDB&&(A={},j={},b&&b.abort(),b=new AbortController,q=(function(G){var Z=Mn();try{h&&Zn();var re=_n(r,G);return re=h?re.finally(kn):re}finally{Z&&Xn()}})(F={subscr:j,signal:b.signal,requery:K,querier:r,trans:null}),Promise.resolve(q).then(function(G){a=!0,o=G,_||F.signal.aborted||(A={},(function(Z){for(var re in Z)if(g(Z,re))return;return 1})(O=j)||E||(sr(As,D),E=!0),bs(function(){return!_&&d.next&&d.next(G)}))},function(G){a=!1,["DatabaseClosedError","AbortError"].includes(G?.name)||_||bs(function(){_||d.error&&d.error(G)})}))};return setTimeout(K,0),L});return c.hasValue=function(){return a},c.getValue=function(){return o},c}var Er=Ln;function Bi(r){var o=or;try{or=!0,sr.storagemutated.fire(r),Pi(r,!0)}finally{or=o}}w(Er,s(s({},Ce),{delete:function(r){return new Er(r,{addons:[]}).delete()},exists:function(r){return new Er(r,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(r){try{return o=Er.dependencies,a=o.indexedDB,o=o.IDBKeyRange,(Ii(a)?Promise.resolve(a.databases()).then(function(c){return c.map(function(d){return d.name}).filter(function(d){return d!==Gr})}):Ei(a,o).toCollection().primaryKeys()).then(r)}catch{return Et(new U.MissingAPI)}var o,a},defineClass:function(){return function(r){p(this,r)}},ignoreTransaction:function(r){return Re.trans?$n(Re.transless,r):r()},vip:Ai,async:function(r){return function(){try{var o=Mi(r.apply(this,arguments));return o&&typeof o.then=="function"?o:Te.resolve(o)}catch(a){return Et(a)}}},spawn:function(r,o,a){try{var c=Mi(r.apply(a,o||[]));return c&&typeof c.then=="function"?c:Te.resolve(c)}catch(d){return Et(d)}},currentTransaction:{get:function(){return Re.trans||null}},waitFor:function(r,o){return o=Te.resolve(typeof r=="function"?Er.ignoreTransaction(r):r).timeout(o||6e4),Re.trans?Re.trans.waitFor(o):o},Promise:Te,debug:{get:function(){return oe},set:function(r){Ke(r)}},derive:Q,extend:p,props:w,override:$,Events:kr,on:sr,liveQuery:vl,extendObservabilitySet:ko,getByKeyPath:Pe,setByKeyPath:De,delByKeyPath:function(r,o){typeof o=="string"?De(r,o,void 0):"length"in o&&[].map.call(o,function(a){De(r,a,void 0)})},shallowClone:rt,deepClone:H,getObjectDiff:$i,cmp:it,asap:$e,minKey:-1/0,addons:[],connections:er,errnames:W,dependencies:Io,cache:Sr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(r){return parseInt(r)}).reduce(function(r,o,a){return r+o/Math.pow(10,2*a)})})),Er.maxKey=Ts(Er.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(sr(As,function(r){or||(r=new CustomEvent(bi,{detail:r}),or=!0,dispatchEvent(r),or=!1)}),addEventListener(bi,function(r){r=r.detail,or||Bi(r)}));var Xr,or=!1,yl=function(){};return typeof BroadcastChannel<"u"&&((yl=function(){(Xr=new BroadcastChannel(bi)).onmessage=function(r){return r.data&&Bi(r.data)}})(),typeof Xr.unref=="function"&&Xr.unref(),sr(As,function(r){or||Xr.postMessage(r)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(r){if(!Ln.disableBfCache&&r.persisted){oe&&console.debug("Dexie: handling persisted pagehide"),Xr?.close();for(var o=0,a=er;o<a.length;o++)a[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(r){!Ln.disableBfCache&&r.persisted&&(oe&&console.debug("Dexie: handling persisted pageshow"),yl(),Bi({all:new Bt(-1/0,[[]])}))})),Te.rejectionMapper=function(r,o){return!r||r instanceof Y||r instanceof TypeError||r instanceof SyntaxError||!r.name||!we[r.name]?r:(o=new we[r.name](o||r.message,r),"stack"in r&&P(o,"stack",{get:function(){return this.inner.stack}}),o)},Ke(oe),s(Ln,Object.freeze({__proto__:null,Dexie:Ln,liveQuery:vl,Entity:ks,cmp:it,PropModification:_r,replacePrefix:function(r,o){return new _r({replacePrefix:[r,o]})},add:function(r){return new _r({add:r})},remove:function(r){return new _r({remove:r})},default:Ln,RangeSet:Bt,mergeRanges:Ds,rangesOverlap:al}),{default:Ln}),Ln})})(Uo)),Uo.exports}var xm=wm();const Ca=ym(xm),xc=Symbol.for("Dexie"),Qo=globalThis[xc]||(globalThis[xc]=Ca);if(Ca.semVer!==Qo.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Ca.semVer} and ${Qo.semVer}`);const{liveQuery:Zb,mergeRanges:e0,rangesOverlap:t0,RangeSet:n0,cmp:r0,Entity:s0,PropModification:o0,replacePrefix:i0,add:a0,remove:l0,DexieYProvider:c0}=Qo,_m="jotrip",km=1;class Cm extends Qo{notes;tabs;collections;images;meta;constructor(){super(_m),this.version(km).stores({notes:"id, updatedAt, primaryDate",tabs:"id, noteId, updatedAt",collections:"id",images:"id, noteId, tabId",meta:"key"})}}let na=null;function Ja(){return na||(na=new Cm),na}async function of(){const e=Ja();return e.isOpen()||await e.open(),e}const He=Ja(),Fr=()=>new Date().toISOString(),pi=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2);async function Qa(e){const t={id:pi(),title:e.title,collectionIds:e.collectionIds??[],tabOrder:e.tabOrder??[],primaryDate:e.primaryDate,createdAt:Fr(),updatedAt:Fr()};return await He.notes.add(t),t}function Sa(e){return He.notes.get(e)}async function Ut(e,t){const n=await He.notes.get(e);if(!n)return;const s={...n,...t,updatedAt:Fr()};return await He.notes.put(s),s}async function Xa(e){await mi("note",e),await He.transaction("rw",He.notes,He.tabs,He.images,async()=>{await He.tabs.where("noteId").equals(e).delete(),await He.images.where("noteId").equals(e).delete(),await He.notes.delete(e)})}function ps(){return He.notes.orderBy("updatedAt").reverse().toArray()}async function hi(){return(await ps()).filter(t=>!t.archivedAt)}async function Sm(){return(await ps()).filter(t=>!!t.archivedAt)}async function Ws(e){const t={id:pi(),noteId:e.noteId,name:e.name,content:e.content,updatedAt:Fr()};return await He.tabs.add(t),t}function Em(e){return He.tabs.get(e)}async function _c(e,t){const n=await He.tabs.get(e);if(!n)return;const s={...n,...t,updatedAt:Fr()};return await He.tabs.put(s),s}async function af(e){const t=await He.tabs.get(e);t&&(await mi("tab",e),await He.transaction("rw",He.tabs,He.images,He.notes,async()=>{await He.images.where("tabId").equals(t.id).delete(),await He.tabs.delete(t.id);const n=await He.notes.get(t.noteId);if(n){const s=n.tabOrder.filter(i=>i!==t.id);await He.notes.put({...n,tabOrder:s,updatedAt:Fr()})}}))}function kc(e){return He.tabs.where("noteId").equals(e).sortBy("updatedAt")}function Ur(){return He.tabs.toArray()}async function lf(e){const t={id:e.id??pi(),noteId:e.noteId,tabId:e.tabId,mime:e.mime,blob:e.blob,width:e.width,height:e.height,createdAt:Fr(),thumbnailDataUrl:e.thumbnailDataUrl};return await He.images.add(t),t}function Ea(e){return He.images.get(e)}function Im(e){return mi("image",e).then(()=>He.images.delete(e))}function io(e={}){return e.tabId?He.images.where("tabId").equals(e.tabId).toArray():e.noteId?He.images.where("noteId").equals(e.noteId).toArray():He.images.toArray()}function Am(){return He.meta.toArray()}async function Cc(){await He.transaction("rw",[He.notes,He.tabs,He.images,He.collections,He.meta],async()=>{await Promise.all([He.notes.clear(),He.tabs.clear(),He.images.clear(),He.collections.clear(),He.meta.clear()])})}async function mi(e,t,n){const s=n??new Date().toISOString(),l={key:`tombstone:${e}:${t}`,value:{kind:e,id:t,updatedAt:s}};return await He.meta.put(l),l}async function Tm(e){const t=await He.meta.where("key").startsWith("tombstone:").toArray();if(!e)return t;const n=Date.parse(e);return t.filter(s=>{const i=s.value?.updatedAt;return i&&Date.parse(i)>n})}function Om(e){return He.notes.put(e)}function Rm(e){return He.tabs.put(e)}function Dm(e){return He.images.put(e)}async function dr(e,t){const n={key:e,value:t};return await He.meta.put(n),n}async function sn(e){return(await He.meta.get(e))?.value}const Ia=ye(!1),cf=ye(!1);zd(async()=>{const e=await sn("sync:enabled");cf.value=!!e});const Pm=e=>`notes/${e}.json`,Mm=e=>`tabs/${e}.json`,$m=e=>`images/${e}.json`,Nm=(e,t)=>`deleted/${e}s/${t}.json`,Za=e=>{const t={},n=btoa(`${e.username}:${e.password}`);return t.Authorization=`Basic ${n}`,t},ra=e=>{const t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength);let n="";const s=32768;for(let i=0;i<t.length;i+=s){const l=t.subarray(i,i+s);n+=String.fromCharCode(...l)}return btoa(n)},sa=e=>{const t=atob(e),n=t.length,s=new Uint8Array(n);for(let i=0;i<n;i++)s[i]=t.charCodeAt(i);return s},uf=async(e,t)=>{const n=new TextEncoder().encode(e),s=await crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},Mo=async(e,t)=>{const n=crypto.getRandomValues(new Uint8Array(16)),s=crypto.getRandomValues(new Uint8Array(12)),i=await uf(t,n),l=await crypto.subtle.encrypt({name:"AES-GCM",iv:s},i,new TextEncoder().encode(e));return{version:"1",salt:ra(n),iv:ra(s),ciphertext:ra(l)}},jm=async(e,t)=>{const n=sa(e.salt),s=sa(e.iv),i=sa(e.ciphertext),l=await uf(t,n),u=await crypto.subtle.decrypt({name:"AES-GCM",iv:s},l,i);return new TextDecoder().decode(u)},Lm=async(e,t)=>{const n=await fetch(e,{headers:{...Za(t)}});if(!n.ok)throw new Error(`Request failed ${n.status}`);return n.json()},$o=async(e,t,n)=>{const s=await fetch(e,{method:"PUT",headers:{"Content-Type":"application/octet-stream",...Za(n)},body:t});if(!s.ok)throw new Error(`PUT failed ${s.status}`);return s.json()},Bm=async(e,t)=>{const n=await fetch(e,{headers:{...Za(t)}});if(!n.ok)throw new Error(`GET failed ${n.status}`);const s=await n.arrayBuffer();return new TextDecoder().decode(s)},Fm=e=>new Promise((t,n)=>{const s=new FileReader;s.onload=()=>t(s.result.split(",")[1]??""),s.onerror=n,s.readAsDataURL(e.blob)}),Km=(e,t)=>{const n=atob(e),s=n.length,i=new Uint8Array(s);for(let l=0;l<s;l++)i[l]=n.charCodeAt(l);return new Blob([i],{type:t})},Um=async e=>{if(e.kind==="note"){const t=await Sa(e.note.id);if(t&&t.updatedAt&&e.note.updatedAt&&new Date(e.note.updatedAt).getTime()<=new Date(t.updatedAt).getTime()){console.debug("[sync] skip note (stale)",e.note.id);return}await Om(e.note),console.debug("[sync] applied note",e.note.id,e.note.title);return}if(e.kind==="tab"){const t=await Em(e.tab.id);if(t&&t.updatedAt&&e.tab.updatedAt&&new Date(e.tab.updatedAt).getTime()<=new Date(t.updatedAt).getTime()){console.debug("[sync] skip tab (stale)",e.tab.id);return}await Rm(e.tab),console.debug("[sync] applied tab",e.tab.id);return}if(e.kind==="image"){const t=await Ea(e.image.id);if(t?.createdAt&&e.image.createdAt&&new Date(e.image.createdAt).getTime()<=new Date(t.createdAt).getTime()){console.debug("[sync] skip image (stale)",e.image.id);return}const n=e.base64?Km(e.base64,e.image.mime):e.image.blob;await Dm({...e.image,blob:n}),console.debug("[sync] applied image",e.image.id);return}e.kind==="tombstone"&&(console.debug("[sync] apply tombstone",e.target,e.id),await mi(e.target,e.id,e.updatedAt),e.target==="note"?await Xa(e.id):e.target==="tab"?await af(e.id):e.target==="image"&&await Im(e.id))},qm=async(e,t)=>{const n=t?`?since=${encodeURIComponent(t)}`:"",{changes:s,now:i}=await Lm(`${e.baseUrl}/changes${n}`,e);console.debug("[sync] pull",{since:t,count:s?.length??0});let l=i?Date.parse(i):0;for(const u of s||[]){const f=u?.key;if(f){if(u.updatedAt){const p=Date.parse(u.updatedAt);p>l&&(l=p)}try{const p=await Bm(`${e.baseUrl}/blob/${encodeURIComponent(f)}`,e),v=JSON.parse(p),m=await jm(v,e.passphrase),g=JSON.parse(m);console.debug("[sync] apply",{key:f,kind:g.kind,updatedAt:u.updatedAt}),await Um(g)}catch(p){console.error("Failed to apply change",f,p)}}}return l||null},Vm=async(e,t)=>{const n=t?Date.parse(t):0,[s,i,l,u]=await Promise.all([ps(),Ur(),io(),Tm(t)]);for(const f of s){if(n&&Date.parse(f.updatedAt)<=n)continue;const v=await Mo(JSON.stringify({kind:"note",note:f}),e.passphrase);await $o(`${e.baseUrl}/blob/${encodeURIComponent(Pm(f.id))}`,JSON.stringify(v),e)}for(const f of i){if(n&&Date.parse(f.updatedAt)<=n)continue;const v=await Mo(JSON.stringify({kind:"tab",tab:f}),e.passphrase);await $o(`${e.baseUrl}/blob/${encodeURIComponent(Mm(f.id))}`,JSON.stringify(v),e)}for(const f of l){if(n&&Date.parse(f.createdAt)<=n&&Date.parse(f.createdAt)<=n)continue;const p={kind:"image",image:{...f,blob:void 0},base64:await Fm(f)},v=await Mo(JSON.stringify(p),e.passphrase);await $o(`${e.baseUrl}/blob/${encodeURIComponent($m(f.id))}`,JSON.stringify(v),e)}for(const f of u){const p=f.value,v={kind:"tombstone",target:p.kind,id:p.id,updatedAt:p.updatedAt},m=await Mo(JSON.stringify(v),e.passphrase);await $o(`${e.baseUrl}/blob/${encodeURIComponent(Nm(p.kind,p.id))}`,JSON.stringify(m),e)}},ff=async e=>{const t=e.baseUrl?.trim().replace(/\/+$/,"");if(!t)throw new Error("Missing base URL");const n=await sn("sync:last");console.debug("[sync] starting",{last:n});const s=await qm({...e,baseUrl:t},n);console.debug("[sync] pull done",{latestRemote:s?new Date(s).toISOString():null}),await Vm({...e,baseUrl:t},n);const i=s||Date.now(),l=new Date(i).toISOString();return await dr("sync:last",l),console.debug("[sync] finished",{next:l}),l},Hm=600*1e3;let No=null,Ns=null;const Wm=async()=>{if(!await sn("sync:enabled"))return null;const t=(await sn("sync:url"))?.trim()||"",n=(await sn("sync:username"))?.trim()||"",s=(await sn("sync:password"))?.trim()||"",i=(await sn("sync:passphrase"))?.trim()||"";return!t||!n||!s||!i?null:{baseUrl:t,username:n,password:s,passphrase:i}},zm=async e=>Ns||(Ns=(async()=>{const t=await Wm();if(t)try{Ia.value=!0;const n=await ff(t);await dr("sync:last",n),e&&console.debug("[sync] completed",e,n),window.dispatchEvent(new CustomEvent("jotrip:sync-complete",{detail:{ts:n,reason:e}}))}catch(n){console.error("[sync] failed",e,n)}finally{Ia.value=!1,Ns=null}})(),Ns),Kr=(e="manual")=>{zm(e)},Gm=()=>{document.visibilityState==="visible"&&Kr("visibility")},Ym=()=>{No&&(clearInterval(No),No=null),Kr("startup"),No=window.setInterval(()=>Kr("interval"),Hm),document.addEventListener("visibilitychange",Gm)},Jm={class:"h-full overflow-hidden bg-[#060913] text-slate-100"},Qm={class:"mx-auto flex h-full max-w-6xl flex-col px-0 py-2 sm:px-6 sm:py-8"},Xm={class:"flex shrink-0 items-center justify-between border-b border-white/10 bg-gradient-to-b from-slate-950/80 to-slate-950/40 px-2 py-1 backdrop-blur sm:px-0"},Zm={class:"flex text-white"},eg={class:"flex items-center gap-2"},tg={class:"mt-2 flex-1 px-0 sm:px-0 overflow-hidden"},ng={class:"flex h-full min-h-0 flex-col border-0 bg-transparent sm:border sm:border-white/10 sm:bg-white/5 sm:p-6 sm:shadow-2xl sm:shadow-indigo-900/30"},rg={class:"flex-1 min-h-0 overflow-auto"},sg={key:0,class:"fixed inset-y-0 right-0 z-50 w-72 bg-slate-900/95 p-4 shadow-2xl shadow-black/70 sm:w-80 sm:p-6"},og={class:"mt-4 space-y-2 sm:mt-6"},ig={class:"rounded border border-white/10 bg-white/5 p-3 text-xs text-slate-200"},ag={class:"grid grid-cols-2 gap-2"},lg={class:"rounded border border-white/10 bg-black/10 p-2"},cg={class:"text-sm font-semibold text-white"},ug={class:"rounded border border-white/10 bg-black/10 p-2"},fg={class:"text-sm font-semibold text-white"},dg={class:"rounded border border-white/10 bg-black/10 p-2"},pg={class:"text-sm font-semibold text-white"},hg={class:"rounded border border-white/10 bg-black/10 p-2"},mg={class:"text-sm font-semibold text-white"},gg=Qt({__name:"AppLayout",setup(e){const t=[{label:"Import",to:{name:"import"}},{label:"Settings",to:{name:"settings"}},{label:"Help",to:{name:"help"}},{label:"About",to:{name:"about"}}],n=ye(!1),s=()=>{n.value=!n.value},i=()=>{n.value=!1},l=Je(()=>Ia.value),u=Je(()=>cf.value),f=ye({notes:0,tabs:0,images:0,bytes:0}),p=se=>new TextEncoder().encode(se).byteLength,v=se=>{if(se<1024)return`${se} B`;const M=se/1024;return M<1024?`${M.toFixed(1)} KB`:`${(M/1024).toFixed(1)} MB`},m=async()=>{const[se,M,B]=await Promise.all([ps(),Ur(),io()]),$={notes:se.length,tabs:M.length,images:B.length,bytes:0};for(const X of se)$.bytes+=p(X.title??"");for(const X of M)$.bytes+=p(X.content??"");for(const X of B)$.bytes+=X.blob?.size??0,X.thumbnailDataUrl&&($.bytes+=p(X.thumbnailDataUrl));f.value=$},g=()=>m();an(()=>{m(),window.addEventListener("jotrip:sync-complete",g)}),mr(()=>{window.removeEventListener("jotrip:sync-complete",g)});const w=ye(null),S=Je(()=>!!w.value),P=se=>{se.preventDefault(),w.value=se},Q=async()=>{if(!w.value)return;const se=w.value;w.value=null,await se.prompt()};return an(()=>{window.addEventListener("beforeinstallprompt",P)}),mr(()=>{window.removeEventListener("beforeinstallprompt",P)}),(se,M)=>(ce(),ue("div",Jm,[k("div",Qm,[k("header",Xm,[k("nav",Zm,[xt(en(ns),{to:{name:"home"},class:kt(["px-3 py-1.5 text-sm font-semibold",se.$route.name==="home"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Un(()=>[...M[2]||(M[2]=[Mr(" Home ",-1)])]),_:1},8,["class"]),xt(en(ns),{to:{name:"notes"},class:kt(["px-3 py-1.5 text-sm font-semibold",se.$route.name==="notes"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Un(()=>[...M[3]||(M[3]=[Mr(" Jots ",-1)])]),_:1},8,["class"]),xt(en(ns),{to:{name:"calendar"},class:kt(["px-3 py-1.5 text-sm font-semibold",se.$route.name==="calendar"?"bg-white/10 border-b-2 border-white/40":"bg-transparent border-b-2 border-transparent text-slate-300 hover:text-white"])},{default:Un(()=>[...M[4]||(M[4]=[Mr(" Calendar ",-1)])]),_:1},8,["class"])]),k("div",eg,[xt(en(ns),{to:{name:"note-editor",params:{id:"new"}},class:"border border-indigo-300/30 bg-indigo-500/20 px-3 py-1.5 text-sm font-semibold text-white hover:border-indigo-200/60"},{default:Un(()=>[...M[5]||(M[5]=[Mr(" + Jot ",-1)])]),_:1}),S.value?(ce(),ue("button",{key:0,type:"button",class:"hidden border border-emerald-300/40 bg-emerald-500/20 px-3 py-1.5 text-sm font-semibold text-white hover:border-emerald-200/60 sm:inline-flex",onClick:Q}," Install app ")):st("",!0),k("button",{type:"button",class:"border border-white/10 px-3 py-1.5 text-white transition hover:border-white/40",onClick:s,"aria-label":"Open menu"},"  ")])]),k("main",tg,[k("div",ng,[k("div",rg,[xt(en(Ya))])])])]),xt(ya,{name:"fade"},{default:Un(()=>[n.value?(ce(),ue("div",{key:0,class:"fixed inset-0 z-40 bg-black/60 sm:hidden",onClick:i})):st("",!0)]),_:1}),xt(ya,{name:"slide"},{default:Un(()=>[n.value?(ce(),ue("aside",sg,[k("div",{class:"flex items-center justify-between text-white"},[M[6]||(M[6]=k("div",{class:"flex items-center gap-2"},[k("img",{src:gm,alt:"logo",class:"h-6 w-6 rounded-sm object-contain"}),k("p",{class:"text-sm font-semibold uppercase tracking-[0.15em] text-slate-200"},"jot.rip")],-1)),k("button",{type:"button",class:"border border-white/20 px-3 py-1 text-xs",onClick:i},"")]),k("nav",og,[k("div",ig,[M[11]||(M[11]=k("p",{class:"mb-2 text-[11px] uppercase tracking-wide text-slate-400"},"Stats",-1)),k("div",ag,[k("div",lg,[M[7]||(M[7]=k("p",{class:"text-[11px] text-slate-400"},"Jots",-1)),k("p",cg,qe(f.value.notes),1)]),k("div",ug,[M[8]||(M[8]=k("p",{class:"text-[11px] text-slate-400"},"Tabs",-1)),k("p",fg,qe(f.value.tabs),1)]),k("div",dg,[M[9]||(M[9]=k("p",{class:"text-[11px] text-slate-400"},"Images",-1)),k("p",pg,qe(f.value.images),1)]),k("div",hg,[M[10]||(M[10]=k("p",{class:"text-[11px] text-slate-400"},"Bytes",-1)),k("p",mg,qe(v(f.value.bytes)),1)])])]),(ce(),ue(gt,null,Lt(t,B=>xt(en(ns),{key:B.label,to:B.to,class:kt(["flex items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3",[se.$route.name===B.to?.name?"border-indigo-400 bg-indigo-500/20 text-white":"border-white/10 text-slate-200 hover:border-white/30 hover:text-white"]]),onClick:i},{default:Un(()=>[Mr(qe(B.label)+" ",1),M[12]||(M[12]=k("span",{"aria-hidden":"true"},"",-1))]),_:2},1032,["to","class"])),64)),u.value?(ce(),ue("button",{key:0,type:"button",class:kt(["flex w-full items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3",l.value?"border-emerald-400 bg-emerald-500/20 text-white animate-pulse":"border-white/10 text-slate-200 hover:border-white/30 hover:text-white"]),onClick:M[0]||(M[0]=()=>{i(),en(Kr)("manual-button")})},[...M[13]||(M[13]=[k("span",null,"Sync now",-1),k("span",{"aria-hidden":"true"},"",-1)])],2)):st("",!0),S.value?(ce(),ue("button",{key:1,type:"button",class:kt(["flex w-full items-center justify-between border px-3 py-2 text-sm font-semibold transition sm:px-4 sm:py-3","border-emerald-300/40 bg-emerald-500/20 text-white"]),onClick:M[1]||(M[1]=()=>{i(),Q()})},[...M[14]||(M[14]=[k("span",null,"Install app",-1),k("span",{"aria-hidden":"true"},"",-1)])])):st("",!0)])])):st("",!0)]),_:1})]))}}),ao=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n},vg=ao(gg,[["__scopeId","data-v-f1bdfb36"]]),Sc=new Map,Ec=/@(\d{4}-\d{2}-\d{2})(\[[^\]]+\])?/g,Ic=e=>e.toString().padStart(2,"0"),yg=e=>`${e.getFullYear()}-${Ic(e.getMonth()+1)}-${Ic(e.getDate())}`,Aa=e=>{const t=e.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(!t)return null;const n=Number(t[1]),s=Number(t[2])-1,i=Number(t[3]),l=new Date(n,s,i);return Number.isNaN(l.getTime())?null:l},bg=(e,t)=>new Date(e,t+1,0).getDate(),Xo=(e,t)=>{const n=new Date(e);return n.setDate(n.getDate()+t),n},wg=(e,t)=>Xo(e,t*7),df=(e,t)=>{const n=new Date(e),s=n.getMonth(),i=n.getDate(),l=s+t,u=new Date(n);u.setDate(1),u.setMonth(l);const f=bg(u.getFullYear(),u.getMonth());return u.setDate(Math.min(i,f)),u},xg=(e,t)=>df(e,t*12),Ac=(e,t,n)=>n==="d"?Xo(e,t):n==="w"?wg(e,t):n==="m"?df(e,t):xg(e,t),_g=e=>{const t={};if(!e)return t;const s=(e.startsWith("[")?e.slice(1,-1):e).split(",").map(i=>i.trim()).filter(Boolean);for(const i of s){const l=i.match(/^(s|r)(\d+)([dwmy])$/i);if(l){const f=l[1]?.toLowerCase(),p=Number(l[2]),v=l[3]?.toLowerCase();if(!Number.isFinite(p)||p<=0)continue;f==="s"&&(t.span={n:p,unit:v}),f==="r"&&(t.repeat={n:p,unit:v});continue}const u=i.match(/^(span|repeat)=(\d+)([dwmy])$/i);if(u){const f=u[1]?.toLowerCase(),p=Number(u[2]),v=u[3]?.toLowerCase();if(!Number.isFinite(p)||p<=0)continue;f==="span"&&(t.span={n:p,unit:v}),f==="repeat"&&(t.repeat={n:p,unit:v})}}return t},kg=(e,t,n)=>{const s=[],i=e.content.replace(/\r\n/g,`
`).split(`
`);let l=0,u=0;return i.forEach((f,p)=>{Ec.lastIndex=0;let v;for(;v=Ec.exec(f);){const m=v[1];if(!m)continue;const g=v[2],w=_g(g),S=v.index+v[0].length,P=f.slice(S).trim();s.push({tokenDate:m,noteId:t.id,noteTitle:t.title??"Untitled",firstTabName:n,noteColor:t.color??null,tabId:e.id,occurrenceIndex:l,textAfterToken:P,lineSnippet:P.slice(0,40),lineIndex:p,tokenRules:w}),l++}u+=f.length+1}),s},Cg=(e,t,n,s)=>e.getTime()<=s.getTime()&&t.getTime()>=n.getTime(),Tc=(e,t,n)=>{const s=Aa(e.tokenDate);if(!s)return[];s.setHours(0,0,0,0);const i=e.tokenRules.span??{n:1,unit:"d"},l=e.tokenRules.repeat,u=800,f=[];let p=s;for(let v=0;v<u;v++){const m=Xo(Ac(p,i.n,i.unit),-1);if(p.getTime()>n.getTime())break;if(Cg(p,m,t,n)){const g=new Date(Math.max(p.getTime(),t.getTime()));g.setHours(0,0,0,0);const w=new Date(Math.min(m.getTime(),n.getTime()));w.setHours(0,0,0,0);for(let S=new Date(g);S.getTime()<=w.getTime();S=Xo(S,1)){const{tokenRules:P,...Q}=e;f.push({...Q,date:yg(S),tokenDate:e.tokenDate})}}if(!l)break;p=Ac(p,l.n,l.unit)}return f},el=(e,t,n)=>{const s=Aa(n.start),i=Aa(n.end);if(!s||!i)return[];s.setHours(0,0,0,0),i.setHours(0,0,0,0);const l=new Map(e.map(m=>[m.id,m])),u=new Map(t.map(m=>[m.id,m])),f=new Map;t.forEach(m=>{const g=f.get(m.noteId)??[];g.push(m),f.set(m.noteId,g)});const p=new Map;e.forEach(m=>{const g=m.tabOrder?.[0],w=(g?u.get(g):void 0)??(f.get(m.id)??[])[0];w?.name&&p.set(m.id,w.name)});const v=[];return t.forEach(m=>{const g=l.get(m.noteId);if(!g)return;const w=p.get(g.id),S=`${m.id}:${m.updatedAt}:${g.updatedAt}:${w??""}`,P=Sc.get(m.id);if(P&&P.key===S){P.entries.forEach(se=>v.push(...Tc(se,s,i)));return}const Q=kg(m,g,w);Sc.set(m.id,{key:S,entries:Q}),Q.forEach(se=>v.push(...Tc(se,s,i)))}),v},Sg={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},Eg={class:"flex flex-1 min-h-0 flex-col overflow-hidden px-2 sm:px-0"},Ig={class:"flex items-center justify-between"},Ag={class:"text-sm font-semibold text-white"},Tg={class:"mt-2 grid flex-1 min-h-0 grid-cols-7 grid-rows-6 gap-0.5 text-sm overflow-hidden"},Og=["onClick"],Rg={class:"relative px-1 pt-1 sm:px-2 sm:pt-2"},Dg={key:0,class:"absolute right-1 top-1 text-[10px] text-white/50 sm:right-2 sm:top-2"},Pg={class:"flex-1 overflow-hidden px-1 pb-0 sm:px-2 sm:pb-2"},Mg=["onClick"],$g={class:"w-full rounded-3xl border border-white/10 bg-slate-900/95 p-3 text-white shadow-2xl sm:max-w-md sm:p-4"},Ng={class:"flex items-center justify-between"},jg={class:"text-sm font-semibold"},Lg={class:"mt-4 space-y-3"},Bg=["onClick"],Fg={class:"font-semibold text-white"},Kg={class:"mt-1 flex items-center gap-2 text-slate-300"},Ug={class:"min-w-0 truncate"},qg={key:0,class:"rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-slate-300"},Vg=Qt({__name:"Calendar",setup(e){const t=oo(),n=ye(new Date),s=ye([]),i=ye([]),l=ye([]),u=ye(null),f=ye(!0),p=ye(!1),v=ye(null),m=V=>V.toString().padStart(2,"0"),g=(V,H,ae)=>`${V}-${m(H+1)}-${m(ae)}`,w=Je(()=>{const V=new Date;return g(V.getFullYear(),V.getMonth(),V.getDate())}),S=Je(()=>new Date(n.value.getFullYear(),n.value.getMonth(),1)),P=Je(()=>n.value.toLocaleDateString(void 0,{month:"long",year:"numeric"})),Q=Je(()=>S.value.getDay()),se=Je(()=>{const V=new Map;return s.value.forEach(H=>{const ae=V.get(H.date)??[];ae.push(H),V.set(H.date,ae)}),V}),M=Je(()=>{const V=n.value.getFullYear(),H=n.value.getMonth(),ae=new Date(V,H,1),fe=new Date(V,H,1-Q.value),me=[];for(let ne=0;ne<42;ne++){const be=new Date(fe);be.setDate(fe.getDate()+ne),me.push({day:be.getDate(),date:g(be.getFullYear(),be.getMonth(),be.getDate()),inCurrentMonth:be.getMonth()===ae.getMonth()&&be.getFullYear()===ae.getFullYear()})}return me}),B=()=>{if(u.value)return;const V=new Date;u.value=g(V.getFullYear(),V.getMonth(),V.getDate())},$=async()=>{f.value=!0;const[V,H]=await Promise.all([hi(),Ur()]);i.value=V,l.value=H,X(),f.value=!1,B()},X=()=>{if(!M.value.length)return;const V=M.value[0]?.date,H=M.value[M.value.length-1]?.date;!V||!H||(s.value=el(i.value,l.value,{start:V,end:H}))},$e=V=>{const H=new Date(n.value);H.setMonth(H.getMonth()+V),n.value=H,X()},Pe=V=>{if(u.value=V,p.value){const H=se.value.get(V)??[];v.value={date:V,entries:H}}},De=(V,H)=>{H?.stopPropagation();const ae=(V.textAfterToken||"").slice(0,10);t.push({name:"note-editor",params:{id:V.noteId},query:{date:V.tokenDate,tab:V.tabId,...ae?{snippet:ae}:{}}}),v.value=null},rt=V=>{const H=(V.textAfterToken||"").trim();return H.length?H:V.firstTabName||V.noteTitle},Me=V=>V.noteColor??null,Ue=Je(()=>p.value?3:6);an($);const Ye=()=>{p.value=window.matchMedia("(max-width: 640px)").matches};return an(()=>{Ye(),window.addEventListener("resize",Ye)}),mr(()=>{window.removeEventListener("resize",Ye)}),(V,H)=>(ce(),ue(gt,null,[k("section",Sg,[k("div",Eg,[k("div",Ig,[k("button",{type:"button",class:"border border-white/10 px-3 py-1 text-xs text-white hover:border-white/30",onClick:H[0]||(H[0]=ae=>$e(-1))},"  "),k("div",Ag,qe(P.value),1),k("button",{type:"button",class:"border border-white/10 px-3 py-1 text-xs text-white hover:border-white/30",onClick:H[1]||(H[1]=ae=>$e(1))},"  ")]),H[4]||(H[4]=k("div",{class:"mt-3 grid grid-cols-7 gap-1 text-center text-xs text-slate-400 sm:mt-4"},[k("span",null,"Sun"),k("span",null,"Mon"),k("span",null,"Tue"),k("span",null,"Wed"),k("span",null,"Thu"),k("span",null,"Fri"),k("span",null,"Sat")],-1)),k("div",Tg,[(ce(!0),ue(gt,null,Lt(M.value,(ae,fe)=>(ce(),ue("button",{key:fe,type:"button",class:kt(["flex h-full flex-col border text-left text-white transition",[ae.inCurrentMonth?se.value.get(ae.date)?"border-indigo-300/50 bg-indigo-500/10":"border-white/10 bg-white/5":"border-white/10 bg-black/20 text-slate-500",u.value===ae.date?"ring-2 ring-indigo-400":""]]),onClick:me=>Pe(ae.date)},[k("div",Rg,[k("span",{class:kt(["text-sm font-semibold",ae.date===w.value?"text-white":"text-white/60"])},qe(ae.day),3),(se.value.get(ae.date)?.length??0)>Ue.value?(ce(),ue("span",Dg," +"+qe((se.value.get(ae.date)?.length??0)-Ue.value),1)):st("",!0)]),k("div",Pg,[(ce(!0),ue(gt,null,Lt((se.value.get(ae.date)||[]).slice(0,Ue.value),me=>(ce(),ue("p",{key:me.noteId+me.tabId+me.occurrenceIndex+me.date,class:"truncate text-[10px] text-indigo-100 hover:text-white sm:text-[11px]",onClick:tn(ne=>!p.value&&De(me,ne),["stop"])},[k("span",{class:"inline border-b",style:mt({borderColor:Me(me)??"rgba(255,255,255,0.25)"})},qe(rt(me)),5)],8,Mg))),128))])],10,Og))),128))])])]),xt(ya,{name:"fade"},{default:Un(()=>[v.value?(ce(),ue("div",{key:0,class:"fixed inset-0 z-50 flex items-end bg-black/70 p-2 sm:items-center sm:p-4",onClick:H[3]||(H[3]=tn(ae=>v.value=null,["self"]))},[k("div",$g,[k("div",Ng,[k("p",jg,"Entries for "+qe(v.value.date),1),k("button",{type:"button",class:"rounded-full border border-white/20 px-3 py-1 text-xs",onClick:H[2]||(H[2]=ae=>v.value=null)}," Close ")]),k("ul",Lg,[(ce(!0),ue(gt,null,Lt(v.value.entries,ae=>(ce(),ue("li",{key:ae.noteId+ae.tabId+ae.occurrenceIndex+ae.date,class:"rounded-2xl border border-white/10 bg-white/5 p-3 text-xs text-slate-200",onClick:fe=>De(ae)},[k("p",Fg,qe(ae.noteTitle),1),k("div",Kg,[k("span",{class:"h-2.5 w-2.5 shrink-0",style:mt({backgroundColor:Me(ae)??"rgba(255,255,255,0.25)"})},null,4),k("p",Ug,qe(rt(ae)),1)])],8,Bg))),128)),v.value.entries.length?st("",!0):(ce(),ue("li",qg," No entries for this day. "))])])])):st("",!0)]),_:1})],64))}}),Hg=ao(Vg,[["__scopeId","data-v-97ade35b"]]),Wg={class:"space-y-6"},zg={class:"flex gap-3"},Gg=["disabled"],Yg={class:"space-y-3 rounded-2xl border border-white/10 bg-slate-900/50 p-5"},Jg={class:"flex items-center justify-between"},Qg={class:"text-xs text-slate-400"},Xg={key:0,class:"rounded-xl border border-dashed border-white/10 bg-white/5 p-4 text-sm text-slate-300"},Zg={class:"space-y-2"},ev={class:"text-sm font-semibold text-white"},tv={class:"text-xs text-slate-400"},nv={class:"text-xs text-slate-500"},rv=["onClick"],sv=Qt({__name:"DbDemo",setup(e){const t=ye([]),n=ye(!0),s=ye(!1),i=async()=>{n.value=!0,t.value=await ps(),n.value=!1},l=async()=>{s.value=!0;const f=await Qa({title:"Untitled note"}),p=await Ws({noteId:f.id,name:"Main",content:""});await Ut(f.id,{tabOrder:[p.id]}),await i(),s.value=!1},u=async f=>{await Xa(f),await i()};return an(async()=>{await of(),await i()}),(f,p)=>(ce(),ue("section",Wg,[p[2]||(p[2]=k("header",{class:"flex flex-col gap-2"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"DB Demo"),k("h1",{class:"text-2xl font-semibold text-white"},"IndexedDB CRUD"),k("p",{class:"text-sm text-slate-300"}," Temporary screen to prove the Dexie-backed repository works and persists after refresh. ")],-1)),k("div",zg,[k("button",{type:"button",class:"rounded-xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-indigo-700/30 transition hover:bg-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",onClick:l,disabled:s.value},qe(s.value?"Creating...":"Create jot + tab"),9,Gg),p[0]||(p[0]=k("span",{class:"self-center text-xs text-slate-400"}," Jots persist across reloads; delete to clear. ",-1))]),k("div",Yg,[k("div",Jg,[p[1]||(p[1]=k("p",{class:"text-sm font-semibold text-white"},"Jots",-1)),k("span",Qg,qe(n.value?"Loading...":`${t.value.length} stored`),1)]),!t.value.length&&!n.value?(ce(),ue("div",Xg," No jots yet. Create one to populate IndexedDB. ")):st("",!0),k("ul",Zg,[(ce(!0),ue(gt,null,Lt(t.value,v=>(ce(),ue("li",{key:v.id,class:"flex items-center justify-between rounded-xl border border-white/10 bg-white/5 px-4 py-3"},[k("div",null,[k("p",ev,qe(v.title),1),k("p",tv," Updated: "+qe(new Date(v.updatedAt).toLocaleString()),1),k("p",nv,"Tabs: "+qe(v.tabOrder.length),1)]),k("button",{type:"button",class:"rounded-lg border border-white/20 px-3 py-1 text-xs font-semibold text-slate-200 transition hover:border-red-400 hover:text-red-200",onClick:m=>u(v.id)}," Delete ",8,rv)]))),128))])])]))}}),ov={},iv={class:"flex h-full min-h-0 flex-col gap-6 overflow-hidden"};function av(e,t){return ce(),ue("section",iv,[...t[0]||(t[0]=[Fu('<header class="shrink-0"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Help</p><h1 class="text-2xl font-semibold text-white">Quick reference</h1></header><div class="min-h-0 flex-1 space-y-4 overflow-auto px-2 pr-1 sm:px-0"><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Jots &amp; tabs</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Each jot has one or more tabs. Tab bar scrolls horizontally; add with +, rename, move, or delete (last tab cannot be deleted).</li><li>Pin a jot to keep it at the top. Archive hides it from Calendar; archived items sit at the bottom list.</li><li>Note color tints the editor, tab, and list accents.</li><li>Autosave runs as you type and when you navigate away. Title changes also save on blur/navigation.</li><li>Read-only: if the same jot is open in another browser tab, newcomers open in read-only to avoid clashes.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Editor basics</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Plain textarea with fixed line height; gutter shows icons for checkboxes, links, tags, dates, and images.</li><li>Checklists: use <span class="font-mono text-slate-100">- [ ]</span> or <span class="font-mono text-slate-100">- [x]</span>. Click the gutter checkbox to toggle.</li><li>Line wrapping is supported; gutter alignment adapts to wraps.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Tags</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Start a line with <span class="font-mono text-slate-100">#</span>; the rest of the line is the tag.</li><li><span class="font-mono text-slate-100">#</span> lines get a green highlight and gutter icon.</li><li><span class="font-mono text-slate-100">#!</span> makes a priority tag: orange highlight, bold, orange gutter icon, and sorted first.</li><li>Tags show in the Jots list, Home tag cloud, and are searchable (title + tags).</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Dates &amp; calendar</h2><p class="mt-2 text-sm text-slate-300"> Type a date token like <span class="font-mono text-slate-100">@today</span> and press space to normalize it into <span class="font-mono text-slate-100">@YYYY-MM-DD</span>. Everything after the token on that line becomes the calendar entry. </p><p class="mt-2 text-sm text-slate-300"> You can also add optional calendar rules directly after the date token using brackets. Both shorthand and named forms are supported: <span class="font-mono text-slate-100">@2025-12-22[s2d,r1y]</span> or <span class="font-mono text-slate-100">@2025-12-22[span=2d,repeat=1y]</span>. </p><div class="mt-4 grid gap-4 sm:grid-cols-2"><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Basics</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@today</span></li><li><span class="font-mono">@tomorrow</span></li><li><span class="font-mono">@yesterday</span></li><li><span class="font-mono">@inaweek</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Relative</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@in2days</span>, <span class="font-mono">@in10days</span></li><li><span class="font-mono">@in2weeks</span>, <span class="font-mono">@in3months</span></li><li><span class="font-mono">@in1year</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Week / Month / Year</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@thisweek</span> (Monday)</li><li><span class="font-mono">@nextweek</span> (next Monday)</li><li><span class="font-mono">@nextmonth</span></li><li><span class="font-mono">@nextyear</span></li><li><span class="font-mono">@eow</span>, <span class="font-mono">@eom</span>, <span class="font-mono">@eoy</span></li></ul></div><div><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Weekdays</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@monday</span>  <span class="font-mono">@sunday</span></li><li><span class="font-mono">@mon</span>, <span class="font-mono">@tue</span>, <span class="font-mono">@wed</span>, <span class="font-mono">@thu</span>, <span class="font-mono">@fri</span></li><li><span class="font-mono">@sat</span>, <span class="font-mono">@sun</span></li><li><span class="font-mono">@nextmonday</span> (always future)</li></ul></div><div class="sm:col-span-2"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Business</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li><span class="font-mono">@weekday</span> (today if MonFri, else next Monday)</li><li><span class="font-mono">@nextweekday</span> (next MonFri day)</li></ul></div><div class="sm:col-span-2"><p class="text-xs uppercase tracking-[0.2em] text-slate-400">Calendar Rules</p><ul class="mt-2 space-y-1 text-sm text-slate-200"><li> Span: <span class="font-mono">s2d</span> or <span class="font-mono">span=2d</span> (units: <span class="font-mono">d</span>, <span class="font-mono">w</span>, <span class="font-mono">m</span>, <span class="font-mono">y</span>) </li><li> Repeat: <span class="font-mono">r2w</span> or <span class="font-mono">repeat=2w</span> (units: <span class="font-mono">d</span>, <span class="font-mono">w</span>, <span class="font-mono">m</span>, <span class="font-mono">y</span>) </li><li> Examples: <span class="font-mono">@2025-12-22[r1y]</span>, <span class="font-mono">@2022-12-22[s2d]</span>, <span class="font-mono">@2022-12-22[s1w,r2w]</span></li></ul></div></div></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Images</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Add images via Add Image button or paste. They are stored locally (and synced if enabled).</li><li>Editor inserts a placeholder line like <span class="font-mono text-slate-100">![image:abc123]</span>.</li><li>Gutter shows a thumbnail; tap to open the full image viewer. Deleting the placeholder keeps the image for safety until cleanup.</li><li>Exports embed images directly in the HTML; re-import recreates them.</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Export &amp; import</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Export a jot to single-file HTML (includes tabs, text, images, and an import button inside) or to plain text.</li><li>Import page accepts exported HTML and recreates the jot (new id).</li><li>Settings has Export all and Clear all data (with double confirm).</li></ul></section><section class="border border-white/10 bg-white/5 p-3 sm:p-4"><h2 class="text-sm font-semibold text-white">Sync</h2><ul class="mt-2 space-y-1 text-sm text-slate-200"><li>Enter your <span class="font-mono text-slate-100">user/pass/phrase</span> bundle and server URL in Settings (server defaults to current origin).</li><li>Data is encrypted client-side with your passphrase; server stores encrypted blobs per user. Auth is Basic (user/password) auto-provisioned on first request.</li><li>Triggers: on load, interval (if enabled), when app regains focus, when opening the jot list, on tab/note change, and via the menu Sync now (visible when sync is on).</li><li>Deletes propagate via tombstones (notes, tabs, images).</li><li>Multiple browser tabs: the first to open a jot is editable; others open read-only and will refresh when changes arrive.</li><li>To change your user/pass/phrase, export a backup, wipe local + remote data, create a new bundle, then import the backup.</li></ul></section></div>',2)])])}const lv=ao(ov,[["render",av]]),Oc=/\bhttps?:\/\/[^\s<>"')]+/g,Rc=/@(\d{4}-\d{2}-\d{2})/g,Dc=/!\[image:([^\]]+)\]/g,cv=/^\s*-\s\[( |x|X)\]/;function to(e){const t=[],n=[],s=[],i=[],l=[];return e.split(`
`).forEach((u,f)=>{Dc.lastIndex=0,Oc.lastIndex=0,Rc.lastIndex=0;const p=u.match(cv);if(p){const w=(p[1]??"").toLowerCase();t.push({lineIndex:f,checked:w==="x"})}let v;for(;v=Dc.exec(u);){const w=v?.[1];w&&n.push({lineIndex:f,imageId:w})}let m;for(;m=Oc.exec(u);){const w=m?.[0];w&&s.push({lineIndex:f,url:w})}if(u.startsWith("#!")){const w=u.slice(2).trim();w&&i.push({lineIndex:f,tag:w,priority:!0})}else if(u.startsWith("#")){const w=u.slice(1).trim();w&&i.push({lineIndex:f,tag:w,priority:!1})}let g;for(;g=Rc.exec(u);){if(!g)continue;const w=g.index+g[0].length,S=u.slice(w).trim(),P=g[1];P&&l.push({lineIndex:f,date:P,entryText:S})}}),{checklists:t,images:n,urls:s,tags:i,dates:l}}const uv={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},fv={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},dv={class:"border border-white/10 bg-white/5 p-3 sm:p-4"},pv={key:0,class:"mt-3 text-sm text-slate-300"},hv={key:1,class:"mt-3 space-y-2"},mv=["onClick"],gv={class:"flex items-center gap-2"},vv={class:"min-w-0 truncate font-semibold"},yv={class:"mt-1 truncate text-xs text-slate-300"},bv={key:0,class:"border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},wv={class:"mt-3 border border-white/10 bg-white/5 p-3 sm:mt-4 sm:p-4"},xv={key:0,class:"mt-3 text-sm text-slate-300"},_v={key:1,class:"mt-3 space-y-2"},kv=["onClick"],Cv={class:"truncate font-semibold"},Sv={class:"mt-1 text-xs text-slate-400"},Ev={key:0,class:"border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},Iv={class:"mt-3 border border-white/10 bg-white/5 p-3 sm:mt-4 sm:p-4"},Av={key:0,class:"mt-3 text-sm text-slate-300"},Tv={key:1,class:"mt-3"},Ov={class:"flex flex-wrap gap-2"},Rv=["onClick"],Dv={key:0,class:"mt-2 border border-white/10 bg-slate-900/20 p-3 text-sm text-slate-300"},Pv=Qt({__name:"Home",setup(e){const t=oo(),n=ye(!0),s=ye([]),i=ye([]),l=ye([]),u=w=>w.toString().padStart(2,"0"),f=()=>{const w=new Date;return`${w.getFullYear()}-${u(w.getMonth()+1)}-${u(w.getDate())}`},p=w=>{const S=(w.textAfterToken||"").trim();return S.length?S:w.firstTabName||w.noteTitle},v=w=>{const S=(w.textAfterToken||"").slice(0,10);t.push({name:"note-editor",params:{id:w.noteId},query:{date:w.tokenDate,tab:w.tabId,...S?{snippet:S}:{}}})},m=(w,S,P)=>t.push({name:"note-editor",params:{id:w},query:S?{tab:S,...P!=null?{line:P}:{}}:{}});return an(async()=>{n.value=!0;const[w,S]=await Promise.all([hi(),Ur()]),P=f();s.value=el(w,S,{start:P,end:P}),i.value=w.filter(M=>!!M.pinnedAt).sort((M,B)=>{const $=M.pinnedAt?new Date(M.pinnedAt).getTime():0;return(B.pinnedAt?new Date(B.pinnedAt).getTime():0)-$}).map(M=>({id:M.id,title:M.title||"Untitled",updatedAt:M.updatedAt,color:M.color??null}));const Q=new Map;w.forEach(M=>{const B=M.tabOrder?.[0];B&&Q.set(M.id,B)}),S.forEach(M=>{Q.has(M.noteId)||Q.set(M.noteId,M.id)});const se=[];for(const M of S){if(Q.get(M.noteId)!==M.id)continue;to(M.content).tags.forEach($=>{se.push({tag:$.tag,priority:$.priority,noteId:M.noteId,tabId:M.id,updatedAt:w.find(X=>X.id===M.noteId)?.updatedAt||M.updatedAt,color:w.find(X=>X.id===M.noteId)?.color??null,lineIndex:$.lineIndex})})}l.value=se.sort((M,B)=>(M.priority?1:0)!=(B.priority?1:0)?(B.priority?1:0)-(M.priority?1:0):new Date(B.updatedAt).getTime()-new Date(M.updatedAt).getTime()),n.value=!1}),(w,S)=>(ce(),ue("section",uv,[k("div",fv,[k("div",dv,[S[0]||(S[0]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Today",-1)),n.value?(ce(),ue("div",pv,"Loading")):(ce(),ue("div",hv,[(ce(!0),ue(gt,null,Lt(s.value,P=>(ce(),ue("button",{key:P.noteId+P.tabId+P.occurrenceIndex+P.date,type:"button",class:"w-full border border-white/10 bg-slate-900/40 p-3 text-left text-sm text-white hover:border-white/20",onClick:Q=>v(P)},[k("div",gv,[k("span",{class:"h-3 w-1 shrink-0",style:mt(P.noteColor?{backgroundColor:P.noteColor}:{backgroundColor:"rgba(255,255,255,0.25)"})},null,4),k("span",vv,qe(P.noteTitle),1)]),k("p",yv,qe(p(P)),1)],8,mv))),128)),s.value.length?st("",!0):(ce(),ue("div",bv," No events today. "))]))]),k("div",wv,[S[1]||(S[1]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Pinned",-1)),n.value?(ce(),ue("div",xv,"Loading")):(ce(),ue("div",_v,[(ce(!0),ue(gt,null,Lt(i.value,P=>(ce(),ue("button",{key:P.id,type:"button",class:"w-full border border-white/10 bg-slate-900/40 p-3 text-left text-sm text-white hover:border-white/20",style:mt(P.color?{borderLeft:`6px solid ${P.color}`}:void 0),onClick:Q=>m(P.id)},[k("p",Cv,qe(P.title),1),k("p",Sv,"Updated "+qe(new Date(P.updatedAt).toLocaleString()),1)],12,kv))),128)),i.value.length?st("",!0):(ce(),ue("div",Ev," No pinned jots. "))]))]),k("div",Iv,[S[2]||(S[2]=k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Tags",-1)),n.value?(ce(),ue("div",Av,"Loading")):(ce(),ue("div",Tv,[k("div",Ov,[(ce(!0),ue(gt,null,Lt(l.value,P=>(ce(),ue("button",{key:P.tag+P.noteId,type:"button",class:"inline-flex items-center gap-2 rounded px-3 py-2 text-sm text-white",style:mt({border:P.priority?`1px solid ${P.color||"rgba(246,153,63,0.5)"}`:"1px solid transparent",backgroundColor:P.priority?P.color?`${P.color}20`:"rgba(246,153,63,0.12)":P.color?`${P.color}15`:"rgba(52,211,153,0.12)",color:P.color?"#fff":P.priority?"rgb(249,115,22)":"rgb(52,211,153)"}),onClick:Q=>m(P.noteId,P.tabId,P.lineIndex)},[k("span",{class:"h-3 w-1 shrink-0",style:mt(P.color?{backgroundColor:P.color}:{backgroundColor:"rgba(52,211,153,0.6)"})},null,4),k("span",{class:kt(P.priority?"font-bold":"")}," #"+qe(P.tag.length>20?P.tag.slice(0,20)+"":P.tag),3)],12,Rv))),128))]),l.value.length?st("",!0):(ce(),ue("div",Dv," No tags found. "))]))])])]))}}),Mv={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},$v={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},Nv={class:"space-y-3 border border-white/10 bg-slate-900/40 p-3 sm:p-4"},jv={class:"space-y-2"},Lv={key:0,class:"text-sm text-red-300"},Bv={key:1,class:"space-y-2 border border-yellow-300/30 bg-yellow-500/10 p-3 text-sm text-white"},Fv=["disabled"],Kv={key:2,class:"space-y-2 text-sm text-slate-200"},Uv={class:"font-semibold"},qv=["disabled"],Vv=Qt({__name:"Import",setup(e){const t=oo(),n=ye(null),s=ye(null),i=ye(null),l=ye(!1),u=()=>{n.value=null,s.value=null,i.value=null},f=async g=>{if(u(),!g)return;const w=await g.text();try{const P=JSON.parse(w);if(P&&P.type==="jotrip-backup"&&Array.isArray(P.notes)&&Array.isArray(P.tabs)){i.value=P;return}}catch{}const S=w.match(/<script[^>]+id=["']jotrip-export["'][^>]*>([\s\S]*?)<\/script>/);if(S?.[1])try{const P=JSON.parse(S[1]);s.value=P;return}catch{}n.value="Could not find supported export data."},p=(g,w)=>{const S=atob(g),P=new ArrayBuffer(S.length),Q=new Uint8Array(P);for(let se=0;se<S.length;se++)Q[se]=S.charCodeAt(se);return new Blob([P],{type:w})},v=async()=>{if(s.value){l.value=!0;try{const g=await Qa({title:s.value.note.title||"Imported note",tabOrder:[]}),w=new Map,S=new Map;if(s.value.images?.length)for(const Q of s.value.images)S.set(Q.id,pi());for(const Q of s.value.tabs){const se=Q.content.replace(/!\[image:([^\]]+)\]/g,(B,$)=>{const X=S.get($);return X?`![image:${X}]`:B}),M=await Ws({noteId:g.id,name:Q.name,content:se});w.set(Q.id,M.id)}const P=s.value.tabOrder.map(Q=>w.get(Q)).filter(Q=>!!Q);if(await Ut(g.id,{color:s.value.note.color??null,tabOrder:P}),s.value.images?.length)for(const Q of s.value.images){const se=w.get(Q.tabId);if(!se)continue;const M=p(Q.base64,Q.mime);await lf({id:S.get(Q.id)??Q.id,noteId:g.id,tabId:se,mime:Q.mime,blob:M,width:Q.width,height:Q.height,thumbnailDataUrl:Q.thumbnailDataUrl})}t.push({name:"note-editor",params:{id:g.id}})}catch{n.value="Import failed."}finally{l.value=!1}}},m=async()=>{const g=i.value;if(!(!g||!window.confirm("Importing a backup will replace ALL local data. Continue?")||window.prompt("Type RESTORE to proceed with replacing all data")!=="RESTORE")){l.value=!0;try{const P=Ja(),Q=(g.notes??[]).map($=>JSON.parse(JSON.stringify($))),se=(g.tabs??[]).map($=>JSON.parse(JSON.stringify($))),M=(g.meta??[]).map($=>({key:$.key,value:$.value})),B=await Promise.all((g.images??[]).map(async $=>({id:$.id,noteId:$.noteId,tabId:$.tabId,mime:$.mime,blob:p($.base64,$.mime),width:$.width,height:$.height,createdAt:$.createdAt,thumbnailDataUrl:$.thumbnailDataUrl})));await P.transaction("rw",[P.notes,P.tabs,P.images,P.meta],async()=>{await Promise.all([P.notes.clear(),P.tabs.clear(),P.images.clear(),P.meta.clear()]),Q.length&&await P.notes.bulkPut(Q),se.length&&await P.tabs.bulkPut(se),B.length&&await P.images.bulkPut(B),M.length&&await P.meta.bulkPut(M)}),t.push({name:"home"})}catch(P){console.error(P),n.value="Import failed. See console for details."}finally{l.value=!1}}};return(g,w)=>(ce(),ue("section",Mv,[w[3]||(w[3]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Import"),k("h1",{class:"text-2xl font-semibold text-white"},"Import exported note")],-1)),k("div",$v,[k("div",Nv,[k("div",jv,[w[1]||(w[1]=k("p",{class:"text-sm text-slate-300"},"Choose an export file (.html single jot or .json full backup).",-1)),k("input",{type:"file",accept:".html,text/html,application/json,.json",onChange:w[0]||(w[0]=S=>f(S.target.files?.[0]))},null,32)]),n.value?(ce(),ue("div",Lv,qe(n.value),1)):st("",!0),i.value?(ce(),ue("div",Bv,[w[2]||(w[2]=k("p",{class:"font-semibold"},"Backup detected",-1)),k("p",null,"Jots: "+qe(i.value.notes.length),1),k("p",null,"Tabs: "+qe(i.value.tabs.length),1),k("p",null,"Images: "+qe(i.value.images?.length??0),1),k("button",{type:"button",class:"border border-emerald-300/40 bg-emerald-500/20 px-3 py-2 text-sm text-white",disabled:l.value,onClick:m},qe(l.value?"Importing":"Import backup (replaces all data)"),9,Fv)])):s.value?(ce(),ue("div",Kv,[k("p",Uv,"Found: "+qe(s.value.note.title||"Untitled"),1),k("p",null,"Tabs: "+qe(s.value.tabs.length),1),k("p",null,"Images: "+qe(s.value.images?.length??0),1),k("button",{type:"button",class:"border border-emerald-300/40 bg-emerald-500/20 px-3 py-2 text-sm text-white",disabled:l.value,onClick:v},qe(l.value?"Importing":"Import jot"),9,qv)])):st("",!0)])])]))}}),pf=(e,t)=>{const n=e.lastIndexOf(`
`,t-1)+1,s=e.indexOf(`
`,t),i=s===-1?e.length:s,l=e.slice(n,i),f=l.startsWith("# ")?l.replace(/^#\s+/,""):`# ${l}`,p=f.length-l.length,v=e.slice(0,n)+f+e.slice(i),m=t+p;return{text:v,selectionStart:m,selectionEnd:m}},hf=(e,t)=>{const n=e.lastIndexOf(`
`,t-1)+1,s="- [ ] ",i=e.slice(0,n)+s+e.slice(n),l=t+s.length;return{text:i,selectionStart:l,selectionEnd:l}},Hv=["placeholder","readonly"],Wv=Qt({__name:"NoteEditorTextarea",props:{modelValue:{},placeholder:{},textareaClass:{},readonly:{type:Boolean}},emits:["update:modelValue","selection-change","tag-trigger","date-trigger","scroll","paste","cursor-line","wrap-cols"],setup(e,{expose:t,emit:n}){const s=e,i=n,l=ye(null),u=ye(null);let f=null,p=null,v=0,m=!1;const g=Je({get:()=>s.modelValue,set:Y=>i("update:modelValue",Y)}),w=()=>{const Y=l.value;if(!Y)return;i("selection-change",{start:Y.selectionStart,end:Y.selectionEnd});const z=Y.value.slice(0,Y.selectionStart).split(`
`).length-1;i("cursor-line",{lineIndex:z})},S=()=>{const Y=l.value;if(!Y)return;const z=Y.selectionStart,le=Y.value.slice(0,z).split(`
`).length-1,je=Y.value.lastIndexOf(`
`,z-1)+1,W=Y.value.slice(je,z),de=W.match(/(?:^|[\s])#([A-Za-z0-9_-]*)$/);de&&i("tag-trigger",{query:de[1]??"",lineIndex:le,charIndex:z-je});const U=W.match(/(?:^|[\s])@([^\s]*)$/);U&&i("date-trigger",{query:U[1]??"",lineIndex:le,charIndex:z-je})},P=(Y="")=>{const z=l.value;if(!z)return!1;const le=z.selectionStart,je=z.value.lastIndexOf(`
`,le-1)+1,de=z.value.slice(je,le).match(/@([^\s]*)$/);if(!de)return!1;const U=de[1]??"",we=H(U);if(!we)return!1;const Ce=le-U.length-1,y=z.value.slice(0,Ce),x=z.value.slice(z.selectionEnd),R=`${y}@${we}${Y}${x}`,J=Ce+we.length+1+Y.length;return u.value=J,i("update:modelValue",R),mn(()=>ut()),!0},Q=()=>{const Y=l.value;if(!Y||m)return!1;const z=Y.selectionStart;if(!z)return!1;const le=Y.value[z-1];if(le!==" "&&le!==`
`)return!1;const je=z-1,W=Y.value.lastIndexOf(`
`,je-1)+1,U=Y.value.slice(W,je).match(/@([^\s]*)$/);if(!U)return!1;const we=U[1]??"",Ce=H(we);if(!Ce)return!1;const y=je-we.length-1,x=Y.value.slice(0,y),R=Y.value.slice(z),J=`${x}@${Ce}${le}${R}`,ee=y+1+Ce.length+1;return m=!0,u.value=ee,i("update:modelValue",J),mn(()=>{ut(),m=!1}),!0},se=Y=>{const z=l.value;if(!z)return;const le=z.selectionStart,je=z.value,W=je.slice(0,le)+Y+je.slice(le+Y.length),de=le+Y.length;u.value=de,i("update:modelValue",W),mn(()=>ut())},M=(Y,z)=>{u.value=z,i("update:modelValue",Y),mn(()=>ut())},B=()=>{const Y=l.value;if(!Y)return!1;const z=Y.selectionStart,le=Y.selectionEnd;if(z!==le)return!1;const je=Y.value,W=je.lastIndexOf(`
`,z-1)+1,de=je.indexOf(`
`,z),U=de===-1?je.length:de,we=je.slice(W,U);if(!/^\s*-\s\[( |x|X)\]/.test(we))return!1;if(/^\s*-\s\[\s\]\s*$/.test(we)){const R=je.slice(0,W),J=je.slice(U);return M(R+J,W),!0}const x=`
${we.match(/^(\s*)-/)?.[1]??""}- [ ] `;return M(je.slice(0,z)+x+je.slice(le),z+x.length),!0},$=Y=>{const z=Y.getFullYear(),le=String(Y.getMonth()+1).padStart(2,"0"),je=String(Y.getDate()).padStart(2,"0");return`${z}-${le}-${je}`},X=(Y,z)=>new Date(Y,z+1,0).getDate(),$e=(Y,z)=>{const le=new Date(Y);return le.setDate(le.getDate()+z),le},Pe=(Y,z)=>$e(Y,z*7),De=(Y,z)=>{const le=new Date(Y),je=le.getMonth(),W=le.getDate(),de=je+z,U=new Date(le);U.setDate(1),U.setMonth(de);const we=X(U.getFullYear(),U.getMonth());return U.setDate(Math.min(W,we)),U},rt=(Y,z)=>De(Y,z*12),Me=Y=>{const z=new Date(Y),je=(z.getDay()+6)%7;return z.setHours(0,0,0,0),z.setDate(z.getDate()-je),z},Ue=Y=>{const z=Me(Y),le=$e(z,6);return le.setHours(0,0,0,0),le},Ye=Y=>{const z=new Date(Y),le=z.getFullYear(),je=z.getMonth(),W=new Date(le,je+1,0);return W.setHours(0,0,0,0),W},V=Y=>{const z=new Date(Y),le=new Date(z.getFullYear(),11,31);return le.setHours(0,0,0,0),le},H=Y=>{if(!Y)return null;const z=Y.toLowerCase(),le=new Date;if(z==="today")return $(le);if(z==="tomorrow")return $($e(le,1));if(z==="yesterday")return $($e(le,-1));if(z==="inaweek")return $(Pe(le,1));if(z==="nextweek")return $(Me(Pe(le,1)));if(z==="thisweek")return $(Me(le));if(z==="nextmonth")return $(De(le,1));if(z==="nextyear")return $(rt(le,1));if(z==="eow")return $(Ue(le));if(z==="eom")return $(Ye(le));if(z==="eoy")return $(V(le));if(z==="weekday"){const x=le.getDay();return x>=1&&x<=5?$(le):$(Me(Pe(le,1)))}if(z==="nextweekday"){const x=le.getDay();return x>=1&&x<=4?$($e(le,1)):$(Me(Pe(le,1)))}const je=z.match(/^in(\d+)(day|days|week|weeks|month|months|year|years)$/);if(je){const x=Number(je[1]);if(!Number.isFinite(x)||x<0)return null;const R=je[2];if(R==="day"||R==="days")return $($e(le,x));if(R==="week"||R==="weeks")return $(Pe(le,x));if(R==="month"||R==="months")return $(De(le,x));if(R==="year"||R==="years")return $(rt(le,x))}const W={sunday:0,monday:1,tuesday:2,wednesday:3,thursday:4,friday:5,saturday:6},de={sun:"sunday",mon:"monday",tue:"tuesday",tues:"tuesday",wed:"wednesday",thu:"thursday",thur:"thursday",thurs:"thursday",fri:"friday",sat:"saturday"},U=de[z]??z;if(U in W){const x=W[U],R=new Date,J=R.getDay(),ee=(x-J+7)%7;return R.setDate(R.getDate()+ee),$(R)}const we=z.match(/^next([a-z]+)$/);if(we){const x=we[1]??"",R=de[x]??x;if(R in W){const J=W[R],ee=new Date,te=ee.getDay(),Se=(J-te+7)%7||7;return ee.setDate(ee.getDate()+Se),$(ee)}}const Ce=Y.match(/^(\d{4})-(\d{1,2})-(\d{1,2})$/);if(Ce){const x=Ce[1],R=Ce[2],J=Ce[3];return!x||!R||!J?null:`${x}-${R.padStart(2,"0")}-${J.padStart(2,"0")}`}const y=Y.match(/^(\d{4})\/(\d{1,2})\/(\d{1,2})$/);if(y){const x=y[1],R=y[2],J=y[3];return!x||!R||!J?null:`${x}-${R.padStart(2,"0")}-${J.padStart(2,"0")}`}return null},ae=()=>{Q(),S(),w()},fe=Y=>{if(Y.key===" "&&P(" ")&&Y.preventDefault(),Y.key==="Enter"){if(P(" ")){Y.preventDefault(),se(`
`);return}B()&&Y.preventDefault()}},me=()=>{S(),w()},ne=()=>{const Y=l.value;if(!Y)return;const z=getComputedStyle(Y),le=parseFloat(z.lineHeight),je=parseFloat(z.paddingTop),W=parseFloat(z.paddingBottom);i("scroll",{scrollTop:Y.scrollTop,clientHeight:Y.clientHeight,lineHeight:le,paddingTop:je,paddingBottom:W})},be=Y=>{if(p)return p;const z=document.createElement("textarea");return z.setAttribute("aria-hidden","true"),z.tabIndex=-1,z.style.position="absolute",z.style.left="-10000px",z.style.top="0",z.style.height="0",z.style.overflow="hidden",z.style.whiteSpace="pre-wrap",z.style.resize="none",document.body.appendChild(z),p=z,ze(Y),z},ze=Y=>{if(!p)return;const z=getComputedStyle(Y);p.style.boxSizing=z.boxSizing,p.style.fontFamily=z.fontFamily,p.style.fontSize=z.fontSize,p.style.fontWeight=z.fontWeight,p.style.letterSpacing=z.letterSpacing,p.style.lineHeight=z.lineHeight,p.style.padding=z.padding,p.style.border=z.border,p.style.width=`${Y.clientWidth}px`},tt=()=>{const Y=l.value;if(!Y)return;const z=be(Y);ze(Y),z.value="M";const le=z.scrollHeight;if(!le)return;const je=Ce=>Ce<=le+.5;let W=1,de=5e3,U=1;for(;W<=de;){const Ce=Math.floor((W+de)/2);z.value="M".repeat(Ce);const y=z.scrollHeight;je(y)?(U=Ce,W=Ce+1):de=Ce-1}const we=Math.max(1,U);we!==v&&(v=we,i("wrap-cols",{cols:we}))};t({focus:()=>l.value?.focus(),applyFormatting:Y=>{const z=l.value;if(!z||s.readonly)return;const le=z.selectionStart,je=z.value;let W;Y==="header"?W=pf(je,le):W=hf(je,le),i("update:modelValue",W.text),requestAnimationFrame(()=>{z.selectionStart=W.selectionStart,z.selectionEnd=W.selectionEnd,w()})}}),an(()=>{w(),ne(),tt();const Y=l.value;Y&&"ResizeObserver"in window?(f=new ResizeObserver(()=>tt()),f.observe(Y)):window.addEventListener("resize",tt)}),mr(()=>{f&&(f.disconnect(),f=null),window.removeEventListener("resize",tt),p&&p.parentNode&&p.parentNode.removeChild(p),p=null}),Rn(()=>s.modelValue,()=>{requestAnimationFrame(()=>{ut(),w()})});const ut=()=>{const Y=l.value;if(Y&&u.value!==null){const z=u.value;Y.selectionStart=z,Y.selectionEnd=z,u.value=null}};return(Y,z)=>$r((ce(),ue("textarea",{ref_key:"textareaRef",ref:l,"onUpdate:modelValue":z[0]||(z[0]=le=>g.value=le),class:kt(["editor-textarea",e.textareaClass]),placeholder:e.placeholder,readonly:!!e.readonly,onInput:ae,onKeyup:me,onSelect:w,onMouseup:w,onKeydown:fe,onScroll:ne,onPaste:z[1]||(z[1]=le=>i("paste",le))},null,42,Hv)),[[ls,g.value]])}}),zv=["onMouseenter"],Gv=["onClick"],Yv=["onClick"],Jv=["onClick"],Qv=["src"],Xv={key:1,class:"px-2"},Zv=["onClick"],ey=["onClick"],Pc=5,ty=Qt({__name:"EditorGutter",props:{text:{},parsed:{},scrollTop:{},viewportHeight:{},lineHeight:{},paddingTop:{},paddingBottom:{},imageThumbs:{},activeLine:{},wrapCols:{}},emits:["toggle-checklist","line-tags","line-link","line-images","line-dates","request-image","hover-rect"],setup(e,{emit:t}){const n=e,s=t,i=Je(()=>n.text.replace(/\r\n/g,`
`).split(`
`)),l=Je(()=>Math.max(1,i.value.length)),u=Je(()=>{const M=new Map;return n.parsed.checklists.forEach(B=>{const $=M.get(B.lineIndex)??{};$.hasChecklist=!0,$.checklistChecked=B.checked,M.set(B.lineIndex,$)}),n.parsed.urls.forEach(B=>{const $=M.get(B.lineIndex)??{};$.urls=[...$.urls??[],B.url],M.set(B.lineIndex,$)}),n.parsed.tags.forEach(B=>{const $=M.get(B.lineIndex)??{};$.tags=[...$.tags??[],{tag:B.tag,priority:B.priority}],M.set(B.lineIndex,$)}),n.parsed.images.forEach(B=>{const $=M.get(B.lineIndex)??{};$.images=[...$.images??[],B.imageId],M.set(B.lineIndex,$)}),n.parsed.dates.forEach(B=>{const $=M.get(B.lineIndex)??{};$.dates=[...$.dates??[],B.date],M.set(B.lineIndex,$)}),M}),f=Je(()=>{const M=Math.max(1,n.wrapCols??Number.POSITIVE_INFINITY),B=new Array(l.value),$=new Array(l.value);let X=0;for(let $e=0;$e<l.value;$e++){const De=(i.value[$e]??"").length||0,rt=M===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(De/M));B[$e]=X,$[$e]=rt,X+=rt}return{rowStarts:B,rowCounts:$,totalRows:X}}),p=M=>{const B=f.value.rowStarts,$=f.value.rowCounts;let X=0,$e=B.length-1,Pe=0;for(;X<=$e;){const De=X+$e>>1;(B[De]??0)<=M?(Pe=De,X=De+1):$e=De-1}for(;Pe>0&&M<(B[Pe]??0);)Pe--;for(;Pe<$.length-1&&M>=(B[Pe]??0)+($[Pe]??1);)Pe++;return Pe},v=Je(()=>{const M=n.paddingTop??0,B=Math.max(0,n.scrollTop-M),$=Math.max(0,Math.floor(B/n.lineHeight)-Pc),X=Math.ceil(n.viewportHeight/n.lineHeight)+Pc*2,$e=Math.min(f.value.totalRows,$+X),Pe=p($);let De=Pe;for(;De<l.value&&(f.value.rowStarts[De]??0)<$e;)De++;return{startLine:Pe,endLine:De}}),m=Je(()=>{const M=[];for(let B=v.value.startLine;B<v.value.endLine;B++){const $=u.value.get(B);M.push({lineIndex:B,meta:$,rowStart:f.value.rowStarts[B]??0,rowCount:f.value.rowCounts[B]??1})}return M}),g=Je(()=>{const M=new Set;return m.value.forEach(B=>{B.meta?.images?.forEach($=>M.add($))}),Array.from(M)});Rn(()=>g.value,M=>{M.forEach(B=>s("request-image",{imageId:B}))},{immediate:!0});const w=(M,B)=>{B.preventDefault(),s("toggle-checklist",M)},S=(M,B)=>{B?.length&&s("line-tags",{lineIndex:M,tags:B.map($=>$.tag)})},P=(M,B)=>{B?.length&&s("line-link",{lineIndex:M,urls:B})},Q=(M,B)=>{B?.length&&s("line-images",{lineIndex:M,imageIds:B})},se=(M,B)=>{B?.length&&s("line-dates",{lineIndex:M,dates:B})};return(M,B)=>(ce(),ue("div",{class:"relative w-12 select-none overflow-hidden border-r border-white/10 bg-transparent",style:mt({height:`${e.viewportHeight||l.value*e.lineHeight}px`}),onMouseleave:B[5]||(B[5]=$=>s("hover-rect",null))},[k("div",{class:"absolute inset-0",style:mt({height:`${(e.paddingTop??0)+(e.paddingBottom??0)+f.value.totalRows*e.lineHeight}px`})},[(ce(!0),ue(gt,null,Lt(m.value,$=>(ce(),ue("div",{key:$.lineIndex,class:kt(["absolute left-0 right-0 flex items-center justify-stretch gap-0 px-0",[e.activeLine===$.lineIndex?$.meta?.tags?.some(X=>X.priority)?"bg-orange-500/15":"bg-white/10":"",e.activeLine!==$.lineIndex&&$.meta?.tags?.some(X=>X.priority)?"bg-orange-500/8":""]]),style:mt({height:`${$.rowCount*e.lineHeight}px`,transform:`translateY(${(e.paddingTop??0)+$.rowStart*e.lineHeight-e.scrollTop}px)`}),onMouseenter:X=>s("hover-rect",{top:(e.paddingTop??0)+$.rowStart*e.lineHeight-e.scrollTop,height:$.rowCount*e.lineHeight})},[$.meta?.hasChecklist?(ce(),ue("button",{key:0,class:kt(["icon-chip",$.meta.checklistChecked?"bg-amber-400/30 text-amber-100 border-amber-200/60":"bg-amber-400/15 text-amber-200"]),type:"button",onMousedown:B[0]||(B[0]=tn(()=>{},["prevent"])),onClick:X=>w($.lineIndex,X)},qe($.meta.checklistChecked?"":""),43,Gv)):st("",!0),$.meta?.dates?.length?(ce(),ue("button",{key:1,class:"icon-chip bg-purple-400/15 text-purple-200 border border-white/15",type:"button",onMousedown:B[1]||(B[1]=tn(()=>{},["prevent"])),onClick:X=>se($.lineIndex,$.meta.dates)},"  ",40,Yv)):st("",!0),$.meta?.images?.length?(ce(),ue("button",{key:2,class:"icon-chip bg-indigo-400/15 text-indigo-200 p-0",type:"button",onMousedown:B[2]||(B[2]=tn(()=>{},["prevent"])),onClick:X=>Q($.lineIndex,$.meta.images)},[$.meta.images[0]&&e.imageThumbs?.[$.meta.images[0]]?(ce(),ue("img",{key:0,src:e.imageThumbs[$.meta.images[0]],alt:"thumb",class:"h-6 w-6 rounded-md object-cover"},null,8,Qv)):(ce(),ue("span",Xv,""))],40,Jv)):st("",!0),$.meta?.urls?.length?(ce(),ue("button",{key:3,class:"icon-chip bg-sky-400/15 text-sky-200",type:"button",onMousedown:B[3]||(B[3]=tn(()=>{},["prevent"])),onClick:X=>P($.lineIndex,$.meta.urls)},"  ",40,Zv)):st("",!0),$.meta?.tags?.length?(ce(),ue("button",{key:4,class:kt(["icon-chip",$.meta.tags.some(X=>X.priority)?"bg-orange-400/15 text-orange-100 border-orange-200/50":"bg-emerald-400/15 text-emerald-200"]),type:"button",onMousedown:B[4]||(B[4]=tn(()=>{},["prevent"])),onClick:X=>S($.lineIndex,$.meta.tags)}," # ",42,ey)):st("",!0)],46,zv))),128))],4)],36))}}),ny=ao(ty,[["__scopeId","data-v-ddcbe9f4"]]),ry={class:"relative max-h-full max-w-full bg-slate-900 p-3 shadow-2xl"},sy=["src"],oy={key:3,class:"h-64 w-64 rounded-xl bg-white/5"},iy=Qt({__name:"ImageModal",props:{open:{type:Boolean},src:{},canPrev:{type:Boolean},canNext:{type:Boolean}},emits:["close","prev","next"],setup(e,{emit:t}){const n=t;return(s,i)=>e.open?(ce(),ue("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",onClick:i[3]||(i[3]=tn(l=>n("close"),["self"]))},[k("div",ry,[k("button",{type:"button",class:"absolute right-2 top-2 bg-white/10 px-2 py-1 text-xs text-white hover:bg-white/20",onClick:i[0]||(i[0]=l=>n("close"))}," Close "),e.canPrev?(ce(),ue("button",{key:0,type:"button",class:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/10 px-3 py-2 text-white hover:bg-white/20",onClick:i[1]||(i[1]=l=>n("prev")),"aria-label":"Previous image"},"  ")):st("",!0),e.canNext?(ce(),ue("button",{key:1,type:"button",class:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/10 px-3 py-2 text-white hover:bg-white/20",onClick:i[2]||(i[2]=l=>n("next")),"aria-label":"Next image"},"  ")):st("",!0),e.src?(ce(),ue("img",{key:2,src:e.src,alt:"image",class:"max-h-[70vh] max-w-[80vw] rounded-xl object-contain"},null,8,sy)):(ce(),ue("div",oy))])])):st("",!0)}}),ay=1920,ly=240;async function cy(e){const t=await uy(e),{canvas:n,mime:s,width:i,height:l}=await fy(t,ay),u=await dy(n,s),p=(await py(t)).toDataURL("image/webp",.8);return{blob:u,mime:s,width:i,height:l,thumbnailDataUrl:p}}async function uy(e){return new Promise((t,n)=>{const s=new FileReader;s.onload=()=>{const i=new Image;i.onload=()=>t(i),i.onerror=n,i.src=s.result},s.onerror=n,s.readAsDataURL(e)})}async function fy(e,t){const n=Math.min(1,t/Math.max(e.width,e.height)),s=Math.round(e.width*n),i=Math.round(e.height*n),l=document.createElement("canvas");l.width=s,l.height=i;const u=l.getContext("2d");if(!u)throw new Error("Canvas not supported");u.drawImage(e,0,0,s,i);const f=l.toDataURL("image/webp").length<l.toDataURL("image/jpeg",.85).length?"image/webp":"image/jpeg";return{canvas:l,mime:f,width:s,height:i}}async function dy(e,t){return new Promise((n,s)=>{e.toBlob(i=>{i?n(i):s(new Error("Failed to create blob"))},t,t==="image/jpeg"?.85:.8)})}async function py(e){const t=Math.min(1,ly/Math.max(e.width,e.height)),n=Math.max(1,Math.round(e.width*t)),s=Math.max(1,Math.round(e.height*t)),i=document.createElement("canvas");i.width=n,i.height=s;const l=i.getContext("2d");if(!l)throw new Error("Canvas not supported");return l.drawImage(e,0,0,n,s),i}function oa(e,t){const n=e.tabOrder||[],s=new Set(t.map(f=>f.id)),i=new Set,l=n.filter(f=>s.has(f)&&!i.has(f)&&!!i.add(f)),u=t.map(f=>f.id).filter(f=>!i.has(f)&&!!i.add(f));return[...l,...u]}const hy={key:0,class:"flex h-full min-h-0 flex-col gap-2 overflow-hidden sm:gap-4"},my={key:0,class:"flex items-center gap-2 border border-yellow-400/40 bg-yellow-500/10 px-3 py-2 text-sm text-yellow-200"},gy={class:"relative flex shrink-0 items-center gap-2"},vy=["onKeydown","disabled"],yy=["disabled"],by=["disabled"],wy=["disabled"],xy={class:"grid grid-cols-8 gap-2"},_y=["onClick","aria-label"],ky={class:"mb-3 max-h-40 space-y-2 overflow-auto border border-white/10 p-2"},Cy=["checked","onChange"],Sy={class:"truncate"},Ey={class:"tab-strip relative flex items-center gap-2 overflow-x-auto overflow-y-visible whitespace-nowrap text-white text-sm shrink-0 order-1 sm:order-none no-scrollbar"},Iy={class:"pointer-events-none absolute left-0 top-0 bottom-0 w-1 bg-white/10","aria-hidden":"true"},Ay=["onClick","disabled"],Ty=["disabled"],Oy={class:"flex flex-wrap items-center border border-white/15 text-white text-sm shrink-0 order-4 sm:order-none"},Ry=["disabled"],Dy=["disabled"],Py=["disabled"],My={key:0,class:"self-center text-[11px] text-slate-400"},$y={class:"ml-auto flex items-center divide-x divide-white/15"},Ny=["disabled"],jy=["disabled"],Ly=["disabled"],By=["disabled"],Fy={class:"relative flex flex-1 min-h-0 items-start border border-white/10 bg-white/5 overflow-hidden order-3 sm:order-none"},Ky={class:"flex items-center justify-between"},Uy={class:"text-sm font-semibold"},qy={key:0,class:"mt-3 text-xs text-slate-300"},Vy={key:1,class:"mt-3 max-h-[50vh] overflow-auto"},Hy=["onClick"],Wy={class:"flex items-center gap-2"},zy={class:"min-w-0 truncate font-semibold"},Gy={class:"mt-1 truncate text-xs text-slate-300"},Yy={key:0,class:"border border-white/10 bg-white/5 p-3 text-xs text-slate-300"},Jy={key:1,class:"text-sm text-slate-300"},Qy=Qt({__name:"NoteEditor",setup(e){const t=hm(),n=oo(),s=ye(null),i=ye([]),l=ye(null),u=ye(""),f=ye(!0),p=ye(!1),v=ye({start:0,end:0}),m=ye(null),g=ye(0),w=ye(0),S=ye(22),P=ye(0),Q=ye(0),se=ye({}),M=Je(()=>{const C=new Set,I=[];return y.value.images.forEach(T=>{C.has(T.imageId)||(C.add(T.imageId),I.push(T.imageId))}),I}),B=ye(null),$=ye(null),X=ye(null),$e=ye(0),Pe=Je(()=>Math.max(0,P.value+$e.value*S.value-g.value)),De=ye(null),rt=ye(0),Me=ye(null);let Ue=null;const Ye=ye(null);let V=null;const H=ye(null),ae=ye(!1),fe=ye(null),me=ye({}),ne=ye(null);let be=0;const ze=ye(""),tt=ye(null),bt=ye(!1),ut=ye(null),Y=ye(null),z=ye(!1),le=ye([]),je=(C,I)=>{const T=new Set(le.value);I?T.add(C):T.delete(C),le.value=Array.from(T)},W=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():Math.random().toString(36).slice(2),de=Date.now(),U=ye(null),we=ye([]),Ce=Je(()=>we.value.some(C=>C.startedAt<de)),y=Je(()=>to(u.value)),x=Je(()=>i.value.find(C=>C.id===l.value)||i.value[0]||null),R=Je(()=>i.value.map(C=>C.id)),J=Je(()=>{const C={};for(const I of i.value){const T=to(I.content||""),ie=T.checklists.length,pe=T.checklists.filter(Le=>Le.checked).length;C[I.id]={total:ie,checked:pe}}return C}),ee=Je(()=>u.value.replace(/\r\n/g,`
`).split(`
`)),te=Je(()=>{const C=rt.value>0?rt.value:Number.POSITIVE_INFINITY,I=new Array(ee.value.length),T=new Array(ee.value.length);let ie=0;for(let pe=0;pe<ee.value.length;pe++){const Le=(ee.value[pe]??"").length,Oe=C===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(Le/C));I[pe]=ie,T[pe]=Oe,ie+=Oe}return{rowStarts:I,rowCounts:T,totalRows:ie}}),Se=C=>{const I=te.value.rowStarts,T=te.value.rowCounts;let ie=0,pe=I.length-1,Le=0;for(;ie<=pe;){const Oe=ie+pe>>1;(I[Oe]??0)<=C?(Le=Oe,ie=Oe+1):pe=Oe-1}for(;Le>0&&C<(I[Le]??0);)Le--;for(;Le<T.length-1&&C>=(I[Le]??0)+(T[Le]??1);)Le++;return Le},_e=Je(()=>{const C=P.value??0,I=Math.max(0,g.value-C),T=Math.max(0,Math.floor(I/S.value)-6),ie=Math.ceil((w.value||0)/S.value)+12,pe=Math.min(te.value.totalRows,T+ie),Le=Se(T);let Oe=Le;for(;Oe<ee.value.length&&(te.value.rowStarts[Oe]??0)<pe;)Oe++;return{startLine:Le,endLine:Oe}}),ge=Je(()=>{const C=new Set,I=[];return y.value.tags.forEach(T=>{C.has(T.lineIndex)||(C.add(T.lineIndex),I.push({lineIndex:T.lineIndex,tag:T.tag,priority:T.priority}))}),I}),oe=Je(()=>{const C=_e.value.startLine,I=_e.value.endLine,T=new Map(ge.value.map(pe=>[pe.lineIndex,{tag:pe.tag,priority:pe.priority}])),ie=[];for(let pe=C;pe<I;pe++){const Le=T.get(pe);if(!Le)continue;const Oe=te.value.rowStarts[pe]??0,Fe=te.value.rowCounts[pe]??1;ie.push({lineIndex:pe,top:(P.value??0)+Oe*S.value-g.value,height:Fe*S.value,tag:Le.tag,priority:Le.priority})}return ie}),Ke=(C,I)=>{C&&(we.value.find(T=>T.id===C)||(we.value=[...we.value,{id:C,startedAt:I||Date.now()}]))},Ae=C=>{we.value=we.value.filter(I=>I.id!==C)},Be=C=>{const I=C.data;!I||!I.noteId||I.noteId!==s.value?.id||I.sessionId!==W&&(I.type==="open"?(Ke(I.sessionId||"",I.startedAt||Date.now()),!I.reply&&U.value&&s.value&&U.value.postMessage({type:"open",noteId:s.value.id,sessionId:W,startedAt:de,reply:!0})):I.type==="close"?Ae(I.sessionId||""):I.type==="changed"&&(Ke(I.sessionId||"",I.startedAt||Date.now()),lt(I.updatedAt)))},Ve=()=>{if(!s.value)return;U.value&&(U.value.close(),U.value=null);const C=new BroadcastChannel("jotrip-note-sync");C.onmessage=Be,U.value=C,C.postMessage({type:"open",noteId:s.value.id,sessionId:W,startedAt:de,reply:!1})},Qe=()=>{U.value&&s.value&&U.value.postMessage({type:"close",noteId:s.value.id,sessionId:W}),U.value?.close(),U.value=null,we.value=[]},at=async()=>{const C=t.params.id;if(!C||C==="new"){const Oe=await Qa({title:"Untitled note"}),Fe=await Ws({noteId:Oe.id,name:"Main",content:""});await Ut(Oe.id,{tabOrder:[Fe.id]}),n.replace({name:"note-editor",params:{id:Oe.id}}),s.value=Oe,ze.value=Oe.title,tt.value=Oe.color??null,i.value=[Fe],l.value=Fe.id,u.value=Fe.content,f.value=!1;return}const I=await Sa(C);if(!I){f.value=!1;return}s.value=I,ze.value=I.title,tt.value=I.color??null;let ie=await kc(C);if(!ie.length){const Oe=await Ws({noteId:C,name:"Main",content:""});await Ut(C,{tabOrder:[Oe.id]}),ie=[Oe]}const pe=oa(I,ie);i.value=pe.map(Oe=>ie.find(Fe=>Fe.id===Oe)).filter(Oe=>!!Oe),pe.some((Oe,Fe)=>Oe!==(I.tabOrder[Fe]??""))&&await Ut(I.id,{tabOrder:pe}),Dt(pe);const Le=i.value.find(Oe=>Oe.id===l.value);u.value=Le?.content??"",f.value=!1,pt(),At(),Ve()},lt=async C=>{if(!s.value)return;const I=s.value.updatedAt;if(C&&I&&new Date(C).getTime()<=new Date(I).getTime())return;const T=await Sa(s.value.id);if(!T||I&&T.updatedAt&&new Date(T.updatedAt).getTime()<=new Date(I).getTime()&&!C)return;const ie=await kc(T.id),pe=oa(T,ie);i.value=pe.map(Oe=>ie.find(Fe=>Fe.id===Oe)).filter(Oe=>!!Oe),pe.some((Oe,Fe)=>Oe!==(T.tabOrder[Fe]??""))&&await Ut(T.id,{tabOrder:pe}),s.value=T,ze.value=T.title,tt.value=T.color??null;const Le=i.value.find(Oe=>Oe.id===l.value)??i.value[0];l.value=Le?.id??null,u.value=Le?.content??""},Ct=C=>`jotrip:lastTab:${C}`,Dt=C=>{if(!C.length){l.value=null;return}const I=t.query.tab,T=s.value?.id,ie=T?window.localStorage.getItem(Ct(T))??void 0:void 0,pe=I||ie||C[0],Le=pe&&C.includes(pe)?pe:C[0];l.value=Le??null},St=async C=>{if(!x.value)return;const I=++be;if(p.value=!0,await _c(x.value.id,{content:C}),I===be){if(s.value){const T=await Ut(s.value.id,{});if(I!==be)return;T&&(s.value=T)}x.value&&(i.value=i.value.map(T=>T.id===x.value.id?{...T,content:C}:T)),p.value=!1,Xt(s.value?.updatedAt)}},Pt=C=>{v.value=C},Xt=C=>{!s.value||!U.value||U.value.postMessage({type:"changed",noteId:s.value.id,sessionId:W,startedAt:de,updatedAt:C??s.value.updatedAt})},Pn=async C=>{if(Ce.value||!x.value)return;const{start:I}=v.value,T=u.value;let ie;C==="header"?ie=pf(T,I):ie=hf(T,I),u.value=ie.text,await St(ie.text),await mn(),m.value?.$el?.setSelectionRange(ie.selectionStart,ie.selectionEnd)},_t=C=>{Re(C)},Re=async C=>{if(l.value===C)return;x.value&&(await St(u.value),Kr("tab-switch")),l.value=C,s.value&&window.localStorage.setItem(Ct(s.value.id),C);const I=i.value.find(T=>T.id===C);I&&(u.value=I.content),pt()},xn=async()=>{if(Ce.value||!s.value)return;x.value&&await St(u.value);const C=`Tab ${i.value.length+1}`,I=await Ws({noteId:s.value.id,name:C,content:""});i.value=[...i.value,I];const T=[...R.value,I.id];await Ut(s.value.id,{tabOrder:T}),l.value=I.id,u.value=""},ln=async C=>{if(Ce.value||!C)return;const I=i.value.find(ie=>ie.id===C);if(!I)return;const T=window.prompt("Rename tab",I.name);T&&(await _c(C,{name:T}),i.value=i.value.map(ie=>ie.id===C?{...ie,name:T}:ie))},qr=async C=>{if(Ce.value||!C)return;if(i.value.length<=1){window.alert("A note must have at least one tab.");return}if(!window.confirm("Delete this tab?"))return;const T=i.value.filter(pe=>pe.id!==C);await af(C);const ie=oa(s.value,T);if(await Ut(s.value.id,{tabOrder:ie}),i.value=T,!T.find(pe=>pe.id===l.value)){const pe=ie[0]||T[0]?.id||null;l.value=pe;const Le=T.find(Oe=>Oe.id===pe);u.value=Le?.content??""}},Te=async(C,I)=>{if(!C||!s.value)return;const T=[...R.value],ie=T.indexOf(C);if(ie===-1)return;const pe=ie+I;if(pe<0||pe>=T.length)return;const Le=T[ie],Oe=T[pe];!Le||!Oe||(T[ie]=Oe,T[pe]=Le,i.value=T.map(Fe=>i.value.find(jt=>jt.id===Fe)).filter(Fe=>!!Fe),await Ut(s.value.id,{tabOrder:T}))},br=async()=>{if(!s.value)return;const C=(ze.value??"").trim()||"Untitled note";if(C===s.value.title)return;const I=await Ut(s.value.id,{title:C});I&&(s.value=I),ze.value=I?.title??C,Xt(I?.updatedAt)},lo=async()=>{if(!s.value||Ce.value)return;const C=s.value.pinnedAt?null:new Date().toISOString(),I=await Ut(s.value.id,{pinnedAt:C});I&&(s.value=I),Xt(I?.updatedAt)},hs=[null,"#94a3b8","#f87171","#fb923c","#fbbf24","#a3e635","#34d399","#2dd4bf","#22d3ee","#60a5fa","#818cf8","#a78bfa","#e879f9","#fb7185","#f472b6","#c084fc"],co=async C=>{if(!s.value)return;tt.value=C;const I=await Ut(s.value.id,{color:C});I&&(s.value=I)},ms=()=>{bt.value=!bt.value},uo=()=>{bt.value=!1},gs=C=>{const I=rt.value>0?rt.value:Number.POSITIVE_INFINITY,T=u.value.replace(/\r\n/g,`
`).split(`
`),ie=Math.max(0,Math.min(C,T.length-1));let pe=0;for(let Fe=0;Fe<ie;Fe++){const jt=(T[Fe]??"").length,Ge=I===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(jt/I));pe+=Ge}const Le=(T[ie]??"").length,Oe=I===Number.POSITIVE_INFINITY?1:Math.max(1,Math.ceil(Le/I));return{rowStart:pe,rowCount:Oe}},Mn=()=>{const C=m.value?.$el;if(!C)return{scrollTop:g.value,paddingTop:P.value??0};const I=getComputedStyle(C),T=parseFloat(I.paddingTop);return{scrollTop:C.scrollTop,paddingTop:Number.isFinite(T)?T:P.value??0}},Xn=C=>{Ue&&(window.clearTimeout(Ue),Ue=null);const{rowStart:I,rowCount:T}=gs(C),ie=Mn();Me.value={top:ie.paddingTop+I*S.value-ie.scrollTop,height:T*S.value},Ue=window.setTimeout(()=>{Me.value=null,Ue=null},2e3)},vs=(C,I)=>{const ie=u.value.replace(/\r\n/g,`
`).split(`
`);let pe=0;const Le=/@(\d{4}-\d{2}-\d{2})/g;let Oe=null;for(let Fe=0;Fe<ie.length;Fe++){const jt=ie[Fe]??"";Le.lastIndex=0;let Ge;for(;Ge=Le.exec(jt);){if(Ge[1]!==C)continue;const Cr=Ge.index+Ge[0].length,Es=jt.slice(Cr).trim().slice(0,10),Tt=pe+Ge.index;if(Oe||(Oe={pos:Tt,lineIndex:Fe}),I&&Es===I)return{pos:Tt,lineIndex:Fe}}pe+=jt.length+1}return Oe},wr=(C,I)=>{const T=m.value?.$el;if(!T)return;const{rowStart:ie}=gs(I);T.focus(),T.setSelectionRange(C,C);const pe=(P.value??0)+ie*S.value-w.value/2+S.value;Number.isNaN(pe)||(T.scrollTop=Math.max(0,pe),g.value=T.scrollTop,w.value=T.clientHeight)},pt=async()=>{const C=t.query.date;if(!C)return;const I=t.query.snippet;await mn();const T=vs(C,I);T&&(wr(T.pos,T.lineIndex),requestAnimationFrame(()=>Xn(T.lineIndex)))},At=async()=>{const C=t.query.line;if(!C)return;const I=Number(C);Number.isFinite(I)&&(await mn(),gi(I))},gi=C=>{if(!m.value?.$el)return;const T=Math.max(0,Math.min(C,ee.value.length-1)),ie=ee.value.slice(0,T).reduce((pe,Le)=>pe+Le.length+1,0);wr(ie,T),Vr(T)},Vr=C=>{V&&(window.clearTimeout(V),V=null);const{rowStart:I,rowCount:T}=gs(C),ie=Mn();Ye.value={top:ie.paddingTop+I*S.value-ie.scrollTop,height:T*S.value},V=window.setTimeout(()=>{Ye.value=null,V=null},1200)},Hr=async C=>{const I=u.value.split(`
`),T=I[C];if(T===void 0)return;const ie=/^(\s*-\s\[)( |x|X)(\])/;if(!ie.test(T))return;const pe=T.replace(ie,(Oe,Fe,jt,Ge)=>{const Cr=jt.toLowerCase()==="x"?" ":"x";return`${Fe}${Cr}${Ge}`});I[C]=pe;const Le=I.join(`
`);u.value=Le,await St(Le)},Wr=C=>{const I=C.urls.length===1?C.urls[0]:window.prompt("Open which link?",C.urls.join(`
`));I&&window.open(I,"_blank"),m.value?.focus()},vi=()=>{m.value?.focus()},_n=async C=>{const I=C.imageIds[0];I&&await tr(I),m.value?.focus()},Zn=async C=>{ae.value=!0,H.value={date:C,entries:[]};const[I,T]=await Promise.all([hi(),Ur()]);H.value={date:C,entries:el(I,T,{start:C,end:C})},ae.value=!1},kn=C=>{const I=(C.textAfterToken||"").trim();return I.length?I:C.firstTabName||C.noteTitle},zr=C=>{const I=(C.textAfterToken||"").slice(0,10);H.value=null,ae.value=!1,n.push({name:"note-editor",params:{id:C.noteId},query:{date:C.tokenDate,tab:C.tabId,...I?{snippet:I}:{}}})},yi=C=>new Promise((I,T)=>{const ie=new FileReader;ie.onload=()=>I(ie.result),ie.onerror=T,ie.readAsDataURL(C)}),Cn=async C=>{if(!s.value)return null;const I=s.value.id,T=i.value.filter(Fe=>C.includes(Fe.id)),ie=s.value.tabOrder.filter(Fe=>C.includes(Fe)),Le=(await io({noteId:I})).filter(Fe=>C.includes(Fe.tabId)),Oe=[];for(const Fe of Le){const jt=await yi(Fe.blob);Oe.push({id:Fe.id,tabId:Fe.tabId,mime:Fe.mime,base64:jt.split(",")[1]??"",width:Fe.width,height:Fe.height,thumbnailDataUrl:Fe.thumbnailDataUrl})}return{version:"1",note:{title:s.value.title,color:s.value.color??null},tabs:T.map(Fe=>({id:Fe.id,name:Fe.name,content:Fe.content})),tabOrder:ie,images:Oe}},xr=C=>C.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),$n=C=>{if(!C)return"";const I={};C.images?.forEach(Oe=>{I[Oe.id]=`data:${Oe.mime};base64,${Oe.base64}`});const T=Oe=>Oe.split(`
`).map(Ge=>xr(Ge).replace(/!\[image:([^\]]+)\]/g,(mo,Es)=>{const Tt=I[Es]??"";return Tt?`<a class="note-img-link" href="${Tt}" target="_blank" rel="noreferrer"><img class="note-img" data-full="${Tt}" src="${Tt}" /></a>`:mo})).join("<br>"),ie=C.tabs.map((Oe,Fe)=>`<button class="tab-btn" data-tab="${Oe.id}">${xr(Oe.name||`Tab ${Fe+1}`)}</button>`).join(""),pe=C.tabs.map(Oe=>`<div class="tab-content" data-tab="${Oe.id}" style="display:none;">${T(Oe.content)}</div>`).join(""),Le=C.tabOrder[0]??C.tabs[0]?.id??"";return`<!doctype html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>${xr(C.note.title||"Exported Note")}</title>
  <style>
    :root { --editor-font: 'JetBrains Mono', 'Fira Code', 'SFMono-Regular', Menlo, Consolas, monospace; }
    body { font-family: var(--editor-font); background: #0b1021; color: #e5e7eb; margin: 0; padding: 16px; }
    h1 { margin: 0 0 12px; font-size: 20px; }
    .tabs { display: flex; flex-wrap: wrap; gap: 6px; margin-bottom: 12px; }
    .tab-btn { border: 1px solid rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); color: #e5e7eb; padding: 6px 10px; cursor: pointer; }
    .tab-btn.active { border-color: rgba(129,140,248,0.8); background: rgba(129,140,248,0.15); }
    .tab-content { border: 1px solid rgba(255,255,255,0.1); padding: 12px; background: rgba(255,255,255,0.03); min-height: 200px; line-height: 1.6; font-family: var(--editor-font); }
    img.note-img { width: 100px; height: auto; display: block; margin: 8px 0; cursor: pointer; }
    .note-img-link { display: inline-block; }
  </style>
</head>
<body>
  <h1>${xr(C.note.title||"Exported Note")}</h1>
  <div class="tabs">${ie}</div>
  <div class="tab-contents">${pe}</div>
  <script type="application/json" id="jotrip-export">${JSON.stringify(C)}<\/script>
  <script>
    (function() {
      const tabs = Array.from(document.querySelectorAll('.tab-btn'));
      const contents = Array.from(document.querySelectorAll('.tab-content'));
      const show = (id) => {
        tabs.forEach((t) => t.classList.toggle('active', t.dataset.tab === id));
        contents.forEach((c) => c.style.display = c.dataset.tab === id ? 'block' : 'none');
      };
      tabs.forEach((btn) => btn.addEventListener('click', () => show(btn.dataset.tab)));
      document.querySelectorAll('.note-img-link').forEach((link) => {
        link.addEventListener('click', (e) => {
          e.preventDefault();
          const href = link.getAttribute('href');
          if (!href) return;
          const win = window.open('', '_blank');
          if (!win) return;
          win.document.write('<!doctype html><html><head><title>Image</title></head><body style="margin:0;background:#0b1021;display:flex;align-items:center;justify-content:center;"><img src="' + href + '" style="max-width:100%;max-height:100vh;" /></body></html>');
          win.document.close();
        });
      });
      show('${Le}');
    })();
  <\/script>
</body>
</html>`},ys=(C,I,T="text/plain")=>{const ie=new Blob([I],{type:T}),pe=URL.createObjectURL(ie),Le=document.createElement("a");Le.href=pe,Le.download=C,Le.click(),URL.revokeObjectURL(pe)},bs=()=>{le.value=i.value.map(C=>C.id),z.value=!0},Et=async()=>{const C=await Cn(le.value);if(!C)return;const I=$n(C);ys(`${s.value?.title||"note"}.html`,I,"text/html"),z.value=!1},Nn=()=>{if(!s.value)return;const C=[];i.value.forEach((I,T)=>{C.push(`=== ${I.name||"Tab "+(T+1)} ===`),C.push(I.content),C.push("")}),ys(`${s.value.title||"note"}.txt`,C.join(`
`),"text/plain"),z.value=!1},hn=async C=>{const I=C.dates.length===1?C.dates[0]:window.prompt("Which date?",C.dates.join(`
`))??void 0;I&&(await Zn(I),m.value?.focus())},fo=C=>{g.value=C.scrollTop,w.value=C.clientHeight,C.lineHeight&&(S.value=C.lineHeight),P.value=C.paddingTop,Q.value=C.paddingBottom},er=C=>{$e.value=C.lineIndex},Gr=C=>{De.value=C},ws=C=>{rt.value=C.cols},xs=async C=>{const I=C.imageId;if(se.value[I])return;const T=await Ea(I);T?.thumbnailDataUrl&&(se.value={...se.value,[I]:T.thumbnailDataUrl})},jn=()=>{Ce.value||X.value?.click()},_s=C=>{const I=C.target;if(bt.value){const T=ut.value,ie=Y.value;if(T&&T.contains(I)||ie&&ie.contains(I))return;uo()}if(H.value){const T=fe.value;if(T&&T.contains(I))return;H.value=null,ae.value=!1}if(z.value){const T=ne.value;if(T&&T.contains(I))return;z.value=!1}},Yr=C=>{const I=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().split("-")[0]:Math.random().toString(36).slice(2,10),T=C?.name?.trim();if(!T)return I;const pe=T.replace(/\.[a-z0-9]+$/i,"").toLowerCase().replace(/[^a-z0-9_-]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").slice(0,12);return pe?`${I}-${pe}`:I},ks=async C=>{if(!C||!("length"in C)||!C.length||!s.value||!x.value)return;const I=Array.from(C);for(const T of I){if(!T.type.startsWith("image/"))continue;const ie=await cy(T),pe=Yr(T),Le=await lf({id:pe,noteId:s.value.id,tabId:x.value.id,mime:ie.mime,blob:ie.blob,width:ie.width,height:ie.height,thumbnailDataUrl:ie.thumbnailDataUrl});Le.thumbnailDataUrl&&(se.value={...se.value,[Le.id]:Le.thumbnailDataUrl}),it(Le.id)}X.value&&(X.value.value="")},it=C=>{const I=m.value?.$el,T=`![image:${C}]`,ie=u.value;if(I){const pe=I.selectionStart??ie.length,Le=I.selectionEnd??pe,Oe=pe>0&&ie[pe-1]!==`
`?`
`:"",Fe=Le<ie.length?ie[Le]!==`
`?`
`:"":`
`,jt=ie.slice(0,pe)+Oe+T+Fe+ie.slice(Le),Ge=pe+Oe.length+T.length+Fe.length;u.value=jt,St(jt),mn(()=>{I.focus(),I.setSelectionRange(Ge,Ge)})}else{const pe=`${ie}
${T}
`;u.value=pe,St(pe)}},po=C=>{const I=C.clipboardData?.items;if(!I)return;const T=Array.from(I).find(ie=>ie.type.startsWith("image/"));if(T){C.preventDefault();const ie=T.getAsFile();ie&&ks([ie])}},ho=async C=>{if(me.value[C])return me.value[C];const I=await Ea(C);if(!I)return null;const T=URL.createObjectURL(I.blob);return me.value={...me.value,[C]:T},T},tr=async C=>{B.value=C;const I=await ho(C);I&&($.value=I)},_r=()=>{$.value=null,B.value=null},nr=Je(()=>B.value?M.value.indexOf(B.value):-1),Cs=Je(()=>nr.value>0),Ss=Je(()=>nr.value>=0&&nr.value<M.value.length-1),ht=async()=>{if(!Cs.value)return;const C=M.value[nr.value-1];C&&await tr(C)},kr=async()=>{if(!Ss.value)return;const C=M.value[nr.value+1];C&&await tr(C)};return an(async()=>{document.addEventListener("pointerdown",_s,!0),await at()}),mr(()=>{document.removeEventListener("pointerdown",_s,!0),Ue&&(window.clearTimeout(Ue),Ue=null),V&&(window.clearTimeout(V),V=null),Qe(),br(),Kr("note-leave")}),Rn(()=>t.query,()=>{const C=t.query.tab;if(C&&i.value.find(I=>I.id===C)){Re(C);return}pt(),At()}),Rn(()=>i.value,()=>{if(i.value.length&&!x.value){const C=i.value[0];C&&(l.value=C.id,u.value=C.content)}}),(C,I)=>!f.value&&s.value&&x.value?(ce(),ue("section",hy,[Ce.value?(ce(),ue("div",my,"  Read-only: open in another tab ")):st("",!0),k("header",gy,[$r(k("input",{"onUpdate:modelValue":I[0]||(I[0]=T=>ze.value=T),class:"min-w-0 flex-1 border border-white/10 bg-white/5 px-2 py-1.5 text-xl font-semibold text-white outline-none sm:px-3 sm:py-2",placeholder:"Untitled note",onBlur:br,onKeydown:sh(tn(br,["prevent"]),["enter"]),disabled:Ce.value},null,40,vy),[[ls,ze.value]]),k("button",{ref_key:"colorTriggerRef",ref:Y,type:"button",class:"h-9 w-9 border border-white/15 sm:h-10 sm:w-10",style:mt({backgroundColor:tt.value??"rgba(255,255,255,0.06)"}),onClick:ms,disabled:Ce.value,"aria-label":"Pick note color"},null,12,yy),k("button",{type:"button",class:"border border-white/15 px-2 py-1.5 text-xs text-white sm:px-3 sm:py-2",onClick:bs,disabled:Ce.value}," Export ",8,by),k("button",{type:"button",class:"border border-white/15 px-2 py-1.5 text-xs text-white sm:px-3 sm:py-2",onClick:lo,disabled:Ce.value},[k("span",{class:kt(s.value?.pinnedAt?"text-white":"text-white/40 grayscale")},"",2)],8,wy),bt.value?(ce(),ue("div",{key:0,ref_key:"colorPickerRef",ref:ut,class:"absolute right-0 top-full z-40 mt-2 border border-white/15 bg-slate-900 p-2 shadow-2xl sm:p-3"},[k("div",xy,[(ce(),ue(gt,null,Lt(hs,(T,ie)=>k("button",{key:ie,type:"button",class:kt(["h-7 w-7 border border-white/15",(tt.value??null)===(T??null)?"ring-2 ring-white/60":""]),style:mt({backgroundColor:T??"rgba(255,255,255,0.06)"}),onClick:pe=>{co(T),uo()},"aria-label":T?`Set color ${T}`:"Set default color"},null,14,_y)),64))])],512)):st("",!0),z.value?(ce(),ue("div",{key:1,ref_key:"exportPanelRef",ref:ne,class:"absolute right-0 top-full z-40 mt-2 w-56 border border-white/15 bg-slate-900 p-3 text-sm text-white shadow-2xl"},[I[10]||(I[10]=k("p",{class:"mb-2 text-xs uppercase tracking-[0.2em] text-slate-400"},"Export tabs",-1)),k("div",ky,[(ce(!0),ue(gt,null,Lt(i.value,T=>(ce(),ue("label",{key:T.id,class:"flex items-center gap-2 text-xs"},[k("input",{type:"checkbox",class:"h-4 w-4",checked:le.value.includes(T.id),onChange:ie=>{const pe=ie.target.checked;je(T.id,pe)}},null,40,Cy),k("span",Sy,qe(T.name),1)]))),128))]),k("div",{class:"flex gap-2"},[k("button",{class:"flex-1 border border-indigo-300/40 bg-indigo-500/20 px-2 py-1",onClick:Et}," HTML "),k("button",{class:"flex-1 border border-white/20 px-2 py-1",onClick:Nn},"TXT")])],512)):st("",!0)]),k("div",Ey,[(ce(!0),ue(gt,null,Lt(i.value,T=>(ce(),ue("div",{key:T.id,class:"relative inline-flex"},[k("div",Iy,[J.value[T.id]?.total?(ce(),ue("div",{key:0,class:"absolute bottom-0 left-0 right-0",style:mt({height:`${Math.round((J.value[T.id]?.checked||0)/Math.max(1,J.value[T.id]?.total||1)*100)}%`,backgroundColor:tt.value??"rgba(52, 211, 153, 0.8)"})},null,4)):st("",!0)]),k("button",{class:kt(["px-2 py-1.5 pl-4 border-b border-white/10 sm:px-3 sm:py-2",l.value===T.id?"text-white":"bg-transparent text-slate-200"]),style:mt(l.value===T.id&&tt.value?{backgroundColor:tt.value,color:"#0b1021"}:void 0),onClick:ie=>_t(T.id),disabled:Ce.value},qe(T.name),15,Ay)]))),128)),k("button",{class:"px-2 py-1.5 text-lg sm:px-3 sm:py-2",type:"button",onClick:xn,disabled:Ce.value},"",8,Ty)]),k("div",Oy,[k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:I[1]||(I[1]=T=>Pn("header")),disabled:Ce.value},"#",8,Ry),k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:I[2]||(I[2]=T=>Pn("checklist")),disabled:Ce.value},"",8,Dy),k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:jn,disabled:Ce.value},"",8,Py),p.value?(ce(),ue("span",My,"Saving")):st("",!0),k("div",$y,[k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:I[3]||(I[3]=T=>l.value&&Te(l.value,-1)),disabled:Ce.value},"",8,Ny),k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:I[4]||(I[4]=T=>l.value&&Te(l.value,1)),disabled:Ce.value},"",8,jy),k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2",type:"button",onClick:I[5]||(I[5]=T=>l.value&&ln(l.value)),disabled:Ce.value},"",8,Ly),k("button",{class:"px-2 py-1.5 sm:px-3 sm:py-2 text-red-200",type:"button",onClick:I[6]||(I[6]=T=>l.value&&qr(l.value)),disabled:Ce.value},"  ",8,By)])]),k("input",{ref_key:"fileInputRef",ref:X,type:"file",accept:"image/*",multiple:"",class:"hidden",onChange:I[7]||(I[7]=T=>ks(T.target.files))},null,544),k("div",Fy,[(ce(!0),ue(gt,null,Lt(oe.value,T=>(ce(),ue("div",{key:T.lineIndex,class:kt(["pointer-events-none absolute left-0 right-0 z-0",T.priority?"bg-orange-500/15":"bg-emerald-500/15"]),style:mt({top:`${T.top}px`,height:`${T.height}px`})},null,6))),128)),De.value?(ce(),ue("div",{key:0,class:"pointer-events-none absolute left-0 right-0 z-0 bg-white/10",style:mt({top:`${De.value.top}px`,height:`${De.value.height}px`})},null,4)):st("",!0),Ye.value?(ce(),ue("div",{key:1,class:"pointer-events-none absolute left-0 right-0 z-0 border-y border-emerald-200/40 bg-emerald-400/25",style:mt({top:`${Ye.value.top}px`,height:`${Ye.value.height}px`})},null,4)):st("",!0),Me.value?(ce(),ue("div",{key:2,class:"pointer-events-none absolute left-0 right-0 z-0 border-y border-yellow-200/30 bg-yellow-400/20",style:mt({top:`${Me.value.top}px`,height:`${Me.value.height}px`})},null,4)):st("",!0),xt(ny,{class:"relative z-10",text:u.value,parsed:y.value,"scroll-top":g.value,"viewport-height":w.value,"line-height":S.value,"padding-top":P.value,"padding-bottom":Q.value,"image-thumbs":se.value,"active-line":$e.value,onToggleChecklist:Hr,onLineLink:Wr,onLineTags:vi,onLineImages:_n,onLineDates:hn,onRequestImage:xs,"wrap-cols":rt.value,onHoverRect:Gr},null,8,["text","parsed","scroll-top","viewport-height","line-height","padding-top","padding-bottom","image-thumbs","active-line","wrap-cols"]),k("div",{class:"relative z-10 flex-1 h-full",style:mt(tt.value?{boxShadow:`inset 4px 0 0 ${tt.value}`}:void 0)},[xt(Wv,{ref_key:"editorRef",ref:m,modelValue:u.value,"onUpdate:modelValue":[I[8]||(I[8]=T=>u.value=T),St],class:"flex-1",placeholder:"Start typing your note...","textarea-class":"border-0 rounded-none bg-transparent shadow-none focus:border-transparent focus:ring-0",readonly:Ce.value,onSelectionChange:Pt,onScroll:fo,onCursorLine:er,onWrapCols:ws,onPaste:po},null,8,["modelValue","readonly"]),k("div",{class:"caret-line",style:mt({top:`${Pe.value+S.value-1}px`,opacity:.5})},null,4)],4)]),H.value?(ce(),ue("div",{key:1,ref_key:"datePopoverRef",ref:fe,class:"fixed bottom-4 left-4 right-4 z-50 border border-white/15 bg-slate-900/95 p-4 text-white shadow-2xl sm:left-auto sm:right-6 sm:w-[420px]"},[k("div",Ky,[k("p",Uy,"Calendar: "+qe(H.value.date),1),k("button",{type:"button",class:"border border-white/15 px-3 py-1 text-xs",onClick:I[9]||(I[9]=T=>H.value=null)},"")]),ae.value?(ce(),ue("div",qy,"Loading")):(ce(),ue("div",Vy,[(ce(!0),ue(gt,null,Lt(H.value.entries,T=>(ce(),ue("button",{key:T.noteId+T.tabId+T.occurrenceIndex+T.date,type:"button",class:"mb-2 w-full border border-white/10 bg-white/5 p-3 text-left text-sm hover:border-white/20",onClick:ie=>zr(T)},[k("div",Wy,[k("span",{class:"h-3 w-1 shrink-0",style:mt(T.noteColor?{backgroundColor:T.noteColor}:{backgroundColor:"rgba(255,255,255,0.25)"})},null,4),k("span",zy,qe(T.noteTitle),1)]),k("p",Gy,qe(kn(T)),1)],8,Hy))),128)),H.value.entries.length?st("",!0):(ce(),ue("div",Yy," No entries for this day. "))]))],512)):st("",!0),xt(iy,{open:!!$.value,src:$.value||void 0,"can-prev":Cs.value,"can-next":Ss.value,onClose:_r,onPrev:ht,onNext:kr},null,8,["open","src","can-prev","can-next"])])):(ce(),ue("div",Jy,"Loading editor"))}}),Xy=ao(Qy,[["__scopeId","data-v-f230682f"]]),Zy={class:"flex h-full min-h-0 flex-col gap-3 overflow-hidden"},eb={class:"px-2 sm:px-0"},tb={class:"min-h-0 flex-1 overflow-auto overflow-x-hidden px-2 sm:px-0"},nb=["onClick"],rb={class:"flex items-center gap-2"},sb={class:"min-w-0 flex-1"},ob={class:"truncate text-sm font-semibold text-white"},ib={class:"truncate text-xs text-slate-400"},ab={key:0,"aria-hidden":"true",class:"text-sm"},lb=["onClick"],cb={key:0,class:"no-scrollbar -mx-1 mt-1 flex overflow-x-auto overflow-y-hidden px-1"},ub=["onClick"],fb={key:1,class:"mt-2 h-1 w-full overflow-hidden bg-transparent","aria-label":"Checklist progress"},db=["onClick"],pb=["onClick"],hb={key:0,class:"border border-dashed border-white/10 bg-white/5 p-4 text-sm text-slate-300"},mb={key:1,class:"mt-6 border-t border-white/10 pt-4"},gb={class:"flex items-center justify-between gap-3 px-3 py-2 sm:px-4 sm:py-3"},vb={class:"min-w-0 flex-1"},yb={class:"truncate text-sm font-semibold text-slate-300"},bb={class:"truncate text-xs text-slate-500"},wb={key:0,class:"mt-2 h-1 w-full overflow-hidden bg-white/10","aria-label":"Checklist progress"},xb={class:"flex shrink-0 border border-white/10"},_b=["onClick"],kb=["onClick"],Cb=Qt({__name:"NotesList",setup(e){const t=oo(),n=ye([]),s=ye([]),i=ye(!1),l=ye(""),u=ye({}),f=ye({}),p=ye({}),v=ye({}),m=ye({}),g=ye(null),w=fe=>fe.replace(/\r\n/g,`
`).split(`
`).length,S=fe=>new TextEncoder().encode(fe).byteLength,P=fe=>{if(fe<1024)return`${fe} B`;const me=fe/1024;return me<1024?`${me.toFixed(1)} KB`:`${(me/1024).toFixed(1)} MB`},Q=fe=>[...fe].sort((me,ne)=>{const be=me.pinnedAt?new Date(me.pinnedAt).getTime():0,ze=ne.pinnedAt?new Date(ne.pinnedAt).getTime():0;return be!==ze?ze-be:new Date(ne.updatedAt).getTime()-new Date(me.updatedAt).getTime()}),se=async()=>{i.value=!0;const[fe,me,ne,be]=await Promise.all([hi(),Sm(),Ur(),io()]);n.value=Q(fe),s.value=me,B(ne,be),i.value=!1,console.debug("[notes] refresh",{active:n.value.map(ze=>({id:ze.id,title:ze.title,updatedAt:ze.updatedAt})),archived:s.value.map(ze=>({id:ze.id,title:ze.title,updatedAt:ze.updatedAt}))})},M=fe=>{t.push({name:"note-editor",params:{id:fe}})},B=(fe,me)=>{const ne={},be={},ze={},tt={},bt={};for(const Y of fe){be[Y.noteId]=(be[Y.noteId]??0)+1,ne[Y.noteId]=(ne[Y.noteId]??0)+w(Y.content),ze[Y.noteId]=(ze[Y.noteId]??0)+S(Y.content);const z=to(Y.content);if(z.checklists.length){const le=tt[Y.noteId]??{total:0,checked:0};le.total+=z.checklists.length,le.checked+=z.checklists.filter(je=>je.checked).length,tt[Y.noteId]=le}}const ut=new Map;for(const Y of[...n.value,...s.value]){const z=Y.tabOrder?.[0];z&&ut.set(Y.id,z)}for(const Y of fe)ut.get(Y.noteId)||ut.set(Y.noteId,Y.id);for(const Y of fe){if(ut.get(Y.noteId)!==Y.id)continue;const z=to(Y.content).tags.map(le=>({tag:le.tag,lineIndex:le.lineIndex,priority:le.priority??!1}));bt[Y.noteId]=z.sort((le,je)=>Number(je.priority)-Number(le.priority))}for(const Y of me){const z=ze[Y.noteId]??0;ze[Y.noteId]=z+(Y.blob?.size??0),Y.thumbnailDataUrl&&(ze[Y.noteId]=(ze[Y.noteId]??0)+S(Y.thumbnailDataUrl))}for(const Y of[...n.value,...s.value])ze[Y.id]=(ze[Y.id]??0)+S(Y.title??"");u.value=ne,f.value=be,p.value=ze,v.value=tt,m.value=bt},$=async fe=>{await Ut(fe,{archivedAt:new Date().toISOString()}),await se()},X=async(fe,me)=>{await Ut(fe,{pinnedAt:me?null:new Date().toISOString()}),await se()},$e=(fe,me,ne)=>{t.push({name:"note-editor",params:{id:fe},query:{...me?{tab:me}:{},line:ne.toString()}})},Pe=async fe=>{await Ut(fe,{archivedAt:null}),await se()},De=async fe=>{window.confirm("Permanently delete this note? This cannot be undone.")&&(await Xa(fe),await se())},rt=fe=>{g.value=fe},Me=()=>{g.value=null},Ue=()=>{console.debug("[notes] sync complete  refresh"),se()},Ye=fe=>{if(!g.value)return;const me=fe.target;if(!me)return;const ne=me.closest(".note-action-menu"),be=me.closest(".note-more-btn");!ne&&!be&&Me()};an(()=>{se(),window.addEventListener("jotrip:sync-complete",Ue),window.addEventListener("pointerdown",Ye,!0)}),mr(()=>{window.removeEventListener("jotrip:sync-complete",Ue),window.removeEventListener("pointerdown",Ye,!0)}),an(()=>Kr("notes-list"));const V=(fe,me)=>{const ne=l.value.trim().toLowerCase();if(!ne)return!0;const be=(me||"").toLowerCase().includes(ne),tt=(m.value[fe]??[]).some(bt=>(bt.tag||"").toLowerCase().includes(ne));return be||tt},H=Je(()=>n.value.filter(fe=>V(fe.id,fe.title||""))),ae=Je(()=>s.value.filter(fe=>V(fe.id,fe.title||"")));return(fe,me)=>(ce(),ue("section",Zy,[k("div",eb,[$r(k("input",{"onUpdate:modelValue":me[0]||(me[0]=ne=>l.value=ne),type:"search",class:"w-full border border-white/15 bg-black/30 px-3 py-2 text-sm text-white",placeholder:"Filter by title or #tag"},null,512),[[ls,l.value]])]),k("div",tb,[(ce(!0),ue(gt,null,Lt(H.value,ne=>(ce(),ue("div",{key:ne.id,class:"mb-2"},[k("div",{class:kt(["note-card relative border border-white/10 bg-slate-900/40",ne.color?"has-note-color":""]),style:mt(ne.color?{"--note-color":ne.color}:void 0)},[k("button",{type:"button",class:"flex w-full flex-col gap-1 px-3 py-2 text-left sm:px-4 sm:py-3",onClick:()=>{if(g.value){Me();return}M(ne.id)}},[k("div",rb,[k("div",sb,[k("p",ob,qe(ne.title||"Untitled"),1),k("p",ib," Updated "+qe(new Date(ne.updatedAt).toLocaleString())+"  "+qe(f.value[ne.id]??0)+" tabs  "+qe(u.value[ne.id]??0)+" lines  "+qe(P(p.value[ne.id]??0)),1)]),ne.pinnedAt?(ce(),ue("span",ab,"")):st("",!0),k("button",{type:"button",class:"shrink-0 rounded border border-white/15 px-2 py-1 text-xs text-white note-more-btn",onClick:tn(be=>g.value===ne.id?Me():rt(ne.id),["stop"]),"aria-label":"More actions"},"  ",8,lb)]),m.value[ne.id]?.length?(ce(),ue("div",cb,[(ce(!0),ue(gt,null,Lt(m.value[ne.id],be=>(ce(),ue("button",{key:be.tag+":"+be.lineIndex,type:"button",class:"mr-1 inline-flex shrink-0 px-2 py-1 text-[11px] last:mr-0",onClick:tn(ze=>$e(ne.id,ne.tabOrder?.[0],be.lineIndex),["stop"]),style:mt({border:be.priority?`1px solid ${ne.color||"rgba(246,153,63,0.5)"}`:"1px solid transparent",backgroundColor:be.priority?ne.color?`${ne.color}20`:"rgba(246,153,63,0.12)":ne.color?`${ne.color}20`:"rgba(52,211,153,0.1)",color:ne.color?"#fff":be.priority?"rgb(249,115,22)":"rgb(52,211,153)"})},[k("span",{class:kt(["truncate",be.priority?"font-bold":""])}," #"+qe(be.tag.length>20?be.tag.slice(0,20)+"":be.tag),3)],12,ub))),128))])):st("",!0),v.value[ne.id]?.total?(ce(),ue("div",fb,[k("div",{class:"h-full",style:mt({width:`${Math.round((v.value[ne.id]?.checked||0)/Math.max(1,v.value[ne.id]?.total||1)*100)}%`,background:ne.color?`linear-gradient(to right, ${ne.color}, ${ne.color}CC)`:"linear-gradient(to right, rgba(52,211,153,0.9), rgba(52,211,153,0.6))",borderBottom:ne.color?`1px solid ${ne.color}`:"1px solid rgba(52,211,153,0.8)"})},null,4)])):st("",!0)],8,nb),g.value===ne.id?(ce(),ue("div",{key:0,class:"note-action-menu absolute right-2 top-2 z-20 w-28 border border-white/15 bg-slate-900 text-sm text-white shadow-xl",onClick:tn(Me,["self"])},[k("button",{type:"button",class:"flex w-full items-center justify-between px-3 py-2 hover:bg-white/10",onClick:tn(be=>{X(ne.id,!!ne.pinnedAt),Me()},["stop"])},[me[1]||(me[1]=k("span",null,"Pin",-1)),k("span",{class:kt(ne.pinnedAt?"text-white":"text-white/40 grayscale")},"",2)],8,db),k("button",{type:"button",class:"flex w-full items-center justify-between px-3 py-2 hover:bg-white/10",onClick:tn(be=>{$(ne.id),Me()},["stop"])},[...me[2]||(me[2]=[k("span",null,"Archive",-1),k("span",null,"",-1)])],8,pb)])):st("",!0)],6)]))),128)),!n.value.length&&!i.value?(ce(),ue("div",hb," No notes yet. Create one to start editing. ")):st("",!0),s.value.length?(ce(),ue("div",mb,[me[3]||(me[3]=k("p",{class:"px-2 text-xs uppercase tracking-[0.2em] text-slate-500 sm:px-0"},"Archived",-1)),(ce(!0),ue(gt,null,Lt(ae.value,ne=>(ce(),ue("div",{key:ne.id,class:kt(["note-card mt-2 border border-white/10 bg-slate-900/20 text-slate-400",ne.color?"has-note-color":""]),style:mt(ne.color?{"--note-color":ne.color}:void 0)},[k("div",gb,[k("div",vb,[k("p",yb,qe(ne.title||"Untitled"),1),k("p",bb," Updated "+qe(new Date(ne.updatedAt).toLocaleString())+"  "+qe(f.value[ne.id]??0)+" tabs  "+qe(u.value[ne.id]??0)+" lines  "+qe(P(p.value[ne.id]??0)),1),v.value[ne.id]?.total?(ce(),ue("div",wb,[k("div",{class:"h-full bg-emerald-300/30",style:mt({width:`${Math.round((v.value[ne.id]?.checked||0)/Math.max(1,v.value[ne.id]?.total||1)*100)}%`})},null,4)])):st("",!0)]),k("div",xb,[k("button",{type:"button",class:"px-4 py-3 text-sm",onClick:be=>Pe(ne.id)},"",8,_b),k("button",{type:"button",class:"border-l border-white/10 px-4 py-3 text-sm text-red-200",onClick:be=>De(ne.id)},"  ",8,kb)])])],6))),128))])):st("",!0)])]))}}),Sb={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},Eb={class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},Ib={class:"space-y-3 border border-white/10 bg-slate-900/40 p-3 sm:p-4"},Ab={class:"flex items-center justify-between border border-white/5 bg-white/5 px-4 py-3"},Tb={class:"inline-flex items-center gap-2 text-sm text-slate-200"},Ob={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},Rb=["disabled"],Db={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},Pb=["disabled"],Mb=["disabled"],$b={class:"space-y-3 border border-white/5 bg-white/5 px-4 py-3"},Nb={class:"block space-y-1 text-sm text-slate-200"},jb={class:"flex gap-2"},Lb=["type"],Bb={class:"mt-2 flex gap-2"},Fb={class:"absolute h-px w-px overflow-hidden","aria-hidden":"true"},Kb={class:"block space-y-1 text-sm text-slate-200"},Ub={class:"flex items-center justify-between text-sm text-white"},qb={class:"inline-flex items-center gap-2"},Vb={class:"text-xs text-slate-400"},Mc="jotrip:theme",Hb=Qt({__name:"Settings",setup(e){const t=ye(!1),n=ye(!1),s=ye(!1),i=ye(!1),l=ye(""),u=ye(""),f=ye(""),p=ye(""),v=ye(""),m=ye(!1),g=ye(null),w=ye(!1),S=ye(null),P=ye(null),Q=V=>{document.documentElement.classList.toggle("theme-light",V),window.localStorage.setItem(Mc,V?"light":"dark")};an(()=>{const V=window.localStorage.getItem(Mc),H=window.matchMedia?.("(prefers-color-scheme: light)")?.matches??!1;t.value=V?V==="light":H,Q(t.value),sn("sync:passphrase").then(ae=>u.value=ae??""),sn("sync:url").then(ae=>{if(ae)f.value=ae;else{const fe=window.location,me=fe.origin||`${fe.protocol}//${fe.host}`;f.value=me}}),sn("sync:username").then(ae=>p.value=ae??""),sn("sync:password").then(ae=>v.value=ae??""),sn("sync:enabled").then(ae=>m.value=!!ae),sn("sync:last").then(ae=>g.value=ae??null),$()}),Rn(t,V=>Q(V)),Rn(()=>[p.value,v.value,u.value],()=>{$()});const se=async()=>{X(l.value),await Promise.all([dr("sync:passphrase",u.value.trim()),dr("sync:url",f.value.trim()),dr("sync:username",p.value.trim()),dr("sync:password",v.value.trim()),dr("sync:enabled",m.value)]),Pe()},M=async()=>{if(X(l.value),await se(),!m.value){window.alert("Enable sync first.");return}try{const V=await ff({baseUrl:f.value.trim(),username:p.value.trim(),password:v.value.trim(),passphrase:u.value.trim()});g.value=V,window.alert("Sync complete.")}catch(V){console.error(V),window.alert("Sync failed. Check console for details.")}},B=V=>{const H="abcdefghijklmnopqrstuvwxyz",ae=[];for(let fe=0;fe<V;fe++){let me="";for(let ne=0;ne<6;ne++){const be=Math.floor(Math.random()*H.length);me+=H[be]}ae.push(me)}return ae.join("-")},$=()=>{if(!p.value&&!v.value&&!u.value){l.value="";return}l.value=`${p.value}/${v.value}/${u.value}`,Pe()},X=V=>{const H=V.split("/");p.value=H[0]??"",v.value=H[1]??"",u.value=H.slice(2).join("/")||""},$e=()=>{const V=typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID().split("-")[0]:Math.random().toString(36).slice(2,8),H=Array.from(crypto.getRandomValues(new Uint8Array(8))).map(fe=>(fe%10).toString(10)).join(""),ae=B(4);p.value=V,v.value=H,u.value=ae,$(),Pe()},Pe=()=>{const V=S.value,H=P.value;V&&(V.value="jotrip-sync"),H&&(H.value=l.value,H.focus(),H.blur())},De=V=>new Promise((H,ae)=>{const fe=new FileReader;fe.onload=()=>H(fe.result.split(",")[1]??""),fe.onerror=ae,fe.readAsDataURL(V)}),rt=(V,H)=>{const ae=new Blob([H],{type:"application/json"}),fe=URL.createObjectURL(ae),me=document.createElement("a");me.href=fe,me.download=V,me.click(),URL.revokeObjectURL(fe)},Me=async()=>{n.value=!0;try{const[V,H,ae,fe]=await Promise.all([ps(),Ur(),io(),Am()]),me=await Promise.all(ae.map(async be=>({...be,base64:await De(be.blob)}))),ne={version:"backup-1",type:"jotrip-backup",exportedAt:new Date().toISOString(),notes:V,tabs:H,images:me,meta:fe};rt(`jotrip-backup-${new Date().toISOString().slice(0,10)}.json`,JSON.stringify(ne))}finally{n.value=!1}},Ue=async()=>{if(!(!window.confirm("This will delete all local data (jots, tabs, images). Continue?")||window.prompt("Type CLEAR to confirm wiping all data")!=="CLEAR")){s.value=!0;try{await Cc()}finally{s.value=!1}}},Ye=async()=>{X(l.value);const V=f.value.trim().replace(/\/+$/,"");if(!V||!p.value||!v.value){window.alert("Set server URL and user/password/passphrase bundle first.");return}if(!(!window.confirm("This will delete ALL remote data for this account and then clear local data. Continue?")||window.prompt("Type WIPE to confirm remote + local delete")!=="WIPE")){i.value=!0;try{const fe=await fetch(`${V}/wipe`,{method:"POST",headers:{Authorization:`Basic ${btoa(`${p.value}:${v.value}`)}`}});if(!fe.ok)throw new Error(`Remote wipe failed ${fe.status}`);await Cc(),await dr("sync:last",null),window.alert("Remote and local data cleared.")}catch(fe){console.error(fe),window.alert("Failed to clear remote data. Check console for details.")}finally{i.value=!1}}};return(V,H)=>(ce(),ue("section",Sb,[H[19]||(H[19]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Settings"),k("h1",{class:"text-2xl font-semibold text-white"},"Settings")],-1)),k("div",Eb,[k("div",Ib,[k("div",Ab,[H[11]||(H[11]=k("div",null,[k("p",{class:"font-medium text-white"},"Theme"),k("p",{class:"text-sm text-slate-300"},"Toggle light mode (MVP).")],-1)),k("label",Tb,[H[9]||(H[9]=k("span",{class:"text-xs text-slate-400"},"Dark",-1)),$r(k("input",{"onUpdate:modelValue":H[0]||(H[0]=ae=>t.value=ae),type:"checkbox",class:"h-5 w-10 rounded-none border-white/20 bg-transparent"},null,512),[[ba,t.value]]),H[10]||(H[10]=k("span",{class:"text-xs text-slate-400"},"Light",-1))])]),k("div",Ob,[H[12]||(H[12]=k("div",null,[k("p",{class:"font-medium text-white"},"Data backup"),k("p",{class:"text-sm text-slate-300"},"Export all jots, tabs, images, and settings into one file.")],-1)),k("button",{type:"button",class:"w-full border border-indigo-300/30 bg-indigo-500/20 px-3 py-2 text-sm text-white",disabled:n.value,onClick:Me},qe(n.value?"Exporting":"Export all data"),9,Rb)]),k("div",Db,[H[13]||(H[13]=k("div",null,[k("p",{class:"font-medium text-white"},"Danger zone"),k("p",{class:"text-sm text-slate-300"},"Wipe all local data (cannot be undone).")],-1)),k("button",{type:"button",class:"w-full border border-red-300/30 bg-red-500/20 px-3 py-2 text-sm text-white",disabled:s.value,onClick:Ue},qe(s.value?"Clearing":"Clear all data"),9,Pb),k("button",{type:"button",class:"w-full border border-red-300/30 bg-red-700/30 px-3 py-2 text-sm text-white",disabled:i.value,onClick:Ye},qe(i.value?"Wiping remote":"Clear remote + local data"),9,Mb)]),k("div",$b,[H[18]||(H[18]=k("div",null,[k("p",{class:"font-medium text-white"},"Sync"),k("p",{class:"text-sm text-slate-300"}," Enter or generate a single user/passphrase bundle. Saved separately, but you only need to remember one field. ")],-1)),k("label",Nb,[H[14]||(H[14]=k("span",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"User / Password / Passphrase",-1)),k("div",jb,[$r(k("input",{"onUpdate:modelValue":H[1]||(H[1]=ae=>l.value=ae),name:"password",type:w.value?"text":"password",class:"w-full border border-white/15 bg-black/20 px-3 py-2 text-white",placeholder:"user/password/passphrase",autocomplete:"new-password",onInput:H[2]||(H[2]=ae=>X(l.value)),onChange:H[3]||(H[3]=ae=>X(l.value)),onBlur:H[4]||(H[4]=ae=>X(l.value))},null,40,Lb),[[Zp,l.value]]),k("button",{type:"button",class:"border border-white/15 bg-white/10 px-3 py-2 text-xs text-white",onClick:H[5]||(H[5]=ae=>w.value=!w.value)},qe(w.value?"Hide":"Show"),1)]),k("div",Bb,[k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-1 text-xs text-white",onClick:$e}," Generate bundle "),k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-1 text-xs text-white",onClick:H[6]||(H[6]=ae=>{l.value="",X("")})}," Clear ")]),H[15]||(H[15]=k("p",{class:"text-xs text-slate-400"},"We recommend saving this in your browser password manager when prompted.",-1))]),k("form",Fb,[k("input",{ref_key:"hiddenUserRef",ref:S,name:"username",autocomplete:"username"},null,512),k("input",{ref_key:"hiddenPassRef",ref:P,name:"password",type:"password",autocomplete:"new-password"},null,512)]),k("label",Kb,[H[16]||(H[16]=k("span",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"Server URL",-1)),$r(k("input",{"onUpdate:modelValue":H[7]||(H[7]=ae=>f.value=ae),type:"text",class:"w-full border border-white/15 bg-black/20 px-3 py-2 text-white",placeholder:"https://your-server"},null,512),[[ls,f.value]])]),k("div",Ub,[k("label",qb,[$r(k("input",{"onUpdate:modelValue":H[8]||(H[8]=ae=>m.value=ae),type:"checkbox",class:"h-4 w-4 border-white/20 bg-black/30"},null,512),[[ba,m.value]]),H[17]||(H[17]=k("span",null,"Enable sync (polling not yet implemented)",-1))]),k("span",Vb,"Last sync: "+qe(g.value||"Never"),1)]),k("div",{class:"flex gap-2"},[k("button",{type:"button",class:"flex-1 border border-white/15 bg-white/10 px-3 py-2 text-sm text-white",onClick:se}," Save settings "),k("button",{type:"button",class:"flex-1 border border-indigo-300/30 bg-indigo-500/20 px-3 py-2 text-sm text-white",onClick:M}," Sync now ")])])])])]))}}),Wb={class:"flex h-full min-h-0 flex-col gap-4 overflow-hidden"},zb="https://github.com/cokeeffekt/jot.rip",Gb=Qt({__name:"About",setup(e){return(t,n)=>(ce(),ue("section",Wb,[n[2]||(n[2]=k("header",{class:"shrink-0 px-2 sm:px-0"},[k("p",{class:"text-xs uppercase tracking-[0.2em] text-slate-400"},"About"),k("h1",{class:"text-2xl font-semibold text-white"},"jot.rip")],-1)),k("div",{class:"min-h-0 flex-1 overflow-auto px-2 sm:px-0"},[k("div",{class:"space-y-4 border border-white/10 bg-slate-900/40 p-4 text-sm text-slate-200 sm:p-5 leading-relaxed"},[n[1]||(n[1]=Fu("<p>I spent nearly twenty years trying to like note-taking apps.</p><p> I tried the clever ones, the beautiful ones, the ones with backlinks and graphs and promises of a better brain. I tried systems, workflows, methods with names. Every time, I bounced off. Too much structure, too much ceremony, too much friction between thought and text. </p><p> I always came back to plain text files. A folder. A cursor. Words on disk. It wasnt elegant, but it stayed out of my way. </p><p> Still, I kept looking for something better  something just as simple, but a little more intentional. Something that didnt demand an account, a cloud, or a philosophy. Something that assumed my thoughts were already complicated enough. </p><p>jot.rip is what that search quietly turned into.</p><p> Its offline-first, fast, and plain-text friendly. A single textarea editor. A predictable gutter. Optional sync, only if you want it. No accounts. No onboarding. No insistence that you do things the right way. </p><p> In the end, I never actually built my dream notes app. But after about twelve hours of back-and-forth, Codex did  and it turns out, thats good enough. </p><p>And its open source.</p><p>So if this is almost what you want, but not quite it, you too can go ask Codex to build what you want.</p><p>If you have an opinion or a feature request, fork it. If you find a bug, send a PR.</p>",10)),k("a",{href:zb,class:"inline-flex items-center gap-2 border border-indigo-300/40 bg-indigo-500/20 px-3 py-2 text-sm font-semibold text-white hover:border-indigo-200/60",target:"_blank",rel:"noreferrer"},[...n[0]||(n[0]=[Mr(" View on GitHub ",-1),k("span",{"aria-hidden":"true"},"",-1)])])])])]))}}),Yb=pm({history:zh(),routes:[{path:"/",component:vg,children:[{path:"",name:"home",component:Pv},{path:"notes",name:"notes",component:Cb},{path:"notes/:id",name:"note-editor",component:Xy,props:!0},{path:"calendar",name:"calendar",component:Hg},{path:"settings",name:"settings",component:Hb},{path:"import",name:"import",component:Vv},{path:"help",name:"help",component:lv},{path:"db-demo",name:"db-demo",component:sv},{path:"about",name:"about",component:Gb}]}],scrollBehavior:()=>({top:0})});function Jb(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(()=>{})})}const Qb=()=>{const e=()=>{const t=window.visualViewport?.height??window.innerHeight;document.documentElement.style.setProperty("--app-height",`${t}px`)};e(),window.addEventListener("resize",e,{passive:!0}),window.visualViewport?.addEventListener("resize",e,{passive:!0}),window.visualViewport?.addEventListener("scroll",e,{passive:!0})},Xb=()=>{const t=window.localStorage.getItem("jotrip:theme"),n=window.matchMedia?.("(prefers-color-scheme: light)")?.matches??!1,s=t==="light"||t==="dark"?t:n?"light":"dark";document.documentElement.classList.toggle("theme-light",s==="light")};Qb();Xb();const mf=ah(mm);mf.use(Yb);mf.mount("#app");Jb();of().catch(()=>{});Ym();
